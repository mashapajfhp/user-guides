{
  "nextVersion": "v1",
  "feature_info": {
    "feature_name": "work_expenses",
    "feature_slug": "work-expenses",
    "next_version": "v1"
  },
  "primary_entity": {
    "discovery_instructions": [
      "Identify what the main item/entity is for this feature (e.g., ticket, workflow, employee, record)",
      "Look for list/table views - the rows represent the primary entity",
      "Check page headers and breadcrumbs for entity naming",
      "Note the singular and plural forms used in the UI"
    ],
    "crud_operations": {
      "create": {
        "action": "Create new item",
        "find_trigger": [
          "Look for buttons with: + Add, + Create, + New, plus icon",
          "Check top-right corner of the page",
          "Check for floating action buttons (FAB)",
          "Look in empty state messages for create prompts"
        ],
        "validation": "New item appears in list with unique identifier"
      },
      "read": {
        "action": "View item details",
        "find_trigger": [
          "Click on any row in a list/table",
          "Look for 'View' or eye icon buttons",
          "Check if rows are clickable (cursor changes)"
        ],
        "validation": "Detail panel, modal, or page opens showing full information"
      },
      "update": {
        "action": "Edit/modify item",
        "find_trigger": [
          "Look for Edit button, pencil icon",
          "Check for inline editing (click on field to edit)",
          "Look for status change dropdowns or buttons",
          "Check action menus (three-dot menu) for edit option"
        ],
        "validation": "Changes persist after save, reflected in list view"
      },
      "delete": {
        "action": "Delete/remove item",
        "find_trigger": [
          "Look for Delete button, trash icon",
          "Check action menus (three-dot menu) for delete option",
          "Look for bulk delete with checkboxes",
          "Some features use 'Archive' or 'Cancel' instead of delete"
        ],
        "validation": "Item removed from list or status changed to deleted/archived"
      }
    }
  },
  "exploration_phase": {
    "enabled": true,
    "run_before_what_to_do": true,
    "instructions": [
      "Navigate to the feature's main section",
      "Take a full page snapshot to understand the layout",
      "Identify the primary entity - what 'item' does this feature manage?",
      "Find ALL clickable elements: buttons, links, tabs, dropdowns, icons",
      "Map the navigation structure: tabs, sidebar items, breadcrumbs",
      "Click each tab/sub-section and document what appears",
      "Locate CRUD controls for the primary entity",
      "Check for action menus (three-dot menus, right-click menus)",
      "Document any modals, dialogs, slide-out panels",
      "Identify form fields and input types when forms appear",
      "Look for filters, search, sort, and export options",
      "Check for bulk action controls (checkboxes, select all)",
      "Note any settings or configuration options"
    ],
    "discovery_targets": [
      "Primary action buttons (create/add new item)",
      "List/table of items with row actions",
      "Detail view or edit forms",
      "Status indicators and state changes",
      "Filter and search controls",
      "Navigation tabs within the feature",
      "Settings or configuration sections",
      "Related features or cross-links"
    ]
  },
  "workflow_integration": {
    "enabled": true,
    "check_instructions": [
      "Navigate to Automations in the left sidebar",
      "Click on Workflows",
      "Click + Create workflow (or similar create button)",
      "In trigger selection, search for this feature's name",
      "Check if this feature appears as a trigger source",
      "Document any trigger events found (e.g., 'item created', 'status changed')",
      "Check Actions section for actions related to this feature",
      "Screenshot available triggers and actions"
    ],
    "nav_path": "Automations → Workflows → + Create workflow"
  },
  "execution_order": [
    "1. EXPLORATION: Navigate to feature and discover all UI elements",
    "2. IDENTIFY ENTITY: Determine what the primary item/entity is",
    "3. CRUD TEST: Test create, read, update, delete for the primary entity",
    "4. WORKFLOW CHECK: Verify if feature has workflow triggers/actions",
    "5. WHAT_TO_DO: Execute specific validation tasks from payload",
    "6. DOCUMENTATION: Capture screenshots of key screens"
  ],
  "playwright_context": {
    "feature_metadata": {
      "name": "work_expenses",
      "slug": "work-expenses",
      "category": "finance",
      "version": "",
      "is_new": null
    },
    "what_to_do": [
      {
        "task": "Create and manage workflows for auto encashment of air tickets and other work expenses",
        "steps": [
          "Access Workflows in Settings",
          "Create a new workflow",
          "Select Air Tickets Auto Encashment recipe",
          "Define workflow trigger time (hour-level precision only)",
          "Set criteria for encashment (fully approved or requiring approvals)",
          "Choose encashment request type",
          "Save and activate workflow",
          "View workflow activity log"
        ],
        "expected_outcome": "Workflow is created and activated successfully with correct trigger and criteria settings",
        "source_articles": [
          "31099964679057"
        ]
      },
      {
        "task": "Configure approval flows for work expenses",
        "steps": [
          "Access Role Management",
          "Assign Line Manager roles",
          "Define approval sequence and hierarchy",
          "Set up approver hierarchy",
          "Employee submits expense request",
          "Request routed through approvers",
          "Request approved or rejected"
        ],
        "expected_outcome": "Approval flows are configured and expense requests follow the defined approval process",
        "source_articles": [
          "14309308626449"
        ]
      },
      {
        "task": "Generate reports for all work expenses submitted for reimbursements",
        "steps": [
          "Navigate to Company Expenses > Expense Transactions",
          "Select expense status",
          "Apply filters as needed",
          "Download expense list in Excel format",
          "Download attachments as a Zip file (optional)"
        ],
        "expected_outcome": "Filtered expense reports and attachments are downloaded successfully",
        "source_articles": [
          "14242878323345"
        ]
      },
      {
        "task": "Create workflow actions to send notifications and messages related to work expenses",
        "steps": [
          "Select Action Type (Email/Slack/Task)",
          "Configure recipients based on employee roles, departments, or nationalities",
          "Compose message with subject and content using variables",
          "Set trigger event",
          "Activate workflow"
        ],
        "expected_outcome": "Workflow actions send notifications correctly via email or Slack; task feature is in development",
        "source_articles": [
          "28081403016337"
        ]
      },
      {
        "task": "Submit a work expense request on behalf of an employee",
        "steps": [
          "Navigate to employee profile or Work Expenses tab",
          "Click 'Add Expense Reimbursement'",
          "Upload receipt (optional)",
          "Fill in expense details including amount and client",
          "Submit request",
          "Verify automatic approval if submitted by admin"
        ],
        "expected_outcome": "Expense request is submitted successfully and approved automatically if submitted by admin",
        "source_articles": [
          "18274272853649"
        ]
      }
    ],
    "what_to_watch_out_for": [
      {
        "issue": "Lack of granular role-based access control for Work Expenses module",
        "limitation": "Administrators cannot selectively disable or restrict the Work Expenses module by role during specific scenarios; only full or read-only access is possible.",
        "workaround": null,
        "jira_reference": "TSSD-2230,TSSD-4927",
        "severity": "medium"
      },
      {
        "issue": "No bulk deletion capability for work expenses",
        "limitation": "Users cannot perform bulk or selective deletions of work expenses via UI; manual backend intervention is required.",
        "workaround": null,
        "jira_reference": "TSSD-3547",
        "severity": "low"
      },
      {
        "issue": "Missing custom notification triggers for work expense approval events",
        "limitation": "Platform lacks event triggers for sending notifications outside immediate approval workflows, limiting communication flexibility.",
        "workaround": null,
        "jira_reference": "TSSD-4252",
        "severity": "medium"
      },
      {
        "issue": "Deletion of settled expenses fails when currency mismatches exist",
        "limitation": "Standard UI deletion process breaks if expense currency differs from payroll currency, requiring manual handling.",
        "workaround": null,
        "jira_reference": "TSSD-1958",
        "severity": "medium"
      },
      {
        "issue": "Approval workflows cannot use client or project fields as routing criteria",
        "limitation": "Expense approval routing is constrained to predefined mechanisms without flexibility for custom fields.",
        "workaround": null,
        "jira_reference": "TSSD-4896",
        "severity": "medium"
      },
      {
        "issue": "Work Expenses module cannot be disabled independently of Payroll",
        "limitation": "Disabling Work Expenses requires disabling Payroll module as well, limiting modular control.",
        "workaround": null,
        "jira_reference": "TSSD-4927",
        "severity": "medium"
      },
      {
        "issue": "Lack of comprehensive timestamp tracking for work expenses status changes",
        "limitation": "Audit trails for expense status changes are incomplete across reporting interfaces.",
        "workaround": null,
        "jira_reference": "GS-866",
        "severity": "medium"
      },
      {
        "issue": "Potential gaps in permissions and role-based access control for work expenses",
        "limitation": "Undefined or incomplete permission boundaries may cause access management challenges.",
        "workaround": null,
        "jira_reference": "GS-974",
        "severity": "low"
      },
      {
        "issue": "No dynamic column configuration in work expenses reports",
        "limitation": "Users cannot customize report views with custom fields like 'Client'.",
        "workaround": null,
        "jira_reference": "TSSD-3509",
        "severity": "medium"
      },
      {
        "issue": "Lack of integration for work expenses in payroll and salary configuration",
        "limitation": "Payroll managers cannot systematically document or integrate work expenses into salary information.",
        "workaround": null,
        "jira_reference": "GS-3611",
        "severity": "medium"
      },
      {
        "issue": "Processed work expenses may be incorrectly included in monthly payroll due to manual DB changes",
        "limitation": "No strict boundary controls exist to separate processed expenses from payroll calculations, risking data integrity.",
        "workaround": null,
        "jira_reference": "GS-1062",
        "severity": "medium"
      },
      {
        "issue": "Admin users can download all company expense data via Excel export",
        "limitation": "Lack of data access restrictions creates potential data governance and privacy risks.",
        "workaround": null,
        "jira_reference": "GS-1125",
        "severity": "high"
      },
      {
        "issue": "No automatic currency conversion for pending or draft expenses",
        "limitation": "Users must manually update currency values, increasing administrative overhead and error risk.",
        "workaround": null,
        "jira_reference": "GS-1299",
        "severity": "medium"
      },
      {
        "issue": "Lack of robust bulk export for large approved expense reports",
        "limitation": "Users must rely on manual backend extraction for comprehensive reporting.",
        "workaround": null,
        "jira_reference": "TSSD-1870",
        "severity": "medium"
      },
      {
        "issue": "Incomplete notification and request processing workflows for admin notifications",
        "limitation": "Notification configuration coverage is limited or intentionally constrained in expense request system.",
        "workaround": null,
        "jira_reference": "GS-5122",
        "severity": "low"
      },
      {
        "issue": "Backend expense calculation logic flaw with empty marked_as_paid list",
        "limitation": "Expense calculations and reporting may be incorrect due to flawed backend processing logic.",
        "workaround": null,
        "jira_reference": "GS-2516",
        "severity": "medium"
      }
    ],
    "consolidation_summary": {
      "jira_tickets_received": 18,
      "jira_tickets_consolidated": 16,
      "zendesk_articles_received": 5,
      "tasks_consolidated": 5
    }
  }
}