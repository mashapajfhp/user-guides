import{O as re,Q as it,bl as ma,W as z,a as T,b9 as ae,bN as Q,r as c,X as Qe,e2 as lt,j as e,cV as we,a2 as nn,a3 as wa,T as S,d as R,aN as V,bW as pa,S as J,H as U,cC as sn,c2 as ue,aS as on,aK as Le,bB as Na,P as ln,ah as w,a0 as Z,U as pe,V as ge,bU as _,bS as Te,fX as he,cf as He,br as ga,dc as Ve,bI as rt,bb as $e,af as xe,B as ye,a6 as rn,fV as cn,cj as la,lQ as dn,jg as Ka,w as un,cl as Se,bp as Ra,ac as mn,Z as pn,a8 as se,bo as Ba,M as ct,I as dt,J as ut,K as mt,b4 as gn,aa as yn,cY as Ee,b1 as Ea,b2 as Ae,bm as Ye,hV as fn,lp as hn,b7 as pt,a1 as Za,dy as Fa,dA as La,F as gt,G as yt,df as ra,L as ca,a7 as xn,ab as bn,a4 as Mn,ao as Cn,a9 as Pa,fT as vn,h6 as jn,c1 as kn,j6 as ft,f_ as Dn,dt as Sn,d9 as wn,C as Pn,fg as H,lV as Tn,ni as Je,nj as An,nk as Nn,cJ as In,cQ as _n,cT as Rn,nl as Bn,nm as En}from"./assets/index-rhBbSAok.js";import{b as ya,s as $a,d as fa,a as Ua,c as ht,e as za,P as K,D as da}from"./PayrollLeaveDailyRateDayType-85b-5icy__cache.js";import{m as Fn}from"./mapRequestArrayGenerator-96M5b1Ay__cache.js";import{m as Oa}from"./mapResponseArrayDataOnlyGenerator-vWqRqF0l__cache.js";import{a as Ln,u as $n}from"./PayrollConfiguration-mnBW9R6M__cache.js";import{C as Ta}from"./CompanySettingsStyledPaper-pzPCJnxy__cache.js";import{c as xt}from"./AccountIntegration.abilities-iGk72gZu__cache.js";import{c as Un}from"./PayrollBulkData.abilities-OeJFr-43__cache.js";import{C as ia}from"./ConfigurationBanner-ZmB_Vgjo__cache.js";import{P as zn}from"./PageHeading-nXhD4Nsd__cache.js";import{P as On}from"./PageContent-363tIqWz__cache.js";import{u as Wn,g as Vn,A as Gn,S as qn,c as Qn,b as Hn,a as Yn}from"./AccountIntegrationBanner-gw4dazEw__cache.js";import{u as Wa,A as ee,b as Kn}from"./useAccountingPlatformName-2eNC-XXr__cache.js";import{C as Zn,u as Jn,l as Xn,S as es,P as as}from"./ConfirmationDialog-_52oRn1m__cache.js";import{S as ha}from"./ScrollTarget-WuHGBBQV__cache.js";import{u as Va,D as ts}from"./useDialog-gRSbQfEN__cache.js";import{T as Pe,a as Ia,P as _a,c as Ga}from"./TemplateStatus-9FrMQeiI__cache.js";import{u as ns,d as bt,s as ss}from"./AccountingReportingFileTemplate-JBY2bZrX__cache.js";import{N as os}from"./NavigationMenuVerticalIcon-Y4il9WHM__cache.js";import{u as Mt,a as is,b as ls}from"./usePayrollFileTemplateList_CustomQuery-TTM3yE6___cache.js";import{C as rs,a as cs}from"./ConfirmDataAccessDialog-3WIW2NtF__cache.js";import{u as ds}from"./useAccountIntegrationConnectionStatus_CustomQuery-XnE03dmA__cache.js";import{P as Ct}from"./PayAdjustmentPayload-5B-pEYxx__cache.js";import{u as vt,a as jt,b as kt,c as Dt}from"./PayAdjustments-dLubFD5t__cache.js";import{I as fe}from"./ButtonWithTooltip-ZRvEDUuf__cache.js";import{C as be}from"./ConfigurationAccordionTitle-qLBxSX7i__cache.js";import{C as Me}from"./ConfigurationAccordion-sH02smW7__cache.js";import{a as us,P as ms}from"./Pagination-dJEsRaL9__cache.js";import{P as Ne}from"./Pencil1Icon-g4OBhpYF__cache.js";import{A as xa}from"./ActionsCellLayout-QoNJZX4W__cache.js";import{F as St}from"./TextField.form-wfmQrmdl__cache.js";import{P as Fe}from"./PayItemTypePayload-sUogX9yg__cache.js";import{u as qa,a as wt,b as Pt,c as Tt}from"./useListPayItemType_CustomQuery-dtCMzh7v__cache.js";import{u as ps,g as gs,h as ys,i as fs,P as Ue,j as Ge}from"./CompanyBankDetails-uM9hiMgz__cache.js";import{u as hs}from"./ListPayrollCommercialRegistration-GX1tUYPy__cache.js";import{u as xs}from"./ListPayrollTradeLicences-r1SCk8u6__cache.js";import{u as bs}from"./useCompanyCountry-au303yAF__cache.js";import{c as Ja,a as Xa,B as Ms,D as Cs}from"./BankAccountRequestBodyGenerators-5_CjgiYw__cache.js";import{E as vs}from"./EmployeeLoanPolicies-Ac4tvsvH__cache.js";import{f as At,e as js}from"./Application.tracking-4_lGcJG1__cache.js";import{c as Ke,s as ba,D as O,a as ks,d as Ds}from"./DailyAmountMapper-fgGvr2Py__cache.js";import{m as Ss}from"./final-form-arrays.es-HP7IFYu8__cache.js";import{F as Nt}from"./CheckboxInput.form-5LK-WYE6__cache.js";import{F as Qa}from"./DecimalNumberField-n0yiM-mI__cache.js";import{F as qe}from"./Select.form-INoc4nXN__cache.js";import{F as ws}from"./react-final-form-arrays.es-BOp2xzTD__cache.js";import{M as Ps}from"./Modal-qYVDkutb__cache.js";import{u as Ha}from"./PayrollTemplates.tracking--Fw1oebf__cache.js";import{d as Ts}from"./Created-CSnqAS9S__cache.js";import{a as It,F as _t}from"./FileUploadCard-SYKRFYl-__cache.js";import{S as Rt}from"./Select-rkw5r0hr__cache.js";import{D as As}from"./DropzoneFileUploader-pDMOyu5b__cache.js";import{C as et}from"./FileUploaderBase-rOZnb-He__cache.js";import{A as at}from"./ArrowRightIcon-7MADsS01__cache.js";import{a as Ze}from"./payroll-S3szKU9S__cache.js";import{P as Ns}from"./PaginatedTable-URXGw4_u__cache.js";import{F as Bt}from"./FormatDate-f2AQWiWt__cache.js";import{u as Is}from"./useLeaveSalaryActivatePolicy_Mutation-yAQZillr__cache.js";import{u as Et}from"./LeaveType-2fdhx04W__cache.js";import{u as _s,s as Rs}from"./ListPayRunCycles-p4WtOamk__cache.js";import{c as Bs}from"./commonPaginationForAllRows-6o5gbw64__cache.js";import{u as Es,a as Fs,b as Ls,c as $s,d as Us}from"./SocialSecurityContributionConfiguration--QrpYx4n__cache.js";import{g as Ft}from"./gte-lVlExXJk__cache.js";import"./Breadcrumbs-vaEJs3BD__cache.js";import"./Breadcrumbs-iuU7DkbN__cache.js";import"./PageBody-DUqeS0DQ__cache.js";import"./GenericSuccessResponse-R235NyAN__cache.js";import"./RemoveBannerDialog-y2iWxANl__cache.js";import"./CheckboxInput-9e4-y5wq__cache.js";import"./AccountIntegrationPlatfromName-nYaV6OQR__cache.js";import"./xeroIcon-HeOeRCiQ__cache.js";import"./TextField-tMfA-iyC__cache.js";import"./InputAdornment-hva1Jw6n__cache.js";import"./PayrollFileExtension-P37LznwA__cache.js";import"./mapResponseArrayGenerator-jtAzkRDY__cache.js";import"./PayrollCompanyDocumentResponsePayload-7RqE4tfm__cache.js";import"./VatCertificateMetadata-2J9lkWGr__cache.js";import"./PayrollCompanyDocumentCategory-VtPHYLf2__cache.js";import"./Bank-87nXGUR4__cache.js";import"./Autocomplete.form-u8H5zvYs__cache.js";import"./Autocomplete-AtzChYID__cache.js";import"./Autocomplete-ldKA24XJ__cache.js";import"./Select-2iMMU_Ha__cache.js";import"./useAutocomplete-m434FNIm__cache.js";import"./Box-rqAFgx2y__cache.js";import"./TextField-TqOYmhqJ__cache.js";import"./RadioGroupInput.form-MIArba2b__cache.js";import"./RadioGroupInput-1jbbS5zi__cache.js";import"./RadioGroup-U1J7qwen__cache.js";import"./FormGroup-CG9DRFZI__cache.js";import"./final-form-calculate.es-bn-nJtjC__cache.js";import"./maxLengthGenerator-lvQvKiVB__cache.js";import"./validateIban-ok8dHO9Z__cache.js";import"./FileRequestPayload-1y2BXBNm__cache.js";import"./LoanRequestFileResponsePayload-OeNTn5aF__cache.js";import"./useLocaleBasedIconRotation-KalKdOmk__cache.js";import"./ArrowLeftIcon-Sfxicbe3__cache.js";import"./CommonFileCheckIcon-0Ujj8aBI__cache.js";import"./CommonFileRemoveIcon-khDOLK4n__cache.js";import"./CommonFileUploadIcon-WsQb3UxV__cache.js";import"./Hyperlink3Icon-ddHc9UkS__cache.js";import"./UploadCircleIcon-UCVVC649__cache.js";import"./useFormPrompt-vGsZtCUZ__cache.js";import"./usePrompt-wHoy_R1b__cache.js";import"./useStateWatcherRef-3bCYpZiX__cache.js";import"./index-0cpOJbKN__cache.js";import"./PdfViewer-kA7wiOtp__cache.js";import"./ArrowRight1Icon-_5Cuu06x__cache.js";import"./ImageFileLandscapeAlternateIcon-9b_8SJCt__cache.js";import"./ZoomOut1Icon-hGqvTTCv__cache.js";import"./DownloadBottomIcon-rr6q8xxr__cache.js";import"./OfficeFilePdf1Icon-7sFtfR3c__cache.js";import"./Fab-5bdzkMtB__cache.js";import"./PayRunCyclePayload-yPsautGo__cache.js";import"./gteGenerator-h-JQ1EQy__cache.js";function zs(a){const t={};return t.custom_days=a.customDays,t.daily_rate_day_type=ya(a.dailyRateDayType),t.daily_rate_salary_component=$a(a.dailyRateSalaryComponent),t.id=a.id,t}function Lt(a){const t={};return t.customDays=a.custom_days,t.dailyRateDayType=fa(a.daily_rate_day_type),t.dailyRateSalaryComponent=Ua(a.daily_rate_salary_component),t.id=a.id,t.name=a.name,t.selected=a.selected,t}const $t=a=>`/companies/${a.companyId}/payroll/eos-configuration`,Ut=a=>{const t=Os.useMocker();return it({toURLFunction:$t,mapResponseFunction:Oa(Lt),options:{mocker:t}})(a,void 0,void 0)},Os=re(Ut),zt=()=>{const a=Ws.useMocker();return ma({toURLFunction:$t,mapRequestFunction:Fn(zs),mapResponseFunction:Oa(Lt),options:{mocker:a,showGlobalProgress:!0}})},Ws=re(zt),me=R({confirmDialogTitle:{id:"hr.payroll.account-integration.remove-connection-confirmation-dialog.title",defaultMessage:"Remove {software} connection"},confirmDialogWarning:{id:"hr.payroll.account-integration.remove-connection-confirmation-dialog.warning",defaultMessage:"All the data mapped will be permanently deleted."},confirmDialogSubtitle:{id:"hr.payroll.account-integration.remove-connection-confirmation-dialog.subtitle",defaultMessage:"Please type <strong> CONFIRM </strong> below before removing the connection."},confirmDialogButton:{id:"hr.payroll.accounting-integration.configuration-banner.action-button.remove-connection",defaultMessage:"Remove connection"},removeConnection:{id:"hr.payroll.accounting-integration.configuration-banner.action-button.remove-connection",defaultMessage:"Remove connection"},editMapping:{id:"hr.payroll.accounting-integration.configuration-banner.action-button.edit-mapping",defaultMessage:"Edit mapping"},setupReport:{id:"hr.payroll.accounting-integration.configuration-banner.action-button.setup-report",defaultMessage:"Setup report"},viewEditReport:{id:"hr.payroll.accounting-integration.configuration-banner.action-button.edit-view-report",defaultMessage:"Edit/View report"}}),Vs=({removeConnection:a,onEditMapping:t})=>{const o=z(),s=T(),n=ae(),{handleRequestExceptionAlert:l}=Q(),{platformName:p}=Wa(),[u,d]=c.useState(null),[y,i]=c.useState(!1),m=Qe(lt),{data:h=[]}=Mt({fileType:Pe.Reporting,status:Ia.Active,platformPages:[_a.Accounting]},{enabled:!!u&&m}),f=h[0],{mutateAsync:x}=ns(),j=async()=>{let D;if(f)D=f.id;else try{D=(await x({urlParams:{companyId:o}})).id}catch(C){l(C)}D&&n.pushToApp(V.APP_PAYROLL,`/account-integration/setup-report/${D}`)};return e.jsxs(e.Fragment,{children:[e.jsx(we,{"aria-label":"more",onClick:D=>{d(D.currentTarget)},"data-external-id":"configuration-options-button",children:e.jsx(os,{fontSize:"xx-small"})}),e.jsxs(nn,{anchorEl:u,open:!!u,onClose:()=>d(null),"data-external-id":"configuration-options-menu",children:[e.jsx(wa,{onClick:t,"data-external-id":"edit-mapping-menu-item",children:e.jsx(S,{children:s.formatMessage(me.editMapping)})}),m&&e.jsx(wa,{onClick:j,"data-external-id":"report-menu-item",children:e.jsx(S,{children:f?s.formatMessage(me.viewEditReport):s.formatMessage(me.setupReport)})}),e.jsx(wa,{onClick:()=>i(!0),color:"textSecondary","data-external-id":"remove-connection-menu-item",children:e.jsx(S,{color:"error.main",children:s.formatMessage(me.removeConnection)})})]}),y&&e.jsx(Zn,{confirmationButtonColor:"error",title:s.formatMessage(me.confirmDialogTitle,{software:p}),warningMessage:s.formatMessage(me.confirmDialogWarning),subtitle:s.formatMessage(me.confirmDialogSubtitle,{strong:D=>e.jsx("strong",{children:D})}),confirmButtonText:s.formatMessage(me.confirmDialogButton),onConfirm:async()=>{await a(),i(!1)},onCancel:()=>i(!1)})]})},Gs=({connectionStatus:a,isSetupSubmitted:t,platformName:o})=>{const s=T();let n;return a===ee.Established?n=s.formatMessage(Xe.connectionNotCompleted):a===ee.AuthorizationNeeded?n=s.formatMessage(Xe.reviewMappedData):t?n=s.formatMessage(Xe.proceedToTransactionPage,{a:l=>e.jsx(pa,{to:"/transactions",app:V.APP_PAYROLL,children:l})}):a===ee.Synced&&(n=s.formatMessage(Xe.accountConnected,{software:o})),n?e.jsx(S,{color:"textSecondary","data-external-id":"connection-message",children:n}):null},Xe=R({connectionNotCompleted:{id:"hr.payroll.accounting-integration.configuration-banner.connection-not-completed",defaultMessage:"Your connection is not completed. Continue setting up the connection"},accountConnected:{id:"hr.payroll.accounting-integration.configuration-banner.account-connected",defaultMessage:"Your {software} account is now connected. Proceed to setup the accounts"},proceedToTransactionPage:{id:"hr.payroll.accounting-integration.configuration-banner.account-config-setup-complete",defaultMessage:"Proceed to the <a>transaction page</a> to sync data"},reviewMappedData:{id:"hr.payroll.accounting-integration.configuration-banner.review-mapped-data",defaultMessage:"Review the data mapped until now"}}),ea=R({content:{id:"hr.payroll.accounting-integration.remove-connection-dialog.content",defaultMessage:"Are you sure, you want to remove the connection established between Bayzat and {software}?"},contentWithoutSoftware:{id:"hr.payroll.accounting-integration.remove-connection-dialog.content-without-software",defaultMessage:"Are you sure, you want to remove the connection?"},title:{id:"hr.payroll.accounting-integration.remove-connection-dialog.title",defaultMessage:"Remove Connection"},confirmText:{id:"hr.payroll.accounting-integration.remove-connection-dialog.remove-connection-button",defaultMessage:"Remove connection"}}),qs=a=>{const t=T(),{platformName:o}=Wa(),{onCancel:s,onConfirm:n,isVisible:l}=a;return l?e.jsx(J,{open:l,content:o?t.formatMessage(ea.content,{software:o}):t.formatMessage(ea.contentWithoutSoftware),title:t.formatMessage(ea.title),showCloseButton:!0,onClose:s,"data-external-id":"remove-connection-dialog",confirmButton:{onClick:n,text:t.formatMessage(ea.confirmText),color:"error"},cancelButton:{show:!0,onClick:s}}):null},Qs=U()(a=>({header:{marginBottom:a.spacing(1.5),marginRight:a.spacing(1)},mappingTableContainer:{marginTop:a.spacing(3)},container:{padding:a.spacing(2)},alert:{marginTop:a.spacing(2)},headerAndMessageContainer:{display:"flex",flexDirection:"column",justifyContent:"flex-start"},outerContainer:{display:"flex",flexDirection:"column"},headerRow:{display:"flex",flexDirection:"row",justifyContent:"space-between",alignItems:"center"},headerLeft:{display:"flex",alignItems:"flex-start",gap:a.spacing(2)},headerRight:{display:"flex",justifyContent:"flex-end",alignItems:"center"},headerRightWithGap:{display:"flex",justifyContent:"flex-end",alignItems:"center",gap:a.spacing(2)}})),Hs=()=>{const a=z(),t=sn(),o=T(),{classes:s}=Qs(),n=ae(),l=ue(),p=Va(),{handleRequestExceptionAlert:u}=Q(),d=on(),{hash:y}=Le(),i=Qe(xt),{platformName:m}=Wa(),[h,f]=c.useState(!1),[x,j]=c.useState(null),[D,C]=c.useState(!1),[v,b]=c.useState(!1),[P,N]=c.useState(!1),{data:k,refetch:E}=ds(),{data:F}=Jn({companyId:a}),{data:B}=Xn({companyId:a,configId:k==null?void 0:k.configurationId},{enabled:i&&!!(k!=null&&k.configurationId)}),{mutateAsync:A}=Kn(),{mutateAsync:M}=Wn(),r=(B==null?void 0:B.submitStatus)===es.Submitted,g=k==null?void 0:k.connectionStatus;c.useEffect(()=>{if(k!=null&&k.redirectUrl&&g===ee.Established){const $=Vn(k==null?void 0:k.redirectUrl);Na($,"codatCompanyId can not be null."),j($)}},[k==null?void 0:k.redirectUrl,g]);const L=()=>{d.invalidateQueries({queryKey:["GET",`/companies/${a}/employees/${t}/accounting/banner-visibility`]})},Ce=async()=>{try{await A({urlParams:{companyId:a}}),N(!1),L(),l.success({message:o.formatMessage(G.removeConnectionSuccessMessage)})}catch($){u($)}finally{E()}},X=()=>{N(!0)},ja=()=>{x||l.error({message:o.formatMessage(G.missingCodatCompanyId)}),f(!0)},ka=async()=>{try{await M({urlParams:{companyId:a}}),j(null),b(!0),setTimeout(()=>{E()},Qn),setTimeout(()=>{E()},Hn)}catch($){u($)}finally{E()}},Da=$=>{l.error({message:$}),C(!1)};if(g===ee.NotInitialized)return null;const Sa=()=>{Na(k==null?void 0:k.redirectUrl,"redirect url can not be null"),window.open(k.redirectUrl,"_blank")},I=()=>{p.confirm({title:o.formatMessage(G.reauthorizeConnection),content:o.formatMessage(G.reauthorizeConnectionConfirmation),maxWidth:"sm",fullWidth:!0,confirmButton:{onClick:Sa,text:o.formatMessage(G.goToExternalLink)},cancelButton:{show:!0,text:o.formatMessage(G.stayHere)}})};return e.jsx(ha,{scroll:y==="#accounting-integration",children:e.jsxs(ln,{variant:"outlined",className:s.container,"data-external-id":"configuration-card",children:[e.jsxs("div",{className:s.outerContainer,children:[e.jsxs("div",{className:s.headerRow,children:[e.jsxs(w,{className:s.headerLeft,size:7,children:[e.jsx(Gn,{platformName:m,iconWidth:48}),e.jsxs("div",{className:s.headerAndMessageContainer,children:[e.jsx(S,{variant:"h6",className:s.header,"data-external-id":"configuration-card-header",children:m?o.formatMessage(G.configurationBannerHeader,{software:m}):o.formatMessage(G.configurationBannerHeaderWithoutSoftware)}),e.jsx(Gs,{connectionStatus:g,isSetupSubmitted:r,platformName:m})]})]}),r?e.jsx(w,{className:s.headerRight,size:5,children:e.jsx(Vs,{removeConnection:Ce,onEditMapping:()=>{n.pushToApp(V.APP_PAYROLL,"/account-integration/setup")}})}):g!==ee.Linked&&e.jsxs(w,{className:s.headerRightWithGap,size:5,children:[e.jsx(Z,{size:"medium",variant:"outlined","data-external-id":"remove-connection-button",onClick:X,children:o.formatMessage(G.removeConnection)}),g===ee.Established&&e.jsx(Z,{size:"medium",variant:"contained","data-external-id":"continue-connecting-button",onClick:ja,children:o.formatMessage(G.continueConnecting)}),g===ee.Synced&&e.jsx(Z,{size:"medium",variant:"contained","data-external-id":"map-data-button",onClick:()=>{n.pushToApp(V.APP_PAYROLL,"/account-integration/setup")},children:o.formatMessage(G.mapData)})]})]}),g===ee.Linked&&e.jsx(pe,{variant:ge.Info,message:e.jsxs(e.Fragment,{children:[e.jsx("b",{children:o.formatMessage(G.integrationInProgress)})," ",o.formatMessage(G.setupAccounts)]}),withIcon:!0,className:s.alert,"data-external-id":"linked-alert"}),g===ee.AuthorizationNeeded&&e.jsx(pe,{variant:ge.Error,message:o.formatMessage(G.accountIntegrationDisconnected,{platformName:m}),withIcon:!0,primaryAction:{onClick:I,text:o.formatMessage(G.reauthorizeConnection)},className:s.alert,"data-external-id":"auth-needed-alert"}),r&&(g===ee.Synced||g===ee.AuthorizationNeeded)&&B.payItemTypeMappings.length>0&&e.jsx(as,{payItems:B.payItemTypeMappings,payItemTypes:F||[],tableContainerClasses:s.mappingTableContainer})]}),e.jsx(qs,{onConfirm:Ce,onCancel:()=>N(!1),isVisible:P}),e.jsx(rs,{open:h,onConfirm:()=>{f(!1),C(!0)},onCancel:()=>f(!1)}),!!x&&e.jsx(cs,{handleError:Da,handleSuccessfulConnection:ka,codatCompanyId:x,open:D,onClose:()=>C(!1),onFinish:()=>{C(!1),_({event:"account-integration.status.connection-complete",category:"AccountIntegration"})}}),e.jsx(qn,{open:v,platformName:m,onClose:()=>b(!1)})]})})},G=R({configurationBannerHeader:{id:"hr.payroll.accounting-integration.configuration-banner.header",defaultMessage:"Accounting Integrations - {software}"},configurationBannerHeaderWithoutSoftware:{id:"hr.payroll.accounting-integration.configuration-banner.header-without-software",defaultMessage:"Accounting Integrations"},removeConnection:{id:"hr.payroll.accounting-integration.configuration-banner.action-button.remove-connnection",defaultMessage:"Remove connection"},continueConnecting:{id:"hr.payroll.accounting-integration.configuration-banner.action-button.continue-connecting",defaultMessage:"Continue connecting"},mapData:{id:"hr.payroll.accounting-integration.configuration-banner.action-button.map-data",defaultMessage:"Map data"},missingCodatCompanyId:{id:"hr.payroll.accounting-integration.configuration-banner.missing-codat-company-id",defaultMessage:"Codat Company Id is missing. Please remove the connection and start again."},removeConnectionSuccessMessage:{id:"hr.payroll.accounting-integration.configuration-banner.remove-connection-success-message",defaultMessage:"Connection successfully removed"},integrationInProgress:{id:"hr.payroll.accounting-integration.configuration-banner.integration-in-progress",defaultMessage:"Accounting integration is in progress!"},setupAccounts:{id:"hr.payroll.accounting-integration.configuration-banner.setup-accounts",defaultMessage:"Setup accounts will be available shortly. We are fetching data needed to complete the configuration."},accountIntegrationDisconnected:{id:"hr.payroll.accounting-integration.configuration-banner.integration-disconnected",defaultMessage:"{platformName} integration has been disconnected"},reauthorizeConnection:{id:"hr.payroll.accounting-integration.configuration-banner.reauthorize-connection",defaultMessage:"Re-authorize connection"},reauthorizeConnectionConfirmation:{id:"hr.payroll.accounting-integration.configuration-banner.reauthorize-connection-confirmation",defaultMessage:"You will be redirected to an external link in a new tab to re-authorize your connection. Please refresh this page after re-authorizing."},goToExternalLink:{id:"hr.payroll.accounting-integration.configuration-banner.go-to-external-link",defaultMessage:"Go to external link"},stayHere:{id:"hr.payroll.accounting-integration.configuration-banner.stay-here",defaultMessage:"Stay here"}});var de=(a=>(a.Additions="additions",a.Allowances="allowances",a.Deductions="deductions",a.VariablePays="variable-pays",a))(de||{});const Ys=U()(a=>({childrenContainer:{display:"flex",flexDirection:"column",flexGrow:1},footerContainer:{display:"flex"},addNewButton:{alignSelf:"flex-start",marginTop:a.spacing(2)},pagination:{marginLeft:"auto"}})),Ma=({title:a,tableData:t,pagination:o,totalRowCount:s,onAddNewClick:n,onEditClick:l,onDeleteClick:p,onPageChange:u,...d})=>{const{classes:y}=Ys(),i=T(),m=c.useCallback(f=>{u(f)},[u]),h=c.useMemo(()=>[{title:i.formatMessage({id:"common.name",defaultMessage:"Name"}),dataExternalId:"name",dataIndex:"name",align:"left",proportion:1},{title:"",dataExternalId:"actions",dataIndex:"id",align:"right",proportion:1,accessor:(f,x)=>e.jsxs(xa,{children:[e.jsx(fe,{title:x.blockUpdateReason?x.blockUpdateReason:i.formatMessage(aa.edit),"data-external-id":"edit-button",onClick:()=>l(x),disabled:!!x.blockUpdateReason,size:"small",color:"primary",children:e.jsx(Ne,{})}),e.jsx(fe,{title:x.blockDeleteReason?x.blockDeleteReason:i.formatMessage(aa.delete),"data-external-id":"delete-button",onClick:()=>p(x),disabled:!!x.blockDeleteReason,size:"small",color:"primary",children:e.jsx(Te,{})})]})}],[i,l,p]);return e.jsx(Me,{"data-external-id":`${d["data-external-id"]}-accordion`,title:e.jsx(be,{title:a,"data-external-id":"header"}),children:e.jsxs("div",{className:y.childrenContainer,children:[e.jsx(he,{columns:h,data:t??[],variant:"outlined",emptyState:i.formatMessage(aa.noItemsYet)}),e.jsxs("div",{className:y.footerContainer,children:[e.jsx(Z,{className:y.addNewButton,variant:"contained",color:"primary","data-external-id":"add-new-button",onClick:n,children:i.formatMessage(aa.addNew)}),e.jsx(us,{className:y.pagination,type:ms.Basic,totalRows:s,rowsPerPage:o.limit,currentPage:o?Math.floor(o.offset/o.limit):0,onPageChange:m})]})]})})},aa=R({noItemsYet:{id:"hr.no-items-yet",defaultMessage:"No items yet."},addNew:{id:"hr.app.page.configuration.add-new",defaultMessage:"Add new"},delete:{id:"common.action.delete",defaultMessage:"Delete"},edit:{id:"common.action.edit",defaultMessage:"Edit"}}),Ks=ga({name:[Ve]}),Zs=({open:a,createTitle:t,editTitle:o,selectedItemName:s,isLoading:n,onClose:l,onConfirm:p})=>{const u=rt(),d=T();return c.useEffect(()=>{a&&u.reset()},[a,u]),e.jsx(J,{maxWidth:"sm",fullWidth:!0,title:s?o:t,content:e.jsx("form",{"data-external-id":"add-or-update-form",children:e.jsx(St,{fullWidth:!0,label:d.formatMessage({id:"common.name",defaultMessage:"Name"}),name:"name"})}),open:a,isPending:n,confirmButton:{text:s?d.formatMessage({id:"common.action.update",defaultMessage:"Update"}):d.formatMessage({id:"common.action.save",defaultMessage:"Save"}),onClick:p},cancelButton:{show:!0,onClick:l},showCloseButton:!0,onClose:l})},Ca=({variant:a,open:t,createTitle:o,editTitle:s,selectedItem:n,isLoading:l,onSubmit:p,onClose:u})=>{const d=T(),y=Ks(),i=ue(),{handleRequestExceptionAlert:m}=Q(),h=c.useCallback(async f=>{try{let x=d.formatMessage(ta.addItem);n?(await p(f.name,n.id),_({event:`configuration.payroll.${a}.complete_edit`,itemId:n.id,itemName:f.name}),x=d.formatMessage(ta.updateItem)):(await p(f.name,void 0),_({event:`configuration.payroll.${a}.complete_new`,itemName:f.name})),i.success({message:x})}catch(x){m(x,{fallbackMessage:n?d.formatMessage(ta.cannotAddItem):d.formatMessage(ta.cannotUpdateItem)})}},[d,n,i,p,a,m]);return e.jsx(He,{onSubmit:h,"data-external-id":"add-or-update-dialog",initialValues:{name:(n==null?void 0:n.name)||""},validate:y,render:({handleSubmit:f})=>e.jsx(Zs,{open:t,createTitle:o,editTitle:s,selectedItemName:(n==null?void 0:n.name)||"",isLoading:l,onClose:u,onConfirm:f})})},ta=R({addItem:{id:"hr.settings.company.add-item",defaultMessage:"New item has been added successfully."},updateItem:{id:"hr.settings.company.update-item",defaultMessage:"Item has been updated successfully."},cannotAddItem:{id:"hr.settings.company.cannot-add-item",defaultMessage:"Unable to add new item. Please try again"},cannotUpdateItem:{id:"hr.settings.company.cannot-update-item",defaultMessage:"Unable to update item. Please try again"}}),Js=U()(a=>({dialogTitle:{display:"flex",alignItems:"center"},mediumRightMargin:{marginRight:a.spacing(2),width:42,height:42}})),va=({variant:a,open:t,selectedItem:o,isLoading:s,onClose:n,onSubmit:l})=>{const{classes:p}=Js(),u=T(),d=ue(),{handleRequestExceptionAlert:y}=Q(),i=c.useCallback(async()=>{try{await l(o.id),_({event:`configuration.payroll.${a}.complete_delete`,itemId:o.id,itemName:o.name}),d.success({message:u.formatMessage(na.deleteItem)})}catch(m){y(m,{fallbackMessage:u.formatMessage(na.cannotDeleteItem)})}},[l,o.id,o.name,a,d,u,y]);return e.jsx(J,{open:t,maxWidth:"sm",fullWidth:!0,title:e.jsxs("div",{className:p.dialogTitle,children:[e.jsx($e,{color:"error",fontSize:"small",className:p.mediumRightMargin}),e.jsx(S,{variant:"h4",children:u.formatMessage(na.deleteTitle)})]}),content:e.jsx(S,{variant:"body1",children:u.formatMessage(na.deleteQuestion,{itemName:o.name,strong:m=>e.jsx("strong",{children:m})})}),isPending:s,confirmButton:{color:"error",onClick:i,text:u.formatMessage({id:"common.action.delete",defaultMessage:"Delete"})},cancelButton:{color:"error",show:!0,onClick:n},showCloseButton:!0,onClose:n})},na=R({deleteQuestion:{id:"hr.app.page.configuration.settings-list-item.delete-question",defaultMessage:"Are you sure you want to delete <strong>{itemName}</strong>?"},deleteItem:{id:"hr.settings.payroll.delete-item",defaultMessage:"Item has been deleted."},cannotDeleteItem:{id:"hr.settings.payroll.cannot-delete-item",defaultMessage:"Unable to delete item. Please try again."},deleteTitle:{id:"hr.app.page.configuration.settings-list-item.delete-title",defaultMessage:"Confirm deletion"}}),Xs=()=>{const a=T(),t=z(),[o,s]=c.useState(),[n,l]=c.useState({limit:10,offset:0}),[p,u]=c.useState(!1),[d,y]=c.useState(!1),{data:i,refetch:m,isRefetching:h}=vt({companyId:t},{filters:{payAdjustmentType:"addition"},pagination:n}),{mutateAsync:f,isPending:x}=jt(),{mutateAsync:j,isPending:D}=kt(),{mutateAsync:C,isPending:v}=Dt(),b=c.useMemo(()=>{const r=i?i.pagination.total:0;return!h&&i&&r<=n.offset&&l({limit:10,offset:0}),r},[i,n.offset,h]),P=r=>{l(g=>({...g,offset:g.limit*r}))},N=()=>{s(void 0),u(!0),_({event:"configuration.payroll.additions.click_new"})},k=r=>{s(r),u(!0),_({event:"configuration.payroll.additions.click_edit",itemId:r.id,itemName:r.name})},E=r=>{s(r),y(!0),_({event:"configuration.payroll.additions.click_delete",itemId:r.id,itemName:r.name})},F=c.useCallback(()=>{u(!1)},[]),B=c.useCallback(()=>{y(!1)},[]),A=c.useCallback(async(r,g)=>{try{return g?await f({data:{name:r},urlParams:{companyId:t,id:g}}):await j({data:{name:r,payAdjustmentType:Ct.Addition},urlParams:{companyId:t}})}finally{await m(),u(!1),s(void 0)}},[t,j,f,m]),M=c.useCallback(async r=>{try{return await C({urlParams:{companyId:t,id:r}})}finally{await m(),y(!1),s(void 0)}},[t,C,m]);return e.jsxs(e.Fragment,{children:[e.jsx(Ma,{title:a.formatMessage({id:"hr.app.page.configuration.payroll.additions.header",defaultMessage:"Additions"}),tableData:i==null?void 0:i.data,pagination:n,totalRowCount:b,onAddNewClick:N,onEditClick:k,onDeleteClick:E,onPageChange:P,"data-external-id":"additions"}),e.jsx(Ca,{variant:de.Additions,open:p,createTitle:a.formatMessage({id:"hr.app.page.configuration.payroll.additions.new-addition",defaultMessage:"New Addition"}),editTitle:a.formatMessage({id:"hr.app.page.configuration.payroll.additions.edit-addition",defaultMessage:"Edit Addition"}),selectedItem:o,isLoading:x||D,onSubmit:A,onClose:F}),o&&e.jsx(va,{variant:de.Additions,open:d,selectedItem:o,isLoading:v,onSubmit:M,onClose:B})]})},eo=()=>{const a=T(),t=z(),[o,s]=c.useState(),[n,l]=c.useState({limit:10,offset:0}),[p,u]=c.useState(!1),[d,y]=c.useState(!1),{data:i,refetch:m,isRefetching:h}=qa({payItemTypeBehavior:[Fe.Recurring]},n),{mutateAsync:f,isPending:x}=wt(),{mutateAsync:j,isPending:D}=Pt(),{mutateAsync:C,isPending:v}=Tt(),b=c.useMemo(()=>{const r=i?i.pagination.total:0;return!h&&i&&r<=n.offset&&l({limit:10,offset:0}),r},[i,n.offset,h]),P=r=>{l(g=>({...g,offset:g.limit*r}))},N=()=>{s(void 0),u(!0),_({event:"configuration.payroll.allowances.click_new"})},k=r=>{s(r),u(!0),_({event:"configuration.payroll.allowances.click_edit",itemId:r.id,itemName:r.name})},E=r=>{s(r),y(!0),_({event:"configuration.payroll.allowances.click_delete",itemId:r.id,itemName:r.name})},F=c.useCallback(()=>{u(!1)},[]),B=c.useCallback(()=>{y(!1)},[]),A=c.useCallback(async(r,g)=>{try{return g?await f({data:{name:r},urlParams:{companyId:t,id:g}}):await j({data:{name:r,payItemTypeBehavior:Fe.Recurring},urlParams:{companyId:t}})}finally{await m(),u(!1)}},[t,f,j,m]),M=c.useCallback(async r=>{try{return await C({urlParams:{companyId:t,id:r}})}finally{await m(),y(!1)}},[t,C,m]);return e.jsxs(e.Fragment,{children:[e.jsx(Ma,{title:a.formatMessage({id:"hr.app.page.configuration.payroll.allowances.header",defaultMessage:"Allowances"}),tableData:i==null?void 0:i.data,pagination:n,totalRowCount:b,onAddNewClick:N,onEditClick:k,onDeleteClick:E,onPageChange:P,"data-external-id":"allowances"}),e.jsx(Ca,{variant:de.Allowances,createTitle:a.formatMessage({id:"hr.app.page.configuration.payroll.allowances.new-allowance",defaultMessage:"New Allowance"}),editTitle:a.formatMessage({id:"hr.app.page.configuration.payroll.allowances.edit-allowance",defaultMessage:"Edit Allowance"}),open:p,selectedItem:o,isLoading:x||D,onSubmit:A,onClose:F}),o&&e.jsx(va,{variant:de.Allowances,open:d,selectedItem:o,isLoading:v,onSubmit:M,onClose:B})]})},ze=R({cannotDeleteBank:{id:"hr.app.page.configuration.payroll.bank-accounts.form.cannot-delete-bank",defaultMessage:"Cannot delete bank account"},sabBankIsActive:{id:"hr.app.page.configuration.payroll.bank-accounts.form.sab-bank-is-active",defaultMessage:"Saudi Awwal Bank (SAB) is being actively used. To delete the bank, you need to:"},changePaymentMethod:{id:"hr.app.page.configuration.payroll.bank-accounts.form.change-payment-method",defaultMessage:"Change the payment method of the employees who are using this bank in the active payroll cycle."},disconnectBank:{id:"hr.app.page.configuration.payroll.bank-accounts.form.disconnect-bank",defaultMessage:"Disconnect the bank accountâ€™s payroll processing integration"},close:{id:"common.action.close",defaultMessage:"Close"}}),ao=U()(a=>({wrapper:{display:"flex",flexDirection:"column",gap:a.spacing(2)},text:{width:"100%",color:a.palette.text.primary},icon:{width:48,height:48,borderRadius:28,border:`8px solid ${xe.red[50]}`,background:a.palette.error.light,display:"flex",alignContent:"center",alignItems:"center"}})),to=({open:a,handleCloseDialog:t})=>{const o=T(),{classes:s}=ao();return e.jsx(J,{open:a,fullWidth:!0,maxWidth:"sm",title:e.jsxs(ye,{display:"flex",alignContent:"center",alignItems:"center",gap:2,children:[e.jsx("div",{className:s.icon,children:e.jsx($e,{color:"error",fontSize:"small"})}),o.formatMessage(ze.cannotDeleteBank)]}),confirmButton:{text:o.formatMessage(ze.close),onClick:t},showCloseButton:!0,onClose:t,content:e.jsx("div",{className:s.wrapper,children:e.jsxs("div",{children:[e.jsx(S,{variant:"body1",className:s.text,children:o.formatMessage(ze.sabBankIsActive)}),e.jsxs("ul",{children:[e.jsx("li",{children:e.jsx(S,{variant:"body1",className:s.text,children:o.formatMessage(ze.changePaymentMethod)})}),e.jsx("li",{children:e.jsx(S,{variant:"body1",className:s.text,children:o.formatMessage(ze.disconnectBank)})})]})]})})})},no="/react-ts-app/assets/CreditCardIllustration-HaQgLlpj__cache.svg",so=a=>e.jsx(rn,{url:no,...a}),Oe=R({addBankAccount:{id:"hr.app.page.configuration.payroll.bank-accounts.form.new-account-sab-success",defaultMessage:"SAB account added successfully"},close:{id:"hr.app.page.configuration.payroll.bank-accounts.form.close",defaultMessage:"Close"},explore:{id:"hr.app.page.configuration.payroll.bank-accounts.form.explore",defaultMessage:"Explore"},startWithSab:{id:"hr.app.page.configuration.payroll.bank-accounts.form.start-with-sab",defaultMessage:"Start processing payroll with SAB"},sabDetails:{id:"hr.app.page.configuration.payroll.bank-accounts.form.sab-success-details",defaultMessage:"You can integrate your SAB account and start processing payroll directly through Bayzat"}}),oo=U()(a=>({wrapper:{display:"flex",flexDirection:"column",alignItems:"center"},text:{textAlign:"center",width:"100%",color:a.palette.text.primary},icon:{width:48,height:48,borderRadius:28,border:`4px solid ${xe.green[50]}`,background:a.palette.success.light,display:"flex",justifyContent:"center",alignContent:"center",alignItems:"center"}})),io=({handleCloseDialog:a})=>{const t=T(),{classes:o}=oo(),s=ae();return e.jsx(J,{open:!0,fullWidth:!0,maxWidth:"sm",title:e.jsxs(ye,{display:"flex",alignContent:"center",alignItems:"center",gap:2,children:[e.jsx(cn,{color:"success",Icon:la}),t.formatMessage(Oe.addBankAccount)]}),confirmButton:{text:t.formatMessage(Oe.explore),onClick:()=>{s.push("/settings/integrations")}},cancelButton:{show:!0,text:t.formatMessage(Oe.close),onClick:a},showCloseButton:!0,onClose:a,content:e.jsxs("div",{className:o.wrapper,children:[e.jsx(so,{size:230,alt:"sab-success-name"}),e.jsxs("div",{children:[e.jsx(S,{variant:"h4",className:o.text,children:t.formatMessage(Oe.startWithSab)}),e.jsx(S,{variant:"body1",className:o.text,children:t.formatMessage(Oe.sabDetails)})]})]})})},W=R({otherBank:{id:"hr.app.page.configuration.payroll.bank-accounts.other-bank",defaultMessage:"Other Bank"},attentionRequired:{id:"hr.app.page.configuration.payroll.bank-accounts.attention",defaultMessage:"Attention required"},edit:{id:"common.action.edit",defaultMessage:"Edit"},delete:{id:"common.action.delete",defaultMessage:"Delete"},bankName:{id:"hr.app.page.configuration.payroll.bank-accounts.bank-name",defaultMessage:"Bank Name"},ibanAccountNumber:{id:"hr.app.page.configuration.payroll.bank-accounts.iban-account-number",defaultMessage:"IBAN/Account Number"},newBankAccount:{id:"hr.app.page.configuration.payroll.bank-accounts.bank-account-create-success",defaultMessage:"New bank account has been added successfully."},bankAccountUpdated:{id:"hr.app.page.configuration.payroll.bank-accounts.bank-account-update-success",defaultMessage:"Bank account has been updated successfully."},bankAccountDeleted:{id:"hr.app.page.configuration.payroll.bank-accounts.bank-account-delete-success",defaultMessage:"Bank account has been deleted successfully."},bankAccounts:{id:"hr.app.page.configuration.payroll.bank-accounts.header",defaultMessage:"Bank Accounts"},noBankAccounts:{id:"hr.app.page.configuration.payroll.bank-accounts.no-accounts",defaultMessage:"No Bank Accounts yet. Please create one"},addNew:{id:"hr.app.page.configuration.add-new",defaultMessage:"Add new"},processViaSAB:{id:"hr.app.page.configuration.payroll.bank-accounts.process-via-sab",defaultMessage:"Process Payroll via SAB"},processingViaSAB:{id:"hr.app.page.configuration.payroll.bank-accounts.processing-via-sab",defaultMessage:"Processing via SAB"},notConnected:{id:"hr.app.page.configuration.payroll.bank-accounts.not-connected",defaultMessage:"Not connected"},whiteListPopup:{id:"hr.app.page.configuration.payroll.bank-accounts.transfermate.topup.detail",defaultMessage:"Use this account to top-up the global account and pay employee's salaries via TransferMate"},whiteListedAccount:{id:"hr.app.page.configuration.payroll.bank-accounts.transfermate.white-list.label",defaultMessage:"Whitelisted bank account in TransferMate"},whiteListedAccountWithLink:{id:"hr.app.page.configuration.payroll.bank-accounts.transfermate.white-list.label.link",defaultMessage:"Whitelisted bank account in <a>TransferMate</a>"}}),lo=U()(a=>({criticalColor:{backgroundColor:a.palette.error.light,color:a.palette.error.main},successColor:{backgroundColor:a.palette.success.light},successFontColor:{color:a.palette.success.main}})),ro=({row:a})=>{var l,p;const{classes:t}=lo(),o=T(),s=Qe(un);let n;return s?n=o.formatMessage(W.whiteListedAccountWithLink,{a:u=>e.jsx(pa,{app:V.APP_BANK_TRANSFERS,to:"/accounts",children:u})}):n=o.formatMessage(W.whiteListedAccount),e.jsxs(w,{container:!0,direction:"column",spacing:.5,children:[e.jsxs(w,{container:!0,spacing:3,children:[e.jsx(w,{children:a.bankName??o.formatMessage(W.otherBank)}),a.iban||a.accountNumber?null:e.jsx(w,{children:e.jsx(Se,{className:t.criticalColor,label:o.formatMessage(W.attentionRequired),icon:e.jsx($e,{className:t.criticalColor,fontSize:"x-small"}),size:"small"})}),((l=a.integration)==null?void 0:l.integrator)===Ge.Sab&&a.integration.active&&e.jsx(w,{children:e.jsx(Se,{className:t.successColor,label:o.formatMessage(W.processingViaSAB),icon:e.jsx(la,{className:t.successFontColor,fontSize:"x-small"})})}),((p=a.integration)==null?void 0:p.integrator)===Ge.Sab&&!a.integration.active&&e.jsx(w,{children:e.jsx(Se,{label:o.formatMessage(W.notConnected)})})]}),a.whiteListedBankId&&e.jsxs(w,{container:!0,direction:"row",spacing:1,children:[e.jsx(w,{children:e.jsx(S,{variant:"body2",color:"textSecondary",children:n})}),e.jsx(w,{marginTop:.25,children:e.jsx(Ra,{title:o.formatMessage(W.whiteListPopup),variant:mn.Dark,children:e.jsx(pn,{color:"action"})})})]})]})},co=({row:a,onEditClick:t,onDeleteClick:o})=>{var u;const s=T(),n=ae(),l=()=>{t(a)},p=()=>{o(a)};return e.jsxs(xa,{children:[((u=a.integration)==null?void 0:u.integrator)===Ge.Sab&&!a.integration.active&&e.jsx(Z,{onClick:()=>n.push("/settings/integrations"),children:e.jsx(S,{variant:"body2",children:s.formatMessage(W.processViaSAB)})}),e.jsx(fe,{title:s.formatMessage(W.edit),onClick:l,size:"small",children:e.jsx(Ne,{color:"primary"})}),e.jsx(fe,{title:s.formatMessage(W.delete),onClick:p,size:"small",children:e.jsx(Te,{color:"primary"})})]})},uo=()=>{const a=T(),t=bs(),o=ue(),{handleRequestExceptionAlert:s}=Q(),n=z(),{hash:l}=Le(),p=Qe(dn),[u,d]=c.useState(!1),[y,i]=c.useState(!1),[m,h]=c.useState([]),[f,x]=c.useState(void 0),[j,D]=c.useState(!1),[C,v]=c.useState(!1),[b,P]=c.useState(!1),{data:N}=ps({companyId:n}),{data:k}=xs({companyId:n},{enabled:t===Ka.UnitedArabEmirates}),{data:E}=hs({companyId:n},{enabled:t===Ka.KingdomOfSaudiArabia}),{mutateAsync:F}=gs(),{mutateAsync:B}=ys(),{mutateAsync:A,isPending:M}=fs(),r=c.useCallback(()=>{d(!0),_({event:"configuration.payroll.bank-accounts.click_new"})},[]),g=c.useCallback(()=>{d(!1),x(void 0)},[]),L=c.useCallback(I=>{x(I),r(),_({event:"configuration.payroll.bank-accounts.click_edit",bankAccountName:I.bankName})},[r]),Ce=c.useCallback(I=>{x(I),i(!0),_({event:"configuration.payroll.bank-accounts.click_delete",bankAccountName:I.bankName})},[]),X=c.useCallback(()=>{x(void 0),i(!1)},[]);c.useEffect(()=>{N&&h(N)},[N]);const ja=c.useMemo(()=>[{title:a.formatMessage(W.bankName),dataExternalId:"bank-name",dataIndex:"bankName",align:"left",proportion:7,accessor:(I,$)=>e.jsx(ro,{row:$},$.id)},{title:a.formatMessage(W.ibanAccountNumber),dataExternalId:"iban",dataIndex:"iban",align:"left",proportion:3,accessor:(I,$)=>e.jsx(S,{variant:"body2",children:$.iban??$.accountNumber})},{title:"",dataExternalId:"actions",dataIndex:"id",align:"right",proportion:2,accessor:(I,$)=>e.jsx(co,{onEditClick:L,onDeleteClick:Ce,row:$})}],[a,L,Ce]),ka=c.useCallback(async I=>{const $=I.accountType===Ue.UaeBank||I.accountType===Ue.KsaBank?{data:{accountType:I.accountType,localCountryBankDetails:Ja(I)},urlParams:{companyId:n}}:{data:{accountType:I.accountType,otherCountryBankDetails:Xa(I)},urlParams:{companyId:n}};try{const oe=await F($);g(),h(Ie=>[...Ie,{...oe}]),_({event:`configuration.payroll.bank-accounts.confirm_new-${I.accountType===Ue.UaeBank?"uae-bank":"outside-uae-bank"}`,bankAccountName:I.bankName}),o.success({message:a.formatMessage(W.newBankAccount)}),j&&v(!0)}catch(oe){s(oe)}},[n,F,g,o,a,j,s]),Da=c.useCallback(async I=>{const $=I.accountType===Ue.UaeBank||I.accountType===Ue.KsaBank?{data:{accountType:I.accountType,localCountryBankDetails:Ja(I)},urlParams:{companyId:n,companyBankDetailsId:I.id}}:{data:{accountType:I.accountType,otherCountryBankDetails:Xa(I)},urlParams:{companyId:n,companyBankDetailsId:I.id}};try{const oe=await B($);g(),h(Ie=>Ie.map(_e=>_e.id===I.id?{...oe}:_e)),_({event:"configuration.payroll.bank-accounts.confirm_edit",bankAccountName:I.bankName}),o.success({message:a.formatMessage(W.bankAccountUpdated)})}catch(oe){s(oe)}},[n,B,g,o,a,s]),Sa=c.useCallback(async()=>{var I,$,oe,Ie;if(((I=f==null?void 0:f.integration)==null?void 0:I.integrator)===Ge.Sab&&(($=f==null?void 0:f.integration)!=null&&$.active))P(!0),i(!1);else try{await A({urlParams:{companyId:n,companyBankDetailsId:f.id}}),_({event:"configuration.payroll.bank-accounts.confirm_delete",bankAccountName:f.bankName}),X(),h(_e=>_e.filter(tn=>tn.id!==f.id)),((oe=f==null?void 0:f.integration)==null?void 0:oe.integrator)===Ge.Sab&&((Ie=f==null?void 0:f.integration)==null?void 0:Ie.active)===!1&&o.success({message:a.formatMessage(W.bankAccountDeleted)})}catch(_e){s(_e)}},[f,A,n,X,o,a,s]);return e.jsx(ha,{scroll:l==="#bank-accounts",children:e.jsxs(Me,{title:e.jsx(be,{title:a.formatMessage(W.bankAccounts)}),"data-external-id":"bank-accounts-accordion",expandedByDefault:l==="#bank-accounts",children:[e.jsxs(w,{container:!0,spacing:2,children:[e.jsx(w,{size:12,children:e.jsx(he,{rowIdentifierIndex:"id",columns:ja,data:m,emptyState:a.formatMessage(W.noBankAccounts),variant:"outlined"})}),e.jsx(w,{size:12,children:e.jsx(Z,{variant:"contained",color:"primary","data-external-id":"new-bank-account-button",onClick:r,children:a.formatMessage(W.addNew)})})]}),e.jsx(Ms,{open:u,onCloseDialog:g,bankAccount:f,onSubmit:f?Da:ka,tradeLicenses:k??[],commercialRegistrations:E??[],handleSabIntegration:D}),y&&e.jsx(Cs,{isLoading:M,handleClose:X,handleSubmit:Sa,bankName:f==null?void 0:f.bankName}),p&&C&&e.jsx(io,{handleCloseDialog:()=>v(!1)}),e.jsx(to,{handleCloseDialog:()=>P(!1),open:b})]})})},mo=()=>{const a=T(),t=z(),[o,s]=c.useState(),[n,l]=c.useState({limit:10,offset:0}),[p,u]=c.useState(!1),[d,y]=c.useState(!1),{data:i,refetch:m,isRefetching:h}=vt({companyId:t},{filters:{payAdjustmentType:"deduction"},pagination:n}),{mutateAsync:f,isPending:x}=jt(),{mutateAsync:j,isPending:D}=kt(),{mutateAsync:C,isPending:v}=Dt(),b=c.useMemo(()=>{const r=i?i.pagination.total:0;return!h&&i&&r<=n.offset&&l({limit:10,offset:0}),r},[i,n.offset,h]),P=r=>{l(g=>({...g,offset:g.limit*r}))},N=()=>{s(void 0),u(!0),_({event:"configuration.payroll.deductions.click_new"})},k=r=>{s(r),u(!0),_({event:"configuration.payroll.deductions.click_edit",itemId:r.id,itemName:r.name})},E=r=>{s(r),y(!0),_({event:"configuration.payroll.deductions.click_delete",itemId:r.id,itemName:r.name})},F=c.useCallback(()=>{u(!1)},[]),B=c.useCallback(()=>{y(!1)},[]),A=c.useCallback(async(r,g)=>{try{return g?await f({data:{name:r},urlParams:{companyId:t,id:g}}):await j({data:{name:r,payAdjustmentType:Ct.Deduction},urlParams:{companyId:t}})}finally{await m(),u(!1),s(void 0)}},[t,f,j,m]),M=c.useCallback(async r=>{try{return await C({urlParams:{companyId:t,id:r}})}finally{await m(),y(!1),s(void 0)}},[t,C,m]);return e.jsxs(e.Fragment,{children:[e.jsx(Ma,{title:a.formatMessage({id:"hr.app.page.configuration.payroll.deductions.header",defaultMessage:"Deductions"}),tableData:i==null?void 0:i.data,pagination:n,totalRowCount:b,onAddNewClick:N,onEditClick:k,onDeleteClick:E,onPageChange:P,"data-external-id":"deductions"}),e.jsx(Ca,{variant:de.Deductions,open:p,createTitle:a.formatMessage({id:"hr.app.page.configuration.payroll.deductions.new-deduction",defaultMessage:"New Deduction"}),editTitle:a.formatMessage({id:"hr.app.page.configuration.payroll.deductions.edit-deduction",defaultMessage:"Edit Deduction"}),selectedItem:o,isLoading:x||D,onSubmit:A,onClose:F}),o&&e.jsx(va,{variant:de.Deductions,open:d,selectedItem:o,isLoading:v,onSubmit:M,onClose:B})]})},ve=R({subtitle:{id:"hr.payroll.eos.configure-paid-leave-type.subtitle",defaultMessage:"Configure paid leave types eligible for encashment during end of service"},dailyWageConfiguredInSettingAlert:{id:"hr.payroll.daily-rate-calculator.daily-wage-configured-in-setting-alert",defaultMessage:"Daily rate is configured in daily wage calculation setting"},salaryComponent:{id:"hr.payroll.daily-rate-calculator.salary-component",defaultMessage:"Salary Component"},monthCalculation:{id:"hr.payroll.daily-rate-calculator.month-calculation",defaultMessage:"Month calculation"},numberOfDays:{id:"hr.payroll.daily-rate-calculator.number-of-days",defaultMessage:"Number of days"},howDailyRateCalculated:{id:"hr.payroll.daily-rate-calculator.how-daily-rate-calculated",defaultMessage:"How daily rate is calculated"},view:{id:"common.action.view",defaultMessage:"View"}}),po=U()(a=>({subtitle:{marginBottom:a.spacing(3)},alert:{marginBottom:a.spacing(1)},accordion:{marginBottom:a.spacing(2)},accordionDetails:{paddingBottom:0},accordionDetailsWrapper:{display:"flex",justifyContent:"center",alignItems:"center",columnGap:a.spacing(1)},accordionSummary:{borderBottom:`1px solid ${a.palette.divider}`,"& .MuiAccordionSummary-content":{margin:0}},checkbox:{marginTop:a.spacing(2)}})),go=({isFieldsDisabled:a,onViewClick:t})=>{const{classes:o}=po(),s=T(),n=se(Ke),l=se(ba),p=rt(),u=Ba({subscription:{values:!0,dirty:!0}}),d=y=>{p.change(`eosConfigurationRecords[${y}].selection`,!u.values.eosConfigurationRecords[y].selection)};return e.jsxs(e.Fragment,{children:[e.jsx(S,{variant:"body1",color:"textSecondary",className:o.subtitle,"data-external-id":"content-subtitle",children:s.formatMessage(ve.subtitle)}),a&&e.jsx(pe,{withIcon:!0,variant:ge.Info,"data-external-id":"info-alert",message:s.formatMessage(ve.dailyWageConfiguredInSettingAlert),className:o.alert,primaryAction:{onClick:t,text:s.formatMessage(ve.view)}}),e.jsx(ws,{name:"eosConfigurationRecords",children:({fields:y})=>y.map((i,m)=>e.jsx(c.Fragment,{children:e.jsxs(ct,{elevation:0,expanded:u.values.eosConfigurationRecords[m].selection,variant:"outlined",onChange:()=>d(m),className:o.accordion,"data-external-id":"accordion",children:[e.jsx(dt,{expandIcon:e.jsx(ut,{fontSize:"x-small"}),className:o.accordionSummary,"data-external-id":"accordion-summary",children:e.jsx(Nt,{name:`${i}.selection`,label:u.values.eosConfigurationRecords[m].name,formControlClass:o.checkbox,onChange:h=>{_({event:`configuration.payroll.eos.${h?"add":"remove"}_eligibility`,itemId:u.values.eosConfigurationRecords[m].key,itemName:u.values.eosConfigurationRecords[m].name})}})}),e.jsxs(mt,{className:o.accordionDetails,"data-external-id":"accordion-details",children:[e.jsx(S,{variant:"h6",children:s.formatMessage(ve.howDailyRateCalculated)}),e.jsxs("div",{className:o.accordionDetailsWrapper,children:[e.jsx(qe,{label:s.formatMessage(ve.salaryComponent),fullWidth:!0,name:`${i}.salaryComponent`,options:ht,renderOption:l,disabled:a}),"/",e.jsx(qe,{fullWidth:!0,label:s.formatMessage(ve.monthCalculation),name:`${i}.monthCalculation`,options:za,renderOption:n,disabled:a}),u.values.eosConfigurationRecords[m].monthCalculation===K.CustomDays&&e.jsx(Qa,{label:s.formatMessage(ve.numberOfDays),name:`${i}.customDays`,fullWidth:!0,min:1,decimalPlaces:2,disabled:a})]})]})]})},i))})]})},tt=R({title:{id:"hr.payroll.eos.configure-paid-leave-type.title",defaultMessage:"End of Service Eligibility"},save:{id:"common.action.save",defaultMessage:"Save"}}),yo=({open:a,eosConfigurationRecords:t,isFieldsDisabled:o,onViewClick:s,onSubmit:n,onClose:l})=>{const p=T(),u=c.useMemo(()=>({eosConfigurationRecords:(t==null?void 0:t.map(i=>({key:i.id,name:i.name,selection:i.selected,salaryComponent:i.dailyRateSalaryComponent,monthCalculation:i.dailyRateDayType,customDays:i.customDays})))??[]}),[t]),d=c.useCallback(y=>{const i=y.eosConfigurationRecords.filter(m=>m.selection===!0).map(m=>({id:m.key,dailyRateSalaryComponent:m.salaryComponent,dailyRateDayType:m.monthCalculation,customDays:m.customDays}));n(i)},[n]);return e.jsx(He,{"data-external-id":"end-of-service-eligibility-configure-dialog",initialValues:u,onSubmit:d,mutators:{...Ss},render:({handleSubmit:y})=>e.jsx(J,{open:a,isPending:t===void 0,maxWidth:"md",fullWidth:!0,title:p.formatMessage(tt.title),content:e.jsx(go,{isFieldsDisabled:o,onViewClick:s}),confirmButton:{text:p.formatMessage(tt.save),onClick:y},cancelButton:{show:!0,onClick:l}})})},Re=R({updatedSuccessfully:{id:"hr.settings.company.update-item",defaultMessage:"Item has been updated successfully."},paidLeaveTypes:{id:"hr.app.page.configuration.payroll.eos-eligibility.paid-leave-types",defaultMessage:"Paid Leave Types"},dailyRateBasedOn:{id:"hr.app.page.configuration.payroll.eos-eligibility.based-on",defaultMessage:"Daily rate is calculated based on"},eosEligibility:{id:"hr.app.page.configuration.payroll.eos-eligibility.header",defaultMessage:"End of service eligibility"},noItemsYet:{id:"hr.no-items-yet",defaultMessage:"No items yet."},configure:{id:"hr.app.page.configuration.payroll.eos-eligibility.configure",defaultMessage:"Configure"}}),fo=U()(a=>({childrenContainer:{display:"flex",flexDirection:"column",flexGrow:1},configureButton:{alignSelf:"flex-start",marginTop:a.spacing(2)}})),ho=({eosEligibileLeaveTypesData:a,isFieldsDisabled:t,onRefetch:o})=>{const{classes:s}=fo(),n=T(),l=z(),{hash:p}=Le(),u=ae(),d=At(),{handleRequestExceptionAlert:y}=Q(),i=se(ba),m=se(Ke),h=ue(),[f,x]=c.useState(!1),{mutateAsync:j,isPending:D}=zt(),C=c.useCallback(async N=>{try{await j({urlParams:{companyId:l},data:N}),_({event:"configuration.payroll.eos.save_configuration"});const k=N.every(M=>M.dailyRateSalaryComponent===da.Basic),E=N.every(M=>M.dailyRateSalaryComponent===da.BasicAllowance),F=N.some(M=>M.dailyRateDayType===K.CalendarDays),B=N.some(M=>M.dailyRateDayType===K.CustomDays),A=N.some(M=>M.dailyRateDayType===K.WorkingDays);d({event:"configure-leave-encashment-eos.click_submit",basicOnlySalaryComponent:k,basicAllowancesOnlySalaryComponent:E,atLeastOneCalendarDays:F,atLeastOneCustomDays:B,atLeastOneWorkingDays:A}),h.success({message:n.formatMessage(Re.updatedSuccessfully)})}catch(k){y(k)}finally{await o(),x(!1)}},[j,l,d,h,n,y,o]),v=c.useMemo(()=>[{title:n.formatMessage(Re.paidLeaveTypes),dataExternalId:"paid-leave-types",dataIndex:"paidLeaveTypes",align:"left",proportion:1},{title:n.formatMessage(Re.dailyRateBasedOn),dataExternalId:"daily-rate-calculation-type",dataIndex:"dailyRateSalaryComponent",align:"left",proportion:1,accessor:(N,k)=>`${i(k.dailyRateSalaryComponent)} / ${m(k.dailyRateDayType)}`}],[n,m,i]),b=c.useMemo(()=>{var N;return((N=a==null?void 0:a.filter(k=>k.selected))==null?void 0:N.map(k=>({id:k.id,paidLeaveTypes:k.name,dailyRateSalaryComponent:k.dailyRateSalaryComponent,dailyRateDayType:k.dailyRateDayType})))??[]},[a]),P=()=>{x(!1),window.scrollTo({top:0}),u.pushToApp(V.APP_HRADMIN,"/settings/payroll#daily-wage"),window.location.reload()};return e.jsxs(e.Fragment,{children:[e.jsx(Me,{title:e.jsx(be,{title:n.formatMessage(Re.eosEligibility)}),expandedByDefault:p==="#eos-eligibility","data-external-id":"end-of-service-eligibility-accordion",children:e.jsxs("div",{className:s.childrenContainer,children:[e.jsx(he,{columns:v,data:b,emptyState:n.formatMessage(Re.noItemsYet),variant:"outlined"}),e.jsx(Z,{className:s.configureButton,variant:"contained",onClick:()=>{x(!0),_({event:"configuration.payroll.eos.click_configure"})},color:"primary",disabled:(a==null?void 0:a.length)===0||D,"data-external-id":"configure-button",children:n.formatMessage(Re.configure)})]})}),f&&e.jsx(yo,{open:f,eosConfigurationRecords:a,isFieldsDisabled:t,onViewClick:P,onSubmit:async N=>{C(N)},onClose:()=>{x(!1),_({event:"configuration.payroll.eos.cancel_configuration"})}})]})},xo=(a,t)=>{switch(t){case Pe.PayrollProcessing:return a.formatMessage({id:"enum.payroll-template.file-type.processing",defaultMessage:"Payroll processing"});case Pe.Reporting:return a.formatMessage({id:"enum.payroll-template.file-type.reporting",defaultMessage:"Reporting template"})}},bo=gn(xo),Mo=U()(a=>({emptyState:{textAlign:"center",borderRadius:a.shape.borderRadius,border:`1px solid ${xe.grey[300]}`,padding:a.spacing(4),p:{marginTop:a.spacing(3),marginBottom:a.spacing(3)}},creationButton:{marginTop:a.spacing(1)},switchInput:{marginRight:a.spacing(1)},marginLeft:{marginLeft:a.spacing(1)}})),Co=({fileTemplates:a,refetchTemplates:t,setTemplateToDelete:o,handleCreateFileTemplate:s,loading:n})=>{const l=T(),{classes:p}=Mo(),u=ae(),d=z(),{handleRequestExceptionAlert:y}=Q(),i=ue(),m=se(bo),h=Qe(lt),f=Ha(),{mutateAsync:x}=is(),j=c.useCallback(async(C,v,b)=>{try{f({event:v?"click_activate":"click_deactivate",templateId:C,fileType:b}),await x({urlParams:{companyId:d,templateId:C,active:v}}),t();const P=v?l.formatMessage(Be.activationSuccess):l.formatMessage(Be.deactivationSuccess);i.success({message:P})}catch(P){y(P)}},[x,d,t,i,y,f,l]),D=c.useMemo(()=>[{title:l.formatMessage({id:"hr.settings.payroll.templates.file-name",defaultMessage:"File Name"}),dataExternalId:"name",dataIndex:"name",align:"left",proportion:1,accessor(C,v){return e.jsxs(e.Fragment,{children:[v.name,v.status===Ia.Draft&&e.jsx(yn,{variant:"neutral",label:l.formatMessage({id:"common.draft",defaultMessage:"Draft"}),className:p.marginLeft})]})}},{title:l.formatMessage({id:"hr.settings.payroll.templates.table.template-type",defaultMessage:"Template Type"}),dataExternalId:"file-type",dataIndex:"fileType",align:"left",proportion:1,accessor(C,v){return m(v.fileType)}},{title:l.formatMessage({id:"hr.settings.payroll.templates.table.available-format",defaultMessage:"Available Format"}),dataExternalId:"availableFormat",dataIndex:"fileFormats",align:"left",proportion:1,accessor(C,v){var b,P;return(P=(b=v==null?void 0:v.fileFormats)==null?void 0:b.join(", "))==null?void 0:P.toUpperCase()}},{title:l.formatMessage({id:"common.actions",defaultMessage:"Actions"}),dataExternalId:"actions",dataIndex:"id",align:"right",proportion:1.5,accessor(C,v){return e.jsxs(ye,{alignItems:"center",display:"flex",justifyContent:"flex-end",children:[v.status===Ia.Draft?e.jsx(Ra,{placement:"top",title:l.formatMessage({id:"hr.settings.payroll.file-template.table.tool-tip.draft-template",defaultMessage:"Template in draft can't be activated"}),children:e.jsx("span",{children:e.jsx(Ee,{labelPlacement:"start",className:p.switchInput,text:e.jsx(S,{color:"success",variant:"body2",children:l.formatMessage({id:"common.inactive",defaultMessage:"Inactive"})}),checked:v.active})})}):e.jsx(Ee,{onChange:b=>j(v.id,b,v.fileType),labelPlacement:"start",className:p.switchInput,text:e.jsx(S,{color:v.active?"success.main":"inherit",variant:"body2",children:l.formatMessage(v.active?{id:"common.active",defaultMessage:"Active"}:{id:"common.inactive",defaultMessage:"Inactive"})}),checked:v.active}),e.jsx(we,{onClick:()=>{f({event:"click_edit",templateId:v.id,fileType:v.fileType}),u.push(`/settings/payroll/templates/${v.id}`)},size:"small",children:e.jsx(Ne,{color:"primary"})}),e.jsx(we,{onClick:()=>{f({event:"click_delete",templateId:v.id,fileType:v.fileType}),o(v.id)},size:"small",children:e.jsx(Te,{color:"primary"})})]})}}],[l,p,j,m,o,u,f]);return!n&&!(a!=null&&a.length)?e.jsxs("div",{className:p.emptyState,children:[e.jsx(S,{variant:"h5",children:l.formatMessage(Be.title)}),e.jsx(S,{variant:"body2",children:l.formatMessage(Be.description)}),h&&e.jsx(Z,{variant:"contained",onClick:s,children:l.formatMessage(Be.createPayrollFileTemplate)})]}):e.jsxs(e.Fragment,{children:[e.jsx(he,{columns:D,data:a??[],variant:"outlined",loading:n}),h&&e.jsx(Z,{className:p.creationButton,variant:"contained",onClick:s,children:l.formatMessage(Be.createPayrollFileTemplate)})]})},Be=R({activationSuccess:{id:"hr.settings.payroll.file-template.activation-success",defaultMessage:"Template was activated successfully."},deactivationSuccess:{id:"hr.settings.payroll.file-template.deactivation-success",defaultMessage:"Template was deactivated successfully."},title:{id:"hr.settings.payroll.templates.empty-state.title",defaultMessage:"No templates to show"},description:{id:"hr.settings.payroll.templates.empty-state.description",defaultMessage:"You can generate payroll templates with system information and custom data by using the button below."},createPayrollFileTemplate:{id:"hr.app.page.configuration.add-new",defaultMessage:"Add new"}}),vo=({companyId:a,templateId:t,sheetName:o})=>`/companies/${a}/payroll-templates/${t}/excel-sheet?sheetName=${o}`,Ot=()=>{const a=jo.useMocker();return Ea({toURLFunction:vo,mapResponseFunction:Ae(Ts),options:{mocker:a}})},jo=re(Ot),ko=({open:a,onClose:t,onBack:o,file:s,fileType:n})=>{var x,j;const l=T(),{handleRequestExceptionAlert:p}=Q(),u=z(),d=ae(),{mutateAsync:y,isPending:i}=Ot(),[m,h]=c.useState((x=s.sheetNames)==null?void 0:x[0]),f=c.useCallback(async()=>{try{await y({urlParams:{companyId:u,templateId:s.templateId,sheetName:m}}),d.pushToApp(V.APP_HRADMIN,`/settings/payroll/templates/${s.templateId}`)}catch(D){p(D)}},[y,s,d,p,u,m]);return e.jsx(J,{open:a,showCloseButton:!0,onClose:t,maxWidth:"md",isPending:i,autoClose:"never",title:n===Pe.PayrollProcessing?l.formatMessage({id:"hr.settings.payroll.templates.upload-dialog.title.processing",defaultMessage:"Create a template for payroll processing"}):l.formatMessage({id:"hr.settings.payroll.templates.upload-dialog.title.reporting",defaultMessage:"Create a template for payroll reporting"}),confirmButton:{text:l.formatMessage(je.createTemplate),onClick:f},cancelButton:{text:l.formatMessage(je.back),onClick:o,show:!0},content:e.jsxs(w,{container:!0,children:[e.jsx(w,{mb:2,size:12,children:e.jsx(S,{variant:"h5",children:l.formatMessage(je.dataLoadedFileName,{fileName:s.name})})}),e.jsx(w,{size:6,children:e.jsx(It,{fileName:s.name,status:_t.Uploaded})}),e.jsxs(w,{mt:2,size:12,children:[e.jsxs(ye,{display:"flex",children:[e.jsx(la,{color:"success",fontSize:"x-small"}),e.jsx(S,{ml:1,children:l.formatMessage(je.fileRead)})]}),e.jsxs(ye,{display:"flex",mt:1,children:[e.jsx(la,{color:"success",fontSize:"x-small"}),e.jsx(S,{ml:1,children:l.formatMessage(je.dataLoaded)})]})]}),e.jsxs(e.Fragment,{children:[e.jsx(w,{mt:4,size:12,children:(j=s.sheetNames)!=null&&j.length&&s.sheetNames.length>1?e.jsx(S,{variant:"h6",children:l.formatMessage(je.multipleSheets)}):null}),e.jsx(w,{size:6,children:e.jsx(Rt,{label:l.formatMessage(je.sheetName),options:s.sheetNames,fullWidth:!0,value:m,onChange:D=>{h(D)}})})]})]})})},je=R({dataLoadedFileName:{id:"hr.settings.payroll.file-templates.excel-import.data-loaded-file-name",defaultMessage:"Data loaded from {fileName}"},back:{id:"common.action.back",defaultMessage:"Back"},createTemplate:{id:"hr.settings.payroll.file-templates.create-template",defaultMessage:"Create Template"},fileRead:{id:"hr.settings.payroll.file-templates.excel-import.file-read",defaultMessage:"File read and analyzed"},dataLoaded:{id:"hr.settings.payroll.file-templates.excel-import.data-loaded",defaultMessage:"Data loaded"},multipleSheets:{id:"hr.settings.payroll.file-templates.excel-import.multiple-sheets",defaultMessage:"The selected file has multiple sheets, please select the sheet you want to import"},sheetName:{id:"hr.settings.payroll.file-templates.excel-import.sheet-name",defaultMessage:"Sheet Name"}});function Do({file:a}){const t=new FormData;return t.append("file",a),t}function So(a){const t={};return t.sheetNames=a.sheet_names,t.templateId=a.template_id,t}const wo=({companyId:a,fileType:t})=>`/companies/${a}/payroll-templates/file-import?file-type=${Ga(t)}`,Wt=()=>{const a=Po.useMocker();return Ea({toURLFunction:wo,mapRequestFunction:Ye(Do),mapResponseFunction:Ae(So),options:{mocker:a}})},Po=re(Wt);function To(a){const t={};return a.global_templates&&(t.globalTemplates=a.global_templates.map(o=>bt(o))),t.language=fn(a.language),t}const Ao=({companyId:a,fileType:t})=>`/companies/${a}/payroll-templates/global/file-type/${t}`,No=({companyId:a,templateId:t})=>`/companies/${a}/payroll-templates/global/${t}/selection`,Vt=a=>{const t=Io.useMocker();return it({toURLFunction:Ao,mapResponseFunction:Oa(To),options:{mocker:t}})(a)},Gt=()=>{const a=_o.useMocker();return Ea({toURLFunction:No,mapRequestFunction:Ye(ss),mapResponseFunction:Ae(bt),options:{mocker:a}})},Io=re(Vt),_o=re(Gt),Ro=U()(a=>({paragraphSpacing:{marginTop:a.spacing(1),marginBottom:a.spacing(1)},predefineTemplate:{paddingTop:a.spacing(3),paddingRight:a.spacing(6),borderRight:`1px solid ${xe.grey[200]}`},disableSelection:{opacity:.5},customTemplate:{paddingTop:a.spacing(3),paddingBottom:a.spacing(3),paddingLeft:a.spacing(6)},actions:{display:"flex",justifyContent:"space-between",padding:`${a.spacing(1)} ${a.spacing(4)}`}})),Bo=({open:a,onClose:t,onBackClick:o,onExcelUploadSuccess:s,fileType:n})=>{const{cx:l,classes:p}=Ro(),u=T(),d=z(),y=ae(),{handleRequestExceptionAlert:i}=Q(),m=Ha(),{data:h}=Vt({companyId:d,fileType:Ga(n)}),{mutateAsync:f,isPending:x}=Gt(),{mutateAsync:j,isPending:D}=Wt(),[C,v]=c.useState(null),[b,P]=c.useState(null),N=c.useMemo(()=>{var r;const M=hn();return((r=h==null?void 0:h.find(g=>g.language===M))==null?void 0:r.globalTemplates)??[]},[h]),k=c.useCallback(async()=>{try{m({event:"file-upload.click_continue"});const{templateId:M}=await j({data:{file:b==null?void 0:b[0]},urlParams:{companyId:d,fileType:n}});y.pushToApp(V.APP_HRADMIN,`/settings/payroll/templates/${M}`)}catch(M){i(M)}},[m,i,b,d,y,n,j]),E=c.useCallback(async()=>{try{m({event:"file-upload.click_continue"});const M=await j({data:{file:b==null?void 0:b[0]},urlParams:{companyId:d,fileType:n}});s({...M,name:b[0].name})}catch(M){i(M)}},[n,d,b,i,s,m,j]),F=c.useCallback(async()=>{try{if(!C)return;m({event:"file-upload.click_continue"});const M=await f({data:C,urlParams:{templateId:C.id,companyId:d}});y.push(`/settings/payroll/templates/${M.id}`)}catch(M){i(M)}},[C,d,f,y,i,m]),B=c.useCallback(()=>{if(!(b!=null&&b.length)){F();return}b[0].name.toLowerCase().endsWith(".csv")?k():E()},[b,F,k,E]),A=D||x;return e.jsx(J,{open:a,onClose:A?pt.noop:t,isPending:A,showCloseButton:!0,maxWidth:"md",title:n===Pe.PayrollProcessing?u.formatMessage({id:"hr.settings.payroll.templates.upload-dialog.title.processing",defaultMessage:"Create a template for payroll processing"}):u.formatMessage({id:"hr.settings.payroll.templates.upload-dialog.title.reporting",defaultMessage:"Create a template for payroll reporting"}),cancelButton:{text:u.formatMessage(We.back),onClick:o,disabled:A,show:!0},confirmButton:{text:u.formatMessage(We.continue),onClick:B,disabled:!C&&!b},autoClose:"never",content:e.jsxs(w,{container:!0,mt:2,children:[e.jsxs(w,{className:l(p.predefineTemplate,b&&p.disableSelection),size:6,children:[e.jsx(S,{variant:"h5",children:u.formatMessage(We.title)}),e.jsx(S,{variant:"body2",color:"textSecondary",className:p.paragraphSpacing,children:u.formatMessage(We.description)}),e.jsx(ye,{onClick:()=>m({event:"file-selector.click"}),children:e.jsx(Rt,{disabled:!!b,fullWidth:!0,"data-external-id":"global-templates-list-selection",MenuProps:{disablePortal:!0},label:u.formatMessage(We.selectTemplate),options:N,renderOption:({name:M})=>M,value:C??"",renderValue:M=>M==null?void 0:M.name,onChange:M=>{m({event:"predefined-template.click",templateId:M.id,templateName:M.name}),v(M)}})})]}),e.jsx(w,{className:p.customTemplate,size:6,children:b!=null&&b.length?e.jsx(It,{fileName:b[0].name,status:_t.Attached,actions:[{icon:Te,name:u.formatMessage({id:"common.dropzone-file-uploader.delete",defaultMessage:"Delete"}),onClick:()=>P(null)}]}):e.jsx(ye,{onClick:()=>m({event:"file-upload.click"}),children:e.jsx(As,{withoutFileList:!0,title:u.formatMessage({id:"hr.settings.payroll.templates.processing-template.upload-dialog.custom.title",defaultMessage:"Or upload a file"}),subtitle:u.formatMessage({id:"hr.settings.payroll.templates.processing-template.upload-dialog.custom.description",defaultMessage:"Use a file from your computer and match data points to setup the new template."}),maxFiles:1,fileTypes:[et.Csv,et.Excel],onDropAccepted:M=>{P(M),m({event:"file-upload.success"})},onDropRejected:M=>{M.forEach(r=>i(r))}})})})]})})},We=R({back:{id:"common.action.back",defaultMessage:"Back"},continue:{id:"common.action.continue",defaultMessage:"Continue"},title:{id:"hr.settings.payroll.templates.processing-template.upload-dialog.predefined.title",defaultMessage:"Use a pre-defined template"},description:{id:"hr.settings.payroll.templates.processing-template.upload-dialog.predefined.description",defaultMessage:"Use a pre-built template from the list and customize it"},selectTemplate:{id:"hr.settings.payroll.templates.processing-template.upload-dialog.predefined.select-template",defaultMessage:"Select a template"}}),Eo="/react-ts-app/assets/ProcessingTemplate--WrjMlT-__cache.svg",Fo="/react-ts-app/assets/ReportingTemplate-Y2DAvZR3__cache.svg",Lo=U()(a=>({dialogContent:{padding:0},topDivider:{padding:`${a.spacing(1)} 0`},contentBox:{paddingTop:a.spacing(5),paddingRight:a.spacing(7),paddingBottom:a.spacing(4),paddingLeft:a.spacing(6),button:{svg:{marginLeft:a.spacing(1)}},h5:{color:xe.grey[900]}},divider:{marginRight:a.spacing(6),marginLeft:a.spacing(6)}})),$o=({open:a,onStart:t,onClose:o})=>{const s=T(),{classes:n}=Lo();return e.jsx(J,{open:a,onClose:o,confirmButton:{show:!1},showCloseButton:!0,contentClassName:n.dialogContent,title:s.formatMessage(ke.createPayrollFileTemplates),content:e.jsxs("div",{children:[e.jsx(Za,{className:n.topDivider}),e.jsxs(w,{container:!0,spacing:2,className:n.contentBox,children:[e.jsx(w,{size:2,children:e.jsx("img",{src:Eo,alt:"Processing Template"})}),e.jsxs(w,{size:7.5,children:[e.jsx(S,{variant:"h5",children:s.formatMessage(ke.title)}),e.jsx(S,{children:s.formatMessage(ke.description)})]}),e.jsx(w,{textAlign:"right",size:2,children:e.jsxs(Z,{variant:"contained",onClick:()=>t(Pe.PayrollProcessing),children:[s.formatMessage(ke.start),e.jsx(at,{fontSize:"xx-small"})]})})]}),e.jsx(Za,{className:n.divider}),e.jsxs(w,{container:!0,spacing:2,className:n.contentBox,children:[e.jsx(w,{size:2,children:e.jsx("img",{src:Fo,alt:"Reporting Template"})}),e.jsxs(w,{size:7.5,children:[e.jsx(S,{variant:"h5",children:s.formatMessage(ke.payrollTemplatesDialogReportingTemplateTitle)}),e.jsx(S,{children:s.formatMessage(ke.payrollTemplatesDialogReportingTemplateDescription)})]}),e.jsx(w,{textAlign:"right",size:2,children:e.jsxs(Z,{variant:"contained",onClick:()=>t(Pe.Reporting),children:[s.formatMessage(ke.start),e.jsx(at,{fontSize:"xx-small"})]})})]})]})})},ke=R({createPayrollFileTemplates:{id:"hr.settings.payroll.templates.dialog.create-payroll-file-templates",defaultMessage:"Create payroll templates"},title:{id:"hr.settings.payroll.templates.dialog.processing-template.title",defaultMessage:"Payroll processing template"},description:{id:"hr.settings.payroll.templates.dialog.processing-template.description",defaultMessage:"Usually submitted to banks and exchange houses for payroll processing"},start:{id:"common.action.start",defaultMessage:"Start"},payrollTemplatesDialogReportingTemplateTitle:{id:"hr.settings.payroll.templates.dialog.reporting-template.title",defaultMessage:"Reporting template"},payrollTemplatesDialogReportingTemplateDescription:{id:"hr.settings.payroll.templates.dialog.reporting-template.description",defaultMessage:"Usually used as reports or other systems"}}),Uo=U()(a=>({dialogContent:{textAlign:"center",paddingTop:a.spacing(6),paddingBottom:a.spacing(3),width:560,maxWidth:"90vw",h5:{color:xe.grey[900]}},warningIcon:{fontSize:66,color:a.palette.error.main,marginBottom:a.spacing(2)}})),zo=()=>{const a=T(),{classes:t}=Uo(),o=z(),{handleRequestExceptionAlert:s}=Q(),n=ue(),{state:l}=Le(),p=Ha(),[u,d]=c.useState(!1),[y,i]=c.useState(null),[m,h]=c.useState(!1),[f,x]=c.useState(!1),[j,D]=c.useState(null),[C,v]=c.useState(null),{data:b,refetch:P,isFetching:N,isRefetching:k}=Mt({platformPages:[_a.PayrollTable,_a.Transactions]}),{mutateAsync:E,isPending:F}=ls(),B=l==null?void 0:l.showPayrollTemplate,A=c.useCallback(()=>{D(null),i(null),h(!1),d(!0)},[h,d]),M=c.useCallback(X=>{p({event:`${Ga(X)}.click`}),i(X),h(!0),d(!1)},[i,h,p]),r=c.useCallback(X=>{D(X),h(!1),x(!0)},[D,h,x]),g=c.useCallback(()=>{x(!1),h(!0)},[x,h]),L=c.useCallback(()=>{p({event:"click_new"}),d(!0)},[p]),Ce=c.useCallback(async()=>{try{C&&(p({event:"confirm_delete",templateId:C}),await E({urlParams:{companyId:o,templateId:C}}),n.success({message:a.formatMessage(De.deleteSuccess)}),v(null),await P())}catch(X){s(X)}},[o,C,E,P,n,s,p,a]);return e.jsx(ha,{scroll:B,children:e.jsxs(Me,{expandedByDefault:B,title:e.jsx(be,{"data-external-id":"payroll-file-templates-content",title:a.formatMessage(De.title),subtitle:a.formatMessage(De.subtitle)}),children:[e.jsx(Co,{loading:N&&!k,fileTemplates:b,refetchTemplates:P,setTemplateToDelete:v,handleCreateFileTemplate:L}),e.jsx($o,{open:u,onClose:()=>{i(null),d(!1)},onStart:M}),y&&e.jsx(Bo,{open:m,fileType:y,onClose:()=>{i(null),h(!1)},onBackClick:A,onExcelUploadSuccess:r}),j&&e.jsx(ko,{open:f,onBack:g,onClose:()=>{x(!1),D(null)},file:j,fileType:y}),e.jsxs(Ps,{open:!!C,onClose:()=>v(null),headerLine:!1,divider:!1,classes:{paper:t.dialogContent},children:[e.jsx($e,{className:t.warningIcon,fontSize:"x-small"}),e.jsx(S,{variant:"h5",children:a.formatMessage(De.payrollFileTemplateDeletePromptTitle)}),e.jsx(S,{children:a.formatMessage(De.description)}),e.jsxs(ye,{textAlign:"right",mt:5,children:[e.jsx(Z,{onClick:()=>v(null),disabled:F,children:a.formatMessage(De.cancel)}),e.jsx(Z,{color:"error",variant:"contained",loading:F,loadingPosition:"start",onClick:Ce,children:a.formatMessage(De.delete)})]})]})]})})},De=R({deleteSuccess:{id:"hr.settings.payroll.file-template.delete-success",defaultMessage:"Template was deleted successfully."},title:{id:"hr.settings.payroll.templates.title",defaultMessage:"Payroll Templates"},subtitle:{id:"hr.settings.payroll.templates.subtitle",defaultMessage:"Create, view and customize templates"},payrollFileTemplateDeletePromptTitle:{id:"hr.settings.payroll.file-template.delete-prompt.title",defaultMessage:"Are you sure you want to delete this template?"},description:{id:"hr.settings.payroll.file-template.delete-prompt.description",defaultMessage:"This template will be removed permanently. You cannot undo this action."},cancel:{id:"common.action.cancel",defaultMessage:"Cancel"},delete:{id:"common.action.delete",defaultMessage:"Delete"}}),Oo=U()(a=>({container:{display:"flex",flexDirection:"column"},header:{marginBottom:a.spacing(1.5)}})),Wo=({payrollConfiguration:a})=>{const t=T(),{classes:o}=Oo(),s=z(),{mutateAsync:n}=Ln(),[l,p]=c.useState(!1),[u,d]=c.useState(!1),[y,i]=c.useState(!1);c.useEffect(()=>{p((a==null?void 0:a.automaticallyGeneratePayslipMonthly)??!1),d((a==null?void 0:a.allowEmployeesDownloadPayslip)??!1),i((a==null?void 0:a.allowEmployeesEditPaymentDetails)??!1)},[a]);const m=c.useCallback(async x=>{const j=await n({data:{automaticallyGeneratePayslipMonthly:x},urlParams:{companyId:s}});p(j.automaticallyGeneratePayslipMonthly??!1)},[s,n]),h=c.useCallback(async x=>{const j=await n({data:{allowEmployeesDownloadPayslip:x},urlParams:{companyId:s}});d(j.allowEmployeesDownloadPayslip??!1)},[s,n]),f=c.useCallback(async x=>{const j=await n({data:{allowEmployeesEditPaymentDetails:x},urlParams:{companyId:s}});i(j.allowEmployeesEditPaymentDetails??!1)},[s,n]);return e.jsxs("div",{className:o.container,"data-external-id":"general-configuration-content",children:[e.jsx(S,{variant:"h5",className:o.header,children:t.formatMessage(sa.header)}),e.jsx(Ee,{"data-external-id":"payment-details-configuration-automatically-generate-payslips",text:t.formatMessage(sa.automaticallyGeneratePayslips),checked:l,onChange:m}),e.jsx(Ee,{"data-external-id":"payment-details-configuration-allow-employees-download-payslips",text:t.formatMessage(sa.allowEmployeesDownloadPayslips),checked:u,onChange:h}),e.jsx(Ee,{"data-external-id":"payment-details-configuration-banner-edit-toggle",text:t.formatMessage(sa.description),checked:y,onChange:f})]})},sa=R({header:{id:"hr.app.page.configuration.payroll.payment-details.header",defaultMessage:"General"},automaticallyGeneratePayslips:{id:"hr.app.page.configuration.payroll.automatically-generate-payslips",defaultMessage:"Automatically generate payslips at the end of the month"},allowEmployeesDownloadPayslips:{id:"hr.app.page.configuration.payroll.allow-employees-download-payslips",defaultMessage:"Allow employees to download their payslips"},description:{id:"hr.app.page.configuration.payroll.payment-details.description",defaultMessage:"Allow employees to edit payment details of their Bank/Exchange House"}}),Vo=Fa("/companies/{companyId}/payroll/leave-encashment-policy/{leaveEncashmentPolicyId}","delete",{apiUrlPrefix:Ze});function qt(a={}){const t=Vo(qt);return La({mutationFn:t,...a})}const Go=gt("/companies/{companyId}/payroll/leave-encashment-policy","get",{isGlobalProgressEnabled:!1,apiUrlPrefix:Ze});function Qt(a,t={}){const[o,s]=Go(a,Qt);return yt({queryKey:o,queryFn:s,...t})}const qo=()=>{const a=z(),t=T(),o=ae(),{handleRequestExceptionAlert:s}=Q(),n=Va(),{classes:l}=Qo(),[p,u]=c.useState({limit:8,offset:0}),{data:d,refetch:y}=Qt({companyId:a,pagination:p},{select:xn}),{mutateAsync:i,isPending:m}=qt(),h=(D,C)=>{u({limit:D,offset:C*D})},f=async D=>{try{if(await n.confirm({title:t.formatMessage(Y.deletePolicy),content:t.formatMessage(Y.deletePolicyConfirmation),confirmButton:{text:t.formatMessage(Y.delete),color:"error"},cancelButton:{show:!0,color:"error"}})!==ts.Confirmed)return;await i({companyId:a,leaveEncashmentPolicyId:D}),y()}catch(C){s(C)}},x=[{dataIndex:"name",title:t.formatMessage(Y.policyName)},{dataIndex:"employeeIds",title:t.formatMessage(Y.numberOfEmployees),accessor:(D,C)=>C.employeeIds.length},{dataIndex:"leaveTypes",title:t.formatMessage(Y.leaveType),accessor:(D,C)=>e.jsx(ra,{direction:"row",gap:1,flexWrap:"wrap",children:C.leaveTypes.map(v=>e.jsx(Se,{label:v.leaveTypeName,size:"small"},v.leaveTypeId))})},{dataIndex:"createdAt",title:t.formatMessage(Y.creationDate),accessor:(D,C)=>e.jsx(Bt,{date:C.createdAt,dateFormat:"full"})},{dataIndex:"id",title:t.formatMessage(Y.actions),accessor:(D,C)=>e.jsxs(ra,{direction:"row",gap:1,alignItems:"center",children:[e.jsx(we,{onClick:()=>{o.pushToApp(V.APP_PAYROLL,`/leave-encashment-policy/edit/${C.id}`)},color:"primary",children:e.jsx(Ne,{})}),e.jsx(we,{onClick:()=>f(C.id),disabled:m,color:"primary",children:e.jsx(Te,{})})]})}],j=pt.isEmpty(d==null?void 0:d.data);return e.jsxs(Me,{expandedByDefault:j,"data-external-id":"leave-encashment-policy-accordion",title:e.jsxs("div",{className:l.titleContainer,children:[e.jsx(be,{title:t.formatMessage(Y.leaveEncashmentPolicy),subtitle:t.formatMessage(Y.policyOutline),tagLozenge:{label:t.formatMessage(Y.new),variant:"critical",emphasis:"high"}}),e.jsx(ca,{variant:"outlined",to:"",target:"_blank","data-external-id":"learn-more-button",children:e.jsx(pa,{to:"",className:l.pointerCursorLink,target:"_blank",children:t.formatMessage(Y.learnMore)})})]}),children:[!j&&!!(d!=null&&d.data)&&e.jsx(Ns,{rowsPerPageOptions:[8,16,32],columns:x,data:d==null?void 0:d.data,onPageChange:h,pagination:p,totalRowCount:d==null?void 0:d.pagination.total,variant:"outlined"}),e.jsx(ca,{variant:"contained",to:"/leave-encashment-policy/new",app:V.APP_PAYROLL,children:j?t.formatMessage(Y.setupPolicy):t.formatMessage(Y.addNew)})]})},Qo=U()(a=>({switchInput:{flexBasis:128},pointerCursorLink:{cursor:"pointer",display:"inline-flex",flexDirection:"row-reverse",textDecoration:"none"},titleContainer:{display:"flex",alignItems:"center",justifyContent:"space-between",width:"100%",paddingRight:a.spacing(2)}})),Y=R({leaveEncashmentPolicy:{id:"hr.payroll.leave-encashment.leave-encashment-policy",defaultMessage:"Leave encashment policy"},policyOutline:{id:"hr.payroll.leave-encashment.policy-outline",defaultMessage:"This policy outlines the criteria for applying for leave encashment"},setupPolicy:{id:"hr.payroll.leave-encashment.setup-policy",defaultMessage:"Setup policy"},new:{id:"common.new",defaultMessage:"New"},addNew:{id:"hr.app.page.configuration.add-new",defaultMessage:"Add new"},policyName:{id:"hr.payroll.leave-encashment.policy-name",defaultMessage:"Policy name"},numberOfEmployees:{id:"hr.payroll.leave-encashment.number-of-employees",defaultMessage:"No. of employees"},leaveType:{id:"hr.payroll.leave-encashment.leave-type",defaultMessage:"Leave type"},creationDate:{id:"hr.payroll.leave-encashment.creation-date",defaultMessage:"Creation date"},actions:{id:"common.actions",defaultMessage:"Actions"},deletePolicy:{id:"hr.payroll.leave-encashment.delete-policy",defaultMessage:"Delete policy"},deletePolicyConfirmation:{id:"hr.payroll.leave-encashment.delete-policy-confirmation",defaultMessage:"Are you sure you want to delete this policy?"},delete:{id:"common.action.delete",defaultMessage:"Delete"},learnMore:{id:"hr.payroll.leave-encashment.learn-more",defaultMessage:"Learn more"}}),Ho=Fa("/companies/{companyId}/payroll/leave-salary-policy/{leaveSalaryPolicyId}/deactivate","put",{apiUrlPrefix:Ze});function Ht(a={}){const t=Ho(Ht);return La({mutationFn:t,...a})}const Yo=Fa("/companies/{companyId}/payroll/leave-salary-policy/{leaveSalaryPolicyId}","delete",{apiUrlPrefix:Ze});function Yt(a={}){const t=Yo(Yt);return La({mutationFn:t,...a})}const Ko=gt("/companies/{companyId}/payroll/leave-salary-policy","get",{isGlobalProgressEnabled:!1,apiUrlPrefix:Ze});function Kt(a,t={}){const[o,s]=Ko(a,Kt);return yt({queryKey:o,queryFn:s,...t})}const Zo=U()(a=>({wrapper:{display:"flex",gap:a.spacing(1)},tooltipSpan:{display:"inline-block"}})),Jo=({leaveTypes:a})=>{const{classes:t}=Zo(),o=a==null?void 0:a.slice(0,2),s=a==null?void 0:a.slice(2);return e.jsxs("div",{className:t.wrapper,children:[o==null?void 0:o.map(n=>e.jsx(Se,{label:n.leaveTypeName,size:"small"},n.leaveTypeId)),s&&(s==null?void 0:s.length)>1&&e.jsx(Ra,{title:s==null?void 0:s.map(n=>e.jsx(S,{variant:"body2",children:n.leaveTypeName},n.leaveTypeId)),children:e.jsx("span",{className:t.tooltipSpan,children:e.jsx(Se,{label:`+${s==null?void 0:s.length}`,size:"small"})})})]})},Xo=U()(a=>({activeColor:{color:a.palette.success.dark},inactiveColor:{color:xe.grey[300]}})),ei=({leaveSalaryEligibleLeaveTypes:a,onEditClick:t,onDeleteClick:o,onPolicyActivityToggle:s})=>{const{classes:n}=Xo(),l=T();return c.useMemo(()=>[{title:l.formatMessage(te.policyName),dataExternalId:"name",dataIndex:"name",align:"left",accessor:(u,d)=>d.status==="draft"?e.jsxs(S,{variant:"body2",children:[d.name," ",e.jsx(Se,{label:l.formatMessage(te.draft),size:"small"})]}):e.jsx(S,{variant:"body2",children:d.name})},{title:l.formatMessage(te.employeeNo),dataExternalId:"numberOfEmployees",dataIndex:"numberOfAssignedEmployees",align:"right"},{title:l.formatMessage(te.leaveType),dataExternalId:"leaveTypes",dataIndex:"leaveTypeIds",align:"left",accessor:(u,d)=>{const y=a.filter(i=>d.leaveTypeIds.includes(i.leaveTypeId));return e.jsx(Jo,{leaveTypes:y})}},{title:l.formatMessage(te.creationDate),dataExternalId:"creationDate",dataIndex:"createdAt",align:"right",proportion:1,accessor:(u,d)=>e.jsx(Bt,{date:d.createdAt,dateFormat:"full",useZonedDate:!0})},{title:"",dataExternalId:"actions",dataIndex:"id",align:"right",proportion:1,cellPadding:"horizontal",accessor:(u,d)=>e.jsxs(xa,{children:[e.jsx(Ee,{"data-external-id":"active-toggle",text:e.jsx(S,{variant:"h6",className:d.status==="active"?n.activeColor:n.inactiveColor,children:d.status==="active"?l.formatMessage(te.active):l.formatMessage(te.inactive)}),checked:d.status==="active",onChange:()=>s(d)}),e.jsx(fe,{title:d.status==="active"?l.formatMessage(te.willNotBeAffected):l.formatMessage(te.edit),"data-external-id":"edit-button",onClick:()=>t(d.id),size:"small",color:"primary",children:e.jsx(Ne,{})}),e.jsx(fe,{title:d.status==="active"?l.formatMessage(te.willNotBeAffected):l.formatMessage(te.delete),"data-external-id":"delete-button",onClick:()=>o(d),size:"small",color:"primary",children:e.jsx(Te,{})})]})}],[n.activeColor,n.inactiveColor,l,a,o,t,s])},te=R({willNotBeAffected:{id:"hr.settings.payroll.leave-salary.leave-salary-policy.table.will-not-be-affected",defaultMessage:"Ongoing requests will not be affected by these changes"},policyName:{id:"hr.settings.payroll.leave-salary.leave-salary-policy.table.policy-name",defaultMessage:"Policy name"},employeeNo:{id:"hr.settings.payroll.leave-salary.leave-salary-policy.table.number-of-employees",defaultMessage:"No. of employees"},leaveType:{id:"hr.settings.payroll.leave-salary.leave-salary-policy.table.leave-type",defaultMessage:"Leave type"},creationDate:{id:"hr.settings.payroll.leave-salary.leave-salary-policy.table.creation-date",defaultMessage:"Creation date"},delete:{id:"common.action.delete",defaultMessage:"Delete"},active:{id:"common.active",defaultMessage:"Active"},inactive:{id:"common.inactive",defaultMessage:"Inactive"},edit:{id:"common.action.edit",defaultMessage:"Edit"},draft:{id:"common.draft",defaultMessage:"Draft"}}),ai=U()(a=>({centerElements:{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",padding:a.spacing(4),border:`1px solid ${xe.grey[200]}`,borderRadius:4},navigationButton:{marginTop:a.spacing(2)},dialogTitle:{display:"flex",alignItems:"center"},mediumRightMargin:{marginRight:a.spacing(2),width:42,height:42},accordionHeader:{width:"100%",display:"flex",flexDirection:"column",gap:a.spacing(1),marginRight:a.spacing(2)}})),ti=()=>{const{classes:a}=ai(),t=T(),o=z(),{hash:s}=Le(),n=ae(),{handleRequestExceptionAlert:l}=Q(),p=Va(),u=js(),{data:d,refetch:y}=Kt({companyId:o,pagination:{limit:10,offset:0}},{select:Mn}),{data:i}=Et({companyId:o},{filters:{draft:"false",paid:"true",eligibleForLeaveSalary:"true"}}),{mutateAsync:m}=Yt(),{mutateAsync:h}=Is(),{mutateAsync:f}=Ht(),x=b=>{u({event:"leave-salary-policy.click_edit-icon-button",policyId:b}),n.pushToApp(V.APP_PAYROLL,`/leave-salary-policy/edit/${b}`)},j=b=>{p.confirm({maxWidth:"sm",fullWidth:!0,title:e.jsxs("div",{className:a.dialogTitle,children:[e.jsx($e,{color:"error",fontSize:"small",className:a.mediumRightMargin}),e.jsx(S,{variant:"h4",children:t.formatMessage(ne.deleteTitle)})]}),content:e.jsx(S,{variant:"body1",children:t.formatMessage(ne.deleteQuestion,{itemName:b==null?void 0:b.name,strong:P=>e.jsx("strong",{children:P})})}),confirmButton:{color:"error",text:t.formatMessage({id:"common.action.delete",defaultMessage:"Delete"}),onClick:()=>D(b)},cancelButton:{show:!0,color:"error"},showCloseButton:!0})},D=async b=>{try{Na(b==null?void 0:b.id,"Cannot delete leave salary policy without id."),u({event:"leave-salary-policy.click_delete-icon-button",policyId:b.id}),await m({companyId:o,leaveSalaryPolicyId:b.id}),y()}catch(P){l(P)}},C=async({id:b,status:P})=>{P==="inactive"?(await h({companyId:o,leaveSalaryPolicyId:b}),await y()):P==="active"&&(await f({companyId:o,leaveSalaryPolicyId:b}),await y()),u({event:"leave-salary-policy.toggle_policy-activity-toggle",policyId:b,status:P})},v=ei({leaveSalaryEligibleLeaveTypes:(i==null?void 0:i.data)??[],onEditClick:x,onDeleteClick:j,onPolicyActivityToggle:C});return e.jsx(Me,{"data-external-id":"leave-salary-policies-accordion",expandedByDefault:s==="#leave-salary-policies",title:e.jsxs("div",{className:a.accordionHeader,children:[e.jsx(be,{title:t.formatMessage(ne.header),subtitle:(d==null?void 0:d.length)!==0&&t.formatMessage(ne.description)}),(i==null?void 0:i.data.length)===0&&e.jsx(pe,{variant:ge.Warning,withIcon:!0,message:t.formatMessage(ne.noPolicy),primaryAction:{text:t.formatMessage(ne.goToLeave),link:{to:"/settings/time-off#leave-policies",app:V.APP_HRADMIN},onClick:b=>b.stopPropagation()}})]}),children:(d==null?void 0:d.length)===0?e.jsxs("div",{className:a.centerElements,children:[e.jsx(bn,{title:t.formatMessage(ne.noPolicies),subtitle:e.jsx(S,{variant:"body1",color:"textSecondary",component:"span",children:t.formatMessage(ne.noPoliciesDescription)})}),e.jsx(ca,{className:a.navigationButton,app:V.APP_PAYROLL,to:"/leave-salary-policy/new",variant:"contained",color:"primary","data-external-id":"configure-leave-salary-button",onClick:()=>u({event:"leave-salary-policy.click_create-new-leave-salary-policy-button"}),children:t.formatMessage(ne.createNewLeaveSalaryPolicy)})]}):e.jsxs(e.Fragment,{children:[e.jsx(he,{columns:v,data:d??[],variant:"outlined",emptyState:t.formatMessage(ne.noItemsYet)}),e.jsx(ca,{className:a.navigationButton,app:V.APP_PAYROLL,to:"/leave-salary-policy/new",variant:"contained",color:"primary","data-external-id":"configure-leave-salary-button",children:t.formatMessage(ne.createNewLeaveSalaryPolicy)})]})})},ne=R({header:{id:"hr.settings.payroll.leave-salary.leave-salary-policy.header",defaultMessage:"Leave salary policy"},description:{id:"hr.settings.payroll.leave-salary.leave-salary-policy.description",defaultMessage:"This policy outlines the criteria for applying for leave salary"},createNewLeaveSalaryPolicy:{id:"hr.app.page.configuration.add-new",defaultMessage:"Add new"},noItemsYet:{id:"hr.no-items-yet",defaultMessage:"No items yet."},deleteQuestion:{id:"hr.app.page.configuration.settings-list-item.delete-question",defaultMessage:"Are you sure you want to delete <strong>{itemName}</strong>?"},deleteTitle:{id:"hr.app.page.configuration.settings-list-item.delete-title",defaultMessage:"Confirm deletion"},noPoliciesDescription:{id:"hr.app.page.configuration.payroll.leave-salary.no-policies.description",defaultMessage:"Create and configure leave salary policies."},noPolicies:{id:"hr.app.page.configuration.payroll.employee-loan-policies.no-policies",defaultMessage:"No policies found"},noPolicy:{id:"hr.app.page.configuration.payroll.leave-salary.no-policy",defaultMessage:"No leave type is configured for the leave salary policy"},goToLeave:{id:"hr.app.page.configuration.payroll.leave-salary.go-yo-policy",defaultMessage:"Go to leave policy"}}),ni=U()(a=>({header:{display:"flex",justifyContent:"space-between",marginBottom:a.spacing(1.5)},alertMarginBottom:{marginBottom:a.spacing(2)}})),si="/payroll/mass-upload/variable-pay",oi="/payroll/mass-upload/addition",ii="/payroll/mass-upload/deduction",li=()=>{const{classes:a}=ni(),t=T(),o=z(),s=Cn(),{data:n}=_s({companyId:o},{filters:Rs({closed:!1})});return e.jsxs(ra,{direction:"column",gap:3,"data-external-id":"mass-uploads-content",children:[e.jsxs("div",{children:[e.jsx(S,{variant:"h5",className:a.header,children:t.formatMessage(nt.header)}),n!=null&&n.length?e.jsx(pe,{"data-external-id":"mass-upload-current-pay-cycle-banner",variant:ge.Info,className:a.alertMarginBottom,withIcon:!0,message:t.formatMessage(nt.currentPayrollCycle,{monthYear:s({date:Pa(n[0].lastCycleDate),dateFormat:"no-day"}),startDate:s({date:Pa(n[0].firstCycleDate),dateFormat:"full"}),endDate:s({date:Pa(n[0].lastCycleDate),dateFormat:"full"}),strong:l=>e.jsx("strong",{children:l})})}):null]}),e.jsx(ia,{"data-external-id":"variable-pay",header:t.formatMessage({id:"hr.app.page.configuration.payroll.mass-uploads.variable-pay.header",defaultMessage:"Mass Upload Variable Pay"}),content:t.formatMessage({id:"hr.app.page.configuration.payroll.mass-uploads.variable-pay.description",defaultMessage:"Add Variable pay to current active payroll cycle for your employees before paying them."}),navigationText:t.formatMessage({id:"common.action.start",defaultMessage:"Start"}),navigationUrl:si}),e.jsx(ia,{"data-external-id":"additions",header:t.formatMessage({id:"hr.app.page.configuration.payroll.mass-uploads.additions.header",defaultMessage:"Mass Upload Additions"}),content:t.formatMessage({id:"hr.app.page.configuration.payroll.mass-uploads.additions.description",defaultMessage:"Add Additions to current active payroll cycle for your employees before paying them."}),navigationText:t.formatMessage({id:"common.action.start",defaultMessage:"Start"}),navigationUrl:oi}),e.jsx(ia,{"data-external-id":"deductions",header:t.formatMessage({id:"hr.app.page.configuration.payroll.mass-uploads.deductions.header",defaultMessage:"Mass Upload Deductions"}),content:t.formatMessage({id:"hr.app.page.configuration.payroll.mass-uploads.deductions.description",defaultMessage:"Add Deductions pay to current active payroll cycle for your employees before paying them."}),navigationText:t.formatMessage({id:"common.action.start",defaultMessage:"Start"}),navigationUrl:ii})]})},nt=R({currentPayrollCycle:{id:"hr.app.page.configuration.payroll.current-payroll-cycle",defaultMessage:"Current Payroll Cycle - <strong>{monthYear}</strong> ({startDate} - {endDate})"},header:{id:"hr.app.page.configuration.payroll.mass-uploads.header",defaultMessage:"Mass Uploads"}}),ri=({handleClose:a,socialContributionsId:t,handleSubmit:o,isLoading:s})=>{const n=z(),{data:l}=Es({companyId:n,socialContributionsId:t}),{classes:p}=Ya(),u=T();return e.jsx(J,{maxWidth:"sm",fullWidth:!0,title:e.jsxs("div",{className:p.dialogTitle,children:[e.jsx($e,{color:"error",fontSize:"small",className:p.mediumRightMargin}),e.jsx(S,{variant:"h4",children:u.formatMessage(ua.deleteTitle)})]}),content:e.jsx(S,{variant:"body1",children:u.formatMessage(ua.confirmDeleteAccount,{impact:l})}),isPending:s,confirmButton:{color:"error",onClick:o,text:u.formatMessage({id:"common.action.delete",defaultMessage:"Delete"})},cancelButton:{color:"error",show:!0,onClick:a}})},ci=ga({name:[Ve]}),Ya=U()(a=>({headerLine:{marginBottom:a.spacing(1),flexGrow:0},dialogTitle:{display:"flex",alignItems:"center"},mediumRightMargin:{marginRight:a.spacing(2),width:42,height:42},checkbox:{marginBottom:0,marginTop:0},applicableItemsText:{marginBottom:a.spacing(1)}})),Zt="Basic Salary",di=({socialSecurityContributions:a,availableContributions:t,onSubmit:o,handleCloseDialog:s,open:n})=>{const l=ci(),p=T(),[u,d]=c.useState({});return c.useEffect(()=>{t&&(a&&t?d({...a,applicablePayItems:a==null?void 0:a.applicablePayItems.reduce((y,{key:i})=>({...y,[i]:!0}),{})}):t&&d({applicablePayItems:t.filter(y=>y.name===Zt).reduce((y,i)=>({[i.id]:!0}),{})}))},[a,t]),n?e.jsx(He,{onSubmit:o,validate:l,initialValues:u,render:({handleSubmit:y})=>e.jsx(J,{autoClose:"never",open:n,title:e.jsx(ui,{title:a?p.formatMessage({id:"hr.app.page.configuration.payroll.social-security-contributions.form.edit",defaultMessage:"Edit {name}"},{name:a.name}):p.formatMessage({id:"hr.app.page.configuration.payroll.social-security-contributions.form.add",defaultMessage:"Add Contribution Type"}),subTitle:p.formatMessage({id:"hr.app.page.configuration.payroll.social-security-contributions.form.select-items",defaultMessage:"Select applicable fixed pay items"}),onClose:s}),onClose:s,cancelButton:{show:!0},confirmButton:{text:p.formatMessage({id:"common.action.save",defaultMessage:"Save"}),onClick:y},content:e.jsx(mi,{availableContributions:t}),"data-external-id":"new-bank-account-modal"})}):null},ui=({title:a,subTitle:t,onClose:o})=>{const{classes:s}=Ya();return e.jsxs(w,{className:s.headerLine,container:!0,justifyContent:"space-between",alignItems:"center",children:[e.jsx(w,{children:e.jsx(S,{variant:"h3",children:a})}),o&&e.jsx(w,{children:e.jsx(we,{onClick:o,"data-external-id":"close-button",size:"small",children:e.jsx(vn,{})})}),e.jsx(w,{size:12,children:e.jsx(S,{variant:"body1",children:t})})]})},mi=({availableContributions:a})=>{const t=T(),{classes:o}=Ya();return e.jsxs(e.Fragment,{children:[e.jsx(St,{label:t.formatMessage(ua.programName),name:"name",fullWidth:!0}),e.jsx(S,{variant:"body1",className:o.applicableItemsText,children:t.formatMessage(ua.applicableItems)}),e.jsx(w,{container:!0,direction:"column",children:a&&a.map(s=>e.jsx(w,{children:e.jsx(Nt,{formControlClass:o.checkbox,label:s.name,name:`applicablePayItems.${s.id}`,disabled:s.name===Zt})},s.id))})]})},ua=R({confirmDeleteAccount:{id:"hr.app.page.configuration.payroll.social-security-contributions.form.confirm-delete-account",defaultMessage:"This social security configuration will be deleted forever. {impact}"},deleteTitle:{id:"hr.app.page.configuration.settings-list-item.delete-title",defaultMessage:"Confirm deletion"},programName:{id:"hr.app.page.configuration.payroll.social-security-contribution.program-name",defaultMessage:"Social Security Program Name"},applicableItems:{id:"hr.app.page.configuration.payroll.social-security-contributions.form.applicable-items",defaultMessage:"Applicable Fixed Pay Items"}}),pi=U()(()=>({row:{verticalAlign:"top"}})),gi=()=>{const a=T(),t=ue(),{handleRequestExceptionAlert:o}=Q(),{classes:s}=pi(),n=z(),{data:l}=Fs({companyId:n}),{mutateAsync:p}=Ls(),{mutateAsync:u}=$s(),{mutateAsync:d,isPending:y}=Us(),{data:i}=qa({payItemTypeBehavior:[Fe.Recurring,Fe.BasicSalary]},Bs),[m,h]=c.useState(void 0),[f,x]=c.useState(!1),[j,D]=c.useState(!1),C=c.useCallback(()=>{x(!0),_({event:`configuration.payroll.ssc.click_${m?"edit":"new"}`})},[m]),v=c.useCallback(()=>{x(!1)},[]),b=c.useCallback(()=>{D(!0),_({event:"configuration.payroll.ssc.click_delete"})},[]),P=c.useCallback(()=>{D(!1)},[]),N=c.useCallback(async A=>{try{const M=Object.entries(A.applicablePayItems).filter(L=>L[1]===!0).map(L=>L[0]),r=await p({data:{...A,applicablePayItems:M},urlParams:{companyId:n}}),g=F(r,i==null?void 0:i.data);h(g),v(),_({event:"configuration.payroll.ssc.save_new"}),t.success({message:a.formatMessage(ce.createSuccess)})}catch(M){o(M)}},[p,n,i==null?void 0:i.data,v,t,a,o]),k=c.useCallback(async A=>{try{const M=Object.entries(A.applicablePayItems).filter(L=>L[1]===!0).map(L=>L[0]),r=await u({data:{...A,applicablePayItems:M},urlParams:{companyId:n,socialContributionsId:A.id}}),g=F(r,i==null?void 0:i.data);h(g),v(),_({event:"configuration.payroll.ssc.save_edit"}),t.success({message:a.formatMessage(ce.updateSuccess)})}catch(M){o(M)}},[u,n,i==null?void 0:i.data,v,t,a,o]),E=c.useCallback(async()=>{try{await d({urlParams:{companyId:n,socialContributionsId:m.id}}),D(!1),h(void 0),_({event:"configuration.payroll.ssc.save_delete"}),t.success({message:a.formatMessage(ce.deleteSuccess)})}catch(A){o(A)}},[d,n,m,t,a,o]),F=(A,M)=>{const r={};M==null||M.map(L=>(r[L.id]=L.name,L));const g=A.applicablePayItems.map(L=>({key:L,value:r[L]}));return{...A,applicablePayItems:g}};c.useEffect(()=>{if(!l||!i||l.length===0||!(i!=null&&i.data))return;const A=F(l[0],i==null?void 0:i.data);h(A)},[i,l]);const B=c.useMemo(()=>[{title:a.formatMessage({id:"hr.app.page.configuration.payroll.social-security-contributions.program-name",defaultMessage:"Social Security Program Name"}),dataExternalId:"social-security-program-name",dataIndex:"name",align:"left",proportion:7},{title:a.formatMessage({id:"hr.app.page.configuration.payroll.social-security-contributions.applicable-earnings",defaultMessage:"Applicable Earnings"}),dataExternalId:"applicable-pay-items",dataIndex:"applicablePayItems",align:"left",proportion:3,accessor:(A,M)=>e.jsx(w,{container:!0,direction:"column",justifyContent:"center",children:M.applicablePayItems.map(r=>e.jsx(w,{children:r.value},r.key))})},{title:a.formatMessage({id:"hr.app.page.configuration.payroll.social-security-contributions.created-date",defaultMessage:"Created Date"}),dataExternalId:"createdDate",dataIndex:"createdAt",align:"left",proportion:3},{title:"",dataExternalId:"actions",dataIndex:"id",align:"right",proportion:2,accessor:()=>e.jsxs(xa,{children:[e.jsx(fe,{title:a.formatMessage(ce.edit),onClick:C,size:"small",children:e.jsx(Ne,{color:"primary"})}),e.jsx(fe,{title:a.formatMessage(ce.delete),onClick:b,size:"small",children:e.jsx(Te,{color:"primary"})})]})}],[a,b,C]);return e.jsx(Me,{title:e.jsx(be,{title:a.formatMessage(ce.header),subtitle:a.formatMessage(ce.subtitle)}),"data-external-id":"social-security-accordion",children:e.jsxs(w,{container:!0,spacing:2,children:[e.jsx(w,{size:12,children:e.jsx(he,{columns:B,data:m?[m]:[],emptyState:a.formatMessage(ce.noItems),rowClassName:s.row,variant:"outlined"})}),e.jsx(w,{size:12,children:!m&&e.jsx(jn,{variant:"contained",color:"primary","data-external-id":"new-contribution-type-button",onClick:C,children:a.formatMessage(ce.new)})}),e.jsx(di,{open:f,handleCloseDialog:v,onSubmit:m?k:N,socialSecurityContributions:m,availableContributions:(i==null?void 0:i.data)??[]}),j&&e.jsx(ri,{isLoading:y,handleClose:P,handleSubmit:E,socialContributionsId:m==null?void 0:m.id})]})})},ce=R({createSuccess:{id:"hr.app.page.configuration.payroll.social-security-contributions.create-success",defaultMessage:"Social security contribution type has been saved successfully."},updateSuccess:{id:"hr.app.page.configuration.payroll.social-security-contributions.update-success",defaultMessage:"Social security contribution type has been updated successfully."},deleteSuccess:{id:"hr.app.page.configuration.payroll.social-security-contributions.delete-success",defaultMessage:"Social security contribution type has been deleted successfully."},edit:{id:"common.action.edit",defaultMessage:"Edit"},delete:{id:"common.action.delete",defaultMessage:"Delete"},header:{id:"hr.app.page.configuration.payroll.social-security-contributions.header",defaultMessage:"Social Security Contributions"},subtitle:{id:"hr.app.page.configuration.payroll.social-security-contributions.subtitle",defaultMessage:"Setup fixed items that are considered of calculation of social security contribution."},noItems:{id:"hr.app.page.configuration.payroll.social-security-contributions.no-items",defaultMessage:"No items. Please create one"},new:{id:"hr.app.page.configuration.add-new",defaultMessage:"Add new"}}),yi=()=>{const a=T(),t=z(),[o,s]=c.useState(),[n,l]=c.useState({limit:10,offset:0}),[p,u]=c.useState(!1),[d,y]=c.useState(!1),{data:i,refetch:m,isRefetching:h}=qa({payItemTypeBehavior:[Fe.OneTime]},n),{mutateAsync:f,isPending:x}=wt(),{mutateAsync:j,isPending:D}=Pt(),{mutateAsync:C,isPending:v}=Tt(),b=c.useMemo(()=>{const r=i?i.pagination.total:0;return!h&&i&&r<=n.offset&&l({limit:10,offset:0}),r},[i,n.offset,h]),P=r=>{l(g=>({...g,offset:g.limit*r}))},N=()=>{s(void 0),u(!0),_({event:"configuration.payroll.variable-pays.click_new"})},k=r=>{s(r),u(!0),_({event:"configuration.payroll.variable-pays.click_edit",itemId:r.id,itemName:r.name})},E=r=>{s(r),y(!0),_({event:"configuration.payroll.variable-pays.click_delete",itemId:r.id,itemName:r.name})},F=c.useCallback(()=>{u(!1)},[]),B=c.useCallback(()=>{y(!1)},[]),A=c.useCallback(async(r,g)=>{try{return g?await f({data:{name:r},urlParams:{companyId:t,id:g}}):await j({data:{name:r,payItemTypeBehavior:Fe.OneTime},urlParams:{companyId:t}})}finally{await m(),u(!1),s(void 0)}},[t,f,j,m]),M=c.useCallback(async r=>{try{return await C({urlParams:{companyId:t,id:r}})}finally{await m(),y(!1),s(void 0)}},[t,C,m]);return e.jsxs(e.Fragment,{children:[e.jsx(Ma,{title:a.formatMessage({id:"hr.app.page.configuration.payroll.variable-pays.header",defaultMessage:"Variable Pays"}),tableData:i==null?void 0:i.data,pagination:n,totalRowCount:b,onAddNewClick:N,onEditClick:k,onDeleteClick:E,onPageChange:P,"data-external-id":"variable-pays"}),e.jsx(Ca,{variant:de.VariablePays,open:p,createTitle:a.formatMessage({id:"hr.app.page.configuration.payroll.variable-pays.new-variable-pay",defaultMessage:"New Variable Pay"}),editTitle:a.formatMessage({id:"hr.app.page.configuration.payroll.variable-pays.edit-variable-pay",defaultMessage:"Edit Variable Pay"}),selectedItem:o,isLoading:x||D,onSubmit:A,onClose:F}),o&&e.jsx(va,{variant:de.VariablePays,open:d,selectedItem:o,isLoading:v,onSubmit:M,onClose:B})]})};function fi(a){const t={};return t.enabled=a.enabled,a.leaveEncashmentCalculationType&&(t.leave_encashment_calculation_type=ya(a.leaveEncashmentCalculationType)),t.leave_encashment_custom_days=a.leaveEncashmentCustomDays,a.leaveEncashmentSalaryComponent&&(t.leave_encashment_salary_component=$a(a.leaveEncashmentSalaryComponent)),t}function hi(a){const t={};return t.enabled=a.enabled,a.leave_encashment_calculation_type&&(t.leaveEncashmentCalculationType=fa(a.leave_encashment_calculation_type)),t.leaveEncashmentCustomDays=a.leave_encashment_custom_days,a.leave_encashment_salary_component&&(t.leaveEncashmentSalaryComponent=Ua(a.leave_encashment_salary_component)),t}function xi(a){const t={};return a.salaryProrationCalculationType&&(t.salary_proration_calculation_type=ya(a.salaryProrationCalculationType)),t.salary_proration_custom_days=a.salaryProrationCustomDays,t}function bi(a){const t={};return a.salary_proration_calculation_type&&(t.salaryProrationCalculationType=fa(a.salary_proration_calculation_type)),t.salaryProrationCustomDays=a.salary_proration_custom_days,t}function Mi(a){const t={};return t.enabled=a.enabled,a.unpaidLeaveCalculationType&&(t.unpaid_leave_calculation_type=ya(a.unpaidLeaveCalculationType)),t.unpaid_leave_custom_days=a.unpaidLeaveCustomDays,a.unpaidLeaveSalaryComponent&&(t.unpaid_leave_salary_component=$a(a.unpaidLeaveSalaryComponent)),t}function Ci(a){const t={};return t.enabled=a.enabled,a.unpaid_leave_calculation_type&&(t.unpaidLeaveCalculationType=fa(a.unpaid_leave_calculation_type)),t.unpaidLeaveCustomDays=a.unpaid_leave_custom_days,a.unpaid_leave_salary_component&&(t.unpaidLeaveSalaryComponent=Ua(a.unpaid_leave_salary_component)),t}const vi=({companyId:a})=>`/companies/${a}/payroll/daily-amount-configuration/salary-proration`,Jt=()=>{const a=ji.useMocker();return ma({toURLFunction:vi,mapRequestFunction:Ye(xi),mapResponseFunction:Ae(bi),options:{mocker:a}})},ji=re(Jt),ki=({companyId:a})=>`/companies/${a}/payroll/daily-amount-configuration/leave-encashment`,Xt=()=>{const a=Di.useMocker();return ma({toURLFunction:ki,mapRequestFunction:Ye(fi),mapResponseFunction:Ae(hi),options:{mocker:a}})},Di=re(Xt),Si=({companyId:a})=>`/companies/${a}/payroll/daily-amount-configuration/unpaid-leave`,en=()=>{const a=wi.useMocker();return ma({toURLFunction:Si,mapRequestFunction:Ye(Mi),mapResponseFunction:Ae(Ci),options:{mocker:a}})},wi=re(en);function Pi(a){const t={};return t.id=a.id,t.name=a.name,t.position=a.position,t}function Ti(a){const t={};return t.affectedEmployees=a.affected_employees.map(o=>Pi(o)),t.blockReason=a.block_reason,t}const Ai=({companyId:a,configurationType:t})=>`/companies/${a}/payroll/daily-amount-configuration/affected-employees/${t}`,an=()=>{const a=Ni.useMocker();return kn({toURLFunction:Ai,mapResponseFunction:Ae(Ti),options:{mocker:a}})},Ni=re(an),ie=R({salaryProrationDialogDescription:{id:"hr.payroll.daily-rate-calculator.salary-proration-dialog-description",defaultMessage:"Salary proration affects employees' first salary and end of service settlement"},monthCalculation:{id:"hr.payroll.daily-rate-calculator.month-calculation",defaultMessage:"Month calculation"},numberOfDays:{id:"hr.payroll.daily-rate-calculator.number-of-days",defaultMessage:"Number of days"},dailyWageCalculationFormula:{id:"hr.payroll.daily-rate-calculator.daily-wage-calculation-formula",defaultMessage:"Daily wage = (Basic salary + allowances) / {number} days"},dailyWageCalculationFormulaWithoutDays:{id:"hr.payroll.daily-rate-calculator.daily-wage-calculation-formula-without-days",defaultMessage:"Daily wage = (Basic salary + allowances) / {calculationType}"},dailyWageCalculationFormulaUndefined:{id:"hr.payroll.daily-rate-calculator.daily-wage-calculation-formula-undefined",defaultMessage:"Please select a month calculation to see the formula"},impactedEmployeesAlert:{id:"hr.payroll.daily-rate-calculator.impacted-employees-alert",defaultMessage:"View employees below with prorated salaries that will be impacted by this change"},numberOfEmployeesImpacted:{id:"hr.payroll.daily-rate-calculator.number-of-employees-impacted",defaultMessage:"{number} Employees impacted"},cannotEditTitle:{id:"hr.payroll.daily-rate-calculator.cannot-edit-daily-wage-title",defaultMessage:"Cannot edit daily wage calculation"},transactions:{id:"hr.app.menu.transactions",defaultMessage:"Transactions"}}),Ii=U()(a=>({description:{marginBottom:a.spacing(3)},hint:{marginBottom:a.spacing(2)},formFields:{display:"flex"},customDaysField:{marginLeft:a.spacing(1)},individualEmployee:{display:"flex",marginBottom:a.spacing(2)},employeeText:{display:"flex",flexDirection:"column",marginLeft:a.spacing(2)},accordionDetails:{display:"flex",flexDirection:"column"},alert:{marginBottom:a.spacing(1)}})),_i=()=>{const{classes:a}=Ii(),t=T(),o=z(),s=ae(),n=se(Ke),{handleRequestExceptionAlert:l}=Q(),p=Ba({subscription:{values:!0,dirty:!0}}),[u,d]=c.useState(void 0),{mutateAsync:y,isPending:i}=an(),m=c.useCallback(async h=>{if(h!==p.values.monthCalculation)try{const f=await y({urlParams:{companyId:o,configurationType:ks(O.SalaryProration)}});d(f)}catch(f){l(f)}},[p.values.monthCalculation,y,o,l]);return e.jsxs(e.Fragment,{children:[e.jsx(S,{variant:"body1",className:a.description,"data-external-id":"salary-proration-description",children:t.formatMessage(ie.salaryProrationDialogDescription)}),e.jsxs("div",{className:a.formFields,children:[e.jsx(qe,{fullWidth:!0,label:t.formatMessage(ie.monthCalculation),name:"monthCalculation",options:za,renderOption:n,onChange:m,disabled:i}),p.values.monthCalculation===K.CustomDays&&e.jsx(Qa,{name:"customDays",min:1,decimalPlaces:2,label:t.formatMessage(ie.numberOfDays),fullWidth:!0,className:a.customDaysField,disabled:i})]}),e.jsx(ft,{variant:"body1",className:a.hint,"data-external-id":"salary-proration-dialog-hint",children:p.values.monthCalculation===void 0?t.formatMessage(ie.dailyWageCalculationFormulaUndefined):p.values.monthCalculation===K.CustomDays&&p.values.customDays>0?t.formatMessage(ie.dailyWageCalculationFormula,{number:p.values.customDays}):t.formatMessage(ie.dailyWageCalculationFormulaWithoutDays,{calculationType:n(p.values.monthCalculation)})}),u&&e.jsxs(e.Fragment,{children:[u.blockReason&&e.jsx(pe,{withIcon:!0,variant:ge.Warning,"data-external-id":"transaction-cannot-edit-warning-alert",title:t.formatMessage(ie.cannotEditTitle),message:u.blockReason,primaryAction:{onClick:()=>s.push("/transactions"),text:t.formatMessage(ie.transactions)},className:a.alert}),u.affectedEmployees.length>0&&e.jsxs(e.Fragment,{children:[e.jsx(pe,{withIcon:!0,variant:ge.Warning,"data-external-id":"affected-employees-cannot-edit-warning-alert",message:t.formatMessage(ie.impactedEmployeesAlert),className:a.alert}),e.jsxs(ct,{variant:"outlined",elevation:0,sx:{borderBottomLeftRadius:0,borderBottomRightRadius:0},children:[e.jsx(dt,{expandIcon:e.jsx(ut,{fontSize:"x-small"}),children:e.jsx(S,{variant:"subtitle1","data-external-id":"salary-proration-accordion-summary",children:t.formatMessage(ie.numberOfEmployeesImpacted,{number:u.affectedEmployees.length})})}),e.jsx(mt,{className:a.accordionDetails,children:u.affectedEmployees.map(h=>e.jsxs("div",{className:a.individualEmployee,children:[e.jsx(Dn,{person:{id:h.id,firstName:h.name}}),e.jsxs("div",{className:a.employeeText,children:[e.jsx(S,{variant:"body1","data-external-id":"salary-proration-employee-name",children:h.name}),h.position&&e.jsx(S,{variant:"caption","data-external-id":"salary-proration-employee-role",display:"block",children:h.position})]})]},h.id))})]})]})]})]})},st=R({salaryProration:{id:"hr.payroll.daily-rate-calculator.salary-proration-dialog.title",defaultMessage:"Salary Proration"},save:{id:"common.action.save",defaultMessage:"Save"}}),Ri=a=>a.values.monthCalculation===K.CustomDays?Ft(1)(a):void 0,Bi=ga({monthCalculation:[Ve],customDays:[Ri]}),Ei=({open:a,isLoading:t,dailyWage:o,onSave:s,onClose:n})=>{const l=T(),p=Bi(),u=c.useCallback(d=>{s(d)},[s]);return e.jsx(He,{onSubmit:u,validate:p,initialValues:{monthCalculation:o.calculationType,customDays:o.customDays},render:({handleSubmit:d})=>e.jsx(J,{open:a,isPending:t,maxWidth:"sm",title:l.formatMessage(st.salaryProration),content:e.jsx(_i,{}),confirmButton:{text:l.formatMessage(st.save),onClick:d},cancelButton:{show:!0,onClick:n},showCloseButton:!0,onClose:n,"data-external-id":"salary-proration-dialog",autoClose:"never"})})},q=R({eosPolicyTableEOSHeader1:{id:"hr.payroll.daily-rate-calculator.eos-policy-table.header1",defaultMessage:"Eligible paid leave types"},eosPolicyTableUnpaidHeader1:{id:"hr.payroll.daily-rate-calculator.unpaid-policy-table.header1",defaultMessage:"Eligible unpaid leave types"},eosPolicyTableHeader2:{id:"hr.payroll.daily-rate-calculator.eos-policy-table.header2",defaultMessage:"Daily wage calculation"},overwriteCalculationPolicies:{id:"hr.payroll.daily-rate-calculator.overwrite-calculation-policies",defaultMessage:"Overwrite calculation in policies"},dailyWageCalculationFormula:{id:"hr.payroll.daily-rate-calculator.daily-wage-calculation-formula-with-salary-component",defaultMessage:"Daily wage = ({salaryComponent}) / {number} days"},dailyWageCalculationFormulaWithoutDays:{id:"hr.payroll.daily-rate-calculator.daily-wage-calculation-formula-without-days-with-salary-component",defaultMessage:"Daily wage = ({salaryComponent}) / {calculationType}"},dailyWageCalculationFormulaUndefined:{id:"hr.payroll.daily-rate-calculator.daily-wage-calculation-formula-undefined",defaultMessage:"Please select a month calculation to see the formula"},numberOfDays:{id:"hr.payroll.daily-rate-calculator.number-of-days",defaultMessage:"Number of days"},salaryComponent:{id:"hr.payroll.daily-rate-calculator.salary-component",defaultMessage:"Salary Component"},monthCalculation:{id:"hr.payroll.daily-rate-calculator.month-calculation",defaultMessage:"Month calculation"},impactedEmployeesAlert:{id:"hr.payroll.daily-rate-calculator.leave-encashment-impacted-employees-alert",defaultMessage:"This change will affect {number} eligible paid leave - leave policies"},impactedEmployeesAlertUnpaidLeave:{id:"hr.payroll.daily-rate-calculator.unpaid-leave-impacted-employees-alert",defaultMessage:"This change will affect new requests in {number} unpaid - leave policies"},days:{id:"common.days",defaultMessage:"days"},select:{id:"common.select",defaultMessage:"Select"}}),Fi=U()(a=>({tableContainer:{display:"flex",maxHeight:250,marginBottom:a.spacing(2),overflowY:"scroll",msOverflowStyle:"none",scrollbarWidth:"none","&::-webkit-scrollbar":{display:"none"}},container:{display:"flex",flexDirection:"column"},amountFormFields:{display:"flex"},customDaysField:{marginLeft:a.spacing(1)},hint:{marginBottom:a.spacing(2)},alert:{marginBottom:a.spacing(1)}})),Li=({type:a,eosPolicyList:t,timeOffUnpaidPolicyList:o,onPolicyRedirection:s})=>{const n=T(),{classes:l}=Fi(),p=Ba({subscription:{values:!0,dirty:!0}}),u=se(Ke),d=se(ba),y=c.useMemo(()=>[{title:a===O.UnpaidLeaveDeduction?n.formatMessage(q.eosPolicyTableUnpaidHeader1):n.formatMessage(q.eosPolicyTableEOSHeader1),dataExternalId:"name",dataIndex:"name",align:"left",accessor:(m,h)=>e.jsx(pa,{onClick:()=>s(a,h.id),children:h.name})},{title:n.formatMessage(q.eosPolicyTableHeader2),dataExternalId:"dailyRateDayType",dataIndex:"dailyRateDayType",align:"left",accessor:(m,h)=>`${d(h.dailyRateSalaryComponent)} / ${h.customDays?h.customDays+` ${n.formatMessage(q.days)}`:u(h.dailyRateDayType??K.CalendarDays)}`}],[n,a,u,d,s]),i=c.useMemo(()=>a===O.LeaveEncashment?t.map(m=>({id:m.id,name:m.name,dailyRateSalaryComponent:m.dailyRateSalaryComponent,customDays:m.customDays,dailyRateDayType:m.dailyRateDayType})):o.map(m=>({id:m.leaveTypeId,name:m.leaveTypeName,dailyRateSalaryComponent:da.BasicAllowance,customDays:m.customDays,dailyRateDayType:m.dailyRateCalculationType})),[t,o,a]);return e.jsxs("div",{className:l.container,children:[e.jsx("div",{className:l.tableContainer,children:e.jsx(he,{columns:y,data:i,variant:"outlined",stickyHeader:!0,minWidth:500})}),e.jsx(Sn,{name:"overwriteCalculation",label:n.formatMessage(q.overwriteCalculationPolicies)}),p.values.overwriteCalculation&&i.length>0&&e.jsx(pe,{withIcon:!0,variant:ge.Warning,"data-external-id":"overwrite-warning-alert",message:a===O.LeaveEncashment?n.formatMessage(q.impactedEmployeesAlert,{number:i.length}):n.formatMessage(q.impactedEmployeesAlertUnpaidLeave,{number:i.length}),className:l.alert}),e.jsx(qe,{label:n.formatMessage(q.salaryComponent),fullWidth:!0,name:"salaryComponent",options:ht,renderOption:d,disabled:!p.values.overwriteCalculation,renderValue:m=>m&&p.values.overwriteCalculation?d(m):n.formatMessage(q.select)}),e.jsxs("div",{className:l.amountFormFields,children:[e.jsx(qe,{fullWidth:!0,label:n.formatMessage(q.monthCalculation),name:"monthCalculation",options:za,renderOption:u,disabled:!p.values.overwriteCalculation,renderValue:m=>m&&p.values.overwriteCalculation?u(m):n.formatMessage(q.select)}),p.values.monthCalculation===K.CustomDays&&p.values.overwriteCalculation&&e.jsx(Qa,{className:l.customDaysField,label:n.formatMessage(q.numberOfDays),name:"customDays",fullWidth:!0,min:1,decimalPlaces:2,disabled:!p.values.overwriteCalculation})]}),e.jsx(ft,{variant:"body1",className:l.hint,"data-external-id":"overwrite-dialog-hint",children:p.values.monthCalculation===void 0?n.formatMessage(q.dailyWageCalculationFormulaUndefined):p.values.monthCalculation===K.CustomDays&&p.values.customDays>0?n.formatMessage(q.dailyWageCalculationFormula,{salaryComponent:d(p.values.salaryComponent),number:p.values.customDays}):n.formatMessage(q.dailyWageCalculationFormulaWithoutDays,{salaryComponent:d(p.values.salaryComponent),calculationType:u(p.values.monthCalculation)})})]})},Aa=R({leaveEncashment:{id:"hr.payroll.daily-rate-calculator.leave-encashment-dialog.title",defaultMessage:"EOS leave Encashment"},unpaidLeaveDeduction:{id:"hr.payroll.daily-rate-calculator.unpaid-leave-deduction-dialog.title",defaultMessage:"Unpaid Leave Deduction"},save:{id:"common.action.save",defaultMessage:"Save"}}),$i=a=>a.values.monthCalculation===K.CustomDays?Ft(1)(a):void 0,Ui=ga({salaryComponent:[Ve],monthCalculation:[Ve],customDays:[$i]}),ot=({open:a,isLoading:t,eosPolicyList:o,timeOffUnpaidPolicyList:s,dailyWage:n,onSave:l,onClose:p,onPolicyRedirection:u})=>{var h,f;const d=T(),y=Ui(),i=c.useRef(null),m=c.useCallback(x=>{l(n.type,x)},[n.type,l]);return e.jsx(He,{onSubmit:m,validate:(f=(h=i.current)==null?void 0:h.getFieldState("overwriteCalculation"))!=null&&f.value?y:void 0,initialValues:{salaryComponent:n.component,monthCalculation:n.calculationType,customDays:n.customDays,overwriteCalculation:n.component!==void 0&&n.calculationType!==void 0},render:({handleSubmit:x})=>e.jsx(J,{open:a,isPending:t,fullWidth:!0,title:n.type===O.LeaveEncashment?d.formatMessage(Aa.leaveEncashment):d.formatMessage(Aa.unpaidLeaveDeduction),content:e.jsx(Li,{type:n.type,eosPolicyList:o??[],timeOffUnpaidPolicyList:s??[],onPolicyRedirection:u}),confirmButton:{text:d.formatMessage(Aa.save),onClick:x},cancelButton:{show:!0,onClick:p},showCloseButton:!0,onClose:p,"data-external-id":`${n.type===O.LeaveEncashment?"leave-encashment-dialog":"unpaid-leave-deduction-dialog"}`,autoClose:"never"})})},le=R({dailyWageCalculationAccordionTitle:{id:"hr.payroll.daily-rate-calculator.daily-wage-calculation-accordion-title",defaultMessage:"Daily Wage Calculation"},dailyWageCalculationAccordionSubtitle:{id:"hr.payroll.daily-rate-calculator.daily-wage-calculation-accordion-subtitle",defaultMessage:"Set the daily rate calculation for employee's salary"},dailyWageCalculationTableHeader1:{id:"hr.payroll.daily-rate-calculator.daily-wage-calculation-table-header-1",defaultMessage:"Service"},dailyWageCalculationTableHeader2:{id:"hr.payroll.daily-rate-calculator.daily-wage-calculation-table-header-2",defaultMessage:"Daily Wage Calculation"},leaveEncashmentDescriptionFallback:{id:"hr.payroll.daily-rate-calculator.leave-encashment.description-fallback",defaultMessage:"Calculated in end of service eligibility"},unpaidLeaveDeductionDescriptionFallback:{id:"hr.payroll.daily-rate-calculator.unpaid-leave-deduction.description-fallback",defaultMessage:"Calculated in leave policy"},salaryProrationSuccessMessage:{id:"hr.payroll.daily-rate-calculator.salary-proration.success-message",defaultMessage:"Daily wage calculation for 'Salary Proration' updated successfully"},leaveEncashmentSuccessMessage:{id:"hr.payroll.daily-rate-calculator.leave-encashment.success-message",defaultMessage:"Daily wage calculation for 'EOS leave Encashment' updated successfully"},unpaidLeaveSuccessMessage:{id:"hr.payroll.daily-rate-calculator.unpaid-leave.success-message",defaultMessage:"Daily wage calculation for'Unpaid Leave Deduction' updated successfully"},days:{id:"common.days",defaultMessage:"days"}}),zi=({payrollConfiguration:a,eosPolicyList:t,isLoading:o,onRefetch:s})=>{const n=T(),l=z(),{hash:p}=Le(),u=ue(),{handleRequestExceptionAlert:d}=Q(),y=ae(),i=At(),m=se(Ds),h=se(Ke),f=se(ba),[x,j]=c.useState(void 0),{mutateAsync:D,isPending:C}=Jt(),{mutateAsync:v,isPending:b}=Xt(),{mutateAsync:P,isPending:N}=en(),{data:k}=Et({companyId:l},{filters:{draft:"false",paid:"false"}}),E=c.useMemo(()=>[{title:n.formatMessage(le.dailyWageCalculationTableHeader1),dataExternalId:"service",dataIndex:"type",align:"left",proportion:3,accessor:(r,g)=>m(g.type)},{title:n.formatMessage(le.dailyWageCalculationTableHeader2),dataExternalId:"calculation",dataIndex:"calculationType",align:"left",proportion:3,accessor:(r,g)=>g.component!==void 0&&g.calculationType!==void 0?`${f(g.component)} / ${g.customDays?g.customDays+" "+n.formatMessage(le.days):h(g.calculationType)}`:g.id===O.LeaveEncashment?n.formatMessage(le.leaveEncashmentDescriptionFallback):n.formatMessage(le.unpaidLeaveDeductionDescriptionFallback)},{title:"",dataExternalId:"action",dataIndex:"id",align:"right",proportion:1,accessor:(r,g)=>e.jsx(we,{onClick:()=>j(g),"data-external-id":"edit-button",size:"small",children:e.jsx(Ne,{color:"primary"})})}],[n,h,m,f]),F=c.useMemo(()=>{const r=a==null?void 0:a.dailyAmountConfiguration;return[{id:O.SalaryProration,type:O.SalaryProration,calculationType:r==null?void 0:r.prorationCalculationType,component:da.BasicAllowance,customDays:r==null?void 0:r.prorationCustomDays},{id:O.LeaveEncashment,type:O.LeaveEncashment,calculationType:r==null?void 0:r.leaveEncashmentCalculationType,component:r==null?void 0:r.leaveEncashmentSalaryComponent,customDays:r==null?void 0:r.leaveEncashmentCustomDays},{id:O.UnpaidLeaveDeduction,type:O.UnpaidLeaveDeduction,calculationType:r==null?void 0:r.unpaidLeaveCalculationType,component:r==null?void 0:r.unpaidLeaveSalaryComponent,customDays:r==null?void 0:r.unpaidLeaveCustomDays}]},[a==null?void 0:a.dailyAmountConfiguration]),B=c.useCallback(async r=>{try{await D({urlParams:{companyId:l},data:{salaryProrationCalculationType:r.monthCalculation,salaryProrationCustomDays:r.customDays}}),i({event:"configure-salary-proration-month-calculation.click_submit",monthCalculation:r.monthCalculation,customDays:r.monthCalculation===K.CustomDays?r.customDays:void 0}),u.success({message:n.formatMessage(le.salaryProrationSuccessMessage)}),j(void 0)}catch(g){d(g)}finally{await s()}},[d,n,u,l,s,D,i]),A=c.useCallback(async(r,g)=>{try{r===O.LeaveEncashment?(await v({urlParams:{companyId:l},data:{enabled:g.overwriteCalculation,leaveEncashmentCalculationType:g.monthCalculation,leaveEncashmentCustomDays:g.customDays,leaveEncashmentSalaryComponent:g.salaryComponent}}),i({event:"configure-leave-encashment-month-calculation.click_submit",overwriteCalculation:g.overwriteCalculation,salaryComponent:g.salaryComponent,monthCalculation:g.monthCalculation,customDays:g.monthCalculation===K.CustomDays?g.customDays:void 0}),u.success({message:n.formatMessage(le.leaveEncashmentSuccessMessage)})):r===O.UnpaidLeaveDeduction&&(await P({urlParams:{companyId:l},data:{enabled:g.overwriteCalculation,unpaidLeaveCalculationType:g.monthCalculation,unpaidLeaveCustomDays:g.customDays,unpaidLeaveSalaryComponent:g.salaryComponent}}),i({event:"configure-unpaid-leave-encashment-month-calculation.click_submit",overwriteCalculation:g.overwriteCalculation,salaryComponent:g.salaryComponent,monthCalculation:g.monthCalculation,customDays:g.monthCalculation===K.CustomDays?g.customDays:void 0}),u.success({message:n.formatMessage(le.unpaidLeaveSuccessMessage)})),j(void 0)}catch(L){d(L)}finally{await s()}},[d,n,u,l,s,v,P,i]),M=c.useCallback((r,g)=>{j(void 0),r===O.LeaveEncashment?y.pushToApp(V.APP_HRADMIN,"/settings/payroll#eos-eligibility"):r===O.UnpaidLeaveDeduction&&g&&y.pushToApp(V.APP_HRADMIN,`/settings/time-off/policy/edit/${g}`)},[y]);return e.jsxs(ha,{scroll:!o&&p==="#daily-wage",children:[e.jsx(Me,{"data-external-id":"daily-wage-calculation-accordion",expandedByDefault:p==="#daily-wage",title:e.jsx(be,{"data-external-id":"header",title:n.formatMessage(le.dailyWageCalculationAccordionTitle),subtitle:n.formatMessage(le.dailyWageCalculationAccordionSubtitle)}),children:o?e.jsx(wn,{open:o,children:e.jsx(Pn,{color:"inherit"})}):e.jsx(he,{columns:E,data:F,variant:"outlined"})}),x!==void 0?e.jsxs(e.Fragment,{children:[x.type===O.SalaryProration&&e.jsx(Ei,{open:x!==void 0,isLoading:C,dailyWage:(({calculationType:r,customDays:g})=>({calculationType:r,customDays:g}))(x),onSave:B,onClose:()=>j(void 0)}),x.type===O.LeaveEncashment&&e.jsx(ot,{open:x!==void 0,isLoading:b,eosPolicyList:t,dailyWage:x,onSave:A,onClose:()=>j(void 0),onPolicyRedirection:M}),x.type===O.UnpaidLeaveDeduction&&e.jsx(ot,{open:x!==void 0,isLoading:N,timeOffUnpaidPolicyList:(k==null?void 0:k.data)??[],dailyWage:x,onSave:A,onClose:()=>j(void 0),onPolicyRedirection:M})]}):null]})},Oi="/payroll/manage/salary-configuration",Kr=()=>{var u,d;const a=T(),t=z(),{data:o,isPending:s,refetch:n}=$n({companyId:t}),{data:l,refetch:p}=Ut({companyId:t});return e.jsx(On,{header:e.jsx(zn,{title:a.formatMessage(oa.payrollSettings)}),children:e.jsxs(ra,{gap:2,children:[e.jsx(H,{can:Tn,children:e.jsx(Yn,{})}),e.jsx(H,{can:Je,children:e.jsx(Ta,{children:e.jsx(Wo,{payrollConfiguration:o})})}),e.jsx(H,{can:Un,children:e.jsx(Ta,{children:e.jsx(ia,{header:a.formatMessage(oa.header),content:a.formatMessage(oa.content),navigationText:a.formatMessage(oa.manage),navigationUrl:Oi,"data-external-id":"salary-and-bank-details"})})}),e.jsx(H,{can:Je,children:e.jsx(zi,{payrollConfiguration:o,eosPolicyList:l??[],isLoading:s,onRefetch:async()=>{await n()}})}),e.jsx(H,{can:An,children:e.jsx(Ta,{children:e.jsx(li,{})})}),e.jsx(H,{can:Nn,children:e.jsx(zo,{})}),e.jsx(H,{can:xt,children:e.jsx(Hs,{})}),e.jsx(H,{can:In,children:e.jsx(vs,{})}),e.jsx(H,{can:_n,children:e.jsx(ti,{})}),e.jsx(H,{can:Rn,children:e.jsx(qo,{})}),e.jsx(H,{can:Bn,children:e.jsx(uo,{})}),e.jsx(H,{can:Je,children:e.jsx(ho,{eosEligibileLeaveTypesData:l,isFieldsDisabled:((u=o==null?void 0:o.dailyAmountConfiguration)==null?void 0:u.leaveEncashmentCalculationType)!==void 0&&((d=o==null?void 0:o.dailyAmountConfiguration)==null?void 0:d.leaveEncashmentSalaryComponent)!==void 0,onRefetch:async()=>{await p()}})}),e.jsxs(H,{can:En,children:[e.jsx(eo,{}),e.jsx(yi,{}),e.jsx(Xs,{}),e.jsx(mo,{})]}),e.jsx(H,{can:Je,children:e.jsx(gi,{})})]})})},oa=R({payrollSettings:{id:"hr.settings.payroll-settings",defaultMessage:"Payroll settings"},header:{id:"hr.app.page.configuration.payroll.salaries.header",defaultMessage:"Configure salaries and bank details for all your employees"},content:{id:"hr.app.page.configuration.payroll.salaries.description",defaultMessage:"After adding your employees to Bayzat, download the excel to the right to configure salaries and bank details for all employees."},manage:{id:"hr.app.page.configuration.payroll.salaries.manage",defaultMessage:"Manage"}});export{Kr as default};
