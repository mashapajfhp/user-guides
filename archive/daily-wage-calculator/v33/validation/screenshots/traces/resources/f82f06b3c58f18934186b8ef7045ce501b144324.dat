import{ad as $,j as e,ae as V,hg as te,af as s,hh as le,H as ce,gd as H,cX as de,d as ge,a as w,r as l,hi as pe,P as me,fV as G,T as c,gv as fe,fT as X,a1 as he,aa as ue,a2 as xe,a3 as ve,bW as q,fO as Ie,cn as ye,cV as je,fS as be}from"./assets/index-rhBbSAok.js";import{I as P}from"./ButtonWithTooltip-ZRvEDUuf__cache.js";import{C as Me}from"./CommonFileCheckIcon-0Ujj8aBI__cache.js";import{C as Ce}from"./CommonFileRemoveIcon-khDOLK4n__cache.js";import{C as D}from"./CommonFileUploadIcon-WsQb3UxV__cache.js";import{H as Ae}from"./Hyperlink3Icon-ddHc9UkS__cache.js";import{N as Pe}from"./NavigationMenuVerticalIcon-Y4il9WHM__cache.js";const J="files-folders/common-file-subtract",De=`${V}#${J}`,y=$(e.jsx("use",{href:De}),"CommonFileSubtract");y.id=J;const K="work-office-companies/office-file-sheet",Ne=`${V}#${K}`,Q=$(e.jsx("use",{href:Ne}),"OfficeFileSheet");Q.id=K;var we=(n=>(n.Idle="Idle",n.Uploading="Uploading",n.Processing="Processing",n.AIProcessing="AIProcessing",n.Uploaded="Uploaded",n.Attached="Attached",n.Invalid="Invalid",n.Failed="Failed",n.Deleting="Deleting",n.Deleted="Deleted",n))(we||{});const t=ge({fetchingPreview:{id:"common.file-upload-card.fetching-preview",defaultMessage:"Fetching preview..."},previewUnavailable:{id:"common.file-upload-card.preview-unavailable",defaultMessage:"This file can not be previewed."},attached:{id:"common.file-attached",defaultMessage:"File attached"},uploaded:{id:"common.uploaded-successfully",defaultMessage:"Uploaded successfully"},deleted:{id:"common.file-deleted",defaultMessage:"File deleted"},uploading:{id:"common.uploading-in-progress",defaultMessage:"Uploading..."},processing:{id:"common.processing-in-progress",defaultMessage:"Processing..."},deleting:{id:"common.deleting-in-progress",defaultMessage:"Deleting..."},seeMore:{id:"common.see-more",defaultMessage:"<a>See more</a>"},actions:{id:"common.actions",defaultMessage:"Actions"},noFileUploaded:{id:"common.no-file-uploaded",defaultMessage:"No file uploaded"},aiProcessing:{id:"common.running-ai-verification",defaultMessage:"Running AI verification"}}),Fe={Idle:D,Uploading:D,Processing:D,Attached:Ae,Uploaded:Me,Invalid:y,Failed:Ce,Deleting:y,Deleted:y,AIProcessing:be},Se={Idle:void 0,Uploading:void 0,Processing:void 0,Attached:t.attached,Uploaded:t.uploaded,Invalid:void 0,Failed:void 0,Deleting:void 0,Deleted:t.deleted,AIProcessing:void 0},Ue={Idle:void 0,Uploading:t.uploading,Processing:t.processing,Attached:void 0,Uploaded:void 0,Invalid:void 0,Failed:void 0,Deleting:t.deleting,Deleted:void 0,AIProcessing:t.aiProcessing},N={AIProcessing:{border:te,icon:"ai",message:void 0},Idle:{border:s.grey[200],icon:"primary",message:void 0},Uploading:{border:s.grey[200],icon:"primary",message:void 0},Processing:{border:s.grey[200],icon:"primary",message:void 0},Attached:{border:s.grey[200],icon:"info",message:le.text.disabled},Uploaded:{border:s.green[500],icon:"success",message:s.green[700]},Failed:{border:s.orange[500],icon:"warning",message:s.orange[700]},Invalid:{border:s.red[500],icon:"error",message:s.red[500]},Deleting:{border:s.grey[200],icon:"primary",message:void 0},Deleted:{border:s.grey[100],icon:"action",message:s.grey[400]}},ke=ce()((n,{status:a,isSelected:d,showStatusBorder:g,isClickable:m})=>({root:{display:"flex",flexDirection:"column",borderColor:d?s.grey[900]:g?N[a].border:s.grey[200],cursor:m?"pointer":"unset","&:hover":m?{boxShadow:n.shadows[1]}:void 0},mainInfoContainer:{display:"flex",alignItems:"center",padding:n.spacing(1.5,1)},statusIcon:{color:n.palette.text.primary},progressContainer:{minWidth:0,position:"relative",width:"100%",marginLeft:n.spacing(1),marginRight:n.spacing(2)},fileNameAndPercentageContainer:{display:"flex",justifyContent:"space-between",alignItems:"center",gap:n.spacing(2)},fileName:{whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",paddingRight:n.spacing(.5)},progressBar:{marginTop:n.spacing(1),marginBottom:n.spacing(1),height:5},message:{color:N[a].message??n.palette.text.primary},actionsContainer:{display:"flex",alignItems:"center",gap:n.spacing(1)},fileInfoContainer:{padding:n.spacing(2),paddingBottom:n.spacing(1),display:"flex",minWidth:0,gap:n.spacing(2)},previewContainer:{height:180,width:"100%",background:s.grey[50],display:"flex",justifyContent:"center",alignItems:"center",textAlign:"center",padding:n.spacing(1)},imagePreview:{height:"100%",maxWidth:"100%"},fileMetaDataWrapper:{minWidth:"40%",display:"flex",flexDirection:"column",gap:n.spacing(2),width:"fit-content"},metadataLabel:{display:"flex",gap:n.spacing(.5),whiteSpace:"nowrap",alignItems:"baseline"},previewStateLabel:{color:s.purple[600]}})),ze=H("div",n=>({root:{display:"flex",gap:n.spacing(1),alignItems:"baseline"}})),He=()=>{const n=w();return e.jsxs(ze,{children:[e.jsx(G,{Icon:Q,fontSize:"x-small"}),e.jsx(c,{variant:"body2",color:"textSecondary",children:n.formatMessage(t.noFileUploaded)})]})},Ge=({fileName:n,status:a,progressValue:d=a==="Idle"?0:void 0,message:g,isSelected:m,showStatusBorder:f=!0,showStatusIcon:Y=!0,actions:I,filePreview:r,progressMessage:F,"data-external-id":Z="file-upload-card",onCancel:S,onClick:U})=>{const h=w(),{classes:i}=ke({status:a,isSelected:m,showStatusBorder:f,isClickable:!!U}),[k,z]=l.useState(null),{width:j,ref:_}=pe({handleWidth:!0}),[O,ee]=l.useState(!1),ne=Fe[a],b=["Idle","Uploading","Processing","Deleting","AIProcessing"].includes(a),L=Ue[a],T=F??(L?h.formatMessage(L):void 0),W=typeof d=="number"?"determinate":"indeterminate",B=!F&&a!=="Idle"&&b&&W==="determinate",E=Se[a],ae=E?h.formatMessage(E):void 0,p=l.useMemo(()=>(I==null?void 0:I.filter(({isHidden:o})=>o!==!0))??[],[I]),M=p.length===1,[se,C]=l.useMemo(()=>O?[M?p:[],M?[]:p]:p.length>3?[p.slice(0,2),p.slice(2)]:[p,[]],[p,O,M]),ie=a==="Idle"||a==="Uploading"||a==="Processing",oe=l.useCallback(o=>{z(o.currentTarget)},[]),R=l.useCallback(()=>{z(null)},[]);return l.useLayoutEffect(()=>{j&&ee(j<350)},[j]),e.jsx(me,{variant:"outlined",elevation:0,className:i.root,children:e.jsxs("div",{onClick:U,ref:_,"data-external-id":Z,children:[e.jsxs("div",{className:i.mainInfoContainer,children:[Y&&e.jsx(G,{Icon:ne,fontSize:"x-small",color:N[a].icon}),e.jsxs("div",{className:i.progressContainer,children:[e.jsxs("div",{className:i.fileNameAndPercentageContainer,children:[e.jsx(c,{className:i.fileName,variant:"body2","data-external-id":"file-name",children:n}),B&&e.jsxs(c,{color:"textSecondary",variant:"body2",children:[d,"%"]}),!B&&T&&e.jsx(c,{color:"textSecondary",variant:"body2",children:T})]}),b&&e.jsx(fe,{color:a==="AIProcessing"?"ai":"primary",value:d,className:i.progressBar,variant:W}),!b&&e.jsx(c,{variant:"caption",className:i.message,"data-external-id":"status-message",children:g?e.jsx(Le,{message:g}):ae})]}),e.jsx("div",{className:i.actionsContainer,"data-external-id":"upload-card-actions-container",children:ie?S&&e.jsx(P,{title:h.formatMessage({id:"common.action.cancel",defaultMessage:"Cancel"}),onClick:S,size:"small",children:e.jsx(X,{})}):e.jsxs(e.Fragment,{children:[se.map(({icon:o,name:u,to:x,onClick:v},A)=>e.jsx(P,{title:u,to:x,onClick:v,...x?{external:!0,download:u}:{},size:"small",children:e.jsx(o,{})},A)),C.length>0&&e.jsx(P,{title:h.formatMessage(t.actions),onClick:oe,size:"small",children:e.jsx(Pe,{})})]})})]}),r&&e.jsxs("div",{children:[e.jsx(he,{variant:"middle"}),e.jsxs("div",{className:i.fileInfoContainer,children:[e.jsx("div",{className:i.fileMetaDataWrapper,children:r.metadata.map((o,u)=>e.jsxs("div",{children:[e.jsxs("div",{className:i.metadataLabel,children:[e.jsx(c,{color:"textSecondary",variant:"caption",display:"block",children:o.label}),o.tagInformation&&e.jsx(ue,{...o.tagInformation})]}),e.jsx(c,{variant:"body2",children:o.value})]},u))}),e.jsxs("div",{className:i.previewContainer,children:["src"in r&&!r.isNotImage&&!r.isFetching&&e.jsx("img",{className:i.imagePreview,src:r.src,alt:n}),"src"in r&&(r.isFetching||r.isNotImage)&&e.jsx(c,{className:i.previewStateLabel,variant:"caption",children:r.isFetching?h.formatMessage(t.fetchingPreview):h.formatMessage(t.previewUnavailable)}),"customContent"in r&&r.customContent]})]})]}),C.length>0&&e.jsx(xe,{anchorEl:k,open:!!k,onClose:R,children:C.map(({name:o,icon:u,to:x,onClick:v},A)=>l.createElement(ve,{component:q,raw:!0,to:x,onClick:re=>{R(),v==null||v(re)},...x?{external:!0,download:o}:{},key:A},e.jsx(Ie,{children:e.jsx(u,{fontSize:"small",color:"action"})}),e.jsx(ye,{children:o})))})]})})},Oe=H(de,n=>({paper:{display:"flex",maxWidth:500,padding:n.spacing(2),gap:n.spacing(1),alignItems:"center"}})),Le=({message:n})=>{const a=w(),[d,g]=l.useState(null),m=l.useCallback(f=>{g(f.currentTarget),f.stopPropagation()},[]);return n.length<80?e.jsx(e.Fragment,{children:n}):e.jsxs(e.Fragment,{children:[e.jsxs(c,{variant:"body2",children:[`${n.slice(0,80)}... `,a.formatMessage(t.seeMore,{a:f=>e.jsx(q,{onClick:m,children:f})})]}),e.jsxs(Oe,{open:!!d,anchorEl:d,anchorOrigin:{vertical:"bottom",horizontal:"center"},transformOrigin:{vertical:"top",horizontal:"center"},onClose:()=>g(null),children:[n,e.jsx(je,{onClick:()=>g(null),children:e.jsx(X,{})})]})]})};export{we as F,Q as O,Ge as a,He as b};
