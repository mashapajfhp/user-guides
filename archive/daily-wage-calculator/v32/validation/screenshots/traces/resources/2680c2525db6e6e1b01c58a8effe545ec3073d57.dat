import{j as m,ad as Wr,ae as Br,hF as ge,hG as he,hH as Pi,hI as Ci,r as b,da as I,H as Le,af as de,d as Ce,a as Te,c2 as Rr,T as q,cV as pe,bS as Lr,a1 as Zr,fT as Hr,hq as Kr,hi as Vr,hJ as $r,bW as Qr,hK as Ur,b7 as qr,f$ as Gr,a0 as Jr,bM as Ir,hL as en,bB as rn,P as nn,bp as on,fR as tn,bK as an,c3 as sn}from"./assets/index-rhBbSAok.js";import{u as ln}from"./useLocaleBasedIconRotation-KalKdOmk__cache.js";import{u as un}from"./useFormPrompt-vGsZtCUZ__cache.js";import{P as C}from"./index-0cpOJbKN__cache.js";import{P as fn}from"./PdfViewer-kA7wiOtp__cache.js";import{A as cn}from"./ArrowRight1Icon-_5Cuu06x__cache.js";import{C as dn}from"./CommonFileUploadIcon-WsQb3UxV__cache.js";import{I as pn}from"./ImageFileLandscapeAlternateIcon-9b_8SJCt__cache.js";import{Z as mn,a as vn}from"./ZoomOut1Icon-hGqvTTCv__cache.js";import{D as gn}from"./DownloadBottomIcon-rr6q8xxr__cache.js";import{O as hn}from"./OfficeFilePdf1Icon-7sFtfR3c__cache.js";import{F as Ti}from"./Fab-5bdzkMtB__cache.js";const bn=e=>m.jsx(_r,{"data-external-id":"custom-file-uploader",...e}),Di=["B","KB","MB","GB","TB"];function yn(e){const r=Number(e);if(!r||isNaN(r))return`0 ${Di[0]}`;const i=Math.floor(Math.log(r)/Math.log(1024));return`${(r/Math.pow(1024,i)).toFixed(2)} ${Di[i]}`}const Ji="files-folders/common-file-empty-alternate",wn=`${Br}#${Ji}`,Ii=Wr(m.jsx("use",{href:wn}),"CommonFileEmptyAlternate");Ii.id=Ji;var Sn=new Map([["aac","audio/aac"],["abw","application/x-abiword"],["arc","application/x-freearc"],["avif","image/avif"],["avi","video/x-msvideo"],["azw","application/vnd.amazon.ebook"],["bin","application/octet-stream"],["bmp","image/bmp"],["bz","application/x-bzip"],["bz2","application/x-bzip2"],["cda","application/x-cdf"],["csh","application/x-csh"],["css","text/css"],["csv","text/csv"],["doc","application/msword"],["docx","application/vnd.openxmlformats-officedocument.wordprocessingml.document"],["eot","application/vnd.ms-fontobject"],["epub","application/epub+zip"],["gz","application/gzip"],["gif","image/gif"],["heic","image/heic"],["heif","image/heif"],["htm","text/html"],["html","text/html"],["ico","image/vnd.microsoft.icon"],["ics","text/calendar"],["jar","application/java-archive"],["jpeg","image/jpeg"],["jpg","image/jpeg"],["js","text/javascript"],["json","application/json"],["jsonld","application/ld+json"],["mid","audio/midi"],["midi","audio/midi"],["mjs","text/javascript"],["mp3","audio/mpeg"],["mp4","video/mp4"],["mpeg","video/mpeg"],["mpkg","application/vnd.apple.installer+xml"],["odp","application/vnd.oasis.opendocument.presentation"],["ods","application/vnd.oasis.opendocument.spreadsheet"],["odt","application/vnd.oasis.opendocument.text"],["oga","audio/ogg"],["ogv","video/ogg"],["ogx","application/ogg"],["opus","audio/opus"],["otf","font/otf"],["png","image/png"],["pdf","application/pdf"],["php","application/x-httpd-php"],["ppt","application/vnd.ms-powerpoint"],["pptx","application/vnd.openxmlformats-officedocument.presentationml.presentation"],["rar","application/vnd.rar"],["rtf","application/rtf"],["sh","application/x-sh"],["svg","image/svg+xml"],["swf","application/x-shockwave-flash"],["tar","application/x-tar"],["tif","image/tiff"],["tiff","image/tiff"],["ts","video/mp2t"],["ttf","font/ttf"],["txt","text/plain"],["vsd","application/vnd.visio"],["wav","audio/wav"],["weba","audio/webm"],["webm","video/webm"],["webp","image/webp"],["woff","font/woff"],["woff2","font/woff2"],["xhtml","application/xhtml+xml"],["xls","application/vnd.ms-excel"],["xlsx","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"],["xml","application/xml"],["xul","application/vnd.mozilla.xul+xml"],["zip","application/zip"],["7z","application/x-7z-compressed"],["mkv","video/x-matroska"],["mov","video/quicktime"],["msg","application/vnd.ms-outlook"]]);function De(e,r){var i=Pn(e);if(typeof i.path!="string"){var n=e.webkitRelativePath;Object.defineProperty(i,"path",{value:typeof r=="string"?r:typeof n=="string"&&n.length>0?n:e.name,writable:!1,configurable:!1,enumerable:!0})}return i}function Pn(e){var r=e.name,i=r&&r.lastIndexOf(".")!==-1;if(i&&!e.type){var n=r.split(".").pop().toLowerCase(),o=Sn.get(n);o&&Object.defineProperty(e,"type",{value:o,writable:!1,configurable:!1,enumerable:!0})}return e}var Cn=[".DS_Store","Thumbs.db"];function Tn(e){return ge(this,void 0,void 0,function(){return he(this,function(r){return ke(e)&&Dn(e.dataTransfer)?[2,jn(e.dataTransfer,e.type)]:An(e)?[2,En(e)]:Array.isArray(e)&&e.every(function(i){return"getFile"in i&&typeof i.getFile=="function"})?[2,On(e)]:[2,[]]})})}function Dn(e){return ke(e)}function An(e){return ke(e)&&ke(e.target)}function ke(e){return typeof e=="object"&&e!==null}function En(e){return li(e.target.files).map(function(r){return De(r)})}function On(e){return ge(this,void 0,void 0,function(){var r;return he(this,function(i){switch(i.label){case 0:return[4,Promise.all(e.map(function(n){return n.getFile()}))];case 1:return r=i.sent(),[2,r.map(function(n){return De(n)})]}})})}function jn(e,r){return ge(this,void 0,void 0,function(){var i,n;return he(this,function(o){switch(o.label){case 0:return e.items?(i=li(e.items).filter(function(t){return t.kind==="file"}),r!=="drop"?[2,i]:[4,Promise.all(i.map(zn))]):[3,2];case 1:return n=o.sent(),[2,Ai(er(n))];case 2:return[2,Ai(li(e.files).map(function(t){return De(t)}))]}})})}function Ai(e){return e.filter(function(r){return Cn.indexOf(r.name)===-1})}function li(e){if(e===null)return[];for(var r=[],i=0;i<e.length;i++){var n=e[i];r.push(n)}return r}function zn(e){if(typeof e.webkitGetAsEntry!="function")return Ei(e);var r=e.webkitGetAsEntry();return r&&r.isDirectory?ir(r):Ei(e)}function er(e){return e.reduce(function(r,i){return Pi(Pi([],Ci(r),!1),Ci(Array.isArray(i)?er(i):[i]),!1)},[])}function Ei(e){var r=e.getAsFile();if(!r)return Promise.reject("".concat(e," is not a File"));var i=De(r);return Promise.resolve(i)}function Fn(e){return ge(this,void 0,void 0,function(){return he(this,function(r){return[2,e.isDirectory?ir(e):Mn(e)]})})}function ir(e){var r=e.createReader();return new Promise(function(i,n){var o=[];function t(){var a=this;r.readEntries(function(s){return ge(a,void 0,void 0,function(){var l,f,u;return he(this,function(c){switch(c.label){case 0:if(s.length)return[3,5];c.label=1;case 1:return c.trys.push([1,3,,4]),[4,Promise.all(o)];case 2:return l=c.sent(),i(l),[3,4];case 3:return f=c.sent(),n(f),[3,4];case 4:return[3,6];case 5:u=Promise.all(s.map(Fn)),o.push(u),t(),c.label=6;case 6:return[2]}})})},function(s){n(s)})}t()})}function Mn(e){return ge(this,void 0,void 0,function(){return he(this,function(r){return[2,new Promise(function(i,n){e.file(function(o){var t=De(o,e.fullPath);i(t)},function(o){n(o)})})]})})}var xn=function(e,r){if(e&&r){var i=Array.isArray(r)?r:r.split(","),n=e.name||"",o=(e.type||"").toLowerCase(),t=o.replace(/\/.*$/,"");return i.some(function(a){var s=a.trim().toLowerCase();return s.charAt(0)==="."?n.toLowerCase().endsWith(s):s.endsWith("/*")?t===s.replace(/\/.*$/,""):o===s})}return!0};function Oi(e){return Nn(e)||Yn(e)||nr(e)||_n()}function _n(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Yn(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function Nn(e){if(Array.isArray(e))return ui(e)}function ji(e,r){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),i.push.apply(i,n)}return i}function zi(e){for(var r=1;r<arguments.length;r++){var i=arguments[r]!=null?arguments[r]:{};r%2?ji(Object(i),!0).forEach(function(n){rr(e,n,i[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):ji(Object(i)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(i,n))})}return e}function rr(e,r,i){return r in e?Object.defineProperty(e,r,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[r]=i,e}function Pe(e,r){return Wn(e)||Xn(e,r)||nr(e,r)||kn()}function kn(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function nr(e,r){if(e){if(typeof e=="string")return ui(e,r);var i=Object.prototype.toString.call(e).slice(8,-1);if(i==="Object"&&e.constructor&&(i=e.constructor.name),i==="Map"||i==="Set")return Array.from(e);if(i==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return ui(e,r)}}function ui(e,r){(r==null||r>e.length)&&(r=e.length);for(var i=0,n=new Array(r);i<r;i++)n[i]=e[i];return n}function Xn(e,r){var i=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(i!=null){var n=[],o=!0,t=!1,a,s;try{for(i=i.call(e);!(o=(a=i.next()).done)&&(n.push(a.value),!(r&&n.length===r));o=!0);}catch(l){t=!0,s=l}finally{try{!o&&i.return!=null&&i.return()}finally{if(t)throw s}}return n}}function Wn(e){if(Array.isArray(e))return e}var or="file-invalid-type",tr="file-too-large",ar="file-too-small",sr="too-many-files",te={FileInvalidType:or,FileTooLarge:tr,FileTooSmall:ar,TooManyFiles:sr},Bn=function(r){r=Array.isArray(r)&&r.length===1?r[0]:r;var i=Array.isArray(r)?"one of ".concat(r.join(", ")):r;return{code:or,message:"File type must be ".concat(i)}},Fi=function(r){return{code:tr,message:"File is larger than ".concat(r," ").concat(r===1?"byte":"bytes")}},Mi=function(r){return{code:ar,message:"File is smaller than ".concat(r," ").concat(r===1?"byte":"bytes")}},Rn={code:sr,message:"Too many files"};function lr(e,r){var i=e.type==="application/x-moz-file"||xn(e,r);return[i,i?null:Bn(r)]}function ur(e,r,i){if(oe(e.size))if(oe(r)&&oe(i)){if(e.size>i)return[!1,Fi(i)];if(e.size<r)return[!1,Mi(r)]}else{if(oe(r)&&e.size<r)return[!1,Mi(r)];if(oe(i)&&e.size>i)return[!1,Fi(i)]}return[!0,null]}function oe(e){return e!=null}function Ln(e){var r=e.files,i=e.accept,n=e.minSize,o=e.maxSize,t=e.multiple,a=e.maxFiles,s=e.validator;return!t&&r.length>1||t&&a>=1&&r.length>a?!1:r.every(function(l){var f=lr(l,i),u=Pe(f,1),c=u[0],d=ur(l,n,o),v=Pe(d,1),g=v[0],y=s?s(l):null;return c&&g&&!y})}function Xe(e){return typeof e.isPropagationStopped=="function"?e.isPropagationStopped():typeof e.cancelBubble<"u"?e.cancelBubble:!1}function _e(e){return e.dataTransfer?Array.prototype.some.call(e.dataTransfer.types,function(r){return r==="Files"||r==="application/x-moz-file"}):!!e.target&&!!e.target.files}function xi(e){e.preventDefault()}function Zn(e){return e.indexOf("MSIE")!==-1||e.indexOf("Trident/")!==-1}function Hn(e){return e.indexOf("Edge/")!==-1}function Kn(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:window.navigator.userAgent;return Zn(e)||Hn(e)}function V(){for(var e=arguments.length,r=new Array(e),i=0;i<e;i++)r[i]=arguments[i];return function(n){for(var o=arguments.length,t=new Array(o>1?o-1:0),a=1;a<o;a++)t[a-1]=arguments[a];return r.some(function(s){return!Xe(n)&&s&&s.apply(void 0,[n].concat(t)),Xe(n)})}}function Vn(){return"showOpenFilePicker"in window}function $n(e){if(oe(e)){var r=Object.entries(e).filter(function(i){var n=Pe(i,2),o=n[0],t=n[1],a=!0;return fr(o)||(console.warn('Skipped "'.concat(o,'" because it is not a valid MIME type. Check https://developer.mozilla.org/en-US/docs/Web/HTTP/Basics_of_HTTP/MIME_types/Common_types for a list of valid MIME types.')),a=!1),(!Array.isArray(t)||!t.every(cr))&&(console.warn('Skipped "'.concat(o,'" because an invalid file extension was provided.')),a=!1),a}).reduce(function(i,n){var o=Pe(n,2),t=o[0],a=o[1];return zi(zi({},i),{},rr({},t,a))},{});return[{description:"Files",accept:r}]}return e}function Qn(e){if(oe(e))return Object.entries(e).reduce(function(r,i){var n=Pe(i,2),o=n[0],t=n[1];return[].concat(Oi(r),[o],Oi(t))},[]).filter(function(r){return fr(r)||cr(r)}).join(",")}function Un(e){return e instanceof DOMException&&(e.name==="AbortError"||e.code===e.ABORT_ERR)}function qn(e){return e instanceof DOMException&&(e.name==="SecurityError"||e.code===e.SECURITY_ERR)}function fr(e){return e==="audio/*"||e==="video/*"||e==="image/*"||e==="text/*"||/\w+\/[-+.\w]+/g.test(e)}function cr(e){return/^.*\.[\w]+$/.test(e)}var Gn=["children"],Jn=["open"],In=["refKey","role","onKeyDown","onFocus","onBlur","onClick","onDragEnter","onDragOver","onDragLeave","onDrop"],eo=["refKey","onChange","onClick"];function io(e){return oo(e)||no(e)||dr(e)||ro()}function ro(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function no(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function oo(e){if(Array.isArray(e))return fi(e)}function ri(e,r){return so(e)||ao(e,r)||dr(e,r)||to()}function to(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function dr(e,r){if(e){if(typeof e=="string")return fi(e,r);var i=Object.prototype.toString.call(e).slice(8,-1);if(i==="Object"&&e.constructor&&(i=e.constructor.name),i==="Map"||i==="Set")return Array.from(e);if(i==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return fi(e,r)}}function fi(e,r){(r==null||r>e.length)&&(r=e.length);for(var i=0,n=new Array(r);i<r;i++)n[i]=e[i];return n}function ao(e,r){var i=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(i!=null){var n=[],o=!0,t=!1,a,s;try{for(i=i.call(e);!(o=(a=i.next()).done)&&(n.push(a.value),!(r&&n.length===r));o=!0);}catch(l){t=!0,s=l}finally{try{!o&&i.return!=null&&i.return()}finally{if(t)throw s}}return n}}function so(e){if(Array.isArray(e))return e}function _i(e,r){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),i.push.apply(i,n)}return i}function j(e){for(var r=1;r<arguments.length;r++){var i=arguments[r]!=null?arguments[r]:{};r%2?_i(Object(i),!0).forEach(function(n){ci(e,n,i[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):_i(Object(i)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(i,n))})}return e}function ci(e,r,i){return r in e?Object.defineProperty(e,r,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[r]=i,e}function We(e,r){if(e==null)return{};var i=lo(e,r),n,o;if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);for(o=0;o<t.length;o++)n=t[o],!(r.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function lo(e,r){if(e==null)return{};var i={},n=Object.keys(e),o,t;for(t=0;t<n.length;t++)o=n[t],!(r.indexOf(o)>=0)&&(i[o]=e[o]);return i}var vi=b.forwardRef(function(e,r){var i=e.children,n=We(e,Gn),o=mr(n),t=o.open,a=We(o,Jn);return b.useImperativeHandle(r,function(){return{open:t}},[t]),I.createElement(b.Fragment,null,i(j(j({},a),{},{open:t})))});vi.displayName="Dropzone";var pr={disabled:!1,getFilesFromEvent:Tn,maxSize:1/0,minSize:0,multiple:!0,maxFiles:0,preventDropOnDocument:!0,noClick:!1,noKeyboard:!1,noDrag:!1,noDragEventsBubbling:!1,validator:null,useFsAccessApi:!0,autoFocus:!1};vi.defaultProps=pr;vi.propTypes={children:C.func,accept:C.objectOf(C.arrayOf(C.string)),multiple:C.bool,preventDropOnDocument:C.bool,noClick:C.bool,noKeyboard:C.bool,noDrag:C.bool,noDragEventsBubbling:C.bool,minSize:C.number,maxSize:C.number,maxFiles:C.number,disabled:C.bool,getFilesFromEvent:C.func,onFileDialogCancel:C.func,onFileDialogOpen:C.func,useFsAccessApi:C.bool,autoFocus:C.bool,onDragEnter:C.func,onDragLeave:C.func,onDragOver:C.func,onDrop:C.func,onDropAccepted:C.func,onDropRejected:C.func,onError:C.func,validator:C.func};var di={isFocused:!1,isFileDialogActive:!1,isDragActive:!1,isDragAccept:!1,isDragReject:!1,acceptedFiles:[],fileRejections:[]};function mr(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},r=j(j({},pr),e),i=r.accept,n=r.disabled,o=r.getFilesFromEvent,t=r.maxSize,a=r.minSize,s=r.multiple,l=r.maxFiles,f=r.onDragEnter,u=r.onDragLeave,c=r.onDragOver,d=r.onDrop,v=r.onDropAccepted,g=r.onDropRejected,y=r.onFileDialogCancel,w=r.onFileDialogOpen,D=r.useFsAccessApi,E=r.autoFocus,P=r.preventDropOnDocument,X=r.noClick,x=r.noKeyboard,Z=r.noDrag,z=r.noDragEventsBubbling,S=r.onError,_=r.validator,Y=b.useMemo(function(){return Qn(i)},[i]),W=b.useMemo(function(){return $n(i)},[i]),B=b.useMemo(function(){return typeof w=="function"?w:Yi},[w]),R=b.useMemo(function(){return typeof y=="function"?y:Yi},[y]),F=b.useRef(null),O=b.useRef(null),ie=b.useReducer(uo,di),Ee=ri(ie,2),ae=Ee[0],k=Ee[1],$e=ae.isFocused,se=ae.isFileDialogActive,le=b.useRef(typeof window<"u"&&window.isSecureContext&&D&&Vn()),ue=function(){!le.current&&se&&setTimeout(function(){if(O.current){var h=O.current.files;h.length||(k({type:"closeDialog"}),R())}},300)};b.useEffect(function(){return window.addEventListener("focus",ue,!1),function(){window.removeEventListener("focus",ue,!1)}},[O,se,R,le]);var K=b.useRef([]),Oe=function(h){F.current&&F.current.contains(h.target)||(h.preventDefault(),K.current=[])};b.useEffect(function(){return P&&(document.addEventListener("dragover",xi,!1),document.addEventListener("drop",Oe,!1)),function(){P&&(document.removeEventListener("dragover",xi),document.removeEventListener("drop",Oe))}},[F,P]),b.useEffect(function(){return!n&&E&&F.current&&F.current.focus(),function(){}},[F,E,n]);var Q=b.useCallback(function(p){S?S(p):console.error(p)},[S]),je=b.useCallback(function(p){p.preventDefault(),p.persist(),Me(p),K.current=[].concat(io(K.current),[p.target]),_e(p)&&Promise.resolve(o(p)).then(function(h){if(!(Xe(p)&&!z)){var M=h.length,N=M>0&&Ln({files:h,accept:Y,minSize:a,maxSize:t,multiple:s,maxFiles:l,validator:_}),L=M>0&&!N;k({isDragAccept:N,isDragReject:L,isDragActive:!0,type:"setDraggedFiles"}),f&&f(p)}}).catch(function(h){return Q(h)})},[o,f,Q,z,Y,a,t,s,l,_]),be=b.useCallback(function(p){p.preventDefault(),p.persist(),Me(p);var h=_e(p);if(h&&p.dataTransfer)try{p.dataTransfer.dropEffect="copy"}catch{}return h&&c&&c(p),!1},[c,z]),ye=b.useCallback(function(p){p.preventDefault(),p.persist(),Me(p);var h=K.current.filter(function(N){return F.current&&F.current.contains(N)}),M=h.indexOf(p.target);M!==-1&&h.splice(M,1),K.current=h,!(h.length>0)&&(k({type:"setDraggedFiles",isDragActive:!1,isDragAccept:!1,isDragReject:!1}),_e(p)&&u&&u(p))},[F,u,z]),re=b.useCallback(function(p,h){var M=[],N=[];p.forEach(function(L){var we=lr(L,Y),ce=ri(we,2),Ue=ce[0],qe=ce[1],Ge=ur(L,a,t),xe=ri(Ge,2),Je=xe[0],Ie=xe[1],ei=_?_(L):null;if(Ue&&Je&&!ei)M.push(L);else{var ii=[qe,Ie];ei&&(ii=ii.concat(ei)),N.push({file:L,errors:ii.filter(function(Xr){return Xr})})}}),(!s&&M.length>1||s&&l>=1&&M.length>l)&&(M.forEach(function(L){N.push({file:L,errors:[Rn]})}),M.splice(0)),k({acceptedFiles:M,fileRejections:N,type:"setFiles"}),d&&d(M,N,h),N.length>0&&g&&g(N,h),M.length>0&&v&&v(M,h)},[k,s,Y,a,t,l,d,v,g,_]),ne=b.useCallback(function(p){p.preventDefault(),p.persist(),Me(p),K.current=[],_e(p)&&Promise.resolve(o(p)).then(function(h){Xe(p)&&!z||re(h,p)}).catch(function(h){return Q(h)}),k({type:"reset"})},[o,re,Q,z]),U=b.useCallback(function(){if(le.current){k({type:"openDialog"}),B();var p={multiple:s,types:W};window.showOpenFilePicker(p).then(function(h){return o(h)}).then(function(h){re(h,null),k({type:"closeDialog"})}).catch(function(h){Un(h)?(R(h),k({type:"closeDialog"})):qn(h)?(le.current=!1,O.current?(O.current.value=null,O.current.click()):Q(new Error("Cannot open the file picker because the https://developer.mozilla.org/en-US/docs/Web/API/File_System_Access_API is not supported and no <input> was provided."))):Q(h)});return}O.current&&(k({type:"openDialog"}),B(),O.current.value=null,O.current.click())},[k,B,R,D,re,Q,W,s]),ze=b.useCallback(function(p){!F.current||!F.current.isEqualNode(p.target)||(p.key===" "||p.key==="Enter"||p.keyCode===32||p.keyCode===13)&&(p.preventDefault(),U())},[F,U]),yi=b.useCallback(function(){k({type:"focus"})},[]),wi=b.useCallback(function(){k({type:"blur"})},[]),Si=b.useCallback(function(){X||(Kn()?setTimeout(U,0):U())},[X,U]),fe=function(h){return n?null:h},Qe=function(h){return x?null:fe(h)},Fe=function(h){return Z?null:fe(h)},Me=function(h){z&&h.stopPropagation()},Yr=b.useMemo(function(){return function(){var p=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},h=p.refKey,M=h===void 0?"ref":h,N=p.role,L=p.onKeyDown,we=p.onFocus,ce=p.onBlur,Ue=p.onClick,qe=p.onDragEnter,Ge=p.onDragOver,xe=p.onDragLeave,Je=p.onDrop,Ie=We(p,In);return j(j(ci({onKeyDown:Qe(V(L,ze)),onFocus:Qe(V(we,yi)),onBlur:Qe(V(ce,wi)),onClick:fe(V(Ue,Si)),onDragEnter:Fe(V(qe,je)),onDragOver:Fe(V(Ge,be)),onDragLeave:Fe(V(xe,ye)),onDrop:Fe(V(Je,ne)),role:typeof N=="string"&&N!==""?N:"presentation"},M,F),!n&&!x?{tabIndex:0}:{}),Ie)}},[F,ze,yi,wi,Si,je,be,ye,ne,x,Z,n]),Nr=b.useCallback(function(p){p.stopPropagation()},[]),kr=b.useMemo(function(){return function(){var p=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},h=p.refKey,M=h===void 0?"ref":h,N=p.onChange,L=p.onClick,we=We(p,eo),ce=ci({accept:Y,multiple:s,type:"file",style:{display:"none"},onChange:fe(V(N,ne)),onClick:fe(V(L,Nr)),tabIndex:-1},M,O);return j(j({},ce),we)}},[O,i,s,ne,n]);return j(j({},ae),{},{isFocused:$e&&!n,getRootProps:Yr,getInputProps:kr,rootRef:F,inputRef:O,open:fe(U)})}function uo(e,r){switch(r.type){case"focus":return j(j({},e),{},{isFocused:!0});case"blur":return j(j({},e),{},{isFocused:!1});case"openDialog":return j(j({},di),{},{isFileDialogActive:!0});case"closeDialog":return j(j({},e),{},{isFileDialogActive:!1});case"setDraggedFiles":return j(j({},e),{},{isDragActive:r.isDragActive,isDragAccept:r.isDragAccept,isDragReject:r.isDragReject});case"setFiles":return j(j({},e),{},{acceptedFiles:r.acceptedFiles,fileRejections:r.fileRejections});case"reset":return j({},di);default:return e}}function Yi(){}var H=function(e,r){return Number(e.toFixed(r))},fo=function(e,r){return typeof e=="number"?e:r},A=function(e,r,i){i&&typeof i=="function"&&i(e,r)},co=function(e){return-Math.cos(e*Math.PI)/2+.5},po=function(e){return e},mo=function(e){return e*e},vo=function(e){return e*(2-e)},go=function(e){return e<.5?2*e*e:-1+(4-2*e)*e},ho=function(e){return e*e*e},bo=function(e){return--e*e*e+1},yo=function(e){return e<.5?4*e*e*e:(e-1)*(2*e-2)*(2*e-2)+1},wo=function(e){return e*e*e*e},So=function(e){return 1- --e*e*e*e},Po=function(e){return e<.5?8*e*e*e*e:1-8*--e*e*e*e},Co=function(e){return e*e*e*e*e},To=function(e){return 1+--e*e*e*e*e},Do=function(e){return e<.5?16*e*e*e*e*e:1+16*--e*e*e*e*e},vr={easeOut:co,linear:po,easeInQuad:mo,easeOutQuad:vo,easeInOutQuad:go,easeInCubic:ho,easeOutCubic:bo,easeInOutCubic:yo,easeInQuart:wo,easeOutQuart:So,easeInOutQuart:Po,easeInQuint:Co,easeOutQuint:To,easeInOutQuint:Do},gr=function(e){typeof e=="number"&&cancelAnimationFrame(e)},$=function(e){e.mounted&&(gr(e.animation),e.animate=!1,e.animation=null,e.velocity=null)};function hr(e,r,i,n){if(e.mounted){var o=new Date().getTime(),t=1;$(e),e.animation=function(){if(!e.mounted)return gr(e.animation);var a=new Date().getTime()-o,s=a/i,l=vr[r],f=l(s);a>=i?(n(t),e.animation=null):e.animation&&(n(f),requestAnimationFrame(e.animation))},requestAnimationFrame(e.animation)}}function Ao(e){var r=e.scale,i=e.positionX,n=e.positionY;return!(Number.isNaN(r)||Number.isNaN(i)||Number.isNaN(n))}function ee(e,r,i,n){var o=Ao(r);if(!(!e.mounted||!o)){var t=e.setTransformState,a=e.transformState,s=a.scale,l=a.positionX,f=a.positionY,u=r.scale-s,c=r.positionX-l,d=r.positionY-f;i===0?t(r.scale,r.positionX,r.positionY):hr(e,n,i,function(v){var g=s+u*v,y=l+c*v,w=f+d*v;t(g,y,w)})}}function Eo(e,r,i){var n=e.offsetWidth,o=e.offsetHeight,t=r.offsetWidth,a=r.offsetHeight,s=t*i,l=a*i,f=n-s,u=o-l;return{wrapperWidth:n,wrapperHeight:o,newContentWidth:s,newDiffWidth:f,newContentHeight:l,newDiffHeight:u}}var Oo=function(e,r,i,n,o,t,a){var s=e>r?i*(a?1:.5):0,l=n>o?t*(a?1:.5):0,f=e-r-s,u=s,c=n-o-l,d=l;return{minPositionX:f,maxPositionX:u,minPositionY:c,maxPositionY:d}},gi=function(e,r){var i=e.wrapperComponent,n=e.contentComponent,o=e.setup.centerZoomedOut;if(!i||!n)throw new Error("Components are not mounted");var t=Eo(i,n,r),a=t.wrapperWidth,s=t.wrapperHeight,l=t.newContentWidth,f=t.newDiffWidth,u=t.newContentHeight,c=t.newDiffHeight,d=Oo(a,l,f,s,u,c,!!o);return d},pi=function(e,r,i,n){return n?e<r?H(r,2):e>i?H(i,2):H(e,2):H(e,2)},ve=function(e,r){var i=gi(e,r);return e.bounds=i,i};function Ze(e,r,i,n,o,t,a){var s=i.minPositionX,l=i.minPositionY,f=i.maxPositionX,u=i.maxPositionY,c=0,d=0;a&&(c=o,d=t);var v=pi(e,s-c,f+c,n),g=pi(r,l-d,u+d,n);return{x:v,y:g}}function He(e,r,i,n,o,t){var a=e.transformState,s=a.scale,l=a.positionX,f=a.positionY,u=n-s;if(typeof r!="number"||typeof i!="number")return console.error("Mouse X and Y position were not provided!"),{x:l,y:f};var c=l-r*u,d=f-i*u,v=Ze(c,d,o,t,0,0,null);return v}function Ae(e,r,i,n,o){var t=o?n:0,a=r-t;return!Number.isNaN(i)&&e>=i?i:!Number.isNaN(r)&&e<=a?a:e}var Ni=function(e,r){var i=e.setup.panning.excluded,n=e.isInitialized,o=e.wrapperComponent,t=r.target,a=o==null?void 0:o.contains(t),s=n&&t&&a;if(!s)return!1;var l=Ke(t,i);return!l},ki=function(e){var r=e.isInitialized,i=e.isPanning,n=e.setup,o=n.panning.disabled,t=r&&i&&!o;return!!t},jo=function(e,r){var i=e.transformState,n=i.positionX,o=i.positionY;e.isPanning=!0;var t=r.clientX,a=r.clientY;e.startCoords={x:t-n,y:a-o}},zo=function(e,r){var i=r.touches,n=e.transformState,o=n.positionX,t=n.positionY;e.isPanning=!0;var a=i.length===1;if(a){var s=i[0].clientX,l=i[0].clientY;e.startCoords={x:s-o,y:l-t}}};function Fo(e){var r=e.transformState,i=r.positionX,n=r.positionY,o=r.scale,t=e.setup,a=t.disabled,s=t.limitToBounds,l=t.centerZoomedOut,f=e.wrapperComponent;if(!(a||!f||!e.bounds)){var u=e.bounds,c=u.maxPositionX,d=u.minPositionX,v=u.maxPositionY,g=u.minPositionY,y=i>c||i<d,w=n>v||n<g,D=i>c?f.offsetWidth:e.setup.minPositionX||0,E=n>v?f.offsetHeight:e.setup.minPositionY||0,P=He(e,D,E,o,e.bounds,s||l),X=P.x,x=P.y;return{scale:o,positionX:y?X:i,positionY:w?x:n}}}function Mo(e,r,i,n,o){var t=e.setup.limitToBounds,a=e.wrapperComponent,s=e.bounds,l=e.transformState,f=l.scale,u=l.positionX,c=l.positionY;if(!(a===null||s===null||r===u&&i===c)){var d=Ze(r,i,s,t,n,o,a),v=d.x,g=d.y;e.setTransformState(f,v,g)}}var xo=function(e,r,i){var n=e.startCoords,o=e.transformState,t=e.setup.panning,a=t.lockAxisX,s=t.lockAxisY,l=o.positionX,f=o.positionY;if(!n)return{x:l,y:f};var u=r-n.x,c=i-n.y,d=a?l:u,v=s?f:c;return{x:d,y:v}},Be=function(e,r){var i=e.setup,n=e.transformState,o=n.scale,t=i.minScale,a=i.disablePadding;return r>0&&o>=t&&!a?r:0},_o=function(e){var r=e.mounted,i=e.setup,n=i.disabled,o=i.velocityAnimation,t=e.transformState.scale,a=o.disabled,s=!a||t>1||!n||r;return!!s},Yo=function(e){var r=e.mounted,i=e.velocity,n=e.bounds,o=e.setup,t=o.disabled,a=o.velocityAnimation,s=e.transformState.scale,l=a.disabled,f=!l||s>1||!t||r;return!(!f||!i||!n)};function No(e,r){var i=e.setup.velocityAnimation,n=i.equalToMove,o=i.animationTime,t=i.sensitivity;return n?o*r*t:o}function Xi(e,r,i,n,o,t,a,s,l,f){if(o){if(r>a&&i>a){var u=a+(e-a)*f;return u>l?l:u<a?a:u}if(r<t&&i<t){var u=t+(e-t)*f;return u<s?s:u>t?t:u}}return n?r:pi(e,t,a,o)}function ko(e,r){var i=1;return r?Math.min(i,e.offsetWidth/window.innerWidth):i}function Xo(e,r){var i=_o(e);if(i){var n=e.lastMousePosition,o=e.velocityTime,t=e.setup,a=e.wrapperComponent,s=t.velocityAnimation.equalToMove,l=Date.now();if(n&&o&&a){var f=ko(a,s),u=r.x-n.x,c=r.y-n.y,d=u/f,v=c/f,g=l-o,y=u*u+c*c,w=Math.sqrt(y)/g;e.velocity={velocityX:d,velocityY:v,total:w}}e.lastMousePosition=r,e.velocityTime=l}}function Wo(e){var r=e.velocity,i=e.bounds,n=e.setup,o=e.wrapperComponent,t=Yo(e);if(!(!t||!r||!i||!o)){var a=r.velocityX,s=r.velocityY,l=r.total,f=i.maxPositionX,u=i.minPositionX,c=i.maxPositionY,d=i.minPositionY,v=n.limitToBounds,g=n.alignmentAnimation,y=n.zoomAnimation,w=n.panning,D=w.lockAxisY,E=w.lockAxisX,P=y.animationType,X=g.sizeX,x=g.sizeY,Z=g.velocityAlignmentTime,z=Z,S=No(e,l),_=Math.max(S,z),Y=Be(e,X),W=Be(e,x),B=Y*o.offsetWidth/100,R=W*o.offsetHeight/100,F=f+B,O=u-B,ie=c+R,Ee=d-R,ae=e.transformState,k=new Date().getTime();hr(e,P,_,function($e){var se=e.transformState,le=se.scale,ue=se.positionX,K=se.positionY,Oe=new Date().getTime()-k,Q=Oe/z,je=vr[g.animationType],be=1-je(Math.min(1,Q)),ye=1-$e,re=ue+a*ye,ne=K+s*ye,U=Xi(re,ae.positionX,ue,E,v,u,f,O,F,be),ze=Xi(ne,ae.positionY,K,D,v,d,c,Ee,ie,be);(ue!==re||K!==ne)&&e.setTransformState(le,U,ze)})}}function Wi(e,r){var i=e.transformState.scale;$(e),ve(e,i),window.TouchEvent!==void 0&&r instanceof TouchEvent?zo(e,r):jo(e,r)}function br(e){var r=e.transformState.scale,i=e.setup,n=i.minScale,o=i.alignmentAnimation,t=o.disabled,a=o.sizeX,s=o.sizeY,l=o.animationTime,f=o.animationType,u=t||r<n||!a&&!s;if(!u){var c=Fo(e);c&&ee(e,c,l,f)}}function Bi(e,r,i){var n=e.startCoords,o=e.setup,t=o.alignmentAnimation,a=t.sizeX,s=t.sizeY;if(n){var l=xo(e,r,i),f=l.x,u=l.y,c=Be(e,a),d=Be(e,s);Xo(e,{x:f,y:u}),Mo(e,f,u,c,d)}}function Bo(e){if(e.isPanning){var r=e.setup.panning.velocityDisabled,i=e.velocity,n=e.wrapperComponent,o=e.contentComponent;e.isPanning=!1,e.animate=!1,e.animation=null;var t=n==null?void 0:n.getBoundingClientRect(),a=o==null?void 0:o.getBoundingClientRect(),s=(t==null?void 0:t.width)||0,l=(t==null?void 0:t.height)||0,f=(a==null?void 0:a.width)||0,u=(a==null?void 0:a.height)||0,c=s<f||l<u,d=!r&&i&&(i==null?void 0:i.total)>.1&&c;d?Wo(e):br(e)}}function hi(e,r,i,n){var o=e.setup,t=o.minScale,a=o.maxScale,s=o.limitToBounds,l=Ae(H(r,2),t,a,0,!1),f=ve(e,l),u=He(e,i,n,l,f,s),c=u.x,d=u.y;return{scale:l,positionX:c,positionY:d}}function yr(e,r,i){var n=e.transformState.scale,o=e.wrapperComponent,t=e.setup,a=t.minScale,s=t.limitToBounds,l=t.zoomAnimation,f=l.disabled,u=l.animationTime,c=l.animationType,d=f||n>=a;if((n>=1||s)&&br(e),!(d||!o||!e.mounted)){var v=r||o.offsetWidth/2,g=i||o.offsetHeight/2,y=hi(e,a,v,g);y&&ee(e,y,u,c)}}var G=function(){return G=Object.assign||function(r){for(var i,n=1,o=arguments.length;n<o;n++){i=arguments[n];for(var t in i)Object.prototype.hasOwnProperty.call(i,t)&&(r[t]=i[t])}return r},G.apply(this,arguments)};function Ri(e,r,i){if(i||arguments.length===2)for(var n=0,o=r.length,t;n<o;n++)(t||!(n in r))&&(t||(t=Array.prototype.slice.call(r,0,n)),t[n]=r[n]);return e.concat(t||Array.prototype.slice.call(r))}var Ye={previousScale:1,scale:1,positionX:0,positionY:0},Se={disabled:!1,minPositionX:null,maxPositionX:null,minPositionY:null,maxPositionY:null,minScale:1,maxScale:8,limitToBounds:!0,centerZoomedOut:!1,centerOnInit:!1,disablePadding:!1,smooth:!0,wheel:{step:.2,disabled:!1,smoothStep:.001,wheelDisabled:!1,touchPadDisabled:!1,activationKeys:[],excluded:[]},panning:{disabled:!1,velocityDisabled:!1,lockAxisX:!1,lockAxisY:!1,allowLeftClickPan:!0,allowMiddleClickPan:!0,allowRightClickPan:!0,activationKeys:[],excluded:[]},pinch:{step:5,disabled:!1,excluded:[]},doubleClick:{disabled:!1,step:.7,mode:"zoomIn",animationType:"easeOut",animationTime:200,excluded:[]},zoomAnimation:{disabled:!1,size:.4,animationTime:200,animationType:"easeOut"},alignmentAnimation:{disabled:!1,sizeX:100,sizeY:100,animationTime:200,velocityAlignmentTime:400,animationType:"easeOut"},velocityAnimation:{disabled:!1,sensitivity:1,animationTime:400,animationType:"easeOut",equalToMove:!0}},wr=function(e){var r,i,n,o;return{previousScale:(r=e.initialScale)!==null&&r!==void 0?r:Ye.scale,scale:(i=e.initialScale)!==null&&i!==void 0?i:Ye.scale,positionX:(n=e.initialPositionX)!==null&&n!==void 0?n:Ye.positionX,positionY:(o=e.initialPositionY)!==null&&o!==void 0?o:Ye.positionY}},Li=function(e){var r=G({},Se);return Object.keys(e).forEach(function(i){var n=typeof e[i]<"u",o=typeof Se[i]<"u";if(o&&n){var t=Object.prototype.toString.call(Se[i]),a=t==="[object Object]",s=t==="[object Array]";a?r[i]=G(G({},Se[i]),e[i]):s?r[i]=Ri(Ri([],Se[i],!0),e[i],!0):r[i]=e[i]}}),r},Sr=function(e,r,i){var n=e.transformState.scale,o=e.wrapperComponent,t=e.setup,a=t.maxScale,s=t.minScale,l=t.zoomAnimation,f=t.smooth,u=l.size;if(!o)throw new Error("Wrapper is not mounted");var c=f?n*Math.exp(r*i):n+r*i,d=Ae(H(c,3),s,a,u,!1);return d};function Pr(e,r,i,n,o){var t=e.wrapperComponent,a=e.transformState,s=a.scale,l=a.positionX,f=a.positionY;if(!t)return console.error("No WrapperComponent found");var u=t.offsetWidth,c=t.offsetHeight,d=(u/2-l)/s,v=(c/2-f)/s,g=Sr(e,r,i),y=hi(e,g,d,v);if(!y)return console.error("Error during zoom event. New transformation state was not calculated.");ee(e,y,n,o)}function Cr(e,r,i,n){var o=e.setup,t=e.wrapperComponent,a=o.limitToBounds,s=wr(e.props),l=e.transformState,f=l.scale,u=l.positionX,c=l.positionY;if(t){var d=gi(e,s.scale),v=Ze(s.positionX,s.positionY,d,a,0,0,t),g={scale:s.scale,positionX:v.x,positionY:v.y};f===s.scale&&u===s.positionX&&c===s.positionY||(n==null||n(),ee(e,g,r,i))}}function Ro(e,r,i,n){var o=e.getBoundingClientRect(),t=r.getBoundingClientRect(),a=i.getBoundingClientRect(),s=t.x*n.scale,l=t.y*n.scale;return{x:(o.x-a.x+s)/n.scale,y:(o.y-a.y+l)/n.scale}}function Lo(e,r,i){var n=e.wrapperComponent,o=e.contentComponent,t=e.transformState,a=e.setup,s=a.limitToBounds,l=a.minScale,f=a.maxScale;if(!n||!o)return t;var u=n.getBoundingClientRect(),c=r.getBoundingClientRect(),d=Ro(r,n,o,t),v=d.x,g=d.y,y=c.width/t.scale,w=c.height/t.scale,D=n.offsetWidth/y,E=n.offsetHeight/w,P=Ae(i||Math.min(D,E),l,f,0,!1),X=(u.width-y*P)/2,x=(u.height-w*P)/2,Z=(u.left-v)*P+X,z=(u.top-g)*P+x,S=gi(e,P),_=Ze(Z,z,S,s,0,0,n),Y=_.x,W=_.y;return{positionX:Y,positionY:W,scale:P}}var Zo=function(e){return function(r,i,n){r===void 0&&(r=.5),i===void 0&&(i=300),n===void 0&&(n="easeOut"),Pr(e,1,r,i,n)}},Ho=function(e){return function(r,i,n){r===void 0&&(r=.5),i===void 0&&(i=300),n===void 0&&(n="easeOut"),Pr(e,-1,r,i,n)}},Ko=function(e){return function(r,i,n,o,t){o===void 0&&(o=300),t===void 0&&(t="easeOut");var a=e.transformState,s=a.positionX,l=a.positionY,f=a.scale,u=e.wrapperComponent,c=e.contentComponent,d=e.setup.disabled;if(!(d||!u||!c)){var v={positionX:Number.isNaN(r)?s:r,positionY:Number.isNaN(i)?l:i,scale:Number.isNaN(n)?f:n};ee(e,v,o,t)}}},Vo=function(e){return function(r,i){r===void 0&&(r=200),i===void 0&&(i="easeOut"),Cr(e,r,i)}},$o=function(e){return function(r,i,n){i===void 0&&(i=200),n===void 0&&(n="easeOut");var o=e.transformState,t=e.wrapperComponent,a=e.contentComponent;if(t&&a){var s=Dr(r||o.scale,t,a);ee(e,s,i,n)}}},Qo=function(e){return function(r,i,n,o){n===void 0&&(n=600),o===void 0&&(o="easeOut"),$(e);var t=e.wrapperComponent,a=typeof r=="string"?document.getElementById(r):r;if(t&&a&&t.contains(a)){var s=Lo(e,a,i);ee(e,s,n,o)}}},Re=function(e){return{instance:e,zoomIn:Zo(e),zoomOut:Ho(e),setTransform:Ko(e),resetTransform:Vo(e),centerView:$o(e),zoomToElement:Qo(e)}},Tr=function(e){return{instance:e,state:e.transformState}},T=function(e){var r={};return Object.assign(r,Tr(e)),Object.assign(r,Re(e)),r},ni=!1;function oi(){try{var e={get passive(){return ni=!0,!1}};return e}catch{return ni=!1,ni}}var Ke=function(e,r){var i=e.tagName.toUpperCase(),n=r.find(function(t){return t.toUpperCase()===i});if(n)return!0;var o=r.find(function(t){return e.classList.contains(t)});return!!o},mi=function(e){e&&clearTimeout(e)},Uo=function(e,r,i){return"translate(".concat(e,"px, ").concat(r,"px) scale(").concat(i,")")},Dr=function(e,r,i){var n=i.offsetWidth*e,o=i.offsetHeight*e,t=(r.offsetWidth-n)/2,a=(r.offsetHeight-o)/2;return{scale:e,positionX:t,positionY:a}};function qo(e){return function(r){e.forEach(function(i){typeof i=="function"?i(r):i!=null&&(i.current=r)})}}var Go=function(e,r){var i=e.setup.wheel,n=i.disabled,o=i.wheelDisabled,t=i.touchPadDisabled,a=i.excluded,s=e.isInitialized,l=e.isPanning,f=r.target,u=s&&!l&&!n&&f;if(!u||o&&!r.ctrlKey||t&&r.ctrlKey)return!1;var c=Ke(f,a);return!c},Jo=function(e){return e?e.deltaY<0?1:-1:0};function Io(e,r){var i=Jo(e),n=fo(r,i);return n}function Ar(e,r,i){var n=r.getBoundingClientRect(),o=0,t=0;if("clientX"in e)o=(e.clientX-n.left)/i,t=(e.clientY-n.top)/i;else{var a=e.touches[0];o=(a.clientX-n.left)/i,t=(a.clientY-n.top)/i}return(Number.isNaN(o)||Number.isNaN(t))&&console.error("No mouse or touch offset found"),{x:o,y:t}}var et=function(e,r,i,n,o){var t=e.transformState.scale,a=e.wrapperComponent,s=e.setup,l=s.maxScale,f=s.minScale,u=s.zoomAnimation,c=s.disablePadding,d=u.size,v=u.disabled;if(!a)throw new Error("Wrapper is not mounted");var g=t+r*i;if(o)return g;var y=n?!1:!v,w=Ae(H(g,3),f,l,d,y&&!c);return w},it=function(e,r){var i=e.previousWheelEvent,n=e.transformState.scale,o=e.setup,t=o.maxScale,a=o.minScale;return i?n<t||n>a||Math.sign(i.deltaY)!==Math.sign(r.deltaY)||i.deltaY>0&&i.deltaY<r.deltaY||i.deltaY<0&&i.deltaY>r.deltaY||Math.sign(i.deltaY)!==Math.sign(r.deltaY):!1},rt=function(e,r){var i=e.setup.pinch,n=i.disabled,o=i.excluded,t=e.isInitialized,a=r.target,s=t&&!n&&a;if(!s)return!1;var l=Ke(a,o);return!l},nt=function(e){var r=e.setup.pinch.disabled,i=e.isInitialized,n=e.pinchStartDistance,o=i&&!r&&n;return!!o},ot=function(e,r,i){var n=i.getBoundingClientRect(),o=e.touches,t=H(o[0].clientX-n.left,5),a=H(o[0].clientY-n.top,5),s=H(o[1].clientX-n.left,5),l=H(o[1].clientY-n.top,5);return{x:(t+s)/2/r,y:(a+l)/2/r}},Er=function(e){return Math.sqrt(Math.pow(e.touches[0].pageX-e.touches[1].pageX,2)+Math.pow(e.touches[0].pageY-e.touches[1].pageY,2))},tt=function(e,r){var i=e.pinchStartScale,n=e.pinchStartDistance,o=e.setup,t=o.maxScale,a=o.minScale,s=o.zoomAnimation,l=o.disablePadding,f=s.size,u=s.disabled;if(!i||n===null||!r)throw new Error("Pinch touches distance was not provided");if(r<0)return e.transformState.scale;var c=r/n,d=c*i;return Ae(H(d,2),a,t,f,!u&&!l)},at=160,st=100,lt=function(e,r){var i=e.props,n=i.onWheelStart,o=i.onZoomStart;e.wheelStopEventTimer||($(e),A(T(e),r,n),A(T(e),r,o))},ut=function(e,r){var i=e.props,n=i.onWheel,o=i.onZoom,t=e.contentComponent,a=e.setup,s=e.transformState,l=s.scale,f=a.limitToBounds,u=a.centerZoomedOut,c=a.zoomAnimation,d=a.wheel,v=a.disablePadding,g=a.smooth,y=c.size,w=c.disabled,D=d.step,E=d.smoothStep;if(!t)throw new Error("Component not mounted");r.preventDefault(),r.stopPropagation();var P=Io(r,null),X=g?E*Math.abs(r.deltaY):D,x=et(e,P,X,!r.ctrlKey);if(l!==x){var Z=ve(e,x),z=Ar(r,t,l),S=w||y===0||u||v,_=f&&S,Y=He(e,z.x,z.y,x,Z,_),W=Y.x,B=Y.y;e.previousWheelEvent=r,e.setTransformState(x,W,B),A(T(e),r,n),A(T(e),r,o)}},ft=function(e,r){var i=e.props,n=i.onWheelStop,o=i.onZoomStop;mi(e.wheelAnimationTimer),e.wheelAnimationTimer=setTimeout(function(){e.mounted&&(yr(e,r.x,r.y),e.wheelAnimationTimer=null)},st);var t=it(e,r);t&&(mi(e.wheelStopEventTimer),e.wheelStopEventTimer=setTimeout(function(){e.mounted&&(e.wheelStopEventTimer=null,A(T(e),r,n),A(T(e),r,o))},at))},ct=function(e,r){var i=Er(r);e.pinchStartDistance=i,e.lastDistance=i,e.pinchStartScale=e.transformState.scale,e.isPanning=!1,$(e)},dt=function(e,r){var i=e.contentComponent,n=e.pinchStartDistance,o=e.transformState.scale,t=e.setup,a=t.limitToBounds,s=t.centerZoomedOut,l=t.zoomAnimation,f=l.disabled,u=l.size;if(!(n===null||!i)){var c=ot(r,o,i);if(!(!Number.isFinite(c.x)||!Number.isFinite(c.y))){var d=Er(r),v=tt(e,d);if(v!==o){var g=ve(e,v),y=f||u===0||s,w=a&&y,D=He(e,c.x,c.y,v,g,w),E=D.x,P=D.y;e.pinchMidpoint=c,e.lastDistance=d,e.setTransformState(v,E,P)}}}},pt=function(e){var r=e.pinchMidpoint;e.velocity=null,e.lastDistance=null,e.pinchMidpoint=null,e.pinchStartScale=null,e.pinchStartDistance=null,yr(e,r==null?void 0:r.x,r==null?void 0:r.y)},Or=function(e,r){var i=e.props.onZoomStop,n=e.setup.doubleClick.animationTime;mi(e.doubleClickStopEventTimer),e.doubleClickStopEventTimer=setTimeout(function(){e.doubleClickStopEventTimer=null,A(T(e),r,i)},n)},mt=function(e,r){var i=e.props,n=i.onZoomStart,o=i.onZoom,t=e.setup.doubleClick,a=t.animationTime,s=t.animationType;A(T(e),r,n),Cr(e,a,s,function(){return A(T(e),r,o)}),Or(e,r)};function vt(e,r){var i=e.setup,n=e.doubleClickStopEventTimer,o=e.transformState,t=e.contentComponent,a=o.scale,s=e.props,l=s.onZoomStart,f=s.onZoom,u=i.doubleClick,c=u.disabled,d=u.mode,v=u.step,g=u.animationTime,y=u.animationType;if(!c&&!n){if(d==="reset")return mt(e,r);if(!t)return console.error("No ContentComponent found");var w=d==="zoomOut"?-1:1,D=Sr(e,w,v);if(a!==D){A(T(e),r,l);var E=Ar(r,t,a),P=hi(e,D,E.x,E.y);if(!P)return console.error("Error during zoom event. New transformation state was not calculated.");A(T(e),r,f),ee(e,P,g,y),Or(e,r)}}}var gt=function(e,r){var i=e.isInitialized,n=e.setup,o=e.wrapperComponent,t=n.doubleClick,a=t.disabled,s=t.excluded,l=r.target,f=o==null?void 0:o.contains(l),u=i&&l&&f&&!a;if(!u)return!1;var c=Ke(l,s);return!c},ht=function(){function e(r){var i=this;this.mounted=!0,this.onChangeCallbacks=new Set,this.onInitCallbacks=new Set,this.wrapperComponent=null,this.contentComponent=null,this.isInitialized=!1,this.bounds=null,this.previousWheelEvent=null,this.wheelStopEventTimer=null,this.wheelAnimationTimer=null,this.isPanning=!1,this.startCoords=null,this.lastTouch=null,this.distance=null,this.lastDistance=null,this.pinchStartDistance=null,this.pinchStartScale=null,this.pinchMidpoint=null,this.doubleClickStopEventTimer=null,this.velocity=null,this.velocityTime=null,this.lastMousePosition=null,this.animate=!1,this.animation=null,this.maxBounds=null,this.pressedKeys={},this.mount=function(){i.initializeWindowEvents()},this.unmount=function(){i.cleanupWindowEvents()},this.update=function(n){ve(i,i.transformState.scale),i.setup=Li(n)},this.initializeWindowEvents=function(){var n,o=oi(),t=(n=i.wrapperComponent)===null||n===void 0?void 0:n.ownerDocument,a=t==null?void 0:t.defaultView;a==null||a.addEventListener("mousedown",i.onPanningStart,o),a==null||a.addEventListener("mousemove",i.onPanning,o),a==null||a.addEventListener("mouseup",i.onPanningStop,o),t==null||t.addEventListener("mouseleave",i.clearPanning,o),a==null||a.addEventListener("keyup",i.setKeyUnPressed,o),a==null||a.addEventListener("keydown",i.setKeyPressed,o)},this.cleanupWindowEvents=function(){var n,o,t=oi(),a=(n=i.wrapperComponent)===null||n===void 0?void 0:n.ownerDocument,s=a==null?void 0:a.defaultView;s==null||s.removeEventListener("mousedown",i.onPanningStart,t),s==null||s.removeEventListener("mousemove",i.onPanning,t),s==null||s.removeEventListener("mouseup",i.onPanningStop,t),a==null||a.removeEventListener("mouseleave",i.clearPanning,t),s==null||s.removeEventListener("keyup",i.setKeyUnPressed,t),s==null||s.removeEventListener("keydown",i.setKeyPressed,t),document.removeEventListener("mouseleave",i.clearPanning,t),$(i),(o=i.observer)===null||o===void 0||o.disconnect()},this.handleInitializeWrapperEvents=function(n){var o=oi();n.addEventListener("wheel",i.onWheelZoom,o),n.addEventListener("dblclick",i.onDoubleClick,o),n.addEventListener("touchstart",i.onTouchPanningStart,o),n.addEventListener("touchmove",i.onTouchPanning,o),n.addEventListener("touchend",i.onTouchPanningStop,o)},this.handleInitialize=function(n){var o=i.setup.centerOnInit;i.applyTransformation(),i.onInitCallbacks.forEach(function(t){return t(T(i))}),o&&(i.setCenter(),i.observer=new ResizeObserver(function(){var t;i.onInitCallbacks.forEach(function(a){return a(T(i))}),i.setCenter(),(t=i.observer)===null||t===void 0||t.disconnect()}),i.observer.observe(n))},this.onWheelZoom=function(n){var o=i.setup.disabled;if(!o){var t=Go(i,n);if(t){var a=i.isPressingKeys(i.setup.wheel.activationKeys);a&&(lt(i,n),ut(i,n),ft(i,n))}}},this.onPanningStart=function(n){var o=i.setup.disabled,t=i.props.onPanningStart;if(!o){var a=Ni(i,n);if(a){var s=i.isPressingKeys(i.setup.panning.activationKeys);s&&(n.button===0&&!i.setup.panning.allowLeftClickPan||n.button===1&&!i.setup.panning.allowMiddleClickPan||n.button===2&&!i.setup.panning.allowRightClickPan||(n.preventDefault(),n.stopPropagation(),$(i),Wi(i,n),A(T(i),n,t)))}}},this.onPanning=function(n){var o=i.setup.disabled,t=i.props.onPanning;if(!o){var a=ki(i);if(a){var s=i.isPressingKeys(i.setup.panning.activationKeys);s&&(n.preventDefault(),n.stopPropagation(),Bi(i,n.clientX,n.clientY),A(T(i),n,t))}}},this.onPanningStop=function(n){var o=i.props.onPanningStop;i.isPanning&&(Bo(i),A(T(i),n,o))},this.onPinchStart=function(n){var o=i.setup.disabled,t=i.props,a=t.onPinchingStart,s=t.onZoomStart;if(!o){var l=rt(i,n);l&&(ct(i,n),$(i),A(T(i),n,a),A(T(i),n,s))}},this.onPinch=function(n){var o=i.setup.disabled,t=i.props,a=t.onPinching,s=t.onZoom;if(!o){var l=nt(i);l&&(n.preventDefault(),n.stopPropagation(),dt(i,n),A(T(i),n,a),A(T(i),n,s))}},this.onPinchStop=function(n){var o=i.props,t=o.onPinchingStop,a=o.onZoomStop;i.pinchStartScale&&(pt(i),A(T(i),n,t),A(T(i),n,a))},this.onTouchPanningStart=function(n){var o=i.setup.disabled,t=i.props.onPanningStart;if(!o){var a=Ni(i,n);if(a){var s=i.lastTouch&&+new Date-i.lastTouch<200;if(s&&n.touches.length===1)i.onDoubleClick(n);else{i.lastTouch=+new Date,$(i);var l=n.touches,f=l.length===1,u=l.length===2;f&&($(i),Wi(i,n),A(T(i),n,t)),u&&i.onPinchStart(n)}}}},this.onTouchPanning=function(n){var o=i.setup.disabled,t=i.props.onPanning;if(i.isPanning&&n.touches.length===1){if(o)return;var a=ki(i);if(!a)return;n.preventDefault(),n.stopPropagation();var s=n.touches[0];Bi(i,s.clientX,s.clientY),A(T(i),n,t)}else n.touches.length>1&&i.onPinch(n)},this.onTouchPanningStop=function(n){i.onPanningStop(n),i.onPinchStop(n)},this.onDoubleClick=function(n){var o=i.setup.disabled;if(!o){var t=gt(i,n);t&&vt(i,n)}},this.clearPanning=function(n){i.isPanning&&i.onPanningStop(n)},this.setKeyPressed=function(n){i.pressedKeys[n.key]=!0},this.setKeyUnPressed=function(n){i.pressedKeys[n.key]=!1},this.isPressingKeys=function(n){return n.length?!!n.find(function(o){return i.pressedKeys[o]}):!0},this.setTransformState=function(n,o,t){var a=i.props.onTransformed;if(!Number.isNaN(n)&&!Number.isNaN(o)&&!Number.isNaN(t)){n!==i.transformState.scale&&(i.transformState.previousScale=i.transformState.scale,i.transformState.scale=n),i.transformState.positionX=o,i.transformState.positionY=t,i.applyTransformation();var s=T(i);i.onChangeCallbacks.forEach(function(l){return l(s)}),A(s,{scale:n,positionX:o,positionY:t},a)}else console.error("Detected NaN set state values")},this.setCenter=function(){if(i.wrapperComponent&&i.contentComponent){var n=Dr(i.transformState.scale,i.wrapperComponent,i.contentComponent);i.setTransformState(n.scale,n.positionX,n.positionY)}},this.handleTransformStyles=function(n,o,t){return i.props.customTransform?i.props.customTransform(n,o,t):Uo(n,o,t)},this.applyTransformation=function(){if(!(!i.mounted||!i.contentComponent)){var n=i.transformState,o=n.scale,t=n.positionX,a=n.positionY,s=i.handleTransformStyles(t,a,o);i.contentComponent.style.transform=s}},this.getContext=function(){return T(i)},this.onChange=function(n){return i.onChangeCallbacks.has(n)||i.onChangeCallbacks.add(n),function(){i.onChangeCallbacks.delete(n)}},this.onInit=function(n){return i.onInitCallbacks.has(n)||i.onInitCallbacks.add(n),function(){i.onInitCallbacks.delete(n)}},this.init=function(n,o){i.cleanupWindowEvents(),i.wrapperComponent=n,i.contentComponent=o,ve(i,i.transformState.scale),i.handleInitializeWrapperEvents(n),i.handleInitialize(o),i.initializeWindowEvents(),i.isInitialized=!0;var t=T(i);A(t,void 0,i.props.onInit)},this.props=r,this.setup=Li(this.props),this.transformState=wr(this.props)}return e}(),Ve=I.createContext(null),bt=function(e,r){return typeof e=="function"?e(r):e},yt=I.forwardRef(function(e,r){var i=b.useRef(new ht(e)).current,n=bt(e.children,Re(i));return b.useImperativeHandle(r,function(){return Re(i)},[i]),b.useEffect(function(){i.update(e)},[i,e]),I.createElement(Ve.Provider,{value:i},n)});I.forwardRef(function(e,r){var i=b.useRef(null),n=b.useContext(Ve);return b.useEffect(function(){return n.onChange(function(o){if(i.current){var t=0,a=0;i.current.style.transform=n.handleTransformStyles(t,a,1/o.instance.transformState.scale)}})},[n]),I.createElement("div",G({},e,{ref:qo([i,r])}))});function wt(e,r){r===void 0&&(r={});var i=r.insertAt;if(!(!e||typeof document>"u")){var n=document.head||document.getElementsByTagName("head")[0],o=document.createElement("style");o.type="text/css",i==="top"&&n.firstChild?n.insertBefore(o,n.firstChild):n.appendChild(o),o.styleSheet?o.styleSheet.cssText=e:o.appendChild(document.createTextNode(e))}}var St=`.transform-component-module_wrapper__SPB86 {
  position: relative;
  width: -moz-fit-content;
  width: fit-content;
  height: -moz-fit-content;
  height: fit-content;
  overflow: hidden;
  -webkit-touch-callout: none; /* iOS Safari */
  -webkit-user-select: none; /* Safari */
  -khtml-user-select: none; /* Konqueror HTML */
  -moz-user-select: none; /* Firefox */
  -ms-user-select: none; /* Internet Explorer/Edge */
  user-select: none;
  margin: 0;
  padding: 0;
}
.transform-component-module_content__FBWxo {
  display: flex;
  flex-wrap: wrap;
  width: -moz-fit-content;
  width: fit-content;
  height: -moz-fit-content;
  height: fit-content;
  margin: 0;
  padding: 0;
  transform-origin: 0% 0%;
}
.transform-component-module_content__FBWxo img {
  pointer-events: none;
}
`,Zi={wrapper:"transform-component-module_wrapper__SPB86",content:"transform-component-module_content__FBWxo"};wt(St);var Pt=function(e){var r=e.children,i=e.wrapperClass,n=i===void 0?"":i,o=e.contentClass,t=o===void 0?"":o,a=e.wrapperStyle,s=e.contentStyle,l=e.wrapperProps,f=l===void 0?{}:l,u=e.contentProps,c=u===void 0?{}:u,d=b.useContext(Ve),v=d.init,g=d.cleanupWindowEvents,y=b.useRef(null),w=b.useRef(null);return b.useEffect(function(){var D=y.current,E=w.current;return D!==null&&E!==null&&v&&(v==null||v(D,E)),function(){g==null||g()}},[]),I.createElement("div",G({},f,{ref:y,className:"react-transform-wrapper ".concat(Zi.wrapper," ").concat(n),style:a}),I.createElement("div",G({},c,{ref:w,className:"react-transform-component ".concat(Zi.content," ").concat(t),style:s}),r))},jr=function(){var e=b.useContext(Ve);if(!e)throw new Error("Transform context must be placed inside TransformWrapper");return e},Ct=function(){var e=jr();return Re(e)},Tt=function(e){var r=jr();b.useEffect(function(){var i,n=r.onChange(function(o){i=e(Tr(o.instance))});return function(){n(),i==null||i()}},[e,r])},Ne=(e=>(e.Pdf="Pdf",e.Image="Image",e.Other="Other",e))(Ne||{});const J=Ce({canNotViewFileDownloadInstead:{id:"common.attachment-viewer.can-not-view-file-download-instead",defaultMessage:"Cannot render file <DownloadLink>download</DownloadLink> to view."},fileOfTotalCount:{id:"common.file-viewer.file-of-total-count",defaultMessage:"File {currentFileIndex} of {totalCount}"},canNotViewFile:{id:"common.attachment-viewer.can-not-view-file",defaultMessage:"Cannot render file."},pdf:{id:"common.file-type.pdf",defaultMessage:"PDF"},image:{id:"common.file-type.image",defaultMessage:"Image"},other:{id:"common.file-type.other",defaultMessage:"Other"},maxUploadFileSizeError:{id:"common.attachment-viewer.file-size-error",defaultMessage:"File size must be less than or equal to {maxUploadFileSizeInMb}MB"},fileIsTooBig:{id:"common.error.file-is-too-big",defaultMessage:"This file is too big"}}),Dt={Pdf:J.pdf,Image:J.image,Other:J.other},At={Pdf:hn,Image:pn,Other:Ii},zr=Le()((e,r)=>({root:{display:"flex",flexDirection:"column",background:de.grey[900],height:"100%",maxHeight:r==null?void 0:r.maxHeight,justifyContent:"space-between"},header:{display:"flex",justifyContent:"space-between",padding:e.spacing(2),background:de.grey[700],alignItems:"center",width:"100%"},fileInfoWrapper:{display:"flex",gap:e.spacing(2),alignItems:"center",minWidth:0,color:de.text.light.secondary},fileNameAndSizeWrapper:{minWidth:0,width:"100%"},whiteText:{color:de.text.light.primary},fileName:{width:"100%",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},headerActionsWrapper:{display:"flex",gap:e.spacing(1)},headerActionsDivider:{background:de.text.light.disabled},preview:{width:"100%",height:"100%",display:"flex",justifyContent:"center",alignItems:"center",position:"relative",overflow:"hidden"},pdfViewer:{flexGrow:1,flexBasis:"auto",height:"100%"},footer:{display:"flex",justifyContent:"center",alignItems:"center",background:de.grey[700],padding:e.spacing(2)},footerActionsContainer:{display:"flex",alignItems:"center",gap:e.spacing(1)}})),Fr=Le()((e,r)=>({buttonsControl:{position:"absolute",top:e.spacing(2),right:e.spacing(2),display:"flex",flexDirection:"column",gap:e.spacing(2)},zoomContainer:{width:"100%",height:"100%",cursor:"grab",":active":{cursor:"grabbing"}},measuringContainer:{width:"100%",height:"100%"},imageContainer:{"& > img":{display:"block",width:r==null?void 0:r.width,height:r==null?void 0:r.height,objectFit:"contain",objectPosition:"center"}}})),Et=()=>{const{classes:e}=Fr(),{zoomIn:r,zoomOut:i}=Ct(),[n,o]=b.useState(!0),[t,a]=b.useState(!1);return Tt(({state:s})=>{o(s.scale!==10),a(s.scale!==1)}),m.jsxs("div",{className:e.buttonsControl,children:[m.jsx(Ti,{color:"ghost",size:"small",disabled:!n,onClick:()=>r(),children:m.jsx(mn,{})}),m.jsx(Ti,{color:"ghost",size:"small",disabled:!t,onClick:()=>i(),children:m.jsx(vn,{})})]})},Ot=({attachment:e})=>{const{ref:r,width:i,height:n}=Vr({onResize(){var c;(c=f.current)==null||c.centerView()}}),{classes:o}=Fr({width:i,height:n}),[t,a,s]=$r(e.src,!0,10),l=!t&&!a,f=b.useRef(null);let u;return a?u=m.jsx(Mr,{attachment:e,isDownloadable:!0}):l?u=m.jsx(Ur,{loading:!0,color:"primary"}):u=m.jsxs(yt,{centerOnInit:!0,maxScale:10,minScale:1,ref:f,children:[m.jsx(Pt,{wrapperClass:o.zoomContainer,children:m.jsx("div",{className:o.imageContainer,ref:c=>s&&c&&c.replaceChildren(s)})}),m.jsx(Et,{})]}),m.jsx("div",{ref:r,className:o.measuringContainer,children:u})},Mr=({attachment:e,isDownloadable:r})=>{const i=Te(),{classes:n}=zr();return m.jsx(q,{className:n.whiteText,variant:"body1",children:r?i.formatMessage(J.canNotViewFileDownloadInstead,{DownloadLink:o=>m.jsx(Qr,{external:!0,to:e.src,target:"_blank",download:e.name,children:o})}):i.formatMessage(J.canNotViewFile)})},ia=({attachment:e,onNext:r,onPrevious:i,currentAttachmentCount:n,onDelete:o,onDownload:t,totalAttachmentsCount:a,isDownloadable:s,fileUploadProps:l,onClose:f,maxHeight:u,customDownloadButtonContent:c})=>{const{classes:d,cx:v}=zr({maxHeight:u}),g=ln(),y=Te(),w=Rr(),D=e.size?yn(e.size):void 0,E=At[e.type],P=!!(!(n||a)||n&&a&&n>=a),X=!!(!n||n&&n<=1),x={Pdf:m.jsx(fn,{url:e.src,className:d.pdfViewer}),Image:m.jsx(Ot,{attachment:e}),Other:m.jsx(Mr,{attachment:e,isDownloadable:s})},Z=async S=>{S.length!==0&&(l==null||l.onUpload(S))},z=S=>{if(S.length===0)return;S.some(({errors:Y})=>Y.some(({code:W})=>W===te.FileTooLarge))&&(l!=null&&l.maxFileSizeToUpload?w.error({message:y.formatMessage(J.maxUploadFileSizeError,{maxUploadFileSizeInMb:l.maxFileSizeToUpload})}):w.error({message:y.formatMessage(J.fileIsTooBig)}))};return m.jsxs("div",{className:d.root,children:[m.jsxs("div",{className:d.header,children:[m.jsxs("div",{className:d.fileInfoWrapper,children:[m.jsx(E,{color:"inherit",fontSize:"medium"}),m.jsxs("div",{className:d.fileNameAndSizeWrapper,children:[m.jsx(q,{variant:"body2",className:v(d.whiteText,d.fileName),children:e.name}),m.jsxs(q,{variant:"caption",children:[y.formatMessage(Dt[e.type])," ",D?`- ${D}`:""]})]})]}),m.jsxs("div",{className:d.headerActionsWrapper,children:[o&&m.jsx(pe,{color:"ghost",onClick:o,children:m.jsx(Lr,{})}),m.jsx(pe,{color:"ghost",disabled:!s,href:e.src,target:"_blank",download:e.name,onClick:t,children:c||m.jsx(gn,{})}),l&&m.jsx(bn,{maxFileSizeInMb:l.maxFileSizeToUpload,fileTypes:l.acceptedFileTypesToUpload,renderUploader:({openFileSelector:S})=>m.jsx(pe,{color:"ghost",onClick:S,children:m.jsx(dn,{})}),onFilesAccepted:Z,onFilesRejected:z}),f&&m.jsxs(m.Fragment,{children:[m.jsx(Zr,{className:d.headerActionsDivider,orientation:"vertical",flexItem:!0}),m.jsx(pe,{color:"ghost",onClick:f,children:m.jsx(Hr,{})})]})]})]}),m.jsx("div",{className:d.preview,children:x[e.type]}),m.jsx("div",{className:d.footer,children:r&&i&&m.jsxs("div",{className:d.footerActionsContainer,children:[m.jsx(pe,{color:"ghost",disabled:X,onClick:i,children:m.jsx(Kr,{className:g})}),m.jsx(q,{variant:"body2",className:d.whiteText,children:y.formatMessage(J.fileOfTotalCount,{currentFileIndex:n??1,totalCount:a??1})}),m.jsx(pe,{color:"ghost",disabled:P,onClick:r,children:m.jsx(cn,{className:g})})]})})]})};var jt=(e=>(e.Image="Image",e.ExtraImage="ExtraImage",e.Pdf="Pdf",e.Excel="Excel",e.Word="Word",e.Csv="Csv",e.PlainText="PlainText",e.Sif="Sif",e.Document="Document",e.AllImages="AllImages",e.PowerPoint="PowerPoint",e.Html="Html",e))(jt||{});const xr=["Image","ExtraImage","Pdf","Excel","Word","Csv","PlainText","Sif","Html"],Hi={"image/jpeg":[".jpeg",".jpg"],"image/png":[".png"]},Ki={"image/gif":[".gif"],"image/bmp":[".bmp"],"image/heic":[".heic"],"image/jpeg":[".jifif"],"image/x-jp2":[".jp2"],"image/svg+xml":[".svg"],"image/tiff":[".tiff"],"image/tif":[".tif"],"image/webp":[".webp"]},Vi={"application/pdf":[".pdf"],"application/x-pdf":[".pdf"]},$i={"application/vnd.ms-excel":[".xls"],"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet":[".xlsx"]},Qi={"application/msword":[".doc"],"application/vnd.openxmlformats-officedocument.wordprocessingml.document":[".docx"]},zt={"text/csv":[".csv"]},Ft={"text/plain":[".txt"]},Mt={"application/sif":[".sif"]},xt={"application/vnd.ms-powerpoint":[".ppt"],"application/vnd.openxmlformats-officedocument.presentationml.presentation":[".pptx"]},_t={"text/html":[".html"]},bi={Image:Hi,ExtraImage:Ki,Pdf:Vi,Excel:$i,Word:Qi,Csv:zt,PlainText:Ft,Sif:Mt,Document:{...Vi,...$i,...Qi},AllImages:{...Ki,...Hi},PowerPoint:xt,Html:_t};function Yt(e){if(e===void 0||e.length===0)return;let r={};for(const i of e)r={...r,...bi[i]};return r}function ra(e){if(!(e===void 0||e==="")){for(const r of xr)if(Object.keys(bi[r]).some(i=>i.includes(e)))return r}}function na(e){const r=e.toLowerCase();for(const i of xr)if(Object.values(bi[i]).some(n=>n.some(o=>r.endsWith(o))))return i}function oa(e){switch(e){case"Image":return Ne.Image;case"Pdf":return Ne.Pdf;default:return Ne.Other}}function Nt(e={}){const r=new Set;for(const i of Object.values(e))for(const n of i)r.add(n);return r.size>0?[...r].map(i=>`*${i}`).join(", "):void 0}const ta=(e,r,i)=>{switch(e.errors[0].code){case te.FileInvalidType:return r.formatMessage(me.formatNotSupported);case te.FileTooLarge:return qr.isNil(i==null?void 0:i.maxFileSizeInMb)?r.formatMessage(me.tooBig):r.formatMessage(me.tooBigMaxSize,{fileSize:i==null?void 0:i.maxFileSizeInMb});case te.FileTooSmall:return r.formatMessage(me.tooSmall);case te.TooManyFiles:return r.formatMessage(me.tooManyFiles);default:return r.formatMessage(me.commonError)}},me=Ce({commonError:{id:"common.error.try-again-later",defaultMessage:"An error happened, please try again later."},tooManyFiles:{id:"common.error.too-many-files",defaultMessage:"Too many files"},tooSmall:{id:"common.error.file-is-too-small",defaultMessage:"This file is too small"},tooBig:{id:"common.error.file-is-too-big",defaultMessage:"This file is too big"},tooBigMaxSize:{id:"common.error.file-is-too-big-with-size",defaultMessage:"This file is too big. Maximum file size is {fileSize} MB"},formatNotSupported:{id:"common.error.file-format-not-supported",defaultMessage:"This file format is not supported"}}),kt=Le()(e=>({additionalTopSpacing:{marginTop:e.spacing(1)}})),Ui=Ce({attachedFiles:{id:"common.dropzone-file-uploader.attached-files",defaultMessage:"Attached files"},viewMore:{id:"common.dropzone-file-uploader.view-more",defaultMessage:"View more"}});function Xt({items:e,renderItem:r,maxFileCount:i=Number.POSITIVE_INFINITY,onViewMoreClick:n,hideTitle:o,customTitle:t}){const a=Te(),{classes:s}=kt(),l=b.useMemo(()=>i>0?e.slice(0,i):e,[e,i]);return m.jsxs("div",{...Gr("mask"),children:[!o&&(t||m.jsx(q,{variant:"h6",children:a.formatMessage(Ui.attachedFiles)})),l.map((f,u)=>m.jsx(b.Fragment,{children:r(f,u)},u)),e.length>l.length&&m.jsx(Jr,{variant:"text",color:"primary",className:s.additionalTopSpacing,onClick:n,children:a.formatMessage(Ui.viewMore)})]})}const qi=Ce({title:{id:"common.file-upload.leaving-page",defaultMessage:"Leaving page"},content:{id:"common.file-upload.files-are-still-processing",defaultMessage:"Some files are still processing and won't be saved if you leave the page."}}),Gi=new WeakSet,Wt=({enabled:e,confirmButtonText:r,content:i,title:n})=>{const o=Te(),[t]=Ir(en),s=t.filter(([f])=>!f.cancelled).filter(([f])=>!Gi.has(f)).length>0&&e;function l(){t.theValues.forEach(f=>f.forEach(u=>Gi.add(u)))}un({isFormDirty:s,title:n??o.formatMessage(qi.title),content:i??o.formatMessage(qi.content),confirmButtonText:r,onAbandon:l})},Bt=e=>e*1e6,ti=Ce({title:{id:"common.file-uploader-base.upload-a-file",defaultMessage:"Upload a file"},acceptedFormats:{id:"common.file-uploader-base.accepted-formats-and-sizing",defaultMessage:"Accepted formats and sizing"},acceptedFormatsTooltip:{id:"common.file-uploader-base.accepted-formats-and-size-tooltip",defaultMessage:"Formats: {acceptsAnyFormat, select, true {any} other {{acceptedFileExtensions}}} <br></br> Maximum file size: {hasNoSizeLimit, select, true {no limit} other {{maxFileSizeInMb} MB}}"}}),Rt={bottom:"column",left:"row-reverse",right:"row"},Lt=Le()((e,{listPlacement:r,isFileListEmpty:i})=>({paper:{display:"flex",flexDirection:Rt[r],gap:e.spacing(r==="bottom"?1:i?0:2),justifyContent:i?"center":"unset",[`${e.breakpoints.down("md")}`]:{flexDirection:"column"}},section:{width:r==="bottom"||i?"unset":"50%",[`${e.breakpoints.down("md")}`]:{width:r==="bottom"||i?"unset":"100%"}},fileListSection:{"& > div":{display:"flex",flexDirection:"column",gap:e.spacing(1)}},additionalBottomSpacing:{marginBottom:e.spacing(1)},additionalTopSpacing:{marginTop:e.spacing(1)},typographyWithIcon:{display:"inline-flex",gap:e.spacing(1),alignItems:"center"},fullHeight:{height:"100%"},dropzoneSection:{display:"flex",flexDirection:"column"}}));function _r({fileTypes:e,maxFileSizeInMb:r,disabled:i=!1,maxFiles:n,renderUploader:o,onFilesAccepted:t,onFilesRejected:a,warnWhenNavigatingAway:s,"data-external-id":l}){const f=b.useMemo(()=>Yt(e),[e]),u=b.useMemo(()=>Nt(f),[f]),{isDragActive:c,isDragReject:d,getRootProps:v,getInputProps:g,open:y}=mr({noClick:!0,disabled:i,accept:f,maxFiles:n,multiple:n===void 0||n>1,maxSize:r?Bt(r):void 0,onDropAccepted:async w=>{await sn(0),t(w)},onDropRejected:a});return Wt({enabled:!!s}),m.jsxs(m.Fragment,{children:[o({getRootProps:v,acceptedFileExtensions:u,isUploadDisabled:i,isDragReject:d,isDragActive:c,openFileSelector:y}),m.jsx("input",{"data-external-id":l,...g()})]})}const ai=new an,si=()=>null;function aa({fileTypes:e,maxFileSizeInMb:r,disabled:i=!1,maxFiles:n=Number.POSITIVE_INFINITY,maxFileCountInList:o,title:t,customTitle:a,subtitle:s,hideTitle:l,withoutFileList:f,items:u=ai,renderUploadTrigger:c,renderItem:d=si,listPlacement:v="bottom",warnWhenNavigatingAway:g=!0,enableDragAndDrop:y,hideCardListTitle:w,customCardListTitle:D,fullHeight:E,onFilesAccepted:P,onFilesRejected:X,onViewMoreClick:x,"data-external-id":Z}){rn(f&&u===ai&&d===si||!f&&u!==ai&&d!==si,f?"you cannot pass items and renderItem props":"you have to items and renderItem props");const z=Te(),{classes:S,cx:_}=Lt({listPlacement:v,isFileListEmpty:f||u.length===0}),Y=i||((u==null?void 0:u.length)??0)>=n,W=!f&&u.length>0;return m.jsx(_r,{"data-external-id":Z,fileTypes:e,maxFileSizeInMb:r,disabled:i,maxFiles:n-u.length,onFilesAccepted:P,onFilesRejected:B=>{const R=B.filter(({errors:[O]})=>O.code===te.TooManyFiles),F=B.filter(({errors:[O]})=>O.code!==te.TooManyFiles);if(n-u.length>0){const O=R.slice(0,n-u.length).map(({file:ie})=>ie);O.length>0&&P(O)}X(F.concat(R.slice(n-u.length)))},warnWhenNavigatingAway:g,renderUploader:({getRootProps:B,acceptedFileExtensions:R,isDragReject:F,isDragActive:O,openFileSelector:ie})=>m.jsxs(nn,{square:!0,elevation:0,className:_(S.paper,E&&S.fullHeight),...y&&!Y?B():{},children:[m.jsxs("div",{"data-external-id":"dropzone-section",className:_(S.section,S.dropzoneSection,E&&S.fullHeight),children:[!l&&(a||m.jsx(q,{mb:1,variant:"h5",children:t??z.formatMessage(ti.title)})),s&&m.jsx(q,{variant:"body2",color:"textSecondary",className:S.additionalBottomSpacing,children:s}),c({isUploadDisabled:Y,isDragReject:F,isDragActive:O,openFileSelector:ie}),m.jsxs(q,{variant:"body2",color:"textSecondary",className:_(S.additionalTopSpacing,W&&S.additionalBottomSpacing,S.typographyWithIcon),children:[z.formatMessage(ti.acceptedFormats),m.jsx(on,{title:m.jsx(m.Fragment,{children:z.formatMessage(ti.acceptedFormatsTooltip,{acceptsAnyFormat:R===void 0,acceptedFileExtensions:R,hasNoSizeLimit:r===void 0,maxFileSizeInMb:r,br:()=>m.jsx("br",{})})}),children:m.jsx(tn,{color:"action",fontSize:"x-small"})})]})]}),m.jsx("div",{className:_(S.section,S.fileListSection),children:W&&m.jsx(Xt,{customTitle:D,items:u,renderItem:d,maxFileCount:o,onViewMoreClick:x,hideTitle:w})})]})})}export{jt as C,te as E,Xt as F,oa as a,ra as b,na as c,ta as d,bn as e,aa as f,ia as g,Ne as h,Yt as i,Nt as j,Wt as u};
