import{hE as l}from"./assets/index-rhBbSAok.js";var x=function(c){return!!c&&(typeof c=="object"||typeof c=="function")&&typeof c.then=="function"},q=function(s,v){return s===v},U=function(){for(var s=arguments.length,v=new Array(s),h=0;h<s;h++)v[h]=arguments[h];return function(e){var i={},O=e.subscribe(function(A){var f=A.values;e.batch(function(){var b=function(n,g,a){var o=f&&l(f,n),t=i&&l(i,n);if(!g(o,t))if(typeof a=="function"){var u=a(o,n,f,i);x(u)?u.then(function(r){Object.keys(r).forEach(function(E){e.change(E,r[E])})}):Object.keys(u).forEach(function(r){e.change(r,u[r])})}else Object.keys(a).forEach(function(r){var E=a[r],y=E(o,f,i);x(y)?y.then(function(I){e.change(r,I)}):e.change(r,y)})},D=e.getRegisteredFields();v.forEach(function(p){var n=p.field,g=p.isEqual,a=p.updates;if(typeof n=="string")b(n,g||q,a);else{var o=Array.isArray(n)?function(t){return~n.indexOf(t)||n.findIndex(function(u){return u instanceof RegExp&&u.test(t)})!==-1}:function(t){return n.test(t)};D.forEach(function(t){o(t)&&b(t,g||q,a)})}}),i=f})},{values:!0});return O}};export{U as c};
