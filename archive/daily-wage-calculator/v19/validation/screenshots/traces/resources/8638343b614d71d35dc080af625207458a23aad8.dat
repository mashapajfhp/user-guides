import{r as A,b7 as h,j as e,F as We,G as Ge,b4 as H,d as ue,H as Je,af as E,a as Y,X as Ue,cR as Fe,a8 as I,W as ze,df as D,fD as _e,T as d,bW as L,fX as de,a0 as He,M as Ye,I as $e,J as Ne,K as Qe,ah as F,S as Ke,fM as Xe,gz as Ze,fN as ea,cn as aa,aa as ta,a4 as sa,fC as z}from"./assets/index-rhBbSAok.js";import{a as ra}from"./timeOff-S3szKU9S__cache.js";import{d as na}from"./DaysType-rxTPbDQH__cache.js";import{B as oa}from"./ButtonWithTooltip-ZRvEDUuf__cache.js";import{S as la}from"./SearchableEmployeeDialog-d9H_SAfT__cache.js";import{C as ia}from"./Card-0cclI5zr__cache.js";var da=(s=>(s.Create="create",s.Edit="edit",s))(da||{}),P=(s=>(s[s.Setup=0]="Setup",s[s.AddEmployees=1]="AddEmployees",s[s.EmployeeDetails=2]="EmployeeDetails",s[s.ReviewAndSave=3]="ReviewAndSave",s))(P||{});const ca=A.createContext({pageMode:"create",activeStep:0,includedEmployees:[],excludedEmployees:[],setTimeOffPolicyEmployees:h.noop,bayzatSheetRowsWithErrors:0,bayzatSheetEditableRows:0,setLeavePolicy:h.noop,isPolicyPublishedWithEmployeesAssigned:!1,manuallyAdjustedEmployeeDetailsCount:0,isFormDataDifferentThanTemplate:!1,setIsFormDataDifferentThanTemplate:h.noop,isEmployeeDetailsSheetOpen:!1,isSheetsShowingManuallyAdjustedEmployees:!1,setIsSheetsShowingManuallyAdjustedEmployees:h.noop,setIsEmployeeDetailsSheetOpen:h.noop,handleIncrementActiveStep:h.noop,goToFinalStep:h.noop,isTimeOffV2Phase4FlowEnabled:!1,isPolicyUpdated:!1,setIsPolicyUpdated:h.noop,setOnLastStepFrom:h.noop}),Pa=({children:s,value:c})=>e.jsx(ca.Provider,{value:c,children:s}),ua=We("/companies/{companyId}/time-off/leave-types/pause-accrual-leave-types","get",{isGlobalProgressEnabled:!1,apiUrlPrefix:ra});function he(s,c={}){const[u,m]=ua(s,he);return Ge({queryKey:u,queryFn:m,...c})}const ha=(s,c)=>{switch(c){case"annual":return s.formatMessage({id:"hr.time-off.annually-recurring",defaultMessage:"Annually recurring"});case"one-time":return s.formatMessage({id:"hr.time-off.one-time-only",defaultMessage:"One time only"})}},fa=H(ha),ya=(s,c)=>{switch(c){case"calendar-days":return s.formatMessage({id:"hr.time-off.calendar-days",defaultMessage:"Calendar days"});case"custom-days":return s.formatMessage({id:"hr.time-off.custom-days",defaultMessage:"Custom days"});case"working-days":return s.formatMessage({id:"hr.time-off.working-days",defaultMessage:"Working days"})}},ma=H(ya),_=ue({calendarDays:{id:"hr.time-off.calendar-days-count",defaultMessage:"{count, plural, one {# Calendar day} other {# Calendar days}}"},customDays:{id:"hr.time-off.custom-days-count",defaultMessage:"{count, plural, one {# Custom day} other {# Custom days}}"},workingDays:{id:"hr.time-off.working-days-count",defaultMessage:"{count, plural, one {# Working day} other {# Working days}}"}}),pa=(s,{count:c,dailyRateDayType:u})=>{switch(u){case"calendar-days":return s.formatMessage(_.calendarDays,{count:c});case"custom-days":return s.formatMessage(_.customDays,{count:c});case"working-days":return s.formatMessage(_.workingDays,{count:c})}},ga=(s,c)=>{switch(c){case"basic":return s.formatMessage({id:"hr.time-off.basic-salary",defaultMessage:"Basic salary"});case"basic-allowance":return s.formatMessage({id:"hr.time-off.basic-salary-allowance",defaultMessage:"Basic salary + allowance"})}},Ma=H(ga),$=Je()(s=>({allowanceCell:{borderRight:`1px solid ${E.grey[200]}`},viewEmployeesButton:{width:"fit-content"},detailContainer:{fontWeight:500,fontSize:s.typography.h6.fontSize},descriptionRenderer:{"& p":{margin:0},"& > *:first-of-type":{marginTop:0}},conditionContainer:{"& tr:last-child td:first-of-type, & tr:last-child td:last-child":{borderBottom:"none"}},dialogContent:{maxHeight:"calc(90vh - 300px)"},subheader:{backgroundColor:E.grey[100],padding:s.spacing(1,2),color:E.grey[900],borderRadius:s.spacing(.5,.5,0,0)},listItem:{borderBottom:`1px solid ${E.grey[200]}`},marginTop:{marginTop:s.spacing(2)},noPaddingTop:{paddingTop:0},fontWeightMedium:{fontWeight:s.typography.fontWeightMedium}})),a=ue({policyDetails:{id:"hr.time-off.policy-details",defaultMessage:"Policy details"},policyName:{id:"hr.time-off.policy-name",defaultMessage:"Policy name"},description:{id:"common.description",defaultMessage:"Description"},close:{id:"common.close",defaultMessage:"Close"},leaveAllowance:{id:"hr.time-off.leave-allowance",defaultMessage:"Leave allowance"},policyRecurrence:{id:"hr.time-off.policy-recurrence",defaultMessage:"Policy recurrence"},conditionalByTenure:{id:"hr.time-off.conditional-by-job-tenure",defaultMessage:"Conditional leave allowance based on employee's job tenure"},leavePayRate:{id:"hr.time-off.leave-pay-rate",defaultMessage:"Leave pay rate"},defaultLeavePayRate:{id:"hr.time-off.default-leave-pay-rate",defaultMessage:"Default leave pay rate"},paid:{id:"hr.app.page.profile.expenses.paid-label",defaultMessage:"Paid"},unpaid:{id:"hr.payroll.unpaid",defaultMessage:"Unpaid"},partiallyPaidPercent:{id:"hr.time-off.partially-paid-percentage",defaultMessage:"Partially paid: {percentage}%"},paidPercentage:{id:"hr.time-off.paid-percentage",defaultMessage:"Paid {percentage}%"},conditionalPayRate:{id:"hr.time-off.conditional-pay-rate",defaultMessage:"Conditional pay rate"},annualJobTenureBetween:{id:"hr.time-off.job-tenure-between-description",defaultMessage:"If job tenure is between {startValue, plural, one {# year} other {# years}} - {endValue, plural, one {# year} other {# years}}, then update leave allowance to:"},annualJobTenureLessThan:{id:"hr.time-off.job-tenure-less-than-description",defaultMessage:"If job tenure is less than {startValue, plural, one {# year} other {# years}}, then update leave allowance to:"},annualJobTenureLessThanOrEqual:{id:"hr.time-off.job-tenure-less-than-or-equal-description",defaultMessage:"If job tenure is less than or equal to {startValue, plural, one {# year} other {# years}}, then update leave allowance to:"},annualJobTenureGreaterThan:{id:"hr.time-off.job-tenure-greater-than-description",defaultMessage:"If job tenure is greater than {startValue, plural, one {# year} other {# years}}, then update leave allowance to:"},annualJobTenureGreaterThanOrEqual:{id:"hr.time-off.job-tenure-greater-than-or-equal-description",defaultMessage:"If job tenure is greater than or equal to {startValue, plural, one {# year} other {# years}}, then update leave allowance to:"},monthlyJobTenureBetween:{id:"hr.time-off.monthly-job-tenure-between-description",defaultMessage:"If job tenure is between {startValue, plural, one {# month} other {# months}} - {endValue, plural, one {# month} other {# months}}, then update leave allowance to:"},monthlyJobTenureLessThan:{id:"hr.time-off.monthly-job-tenure-less-than-description",defaultMessage:"If job tenure is less than {startValue, plural, one {# month} other {# months}}, then update leave allowance to:"},monthlyJobTenureLessThanOrEqual:{id:"hr.time-off.monthly-job-tenure-less-than-or-equal-description",defaultMessage:"If job tenure is less than or equal to {startValue, plural, one {# month} other {# months}}, then update leave allowance to:"},monthlyJobTenureGreaterThan:{id:"hr.time-off.monthly-job-tenure-greater-than-description",defaultMessage:"If job tenure is greater than {startValue, plural, one {# month} other {# months}}, then update leave allowance to:"},monthlyJobTenureGreaterThanOrEqual:{id:"hr.time-off.monthly-job-tenure-greater-than-or-equal-description",defaultMessage:"If job tenure is greater than and equal to {startValue, plural, one {# month} other {# months}}, then update leave allowance to:"},allowanceUsedBetweenDaysPayRateCondition:{id:"hr.time-off.leave-allowance-used-between-days-pay-rate-condition",defaultMessage:"If leave allowance used is between {startValue}-{endValue} days, then set the leave pay rate to:"},jobTenureBetweenDaysPayRateCondition:{id:"hr.time-off.job-tenure-between-days-pay-rate-condition",defaultMessage:"If job tenure used is between {startValue}-{endValue} days, then set the leave pay rate to:"},allowanceUsedGreaterThanDaysPayRateCondition:{id:"hr.time-off.leave-allowance-used-greater-than-days-pay-rate-condition",defaultMessage:"If leave allowance used is greater than {startValue, plural, one {# day} other {# days}}, then set the leave pay rate to:"},jobTenureGreaterThanDaysPayRateCondition:{id:"hr.time-off.job-tenure-greater-than-days-pay-rate-condition",defaultMessage:"If job tenure used is greater than {startValue, plural, one {# day} other {# days}}, then set the leave pay rate to:"},allowanceUsedGreaterThanOrEqualToDaysPayRateCondition:{id:"hr.time-off.leave-allowance-used-greater-than-or-equal-to-days-pay-rate-condition",defaultMessage:"If leave allowance used is greater than or equal to {startValue, plural, one {# day} other {# days}}, then set the leave pay rate to:"},jobTenureGreaterThanOrEqualToDaysPayRateCondition:{id:"hr.time-off.job-tenure-greater-than-or-equal-to-days-pay-rate-condition",defaultMessage:"If job tenure used is greater than or equal to {startValue, plural, one {# day} other {# days}}, then set the leave pay rate to:"},allowanceUsedLessThanDaysPayRateCondition:{id:"hr.time-off.leave-allowance-used-less-than-days-pay-rate-condition",defaultMessage:"If leave allowance used is less than {startValue, plural, one {# day} other {# days}}, then set the leave pay rate to:"},jobTenureLessThanDaysPayRateCondition:{id:"hr.time-off.job-tenure-less-than-days-pay-rate-condition",defaultMessage:"If job tenure used is less than {startValue, plural, one {# day} other {# days}}, then set the leave pay rate to:"},allowanceUsedLessThanOrEqualToDaysPayRateCondition:{id:"hr.time-off.leave-allowance-used-less-than-or-equal-to-days-pay-rate-condition",defaultMessage:"If leave allowance used is less than or equal to {startValue, plural, one {# day} other {# days}}, then set the leave pay rate to:"},jobTenureLessThanOrEqualToDaysPayRateCondition:{id:"hr.time-off.job-tenure-less-than-or-equal-to-days-pay-rate-condition",defaultMessage:"If job tenure used is less than or equal to {startValue, plural, one {# day} other {# days}}, then set the leave pay rate to:"},jobTenureBetweenMonthsPayRateCondition:{id:"hr.time-off.job-tenure-between-months-pay-rate-condition",defaultMessage:"If job tenure used is between {startValue}-{endValue} months, then set the leave pay rate to:"},jobTenureGreaterThanMonthsPayRateCondition:{id:"hr.time-off.job-tenure-greater-than-months-pay-rate-condition",defaultMessage:"If job tenure used is greater than {startValue, plural, one {# month} other {# months}}, then set the leave pay rate to:"},jobTenureGreaterThanOrEqualToMonthsPayRateCondition:{id:"hr.time-off.job-tenure-greater-than-or-equal-to-months-pay-rate-condition",defaultMessage:"If job tenure used is greater than and equal to {startValue, plural, one {# month} other {# months}}, then set the leave pay rate to:"},jobTenureLessThanMonthsPayRateCondition:{id:"hr.time-off.job-tenure-less-than-months-pay-rate-condition",defaultMessage:"If job tenure used is less than {startValue, plural, one {# month} other {# months}}, then set the leave pay rate to:"},jobTenureLessThanOrEqualToMonthsPayRateCondition:{id:"hr.time-off.job-tenure-less-than-or-equal-to-months-pay-rate-condition",defaultMessage:"If job tenure used is less than or equal to {startValue, plural, one {# month} other {# months}}, then set the leave pay rate to:"},jobTenureBetweenYearsPayRateCondition:{id:"hr.time-off.job-tenure-between-years-pay-rate-condition",defaultMessage:"If job tenure used is between {startValue}-{endValue} years, then set the leave pay rate to:"},jobTenureGreaterThanYearsPayRateCondition:{id:"hr.time-off.job-tenure-greater-than-years-pay-rate-condition",defaultMessage:"If job tenure used is greater than {startValue, plural, one {# year} other {# years}}, then set the leave pay rate to:"},jobTenureGreaterThanOrEqualToYearsPayRateCondition:{id:"hr.time-off.job-tenure-greater-than-or-equal-to-years-pay-rate-condition",defaultMessage:"If job tenure used is greater than or equal to {startValue, plural, one {# year} other {# years}}, then set the leave pay rate to:"},jobTenureLessThanYearsPayRateCondition:{id:"hr.time-off.job-tenure-less-than-years-pay-rate-condition",defaultMessage:"If job tenure used is less than {startValue, plural, one {# year} other {# years}}, then set the leave pay rate to:"},jobTenureLessThanOrEqualToYearsPayRateCondition:{id:"hr.time-off.job-tenure-less-than-or-equal-to-years-pay-rate-condition",defaultMessage:"If job tenure used is less than or equal to {startValue, plural, one {# year} other {# years}}, then set the leave pay rate to:"},conditionalPayRateByUsedAllowance:{id:"hr.time-off.conditional-pay-rate-by-used-allowance",defaultMessage:"Conditional leave pay rate based on employees's leave allowance used"},conditionalPayRateByJonTenure:{id:"hr.time-off.conditional-pay-rate-by-job-tenure",defaultMessage:"Conditional leave pay rate based on employees's job tenure"},payRateCount:{id:"hr.time-off.pay-rate-count",defaultMessage:"Pay rate {count}"},dailyRateCalculationTitle:{id:"hr.time-off.daily-rate-calculation-title",defaultMessage:"Daily rate calculation for unpaid leave deduction"},leaveAllowanceCount:{id:"hr.time-off.leave-allowance-count",defaultMessage:"Leave allowance {count}"},employeesAddedCount:{id:"hr.time-off.employees-added",defaultMessage:"Employees added ({count})"},viewAllEmployees:{id:"hr.view-all-employees",defaultMessage:"View all employees"},employeesInThePolicy:{id:"hr.time-off.employees-in-the-policy",defaultMessage:"Employees in the policy"},edit:{id:"common.action.edit",defaultMessage:"Edit"},disabledForActivePolicy:{id:"hr.time-off.pay-rate-cannot-be-changed-for-active-policy",defaultMessage:"Leave pay rate cannot be changed for an active policy"},policyRestrictions:{id:"hr.time-off.policy-restrictions",defaultMessage:"Policy restrictions"},restrictDuringProbation:{id:"hr.time-off.restrict-during-probation",defaultMessage:"Restrict during probation"},restrictEditingOfLeaveDays:{id:"hr.time-off.restrict-editing-of-leave-days",defaultMessage:"Restrict editing of leave days"},on:{id:"common.on",defaultMessage:"On"},accrueAllowanceMonthly:{id:"hr.time-off.accure-allowance-monthly",defaultMessage:"Accrue allowance on a monthly basis"},allowNegativeBalance:{id:"hr.time-off.on-allow-negative-balance",defaultMessage:"On: allow negative balances"},onReduceAccruedDays:{id:"hr.time-off.on-reduce-accrued-days",defaultMessage:"On: reduce accrued days if employee takes a leave from a different policy"},onReduceAccruedDaysWithMinimum:{id:"hr.time-off.on-reduce-accrued-days-with-minimum",defaultMessage:"On: reduce accrued days if employee takes a <b>minimum of {count} leave days</b> from <link>selected policies</link>"},viewSelectedPolicies:{id:"hr.time-off.view-selected-policies",defaultMessage:"View selected policies"},policiesSelectedForReducingAccrual:{id:"hr.time-off.policies-selected-for-reducing-accrual",defaultMessage:"Policies selected for reducing accrual"},availableMonthlyAccruedBalance:{id:"hr.time-off.available-monthly-accrued-balance",defaultMessage:"Available monthly accrued balance for this policy will be reduced when an employee takes a leave from the policies listed below"},selectedPolicies:{id:"hr.time-off.selected-policies",defaultMessage:"Selected Policies"},carrOverDays:{id:"hr.time-off.carry-over-days",defaultMessage:"Carry over days"},calendarDaysWillNotConsiderHolidays:{id:"hr.time-off.calendar-days-will-not-consider-holidays",defaultMessage:"Calendar days will not consider public holidays as leave days"},durationDays:{id:"hr.duration-days",defaultMessage:" {duration, plural, one {# day} other {# days}}"},leaveDays:{id:"hr.time-off.leave-days",defaultMessage:"Leave days"},leaveSalary:{id:"hr.time-off.leave-salary",defaultMessage:"Leave salary"}}),Da=({allowanceType:s,description:c,includedEmployees:u,leavePayRatePercentage:m,policyName:j,leaveAllowanceConditions:y,onNavigateToStep:r,showEditButtons:x,isAllowanceConditional:w,numberOfDays:fe,daysType:B,leavePayRateConditions:g,isPayRateConditional:q,dailyRateCustomDayCount:N,dailyRateDayType:V,dailyRateSalaryComponent:k,restrictDuringProbation:Q,restrictLeaveDaysEdit:K,carryOverAllowance:X,paid:S,carryOverSupport:ye,publicHolidaysExcluded:me,isPolicyPublishedWithEmployeesAssigned:Z,leavePolicyId:pe,negativeBalanceSupport:ge,accrualType:Me,nonConditionalPauseAccrualSetting:C,eligibleForLeaveSalary:be})=>{var se,re;const t=Y(),{classes:v}=$(),je=Ue(Fe),[xe,ve]=A.useState(!1),[we,O]=A.useState(!1),[Te,Pe]=A.useState(Array(y==null?void 0:y.conditions.length).fill(!1)),De=I(fa),Re=I(na),Ce=I(pa),Ie=I(ma),Ee=I(Ma),M=!!(w&&!h.isEmpty(y)||q&&!h.isEmpty(g)),qe=k&&V?`${Ee(k)} / ${h.isNil(N)?Ie(V):Ce({dailyRateDayType:V,count:N})}`:void 0,W=!w&&C?C.pauseAccrualPolicyIds:void 0,Ve=n=>{const{operator:o,valueUnit:p,values:i}=n,l=i.length>0?i[0]:"",f=i.length>1?i[1]:"";if(p==="years")switch(o){case"between":return t.formatMessage(a.annualJobTenureBetween,{startValue:l,endValue:f});case"less-than":return t.formatMessage(a.annualJobTenureLessThan,{startValue:l});case"greater-than-or-equal":return t.formatMessage(a.annualJobTenureGreaterThanOrEqual,{startValue:l})}else if(p==="months")switch(o){case"between":return t.formatMessage(a.monthlyJobTenureBetween,{startValue:l,endValue:f});case"less-than":return t.formatMessage(a.monthlyJobTenureLessThan,{startValue:l});case"greater-than-or-equal":return t.formatMessage(a.monthlyJobTenureGreaterThanOrEqual,{startValue:l})}return""},Le=({condition:n,conditionType:o})=>{const{valueUnit:p,operator:i,values:l}=n,f=l.length>0?l[0]:"",T=l.length>1?l[1]:"";if(p==="days")switch(i){case"between":return o==="job-tenure"?t.formatMessage(a.jobTenureBetweenDaysPayRateCondition,{startValue:f,endValue:T}):o==="leaves-taken"?t.formatMessage(a.allowanceUsedBetweenDaysPayRateCondition,{startValue:f,endValue:T}):"";case"greater-than-or-equal":return o==="job-tenure"?t.formatMessage(a.jobTenureGreaterThanOrEqualToDaysPayRateCondition,{startValue:f}):o==="leaves-taken"?t.formatMessage(a.allowanceUsedGreaterThanOrEqualToDaysPayRateCondition,{startValue:f}):"";case"less-than":return o==="job-tenure"?t.formatMessage(a.jobTenureLessThanDaysPayRateCondition,{startValue:f}):o==="leaves-taken"?t.formatMessage(a.allowanceUsedLessThanDaysPayRateCondition,{startValue:f}):""}else if(p==="months"&&o==="job-tenure")switch(i){case"between":return t.formatMessage(a.jobTenureBetweenMonthsPayRateCondition,{startValue:f,endValue:T});case"greater-than-or-equal":return t.formatMessage(a.jobTenureGreaterThanOrEqualToMonthsPayRateCondition,{startValue:f});case"less-than":return t.formatMessage(a.jobTenureLessThanMonthsPayRateCondition,{startValue:f})}else if(p==="years"&&o==="job-tenure")switch(i){case"between":return t.formatMessage(a.jobTenureBetweenYearsPayRateCondition,{startValue:f,endValue:T});case"greater-than-or-equal":return t.formatMessage(a.jobTenureGreaterThanOrEqualToYearsPayRateCondition,{startValue:f});case"less-than":return t.formatMessage(a.jobTenureLessThanYearsPayRateCondition,{startValue:f})}return""},Ae=({paid:n,percentage:o})=>n?t.formatMessage(a.paid):o?t.formatMessage(a.partiallyPaidPercent,{percentage:o}):n===!1?t.formatMessage(a.unpaid):"",ee=n=>n===0?t.formatMessage(a.unpaid):n===100?t.formatMessage(a.paid):n>0&&n<100?t.formatMessage(a.partiallyPaidPercent,{percentage:n}):"",Be=ze(),{data:ke}=he({companyId:Be,filters:{excludeId:pe}},{select:sa}),G=h.sortBy(ke,"name"),ae=n=>(G==null?void 0:G.filter(o=>n.includes(o.id)))||[],J=(n,o)=>{Pe(p=>{const i=[...p];if(n>=0&&n<i.length)i[n]=o;else{for(;n>=i.length;)i.push(!1);i[n]=o}return i})},Se=[{dataIndex:"id",title:"",proportion:3,renderer:(n,o,p,i)=>e.jsx(z,{className:v.allowanceCell,children:e.jsx(d,{color:"textSecondary",children:t.formatMessage(a.leaveAllowanceCount,{count:i+1})})},"id")},{dataIndex:"condition",title:"",proportion:9,renderer:(n,o,p,i)=>{var T,ne,oe,le,ie;const l=o.condition.output,f=l.values.length>0?l.values[0]:"";return e.jsxs(z,{children:[e.jsx(d,{variant:"body1",children:Ve(o.condition)}),e.jsx(d,{variant:"h6",fontWeight:500,children:t.formatMessage(a.durationDays,{duration:f})}),l.accrualType==="monthly"&&e.jsxs(D,{mt:2,children:[e.jsx(d,{"data-external-id":"allowance-condition-monthly-accural",color:"textSecondary",children:t.formatMessage(a.accrueAllowanceMonthly)}),l.negativeBalanceSupport&&e.jsx(d,{"data-external-id":"allowance-condition-allow-negative",variant:"h6",children:t.formatMessage(a.allowNegativeBalance)}),(l==null?void 0:l.pauseAccrualSetting)&&((ne=(T=l==null?void 0:l.pauseAccrualSetting)==null?void 0:T.pauseAccrualPolicyIds)==null?void 0:ne.length)>0&&e.jsxs(e.Fragment,{children:[((oe=l==null?void 0:l.pauseAccrualSetting)==null?void 0:oe.minimumRequiredDays)>0?e.jsx(d,{variant:"body1",children:t.formatMessage(a.onReduceAccruedDaysWithMinimum,{count:(le=l==null?void 0:l.pauseAccrualSetting)==null?void 0:le.minimumRequiredDays,b:U=>e.jsx("span",{className:v.fontWeightMedium,children:U}),link:U=>e.jsx(L,{onClick:()=>J(i,!0),children:U})})}):e.jsxs(D,{direction:"row",gap:1,children:[e.jsx(d,{variant:"body1",children:t.formatMessage(a.onReduceAccruedDays)}),e.jsx(L,{variant:"body1",onClick:()=>J(i,!0),children:t.formatMessage(a.viewSelectedPolicies)})]}),e.jsx(ce,{isOpen:Te[i],onCancel:()=>J(i,!1),selectedLeavePolicies:ae((ie=l==null?void 0:l.pauseAccrualSetting)==null?void 0:ie.pauseAccrualPolicyIds)})]})]})]},"condition")}}],Oe=[{dataIndex:"id",title:"",renderer:(n,o,p,i)=>e.jsx(z,{className:v.allowanceCell,children:e.jsx(d,{color:"textSecondary",children:t.formatMessage(a.payRateCount,{count:i+1})})},"id")},{dataIndex:"condition",title:"",accessor:(n,o)=>{const p=o.condition.output.values.length>0?o.condition.output.values[0]:"",i=p?parseFloat(p):void 0;return e.jsxs("div",{children:[e.jsx(d,{variant:"body1",children:Le({condition:o.condition,conditionType:o.conditionType})}),!h.isUndefined(i)&&e.jsx(d,{variant:"h6",fontWeight:500,children:ee(i)})]},"condition")}}],te=()=>{ve(n=>!n)};return e.jsxs(D,{spacing:2,children:[e.jsxs(R,{showEditButton:x,"data-external-id":"details-accordion",onEdit:()=>r==null?void 0:r(P.Setup),isExpandedByDefault:!0,title:t.formatMessage(a.policyDetails),children:[e.jsx(b,{"data-external-id":"policy-name-pair",title:t.formatMessage(a.policyName),detail:`${j}`,isConditionTableVisible:M}),c&&e.jsx(b,{"data-external-id":"policy-description-pair",title:t.formatMessage(a.description),detail:e.jsx("div",{className:v.descriptionRenderer,dangerouslySetInnerHTML:{__html:_e(c)}}),isConditionTableVisible:M,hideDetailSectionStyles:!0})]}),e.jsxs(R,{showEditButton:x,"data-external-id":"leave-allowance-accordion",onEdit:()=>r==null?void 0:r(P.Setup),title:t.formatMessage(a.leaveAllowance),children:[!w&&e.jsx(b,{"data-external-id":"non-conditional-leave-allowance-pair",title:t.formatMessage(a.leaveAllowance),detail:e.jsx(d,{variant:"h6",fontWeight:500,children:t.formatMessage(a.durationDays,{duration:fe??0})}),isConditionTableVisible:M}),e.jsx(b,{"data-external-id":"policy-days-type-pair",title:t.formatMessage(a.leaveDays),detail:e.jsxs(e.Fragment,{children:[e.jsx(d,{variant:"h6",fontWeight:500,children:Re(B)}),me&&e.jsx(d,{children:t.formatMessage(a.calendarDaysWillNotConsiderHolidays)})]}),isConditionTableVisible:M}),e.jsx(b,{"data-external-id":"policy-recurrence-pair",title:t.formatMessage(a.policyRecurrence),detail:s?e.jsxs(D,{gap:1,children:[e.jsx(d,{variant:"h6",children:De(s)}),!w&&e.jsxs("div",{children:[Me==="monthly"&&e.jsx(d,{variant:"h6",children:t.formatMessage(a.accrueAllowanceMonthly)}),ge&&e.jsx(d,{variant:"body1",children:t.formatMessage(a.allowNegativeBalance)}),W&&W.length>0&&e.jsxs(e.Fragment,{children:[!h.isNil(C)&&C.minimumRequiredDays>0?e.jsx(d,{variant:"body1",children:t.formatMessage(a.onReduceAccruedDaysWithMinimum,{count:C.minimumRequiredDays,b:n=>e.jsx("span",{className:v.fontWeightMedium,children:n}),link:n=>e.jsx(L,{onClick:()=>O(!0),children:n})})}):e.jsxs(D,{direction:"row",gap:1,children:[e.jsx(d,{variant:"body1",children:t.formatMessage(a.onReduceAccruedDays)}),e.jsx(L,{variant:"body1",onClick:()=>O(!0),children:t.formatMessage(a.viewSelectedPolicies)})]}),e.jsx(ce,{isOpen:we,onCancel:()=>O(!1),selectedLeavePolicies:ae(W)})]})]})]}):"",isConditionTableVisible:M}),!h.isNil(X)&&ye&&e.jsx(b,{"data-external-id":"policy-carry-over-pair",title:t.formatMessage(a.carrOverDays),detail:t.formatMessage(a.durationDays,{duration:X}),isConditionTableVisible:M}),w&&!h.isEmpty(y)&&e.jsxs("div",{className:v.conditionContainer,"data-external-id":"conditional-leave-allowance-section",children:[e.jsx(d,{variant:"h6",fontWeight:500,mb:1,children:t.formatMessage(a.conditionalByTenure)}),e.jsx(de,{columns:Se,data:(y==null?void 0:y.conditions.map((n,o)=>({condition:n,id:String(o),daysType:B})))??[],hasColumnsHeader:!1,variant:"outlined"})]})]}),e.jsxs(R,{showEditButton:x,disableEditButton:Z,editButtonTooltip:Z?t.formatMessage(a.disabledForActivePolicy):void 0,"data-external-id":"leave-pay-rate-accordion",onEdit:()=>r==null?void 0:r(P.Setup),title:t.formatMessage(a.leavePayRate),children:[q&&g&&e.jsxs("div",{className:v.conditionContainer,"data-external-id":"conditional-leave-pay-rate-condition",children:[e.jsx(d,{variant:"h6",children:g.type==="job-tenure"?t.formatMessage(a.conditionalPayRateByJonTenure):g.type==="leaves-taken"?t.formatMessage(a.conditionalPayRateByUsedAllowance):""}),e.jsx(de,{columns:Oe,data:(g==null?void 0:g.conditions.map((n,o)=>({condition:n,id:String(o),daysType:B,conditionType:g.type})))??[],hasColumnsHeader:!1,variant:"outlined"})]}),e.jsx(b,{"data-external-id":"pay-rate-type-pair",title:t.formatMessage(g&&q?a.defaultLeavePayRate:a.leavePayRate),detail:q?ee(Number((re=(se=g==null?void 0:g.defaultOutput)==null?void 0:se.values)==null?void 0:re[0])):Ae({percentage:m,paid:S}),isConditionTableVisible:M}),k&&V&&e.jsx(b,{"data-external-id":"daily-rate-pair",title:t.formatMessage(a.dailyRateCalculationTitle),detail:qe,isConditionTableVisible:M})]}),S&&be&&je&&e.jsx(R,{showEditButton:x,onEdit:()=>r==null?void 0:r(P.Setup),title:t.formatMessage(a.leaveSalary),children:e.jsx(b,{title:t.formatMessage(a.leaveSalary),detail:t.formatMessage(a.on),isConditionTableVisible:M})}),(Q||K)&&S&&e.jsxs(R,{"data-external-id":"policy-restriction-accordion",showEditButton:x,onEdit:()=>r==null?void 0:r(P.Setup),title:t.formatMessage(a.policyRestrictions),children:[Q&&e.jsx(b,{"data-external-id":"restrict-during-probation-pair",title:t.formatMessage(a.restrictDuringProbation),detail:t.formatMessage(a.on),isConditionTableVisible:M}),K&&e.jsx(b,{"data-external-id":"restrict-leave-days-edit-pair",title:t.formatMessage(a.restrictEditingOfLeaveDays),detail:t.formatMessage(a.on),isConditionTableVisible:M})]}),!h.isEmpty(u)&&e.jsx(R,{"data-external-id":"included-employees-accordion",showEditButton:x,onEdit:()=>r==null?void 0:r(P.AddEmployees),title:t.formatMessage(a.employeesAddedCount,{count:u==null?void 0:u.length}),children:e.jsx(He,{"data-external-id":"view-all-employees",onClick:te,className:v.viewEmployeesButton,children:t.formatMessage(a.viewAllEmployees)})}),u&&e.jsx(la,{title:t.formatMessage(a.employeesInThePolicy),open:xe,onClose:te,employees:u})]})},R=({title:s,children:c,isExpandedByDefault:u,showEditButton:m,disableEditButton:j,onEdit:y,editButtonTooltip:r,"data-external-id":x})=>{const w=Y();return e.jsx(ia,{"data-external-id":x,variant:"outlined",children:e.jsxs(Ye,{defaultExpanded:u,children:[e.jsx($e,{expandIcon:e.jsx(Ne,{fontSize:"xx-small"}),children:e.jsxs(D,{direction:"row",alignItems:"center",justifyContent:"space-between",flexGrow:1,pr:3,children:[e.jsx(d,{variant:"h5",children:s}),m&&e.jsx(oa,{tooltipTitle:r,"data-external-id":"accordion-edit-button",size:"small",variant:"outlined",onClick:y,disabled:j,children:w.formatMessage(a.edit)})]})}),e.jsx(Qe,{children:e.jsx(D,{spacing:2,children:c})})]})})},b=({detail:s,title:c,"data-external-id":u,isConditionTableVisible:m,hideDetailSectionStyles:j=!1})=>{const{classes:y}=$();return e.jsxs(F,{"data-external-id":u,container:!0,alignItems:"flex-start",children:[e.jsx(F,{size:{xs:12,sm:3},children:e.jsx(d,{"data-external-id":"title",color:"textSecondary",children:c})}),e.jsx(F,{pl:m?2:void 0,size:{xs:12,sm:9},children:e.jsx("span",{"data-external-id":"detail",className:j?"":y.detailContainer,children:s})})]})},ce=({isOpen:s,onCancel:c,selectedLeavePolicies:u})=>{const m=Y(),{classes:j}=$(),y=u==null?void 0:u.map(r=>r.isPayRateConditional?{...r,tag:m.formatMessage(a.conditionalPayRate)}:!r.isPayRateConditional&&r.paid===!1&&r.leavePayRatePercentage===0?{...r,tag:m.formatMessage(a.unpaid)}:!r.isPayRateConditional&&r.leavePayRatePercentage&&r.leavePayRatePercentage<100?{...r,tag:m.formatMessage(a.paidPercentage,{percentage:r.leavePayRatePercentage})}:{...r,tag:""});return e.jsx(Ke,{content:e.jsxs("div",{className:j.dialogContent,children:[e.jsx(d,{"data-external-id":"allowance-condition-allow-negative",variant:"subtitle1",mb:2,children:m.formatMessage(a.availableMonthlyAccruedBalance)}),e.jsx(Xe,{subheader:e.jsx(Ze,{component:"div",className:j.subheader,children:e.jsx(d,{variant:"h6",color:"textPrimary",children:m.formatMessage(a.selectedPolicies)})}),children:y==null?void 0:y.map(r=>e.jsxs(ea,{role:"listitem",className:j.listItem,children:[e.jsx(aa,{children:e.jsx(d,{variant:"body1",color:E.text.dark.primary,children:r==null?void 0:r.name})}),(r==null?void 0:r.tag)&&e.jsx(ta,{variant:"neutral",label:r.tag})]},r==null?void 0:r.name))})]}),contentClassName:j.noPaddingTop,title:m.formatMessage(a.policiesSelectedForReducingAccrual),confirmButton:{show:!1},cancelButton:{show:!0,text:m.formatMessage(a.close),onClick:c,variant:"outlined"},open:s})};export{ca as T,Da as a,fa as b,Ma as c,ma as d,da as e,P as f,Pa as g,he as u};
