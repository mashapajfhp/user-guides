import{H as Ce,bu as aa,j as L,k1 as ir,k2 as Jr,k3 as Xr,k4 as sa,b$ as jr,r as P,da as H,k5 as ia,bW as oa,aN as la,b7 as Cr,b_ as Qr,ce as ua,af as ge,cV as fa,cX as ca,h$ as da,a as Zt,gy as va,P as ga,fM as ha,fP as pa,k6 as ma,f_ as Yt,cn as wa,aa as ya,d as Jt,B as De,T as et,a0 as rt,bp as ba}from"./assets/index-rhBbSAok.js";import{u as xa}from"./useEmployeeProfile-CS8UTcD4__cache.js";import{F as Ea}from"./FaceId1AlternateIcon-6d8fd3____cache.js";import{P as Oa}from"./emoji-7BluM_UO__cache.js";/* empty css                          */import{_ as ka,i as Xt}from"./isObjectLike-Zu3gTr-k__cache.js";import{t as Ca}from"./toNumber--u_OnPI-__cache.js";const Fa=Ce()(()=>({paragraph:{...aa.body1,display:"block",marginBlockStart:8,marginBlockEnd:8,marginInlineStart:8,marginInlineEnd:8,overflowWrap:"anywhere"}})),Qt=e=>{const{classes:r}=Fa();return L.jsx("p",{className:r.paragraph,...e.attributes,children:e.children})},Sa=Ce()(e=>({linkText:{color:e.palette.primary.main,textDecoration:"underline"}})),en=({attributes:e,children:r,element:t,readOnly:n})=>{const{classes:a}=Sa(),s=t.type==="email",i=t.children,o=i.length>0?(s?"mailto:":"")+i[0].text:"";return L.jsx("a",{...e,"aria-disabled":!n,href:o,className:a.linkText,target:"_blank",rel:"noreferrer",children:r})};/*!
 * is-plain-object <https://github.com/jonschlinkert/is-plain-object>
 *
 * Copyright (c) 2014-2017, Jon Schlinkert.
 * Released under the MIT License.
 */function tt(e){return Object.prototype.toString.call(e)==="[object Object]"}function oe(e){var r,t;return tt(e)===!1?!1:(r=e.constructor,r===void 0?!0:(t=r.prototype,!(tt(t)===!1||t.hasOwnProperty("isPrototypeOf")===!1)))}function pe(e,r,t){return r in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}var tr=new WeakMap,We=new WeakMap,nt=new WeakMap,at=new WeakMap,st=new WeakMap,it=new WeakMap;function ot(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),t.push.apply(t,n)}return t}function Ze(e){for(var r=1;r<arguments.length;r++){var t=arguments[r]!=null?arguments[r]:{};r%2?ot(Object(t),!0).forEach(function(n){pe(e,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):ot(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})}return e}var Rr=()=>{var e={children:[],operations:[],selection:null,marks:null,isInline:()=>!1,isVoid:()=>!1,onChange:()=>{},apply:r=>{for(var t of l.pathRefs(e))Ya.transform(t,r);for(var n of l.pointRefs(e))Ja.transform(n,r);for(var a of l.rangeRefs(e))es.transform(a,r);var s=new Set,i=[],o=u=>{if(u){var x=u.join(",");s.has(x)||(s.add(x),i.push(u))}},c=tr.get(e)||[],v=Aa(r);for(var w of c){var g=p.transform(w,r);o(g)}for(var f of v)o(f);tr.set(e,i),D.transform(e,r),e.operations.push(r),l.normalize(e),r.type==="set_selection"&&(e.marks=null),We.get(e)||(We.set(e,!0),Promise.resolve().then(()=>{We.set(e,!1),e.onChange(),e.operations=[]}))},addMark:(r,t)=>{var{selection:n}=e;if(n)if(S.isExpanded(n))D.setNodes(e,{[r]:t},{match:B.isText,split:!0});else{var a=Ze(Ze({},l.marks(e)||{}),{},{[r]:t});e.marks=a,We.get(e)||e.onChange()}},deleteBackward:r=>{var{selection:t}=e;t&&S.isCollapsed(t)&&D.delete(e,{unit:r,reverse:!0})},deleteForward:r=>{var{selection:t}=e;t&&S.isCollapsed(t)&&D.delete(e,{unit:r})},deleteFragment:r=>{var{selection:t}=e;t&&S.isExpanded(t)&&D.delete(e,{reverse:r==="backward"})},getFragment:()=>{var{selection:r}=e;return r?N.fragment(e,r):[]},insertBreak:()=>{D.splitNodes(e,{always:!0})},insertFragment:r=>{D.insertFragment(e,r)},insertNode:r=>{D.insertNodes(e,r)},insertText:r=>{var{selection:t,marks:n}=e;if(t){if(S.isCollapsed(t)){var a=l.above(e,{match:c=>l.isInline(e,c),mode:"highest"});if(a){var[,s]=a;if(l.isEnd(e,t.anchor,s)){var i=l.after(e,s);D.setSelection(e,{anchor:i,focus:i})}}}if(n){var o=Ze({text:r},n);D.insertNodes(e,o)}else D.insertText(e,r);e.marks=null}},normalizeNode:r=>{var[t,n]=r;if(!B.isText(t)){if(V.isElement(t)&&t.children.length===0){var a={text:""};D.insertNodes(e,a,{at:n.concat(0),voids:!0});return}for(var s=l.isEditor(t)?!1:V.isElement(t)&&(e.isInline(t)||t.children.length===0||B.isText(t.children[0])||e.isInline(t.children[0])),i=0,o=0;o<t.children.length;o++,i++){var c=N.get(e,n);if(!B.isText(c)){var v=t.children[o],w=c.children[i-1],g=o===t.children.length-1,f=B.isText(v)||V.isElement(v)&&e.isInline(v);if(f!==s)D.removeNodes(e,{at:n.concat(i),voids:!0}),i--;else if(V.isElement(v)){if(e.isInline(v)){if(w==null||!B.isText(w)){var u={text:""};D.insertNodes(e,u,{at:n.concat(i),voids:!0}),i++}else if(g){var x={text:""};D.insertNodes(e,x,{at:n.concat(i+1),voids:!0}),i++}}}else w!=null&&B.isText(w)&&(B.equals(v,w,{loose:!0})?(D.mergeNodes(e,{at:n.concat(i),voids:!0}),i--):w.text===""?(D.removeNodes(e,{at:n.concat(i-1),voids:!0}),i--):v.text===""&&(D.removeNodes(e,{at:n.concat(i),voids:!0}),i--))}}}},removeMark:r=>{var{selection:t}=e;if(t)if(S.isExpanded(t))D.unsetNodes(e,r,{match:B.isText,split:!0});else{var n=Ze({},l.marks(e)||{});delete n[r],e.marks=n,We.get(e)||e.onChange()}}};return e},Aa=e=>{switch(e.type){case"insert_text":case"remove_text":case"set_node":{var{path:r}=e;return p.levels(r)}case"insert_node":{var{node:t,path:n}=e,a=p.levels(n),s=B.isText(t)?[]:Array.from(N.nodes(t),m=>{var[,T]=m;return n.concat(T)});return[...a,...s]}case"merge_node":{var{path:i}=e,o=p.ancestors(i),c=p.previous(i);return[...o,c]}case"move_node":{var{path:v,newPath:w}=e;if(p.equals(v,w))return[];var g=[],f=[];for(var u of p.ancestors(v)){var x=p.transform(u,e);g.push(x)}for(var E of p.ancestors(w)){var C=p.transform(E,e);f.push(C)}var A=f[f.length-1],h=w[w.length-1],b=A.concat(h);return[...g,...f,b]}case"remove_node":{var{path:k}=e,F=p.ancestors(k);return[...F]}case"split_node":{var{path:O}=e,d=p.levels(O),y=p.next(O);return[...d,y]}default:return[]}};function Da(e,r){if(e==null)return{};var t={},n=Object.keys(e),a,s;for(s=0;s<n.length;s++)a=n[s],!(r.indexOf(a)>=0)&&(t[a]=e[a]);return t}function ye(e,r){if(e==null)return{};var t=Da(e,r),n,a;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(a=0;a<s.length;a++)n=s[a],!(r.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(t[n]=e[n])}return t}var Pa=/\s/,Ta=/[\u0021-\u0023\u0025-\u002A\u002C-\u002F\u003A\u003B\u003F\u0040\u005B-\u005D\u005F\u007B\u007D\u00A1\u00A7\u00AB\u00B6\u00B7\u00BB\u00BF\u037E\u0387\u055A-\u055F\u0589\u058A\u05BE\u05C0\u05C3\u05C6\u05F3\u05F4\u0609\u060A\u060C\u060D\u061B\u061E\u061F\u066A-\u066D\u06D4\u0700-\u070D\u07F7-\u07F9\u0830-\u083E\u085E\u0964\u0965\u0970\u0AF0\u0DF4\u0E4F\u0E5A\u0E5B\u0F04-\u0F12\u0F14\u0F3A-\u0F3D\u0F85\u0FD0-\u0FD4\u0FD9\u0FDA\u104A-\u104F\u10FB\u1360-\u1368\u1400\u166D\u166E\u169B\u169C\u16EB-\u16ED\u1735\u1736\u17D4-\u17D6\u17D8-\u17DA\u1800-\u180A\u1944\u1945\u1A1E\u1A1F\u1AA0-\u1AA6\u1AA8-\u1AAD\u1B5A-\u1B60\u1BFC-\u1BFF\u1C3B-\u1C3F\u1C7E\u1C7F\u1CC0-\u1CC7\u1CD3\u2010-\u2027\u2030-\u2043\u2045-\u2051\u2053-\u205E\u207D\u207E\u208D\u208E\u2329\u232A\u2768-\u2775\u27C5\u27C6\u27E6-\u27EF\u2983-\u2998\u29D8-\u29DB\u29FC\u29FD\u2CF9-\u2CFC\u2CFE\u2CFF\u2D70\u2E00-\u2E2E\u2E30-\u2E3B\u3001-\u3003\u3008-\u3011\u3014-\u301F\u3030\u303D\u30A0\u30FB\uA4FE\uA4FF\uA60D-\uA60F\uA673\uA67E\uA6F2-\uA6F7\uA874-\uA877\uA8CE\uA8CF\uA8F8-\uA8FA\uA92E\uA92F\uA95F\uA9C1-\uA9CD\uA9DE\uA9DF\uAA5C-\uAA5F\uAADE\uAADF\uAAF0\uAAF1\uABEB\uFD3E\uFD3F\uFE10-\uFE19\uFE30-\uFE52\uFE54-\uFE61\uFE63\uFE68\uFE6A\uFE6B\uFF01-\uFF03\uFF05-\uFF0A\uFF0C-\uFF0F\uFF1A\uFF1B\uFF1F\uFF20\uFF3B-\uFF3D\uFF3F\uFF5B\uFF5D\uFF5F-\uFF65]/,ja=/['\u2018\u2019]/,Nr=function(r){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,n=!t,a=0,s=null,i=n?r:za(r);for(var o of i){var c=o.codePointAt(0);if(!c)break;if(Wa(c)){a+=o.length,s="ZWJ";continue}var[v,w]=n?[lt,ut]:[ut,lt];if(v(c)){if(s==="KC")break;a+=o.length,s="KC";continue}if(w(c)){a+=o.length;break}if(Ma(c)){if(a+=o.length,n&&s==="BMP")break;s="VAR";continue}if(Ia(c)){if(n&&s&&s!=="ZWJ"&&s!=="VAR"||(a+=o.length,t&&s==="VAR"))break;s="BMP";continue}if(Ba(c)){a+=o.length,s="MOD";continue}var[g,f]=n?[ft,ct]:[ct,ft];if(g(c)){if(s==="TAG")break;a+=o.length,s="TAG";continue}if(f(c)){a+=o.length;break}if(s==="TAG"&&_a(c)){a+=o.length;continue}if(La(c)){if(a+=o.length,s==="RI")break;s="RI";continue}if(!$a(c)){if(s==="NSEQ")break;a+=o.length,s="NSEQ";continue}if(n&&s==="MOD"){a+=o.length;break}break}return a||1},Ra=function(r){for(var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,n=0,a=!1;r.length>0;){var s=Nr(r,t),[i,o]=Br(r,s,t);if(Na(i,o,t))a=!0,n+=s;else if(!a)n+=s;else break;r=o}return n},Br=(e,r,t)=>{if(t){var n=e.length-r;return[e.slice(n,e.length),e.slice(0,n)]}return[e.slice(0,r),e.slice(r)]},Na=function e(r,t){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;if(Pa.test(r))return!1;if(ja.test(r)){var a=Nr(t,n),[s,i]=Br(t,a,n);if(e(s,i,n))return!0}return!Ta.test(r)},Ba=e=>e>=127995&&e<=127999,Ma=e=>e<=65039&&e>=65024,lt=e=>e>=48&&e<=57||e===35||e===42,ut=e=>e===8419,Ia=e=>e===10084||e===9794||e===9792||e===9760||e===9877||e===9992||e===9711||e===11014||e===8599||e===10145||e===8600||e===11015||e===8601||e===11013||e===8598||e===8597||e===8596||e===8617||e===8618||e===10548||e===10549,La=e=>e>=127462&&e<=127487,$a=e=>e<=65535,Wa=e=>e===8205,ft=e=>e===127988,_a=e=>e>=917504&&e<=917631,ct=e=>e===917631,za=function*(r){for(var t=r.length-1,n=0;n<r.length;n++){var a=r.charAt(t-n);if(Ha(a.charCodeAt(0))){var s=r.charAt(t-n-1);if(qa(s.charCodeAt(0))){yield s+a,n++;continue}}yield a}},qa=e=>e>=55296&&e<=56319,Ha=e=>e>=56320&&e<=57343,dt=e=>oe(e)&&N.isNodeList(e.children)&&!l.isEditor(e),V={isAncestor(e){return oe(e)&&N.isNodeList(e.children)},isElement:dt,isElementList(e){return Array.isArray(e)&&e.every(r=>V.isElement(r))},isElementProps(e){return e.children!==void 0},isElementType:function(r,t){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"type";return dt(r)&&r[n]===t},matches(e,r){for(var t in r)if(t!=="children"&&e[t]!==r[t])return!1;return!0}},Ka=["text"],Va=["text"];function vt(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),t.push.apply(t,n)}return t}function Me(e){for(var r=1;r<arguments.length;r++){var t=arguments[r]!=null?arguments[r]:{};r%2?vt(Object(t),!0).forEach(function(n){pe(e,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):vt(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})}return e}var gt=new WeakMap,l={above(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},{voids:t=!1,mode:n="lowest",at:a=e.selection,match:s}=r;if(a){var i=l.path(e,a),o=n==="lowest";for(var[c,v]of l.levels(e,{at:i,voids:t,match:s,reverse:o}))if(!B.isText(c)&&!p.equals(i,v))return[c,v]}},addMark(e,r,t){e.addMark(r,t)},after(e,r){var t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},n=l.point(e,r,{edge:"end"}),a=l.end(e,[]),s={anchor:n,focus:a},{distance:i=1}=t,o=0,c;for(var v of l.positions(e,Me(Me({},t),{},{at:s}))){if(o>i)break;o!==0&&(c=v),o++}return c},before(e,r){var t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},n=l.start(e,[]),a=l.point(e,r,{edge:"start"}),s={anchor:n,focus:a},{distance:i=1}=t,o=0,c;for(var v of l.positions(e,Me(Me({},t),{},{at:s,reverse:!0}))){if(o>i)break;o!==0&&(c=v),o++}return c},deleteBackward(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},{unit:t="character"}=r;e.deleteBackward(t)},deleteForward(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},{unit:t="character"}=r;e.deleteForward(t)},deleteFragment(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},{direction:t="forward"}=r;e.deleteFragment(t)},edges(e,r){return[l.start(e,r),l.end(e,r)]},end(e,r){return l.point(e,r,{edge:"end"})},first(e,r){var t=l.path(e,r,{edge:"start"});return l.node(e,t)},fragment(e,r){var t=l.range(e,r),n=N.fragment(e,t);return n},hasBlocks(e,r){return r.children.some(t=>l.isBlock(e,t))},hasInlines(e,r){return r.children.some(t=>B.isText(t)||l.isInline(e,t))},hasTexts(e,r){return r.children.every(t=>B.isText(t))},insertBreak(e){e.insertBreak()},insertFragment(e,r){e.insertFragment(r)},insertNode(e,r){e.insertNode(r)},insertText(e,r){e.insertText(r)},isBlock(e,r){return V.isElement(r)&&!e.isInline(r)},isEditor(e){if(!oe(e))return!1;var r=gt.get(e);if(r!==void 0)return r;var t=typeof e.addMark=="function"&&typeof e.apply=="function"&&typeof e.deleteBackward=="function"&&typeof e.deleteForward=="function"&&typeof e.deleteFragment=="function"&&typeof e.insertBreak=="function"&&typeof e.insertFragment=="function"&&typeof e.insertNode=="function"&&typeof e.insertText=="function"&&typeof e.isInline=="function"&&typeof e.isVoid=="function"&&typeof e.normalizeNode=="function"&&typeof e.onChange=="function"&&typeof e.removeMark=="function"&&(e.marks===null||oe(e.marks))&&(e.selection===null||S.isRange(e.selection))&&N.isNodeList(e.children)&&Ee.isOperationList(e.operations);return gt.set(e,t),t},isEnd(e,r,t){var n=l.end(e,t);return Z.equals(r,n)},isEdge(e,r,t){return l.isStart(e,r,t)||l.isEnd(e,r,t)},isEmpty(e,r){var{children:t}=r,[n]=t;return t.length===0||t.length===1&&B.isText(n)&&n.text===""&&!e.isVoid(r)},isInline(e,r){return V.isElement(r)&&e.isInline(r)},isNormalizing(e){var r=nt.get(e);return r===void 0?!0:r},isStart(e,r,t){if(r.offset!==0)return!1;var n=l.start(e,t);return Z.equals(r,n)},isVoid(e,r){return V.isElement(r)&&e.isVoid(r)},last(e,r){var t=l.path(e,r,{edge:"end"});return l.node(e,t)},leaf(e,r){var t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},n=l.path(e,r,t),a=N.leaf(e,n);return[a,n]},*levels(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},{at:t=e.selection,reverse:n=!1,voids:a=!1}=r,{match:s}=r;if(s==null&&(s=()=>!0),!!t){var i=[],o=l.path(e,t);for(var[c,v]of N.levels(e,o))if(s(c,v)&&(i.push([c,v]),!a&&l.isVoid(e,c)))break;n&&i.reverse(),yield*i}},marks(e){var{marks:r,selection:t}=e;if(!t)return null;if(r)return r;if(S.isExpanded(t)){var[n]=l.nodes(e,{match:B.isText});if(n){var[a]=n,s=ye(a,Ka);return s}else return{}}var{anchor:i}=t,{path:o}=i,[c]=l.leaf(e,o);if(i.offset===0){var v=l.previous(e,{at:o,match:B.isText}),w=l.above(e,{match:E=>l.isBlock(e,E)});if(v&&w){var[g,f]=v,[,u]=w;p.isAncestor(u,f)&&(c=g)}}var x=ye(c,Va);return x},next(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},{mode:t="lowest",voids:n=!1}=r,{match:a,at:s=e.selection}=r;if(s){var i=l.after(e,s,{voids:n});if(i){var[,o]=l.last(e,[]),c=[i.path,o];if(p.isPath(s)&&s.length===0)throw new Error("Cannot get the next node from the root node!");if(a==null)if(p.isPath(s)){var[v]=l.parent(e,s);a=g=>v.children.includes(g)}else a=()=>!0;var[w]=l.nodes(e,{at:c,match:a,mode:t,voids:n});return w}}},node(e,r){var t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},n=l.path(e,r,t),a=N.get(e,n);return[a,n]},*nodes(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},{at:t=e.selection,mode:n="all",universal:a=!1,reverse:s=!1,voids:i=!1}=r,{match:o}=r;if(o||(o=()=>!0),!!t){var c,v;if(Ua.isSpan(t))c=t[0],v=t[1];else{var w=l.path(e,t,{edge:"start"}),g=l.path(e,t,{edge:"end"});c=s?g:w,v=s?w:g}var f=N.nodes(e,{reverse:s,from:c,to:v,pass:b=>{var[k]=b;return i?!1:l.isVoid(e,k)}}),u=[],x;for(var[E,C]of f){var A=x&&p.compare(C,x[1])===0;if(!(n==="highest"&&A)){if(!o(E,C)){if(a&&!A&&B.isText(E))return;continue}if(n==="lowest"&&A){x=[E,C];continue}var h=n==="lowest"?x:[E,C];h&&(a?u.push(h):yield h),x=[E,C]}}n==="lowest"&&x&&(a?u.push(x):yield x),a&&(yield*u)}},normalize(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},{force:t=!1}=r,n=s=>tr.get(s)||[];if(l.isNormalizing(e)){if(t){var a=Array.from(N.nodes(e),s=>{var[,i]=s;return i});tr.set(e,a)}n(e).length!==0&&l.withoutNormalizing(e,()=>{for(var s of n(e))if(N.has(e,s)){var i=l.node(e,s),[o,c]=i;V.isElement(o)&&o.children.length===0&&e.normalizeNode(i)}for(var v=n(e).length*42,w=0;n(e).length!==0;){if(w>v)throw new Error(`
            Could not completely normalize the editor after `.concat(v,` iterations! This is usually due to incorrect normalization logic that leaves a node in an invalid state.
          `));var g=n(e).pop();if(N.has(e,g)){var f=l.node(e,g);e.normalizeNode(f)}w++}})}},parent(e,r){var t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},n=l.path(e,r,t),a=p.parent(n),s=l.node(e,a);return s},path(e,r){var t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},{depth:n,edge:a}=t;if(p.isPath(r)){if(a==="start"){var[,s]=N.first(e,r);r=s}else if(a==="end"){var[,i]=N.last(e,r);r=i}}return S.isRange(r)&&(a==="start"?r=S.start(r):a==="end"?r=S.end(r):r=p.common(r.anchor.path,r.focus.path)),Z.isPoint(r)&&(r=r.path),n!=null&&(r=r.slice(0,n)),r},hasPath(e,r){return N.has(e,r)},pathRef(e,r){var t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},{affinity:n="forward"}=t,a={current:r,affinity:n,unref(){var{current:i}=a,o=l.pathRefs(e);return o.delete(a),a.current=null,i}},s=l.pathRefs(e);return s.add(a),a},pathRefs(e){var r=at.get(e);return r||(r=new Set,at.set(e,r)),r},point(e,r){var t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},{edge:n="start"}=t;if(p.isPath(r)){var a;if(n==="end"){var[,s]=N.last(e,r);a=s}else{var[,i]=N.first(e,r);a=i}var o=N.get(e,a);if(!B.isText(o))throw new Error("Cannot get the ".concat(n," point in the node at path [").concat(r,"] because it has no ").concat(n," text node."));return{path:a,offset:n==="end"?o.text.length:0}}if(S.isRange(r)){var[c,v]=S.edges(r);return n==="start"?c:v}return r},pointRef(e,r){var t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},{affinity:n="forward"}=t,a={current:r,affinity:n,unref(){var{current:i}=a,o=l.pointRefs(e);return o.delete(a),a.current=null,i}},s=l.pointRefs(e);return s.add(a),a},pointRefs(e){var r=st.get(e);return r||(r=new Set,st.set(e,r)),r},*positions(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},{at:t=e.selection,unit:n="offset",reverse:a=!1,voids:s=!1}=r;if(!t)return;var i=l.range(e,t),[o,c]=S.edges(i),v=a?c:o,w=!1,g="",f=0,u=0,x=0;for(var[E,C]of l.nodes(e,{at:t,reverse:a,voids:s})){if(V.isElement(E)){if(!s&&e.isVoid(E)){yield l.start(e,C);continue}if(e.isInline(E))continue;if(l.hasInlines(e,E)){var A=p.isAncestor(C,c.path)?c:l.end(e,C),h=p.isAncestor(C,o.path)?o:l.start(e,C);g=l.string(e,{anchor:h,focus:A},{voids:s}),w=!0}}if(B.isText(E)){var b=p.equals(C,v.path);for(b?(u=a?v.offset:E.text.length-v.offset,x=v.offset):(u=E.text.length,x=a?u:0),(b||w||n==="offset")&&(yield{path:C,offset:x},w=!1);;){if(f===0){if(g==="")break;f=k(g,n,a),g=Br(g,f,a)[1]}if(x=a?x-f:x+f,u=u-f,u<0){f=-u;break}f=0,yield{path:C,offset:x}}}}function k(F,O,d){return O==="character"?Nr(F,d):O==="word"?Ra(F,d):O==="line"||O==="block"?F.length:1}},previous(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},{mode:t="lowest",voids:n=!1}=r,{match:a,at:s=e.selection}=r;if(s){var i=l.before(e,s,{voids:n});if(i){var[,o]=l.first(e,[]),c=[i.path,o];if(p.isPath(s)&&s.length===0)throw new Error("Cannot get the previous node from the root node!");if(a==null)if(p.isPath(s)){var[v]=l.parent(e,s);a=g=>v.children.includes(g)}else a=()=>!0;var[w]=l.nodes(e,{reverse:!0,at:c,match:a,mode:t,voids:n});return w}}},range(e,r,t){if(S.isRange(r)&&!t)return r;var n=l.start(e,r),a=l.end(e,t||r);return{anchor:n,focus:a}},rangeRef(e,r){var t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},{affinity:n="forward"}=t,a={current:r,affinity:n,unref(){var{current:i}=a,o=l.rangeRefs(e);return o.delete(a),a.current=null,i}},s=l.rangeRefs(e);return s.add(a),a},rangeRefs(e){var r=it.get(e);return r||(r=new Set,it.set(e,r)),r},removeMark(e,r){e.removeMark(r)},setNormalizing(e,r){nt.set(e,r)},start(e,r){return l.point(e,r,{edge:"start"})},string(e,r){var t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},{voids:n=!1}=t,a=l.range(e,r),[s,i]=S.edges(a),o="";for(var[c,v]of l.nodes(e,{at:a,match:B.isText,voids:n})){var w=c.text;p.equals(v,i.path)&&(w=w.slice(0,i.offset)),p.equals(v,s.path)&&(w=w.slice(s.offset)),o+=w}return o},unhangRange(e,r){var t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},{voids:n=!1}=t,[a,s]=S.edges(r);if(a.offset!==0||s.offset!==0||S.isCollapsed(r))return r;var i=l.above(e,{at:s,match:u=>l.isBlock(e,u)}),o=i?i[1]:[],c=l.start(e,[]),v={anchor:c,focus:s},w=!0;for(var[g,f]of l.nodes(e,{at:v,match:B.isText,reverse:!0,voids:n})){if(w){w=!1;continue}if(g.text!==""||p.isBefore(f,o)){s={path:f,offset:g.text.length};break}}return{anchor:a,focus:s}},void(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return l.above(e,Me(Me({},r),{},{match:t=>l.isVoid(e,t)}))},withoutNormalizing(e,r){var t=l.isNormalizing(e);l.setNormalizing(e,!1);try{r()}finally{l.setNormalizing(e,t)}l.normalize(e)}},Ua={isSpan(e){return Array.isArray(e)&&e.length===2&&e.every(p.isPath)}},Ga=["children"],Za=["text"],ht=new WeakMap,N={ancestor(e,r){var t=N.get(e,r);if(B.isText(t))throw new Error("Cannot get the ancestor node at path [".concat(r,"] because it refers to a text node instead: ").concat(t));return t},*ancestors(e,r){var t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};for(var n of p.ancestors(r,t)){var a=N.ancestor(e,n),s=[a,n];yield s}},child(e,r){if(B.isText(e))throw new Error("Cannot get the child of a text node: ".concat(JSON.stringify(e)));var t=e.children[r];if(t==null)throw new Error("Cannot get child at index `".concat(r,"` in node: ").concat(JSON.stringify(e)));return t},*children(e,r){for(var t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},{reverse:n=!1}=t,a=N.ancestor(e,r),{children:s}=a,i=n?s.length-1:0;n?i>=0:i<s.length;){var o=N.child(a,i),c=r.concat(i);yield[o,c],i=n?i-1:i+1}},common(e,r,t){var n=p.common(r,t),a=N.get(e,n);return[a,n]},descendant(e,r){var t=N.get(e,r);if(l.isEditor(t))throw new Error("Cannot get the descendant node at path [".concat(r,"] because it refers to the root editor node instead: ").concat(t));return t},*descendants(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};for(var[t,n]of N.nodes(e,r))n.length!==0&&(yield[t,n])},*elements(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};for(var[t,n]of N.nodes(e,r))V.isElement(t)&&(yield[t,n])},extractProps(e){if(V.isAncestor(e)){var r=ye(e,Ga);return r}else{var r=ye(e,Za);return r}},first(e,r){for(var t=r.slice(),n=N.get(e,t);n&&!(B.isText(n)||n.children.length===0);)n=n.children[0],t.push(0);return[n,t]},fragment(e,r){if(B.isText(e))throw new Error("Cannot get a fragment starting from a root text node: ".concat(JSON.stringify(e)));var t=ir({children:e.children},n=>{var[a,s]=S.edges(r),i=N.nodes(n,{reverse:!0,pass:f=>{var[,u]=f;return!S.includes(r,u)}});for(var[,o]of i){if(!S.includes(r,o)){var c=N.parent(n,o),v=o[o.length-1];c.children.splice(v,1)}if(p.equals(o,s.path)){var w=N.leaf(n,o);w.text=w.text.slice(0,s.offset)}if(p.equals(o,a.path)){var g=N.leaf(n,o);g.text=g.text.slice(a.offset)}}l.isEditor(n)&&(n.selection=null)});return t.children},get(e,r){for(var t=e,n=0;n<r.length;n++){var a=r[n];if(B.isText(t)||!t.children[a])throw new Error("Cannot find a descendant at path [".concat(r,"] in node: ").concat(JSON.stringify(e)));t=t.children[a]}return t},has(e,r){for(var t=e,n=0;n<r.length;n++){var a=r[n];if(B.isText(t)||!t.children[a])return!1;t=t.children[a]}return!0},isNode(e){return B.isText(e)||V.isElement(e)||l.isEditor(e)},isNodeList(e){if(!Array.isArray(e))return!1;var r=ht.get(e);if(r!==void 0)return r;var t=e.every(n=>N.isNode(n));return ht.set(e,t),t},last(e,r){for(var t=r.slice(),n=N.get(e,t);n&&!(B.isText(n)||n.children.length===0);){var a=n.children.length-1;n=n.children[a],t.push(a)}return[n,t]},leaf(e,r){var t=N.get(e,r);if(!B.isText(t))throw new Error("Cannot get the leaf node at path [".concat(r,"] because it refers to a non-leaf node: ").concat(t));return t},*levels(e,r){var t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};for(var n of p.levels(r,t)){var a=N.get(e,n);yield[a,n]}},matches(e,r){return V.isElement(e)&&V.isElementProps(r)&&V.matches(e,r)||B.isText(e)&&B.isTextProps(r)&&B.matches(e,r)},*nodes(e){for(var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},{pass:t,reverse:n=!1}=r,{from:a=[],to:s}=r,i=new Set,o=[],c=e;!(s&&(n?p.isBefore(o,s):p.isAfter(o,s)));){if(i.has(c)||(yield[c,o]),!i.has(c)&&!B.isText(c)&&c.children.length!==0&&(t==null||t([c,o])===!1)){i.add(c);var v=n?c.children.length-1:0;p.isAncestor(o,a)&&(v=a[o.length]),o=o.concat(v),c=N.get(e,o);continue}if(o.length===0)break;if(!n){var w=p.next(o);if(N.has(e,w)){o=w,c=N.get(e,o);continue}}if(n&&o[o.length-1]!==0){var g=p.previous(o);o=g,c=N.get(e,o);continue}o=p.parent(o),c=N.get(e,o),i.add(c)}},parent(e,r){var t=p.parent(r),n=N.get(e,t);if(B.isText(n))throw new Error("Cannot get the parent of path [".concat(r,"] because it does not exist in the root."));return n},string(e){return B.isText(e)?e.text:e.children.map(N.string).join("")},*texts(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};for(var[t,n]of N.nodes(e,r))B.isText(t)&&(yield[t,n])}};function pt(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),t.push.apply(t,n)}return t}function ee(e){for(var r=1;r<arguments.length;r++){var t=arguments[r]!=null?arguments[r]:{};r%2?pt(Object(t),!0).forEach(function(n){pe(e,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):pt(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})}return e}var Ee={isNodeOperation(e){return Ee.isOperation(e)&&e.type.endsWith("_node")},isOperation(e){if(!oe(e))return!1;switch(e.type){case"insert_node":return p.isPath(e.path)&&N.isNode(e.node);case"insert_text":return typeof e.offset=="number"&&typeof e.text=="string"&&p.isPath(e.path);case"merge_node":return typeof e.position=="number"&&p.isPath(e.path)&&oe(e.properties);case"move_node":return p.isPath(e.path)&&p.isPath(e.newPath);case"remove_node":return p.isPath(e.path)&&N.isNode(e.node);case"remove_text":return typeof e.offset=="number"&&typeof e.text=="string"&&p.isPath(e.path);case"set_node":return p.isPath(e.path)&&oe(e.properties)&&oe(e.newProperties);case"set_selection":return e.properties===null&&S.isRange(e.newProperties)||e.newProperties===null&&S.isRange(e.properties)||oe(e.properties)&&oe(e.newProperties);case"split_node":return p.isPath(e.path)&&typeof e.position=="number"&&oe(e.properties);default:return!1}},isOperationList(e){return Array.isArray(e)&&e.every(r=>Ee.isOperation(r))},isSelectionOperation(e){return Ee.isOperation(e)&&e.type.endsWith("_selection")},isTextOperation(e){return Ee.isOperation(e)&&e.type.endsWith("_text")},inverse(e){switch(e.type){case"insert_node":return ee(ee({},e),{},{type:"remove_node"});case"insert_text":return ee(ee({},e),{},{type:"remove_text"});case"merge_node":return ee(ee({},e),{},{type:"split_node",path:p.previous(e.path)});case"move_node":{var{newPath:r,path:t}=e;if(p.equals(r,t))return e;if(p.isSibling(t,r))return ee(ee({},e),{},{path:r,newPath:t});var n=p.transform(t,e),a=p.transform(p.next(t),e);return ee(ee({},e),{},{path:n,newPath:a})}case"remove_node":return ee(ee({},e),{},{type:"insert_node"});case"remove_text":return ee(ee({},e),{},{type:"insert_text"});case"set_node":{var{properties:s,newProperties:i}=e;return ee(ee({},e),{},{properties:i,newProperties:s})}case"set_selection":{var{properties:o,newProperties:c}=e;return o==null?ee(ee({},e),{},{properties:c,newProperties:null}):c==null?ee(ee({},e),{},{properties:null,newProperties:o}):ee(ee({},e),{},{properties:c,newProperties:o})}case"split_node":return ee(ee({},e),{},{type:"merge_node",path:p.next(e.path)})}}},p={ancestors(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},{reverse:t=!1}=r,n=p.levels(e,r);return t?n=n.slice(1):n=n.slice(0,-1),n},common(e,r){for(var t=[],n=0;n<e.length&&n<r.length;n++){var a=e[n],s=r[n];if(a!==s)break;t.push(a)}return t},compare(e,r){for(var t=Math.min(e.length,r.length),n=0;n<t;n++){if(e[n]<r[n])return-1;if(e[n]>r[n])return 1}return 0},endsAfter(e,r){var t=e.length-1,n=e.slice(0,t),a=r.slice(0,t),s=e[t],i=r[t];return p.equals(n,a)&&s>i},endsAt(e,r){var t=e.length,n=e.slice(0,t),a=r.slice(0,t);return p.equals(n,a)},endsBefore(e,r){var t=e.length-1,n=e.slice(0,t),a=r.slice(0,t),s=e[t],i=r[t];return p.equals(n,a)&&s<i},equals(e,r){return e.length===r.length&&e.every((t,n)=>t===r[n])},hasPrevious(e){return e[e.length-1]>0},isAfter(e,r){return p.compare(e,r)===1},isAncestor(e,r){return e.length<r.length&&p.compare(e,r)===0},isBefore(e,r){return p.compare(e,r)===-1},isChild(e,r){return e.length===r.length+1&&p.compare(e,r)===0},isCommon(e,r){return e.length<=r.length&&p.compare(e,r)===0},isDescendant(e,r){return e.length>r.length&&p.compare(e,r)===0},isParent(e,r){return e.length+1===r.length&&p.compare(e,r)===0},isPath(e){return Array.isArray(e)&&(e.length===0||typeof e[0]=="number")},isSibling(e,r){if(e.length!==r.length)return!1;var t=e.slice(0,-1),n=r.slice(0,-1),a=e[e.length-1],s=r[r.length-1];return a!==s&&p.equals(t,n)},levels(e){for(var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},{reverse:t=!1}=r,n=[],a=0;a<=e.length;a++)n.push(e.slice(0,a));return t&&n.reverse(),n},next(e){if(e.length===0)throw new Error("Cannot get the next path of a root path [".concat(e,"], because it has no next index."));var r=e[e.length-1];return e.slice(0,-1).concat(r+1)},parent(e){if(e.length===0)throw new Error("Cannot get the parent path of the root path [".concat(e,"]."));return e.slice(0,-1)},previous(e){if(e.length===0)throw new Error("Cannot get the previous path of a root path [".concat(e,"], because it has no previous index."));var r=e[e.length-1];if(r<=0)throw new Error("Cannot get the previous path of a first child path [".concat(e,"] because it would result in a negative index."));return e.slice(0,-1).concat(r-1)},relative(e,r){if(!p.isAncestor(r,e)&&!p.equals(e,r))throw new Error("Cannot get the relative path of [".concat(e,"] inside ancestor [").concat(r,"], because it is not above or equal to the path."));return e.slice(r.length)},transform(e,r){var t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return ir(e,n=>{var{affinity:a="forward"}=t;if(!(!e||(e==null?void 0:e.length)===0)){if(n===null)return null;switch(r.type){case"insert_node":{var{path:s}=r;(p.equals(s,n)||p.endsBefore(s,n)||p.isAncestor(s,n))&&(n[s.length-1]+=1);break}case"remove_node":{var{path:i}=r;if(p.equals(i,n)||p.isAncestor(i,n))return null;p.endsBefore(i,n)&&(n[i.length-1]-=1);break}case"merge_node":{var{path:o,position:c}=r;p.equals(o,n)||p.endsBefore(o,n)?n[o.length-1]-=1:p.isAncestor(o,n)&&(n[o.length-1]-=1,n[o.length]+=c);break}case"split_node":{var{path:v,position:w}=r;if(p.equals(v,n)){if(a==="forward")n[n.length-1]+=1;else if(a!=="backward")return null}else p.endsBefore(v,n)?n[v.length-1]+=1:p.isAncestor(v,n)&&e[v.length]>=w&&(n[v.length-1]+=1,n[v.length]-=w);break}case"move_node":{var{path:g,newPath:f}=r;if(p.equals(g,f))return;if(p.isAncestor(g,n)||p.equals(g,n)){var u=f.slice();return p.endsBefore(g,f)&&g.length<f.length&&(u[g.length-1]-=1),u.concat(n.slice(g.length))}else p.isSibling(g,f)&&(p.isAncestor(f,n)||p.equals(f,n))?p.endsBefore(g,n)?n[g.length-1]-=1:n[g.length-1]+=1:p.endsBefore(f,n)||p.equals(f,n)||p.isAncestor(f,n)?(p.endsBefore(g,n)&&(n[g.length-1]-=1),n[f.length-1]+=1):p.endsBefore(g,n)&&(p.equals(f,n)&&(n[f.length-1]+=1),n[g.length-1]-=1);break}}}})}},Ya={transform(e,r){var{current:t,affinity:n}=e;if(t!=null){var a=p.transform(t,r,{affinity:n});e.current=a,a==null&&e.unref()}}};function mt(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),t.push.apply(t,n)}return t}function wt(e){for(var r=1;r<arguments.length;r++){var t=arguments[r]!=null?arguments[r]:{};r%2?mt(Object(t),!0).forEach(function(n){pe(e,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):mt(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})}return e}var Z={compare(e,r){var t=p.compare(e.path,r.path);return t===0?e.offset<r.offset?-1:e.offset>r.offset?1:0:t},isAfter(e,r){return Z.compare(e,r)===1},isBefore(e,r){return Z.compare(e,r)===-1},equals(e,r){return e.offset===r.offset&&p.equals(e.path,r.path)},isPoint(e){return oe(e)&&typeof e.offset=="number"&&p.isPath(e.path)},transform(e,r){var t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return ir(e,n=>{if(n===null)return null;var{affinity:a="forward"}=t,{path:s,offset:i}=n;switch(r.type){case"insert_node":case"move_node":{n.path=p.transform(s,r,t);break}case"insert_text":{p.equals(r.path,s)&&r.offset<=i&&(n.offset+=r.text.length);break}case"merge_node":{p.equals(r.path,s)&&(n.offset+=r.position),n.path=p.transform(s,r,t);break}case"remove_text":{p.equals(r.path,s)&&r.offset<=i&&(n.offset-=Math.min(i-r.offset,r.text.length));break}case"remove_node":{if(p.equals(r.path,s)||p.isAncestor(r.path,s))return null;n.path=p.transform(s,r,t);break}case"split_node":{if(p.equals(r.path,s)){if(r.position===i&&a==null)return null;(r.position<i||r.position===i&&a==="forward")&&(n.offset-=r.position,n.path=p.transform(s,r,wt(wt({},t),{},{affinity:"forward"})))}else n.path=p.transform(s,r,t);break}}})}},Ja={transform(e,r){var{current:t,affinity:n}=e;if(t!=null){var a=Z.transform(t,r,{affinity:n});e.current=a,a==null&&e.unref()}}},Xa=["anchor","focus"];function yt(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),t.push.apply(t,n)}return t}function Qa(e){for(var r=1;r<arguments.length;r++){var t=arguments[r]!=null?arguments[r]:{};r%2?yt(Object(t),!0).forEach(function(n){pe(e,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):yt(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})}return e}var S={edges(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},{reverse:t=!1}=r,{anchor:n,focus:a}=e;return S.isBackward(e)===t?[n,a]:[a,n]},end(e){var[,r]=S.edges(e);return r},equals(e,r){return Z.equals(e.anchor,r.anchor)&&Z.equals(e.focus,r.focus)},includes(e,r){if(S.isRange(r)){if(S.includes(e,r.anchor)||S.includes(e,r.focus))return!0;var[t,n]=S.edges(e),[a,s]=S.edges(r);return Z.isBefore(t,a)&&Z.isAfter(n,s)}var[i,o]=S.edges(e),c=!1,v=!1;return Z.isPoint(r)?(c=Z.compare(r,i)>=0,v=Z.compare(r,o)<=0):(c=p.compare(r,i.path)>=0,v=p.compare(r,o.path)<=0),c&&v},intersection(e,r){var t=ye(e,Xa),[n,a]=S.edges(e),[s,i]=S.edges(r),o=Z.isBefore(n,s)?s:n,c=Z.isBefore(a,i)?a:i;return Z.isBefore(c,o)?null:Qa({anchor:o,focus:c},t)},isBackward(e){var{anchor:r,focus:t}=e;return Z.isAfter(r,t)},isCollapsed(e){var{anchor:r,focus:t}=e;return Z.equals(r,t)},isExpanded(e){return!S.isCollapsed(e)},isForward(e){return!S.isBackward(e)},isRange(e){return oe(e)&&Z.isPoint(e.anchor)&&Z.isPoint(e.focus)},*points(e){yield[e.anchor,"anchor"],yield[e.focus,"focus"]},start(e){var[r]=S.edges(e);return r},transform(e,r){var t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return ir(e,n=>{if(n===null)return null;var{affinity:a="inward"}=t,s,i;a==="inward"?S.isForward(n)?(s="forward",i="backward"):(s="backward",i="forward"):a==="outward"?S.isForward(n)?(s="backward",i="forward"):(s="forward",i="backward"):(s=a,i=a);var o=Z.transform(n.anchor,r,{affinity:s}),c=Z.transform(n.focus,r,{affinity:i});if(!o||!c)return null;n.anchor=o,n.focus=c})}},es={transform(e,r){var{current:t,affinity:n}=e;if(t!=null){var a=S.transform(t,r,{affinity:n});e.current=a,a==null&&e.unref()}}},rn=(e,r)=>{for(var t in e){var n=e[t],a=r[t];if(oe(n)&&oe(a)){if(!rn(n,a))return!1}else if(Array.isArray(n)&&Array.isArray(a)){if(n.length!==a.length)return!1;for(var s=0;s<n.length;s++)if(n[s]!==a[s])return!1;return!0}else if(n!==a)return!1}for(var i in r)if(e[i]===void 0&&r[i]!==void 0)return!1;return!0},rs=["text"],ts=["anchor","focus"];function bt(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),t.push.apply(t,n)}return t}function we(e){for(var r=1;r<arguments.length;r++){var t=arguments[r]!=null?arguments[r]:{};r%2?bt(Object(t),!0).forEach(function(n){pe(e,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):bt(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})}return e}var B={equals(e,r){var t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},{loose:n=!1}=t;function a(s){var i=ye(s,rs);return i}return rn(n?a(e):e,n?a(r):r)},isText(e){return oe(e)&&typeof e.text=="string"},isTextList(e){return Array.isArray(e)&&e.every(r=>B.isText(r))},isTextProps(e){return e.text!==void 0},matches(e,r){for(var t in r)if(t!=="text"&&(!e.hasOwnProperty(t)||e[t]!==r[t]))return!1;return!0},decorations(e,r){var t=[we({},e)];for(var n of r){var a=ye(n,ts),[s,i]=S.edges(n),o=[],c=0;for(var v of t){var{length:w}=v.text,g=c;if(c+=w,s.offset<=g&&i.offset>=c){Object.assign(v,a),o.push(v);continue}if(s.offset!==i.offset&&(s.offset===c||i.offset===g)||s.offset>c||i.offset<g||i.offset===g&&g!==0){o.push(v);continue}var f=v,u=void 0,x=void 0;if(i.offset<c){var E=i.offset-g;x=we(we({},f),{},{text:f.text.slice(E)}),f=we(we({},f),{},{text:f.text.slice(0,E)})}if(s.offset>g){var C=s.offset-g;u=we(we({},f),{},{text:f.text.slice(0,C)}),f=we(we({},f),{},{text:f.text.slice(C)})}Object.assign(f,a),u&&o.push(u),o.push(f),x&&o.push(x)}t=o}return t}};function xt(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),t.push.apply(t,n)}return t}function _e(e){for(var r=1;r<arguments.length;r++){var t=arguments[r]!=null?arguments[r]:{};r%2?xt(Object(t),!0).forEach(function(n){pe(e,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):xt(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})}return e}var ns=(e,r,t)=>{switch(t.type){case"insert_node":{var{path:n,node:a}=t,s=N.parent(e,n),i=n[n.length-1];if(i>s.children.length)throw new Error('Cannot apply an "insert_node" operation at path ['.concat(n,"] because the destination is past the end of the node."));if(s.children.splice(i,0,a),r)for(var[o,c]of S.points(r))r[c]=Z.transform(o,t);break}case"insert_text":{var{path:v,offset:w,text:g}=t;if(g.length===0)break;var f=N.leaf(e,v),u=f.text.slice(0,w),x=f.text.slice(w);if(f.text=u+g+x,r)for(var[E,C]of S.points(r))r[C]=Z.transform(E,t);break}case"merge_node":{var{path:A}=t,h=N.get(e,A),b=p.previous(A),k=N.get(e,b),F=N.parent(e,A),O=A[A.length-1];if(B.isText(h)&&B.isText(k))k.text+=h.text;else if(!B.isText(h)&&!B.isText(k))k.children.push(...h.children);else throw new Error('Cannot apply a "merge_node" operation at path ['.concat(A,"] to nodes of different interfaces: ").concat(h," ").concat(k));if(F.children.splice(O,1),r)for(var[d,y]of S.points(r))r[y]=Z.transform(d,t);break}case"move_node":{var{path:m,newPath:T}=t;if(p.isAncestor(m,T))throw new Error("Cannot move a path [".concat(m,"] to new path [").concat(T,"] because the destination is inside itself."));var R=N.get(e,m),M=N.parent(e,m),_=m[m.length-1];M.children.splice(_,1);var q=p.transform(m,t),$=N.get(e,p.parent(q)),K=q[q.length-1];if($.children.splice(K,0,R),r)for(var[Q,U]of S.points(r))r[U]=Z.transform(Q,t);break}case"remove_node":{var{path:G}=t,I=G[G.length-1],J=N.parent(e,G);if(J.children.splice(I,1),r)for(var[z,le]of S.points(r)){var W=Z.transform(z,t);if(r!=null&&W!=null)r[le]=W;else{var Y=void 0,X=void 0;for(var[ae,ue]of N.texts(e))if(p.compare(ue,G)===-1)Y=[ae,ue];else{X=[ae,ue];break}var ie=!1;Y&&X&&(p.equals(X[1],G)?ie=!p.hasPrevious(X[1]):ie=p.common(Y[1],G).length<p.common(X[1],G).length),Y&&!ie?(z.path=Y[1],z.offset=Y[0].text.length):X?(z.path=X[1],z.offset=0):r=null}}break}case"remove_text":{var{path:fe,offset:me,text:Ue}=t;if(Ue.length===0)break;var Fe=N.leaf(e,fe),Kn=Fe.text.slice(0,me),Vn=Fe.text.slice(me+Ue.length);if(Fe.text=Kn+Vn,r)for(var[Un,Gn]of S.points(r))r[Gn]=Z.transform(Un,t);break}case"set_node":{var{path:Vr,properties:Zn,newProperties:vr}=t;if(Vr.length===0)throw new Error("Cannot set properties on the root node!");var gr=N.get(e,Vr);for(var Re in vr){if(Re==="children"||Re==="text")throw new Error('Cannot set the "'.concat(Re,'" property of nodes!'));var Ur=vr[Re];Ur==null?delete gr[Re]:gr[Re]=Ur}for(var Gr in Zn)vr.hasOwnProperty(Gr)||delete gr[Gr];break}case"set_selection":{var{newProperties:Se}=t;if(Se==null)r=Se;else{if(r==null){if(!S.isRange(Se))throw new Error('Cannot apply an incomplete "set_selection" operation properties '.concat(JSON.stringify(Se)," when there is no current selection."));r=_e({},Se)}for(var Ne in Se){var Zr=Se[Ne];if(Zr==null){if(Ne==="anchor"||Ne==="focus")throw new Error('Cannot remove the "'.concat(Ne,'" selection property'));delete r[Ne]}else r[Ne]=Zr}}break}case"split_node":{var{path:Be,position:Ge,properties:Yr}=t;if(Be.length===0)throw new Error('Cannot apply a "split_node" operation at path ['.concat(Be,"] because the root node cannot be split."));var Ae=N.get(e,Be),Yn=N.parent(e,Be),Jn=Be[Be.length-1],hr;if(B.isText(Ae)){var Xn=Ae.text.slice(0,Ge),Qn=Ae.text.slice(Ge);Ae.text=Xn,hr=_e(_e({},Yr),{},{text:Qn})}else{var ea=Ae.children.slice(0,Ge),ra=Ae.children.slice(Ge);Ae.children=ea,hr=_e(_e({},Yr),{},{children:ra})}if(Yn.children.splice(Jn+1,0,hr),r)for(var[ta,na]of S.points(r))r[na]=Z.transform(ta,t);break}}return r},as={transform(e,r){e.children=Jr(e.children);var t=e.selection&&Jr(e.selection);try{t=ns(e,t,r)}finally{e.children=Xr(e.children),t?e.selection=sa(t)?Xr(t):t:e.selection=null}}},ss=["text"],is=["children"];function Et(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),t.push.apply(t,n)}return t}function Ot(e){for(var r=1;r<arguments.length;r++){var t=arguments[r]!=null?arguments[r]:{};r%2?Et(Object(t),!0).forEach(function(n){pe(e,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):Et(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})}return e}var os={insertNodes(e,r){var t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};l.withoutNormalizing(e,()=>{var{hanging:n=!1,voids:a=!1,mode:s="lowest"}=t,{at:i,match:o,select:c}=t;if(N.isNode(r)&&(r=[r]),r.length!==0){var[v]=r;if(i||(e.selection?i=e.selection:e.children.length>0?i=l.end(e,[]):i=[0],c=!0),c==null&&(c=!1),S.isRange(i))if(n||(i=l.unhangRange(e,i)),S.isCollapsed(i))i=i.anchor;else{var[,w]=S.edges(i),g=l.pointRef(e,w);D.delete(e,{at:i}),i=g.unref()}if(Z.isPoint(i)){o==null&&(B.isText(v)?o=O=>B.isText(O):e.isInline(v)?o=O=>B.isText(O)||l.isInline(e,O):o=O=>l.isBlock(e,O));var[f]=l.nodes(e,{at:i.path,match:o,mode:s,voids:a});if(f){var[,u]=f,x=l.pathRef(e,u),E=l.isEnd(e,i,u);D.splitNodes(e,{at:i,match:o,mode:s,voids:a});var C=x.unref();i=E?p.next(C):C}else return}var A=p.parent(i),h=i[i.length-1];if(!(!a&&l.void(e,{at:A}))){for(var b of r){var k=A.concat(h);h++,e.apply({type:"insert_node",path:k,node:b}),i=p.next(i)}if(i=p.previous(i),c){var F=l.end(e,i);F&&D.select(e,F)}}}})},liftNodes(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};l.withoutNormalizing(e,()=>{var{at:t=e.selection,mode:n="lowest",voids:a=!1}=r,{match:s}=r;if(s==null&&(s=p.isPath(t)?Ie(e,t):b=>l.isBlock(e,b)),!!t){var i=l.nodes(e,{at:t,match:s,mode:n,voids:a}),o=Array.from(i,b=>{var[,k]=b;return l.pathRef(e,k)});for(var c of o){var v=c.unref();if(v.length<2)throw new Error("Cannot lift node at a path [".concat(v,"] because it has a depth of less than `2`."));var w=l.node(e,p.parent(v)),[g,f]=w,u=v[v.length-1],{length:x}=g.children;if(x===1){var E=p.next(f);D.moveNodes(e,{at:v,to:E,voids:a}),D.removeNodes(e,{at:f,voids:a})}else if(u===0)D.moveNodes(e,{at:v,to:f,voids:a});else if(u===x-1){var C=p.next(f);D.moveNodes(e,{at:v,to:C,voids:a})}else{var A=p.next(v),h=p.next(f);D.splitNodes(e,{at:A,voids:a}),D.moveNodes(e,{at:v,to:h,voids:a})}}}})},mergeNodes(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};l.withoutNormalizing(e,()=>{var{match:t,at:n=e.selection}=r,{hanging:a=!1,voids:s=!1,mode:i="lowest"}=r;if(n){if(t==null)if(p.isPath(n)){var[o]=l.parent(e,n);t=m=>o.children.includes(m)}else t=m=>l.isBlock(e,m);if(!a&&S.isRange(n)&&(n=l.unhangRange(e,n)),S.isRange(n))if(S.isCollapsed(n))n=n.anchor;else{var[,c]=S.edges(n),v=l.pointRef(e,c);D.delete(e,{at:n}),n=v.unref(),r.at==null&&D.select(e,n)}var[w]=l.nodes(e,{at:n,match:t,voids:s,mode:i}),g=l.previous(e,{at:n,match:t,voids:s,mode:i});if(!(!w||!g)){var[f,u]=w,[x,E]=g;if(!(u.length===0||E.length===0)){var C=p.next(E),A=p.common(u,E),h=p.isSibling(u,E),b=Array.from(l.levels(e,{at:u}),m=>{var[T]=m;return T}).slice(A.length).slice(0,-1),k=l.above(e,{at:u,mode:"highest",match:m=>b.includes(m)&&tn(e,m)}),F=k&&l.pathRef(e,k[1]),O,d;if(B.isText(f)&&B.isText(x)){var y=ye(f,ss);d=x.text.length,O=y}else if(V.isElement(f)&&V.isElement(x)){var y=ye(f,is);d=x.children.length,O=y}else throw new Error("Cannot merge the node at path [".concat(u,"] with the previous sibling because it is not the same kind: ").concat(JSON.stringify(f)," ").concat(JSON.stringify(x)));h||D.moveNodes(e,{at:u,to:C,voids:s}),F&&D.removeNodes(e,{at:F.current,voids:s}),V.isElement(x)&&l.isEmpty(e,x)||B.isText(x)&&x.text===""&&E[E.length-1]!==0?D.removeNodes(e,{at:E,voids:s}):e.apply({type:"merge_node",path:C,position:d,properties:O}),F&&F.unref()}}}})},moveNodes(e,r){l.withoutNormalizing(e,()=>{var{to:t,at:n=e.selection,mode:a="lowest",voids:s=!1}=r,{match:i}=r;if(n){i==null&&(i=p.isPath(n)?Ie(e,n):u=>l.isBlock(e,u));var o=l.pathRef(e,t),c=l.nodes(e,{at:n,match:i,mode:a,voids:s}),v=Array.from(c,u=>{var[,x]=u;return l.pathRef(e,x)});for(var w of v){var g=w.unref(),f=o.current;g.length!==0&&e.apply({type:"move_node",path:g,newPath:f}),o.current&&p.isSibling(f,g)&&p.isAfter(f,g)&&(o.current=p.next(o.current))}o.unref()}})},removeNodes(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};l.withoutNormalizing(e,()=>{var{hanging:t=!1,voids:n=!1,mode:a="lowest"}=r,{at:s=e.selection,match:i}=r;if(s){i==null&&(i=p.isPath(s)?Ie(e,s):f=>l.isBlock(e,f)),!t&&S.isRange(s)&&(s=l.unhangRange(e,s));var o=l.nodes(e,{at:s,match:i,mode:a,voids:n}),c=Array.from(o,f=>{var[,u]=f;return l.pathRef(e,u)});for(var v of c){var w=v.unref();if(w){var[g]=l.node(e,w);e.apply({type:"remove_node",path:w,node:g})}}}})},setNodes(e,r){var t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};l.withoutNormalizing(e,()=>{var{match:n,at:a=e.selection}=t,{hanging:s=!1,mode:i="lowest",split:o=!1,voids:c=!1}=t;if(a){if(n==null&&(n=p.isPath(a)?Ie(e,a):F=>l.isBlock(e,F)),!s&&S.isRange(a)&&(a=l.unhangRange(e,a)),o&&S.isRange(a)){var v=l.rangeRef(e,a,{affinity:"inward"}),[w,g]=S.edges(a),f=i==="lowest"?"lowest":"highest",u=l.isEnd(e,g,g.path);D.splitNodes(e,{at:g,match:n,mode:f,voids:c,always:!u});var x=l.isStart(e,w,w.path);D.splitNodes(e,{at:w,match:n,mode:f,voids:c,always:!x}),a=v.unref(),t.at==null&&D.select(e,a)}for(var[E,C]of l.nodes(e,{at:a,match:n,mode:i,voids:c})){var A={},h={};if(C.length!==0){var b=!1;for(var k in r)k==="children"||k==="text"||r[k]!==E[k]&&(b=!0,E.hasOwnProperty(k)&&(A[k]=E[k]),r[k]!=null&&(h[k]=r[k]));b&&e.apply({type:"set_node",path:C,properties:A,newProperties:h})}}}})},splitNodes(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};l.withoutNormalizing(e,()=>{var{mode:t="lowest",voids:n=!1}=r,{match:a,at:s=e.selection,height:i=0,always:o=!1}=r;if(a==null&&(a=Q=>l.isBlock(e,Q)),S.isRange(s)&&(s=ls(e,s)),p.isPath(s)){var c=s,v=l.point(e,c),[w]=l.parent(e,c);a=Q=>Q===w,i=v.path.length-c.length+1,s=v,o=!0}if(s){var g=l.pointRef(e,s,{affinity:"backward"}),[f]=l.nodes(e,{at:s,match:a,mode:t,voids:n});if(f){var u=l.void(e,{at:s,mode:"highest"}),x=0;if(!n&&u){var[E,C]=u;if(V.isElement(E)&&e.isInline(E)){var A=l.after(e,C);if(!A){var h={text:""},b=p.next(C);D.insertNodes(e,h,{at:b,voids:n}),A=l.point(e,b)}s=A,o=!0}var k=s.path.length-C.length;i=k+1,o=!0}var F=l.pointRef(e,s),O=s.path.length-i,[,d]=f,y=s.path.slice(0,O),m=i===0?s.offset:s.path[O]+x;for(var[T,R]of l.levels(e,{at:y,reverse:!0,voids:n})){var M=!1;if(R.length<d.length||R.length===0||!n&&l.isVoid(e,T))break;var _=g.current,q=l.isEnd(e,_,R);if(o||!g||!l.isEdge(e,_,R)){M=!0;var $=N.extractProps(T);e.apply({type:"split_node",path:R,position:m,properties:$})}m=R[R.length-1]+(M||q?1:0)}if(r.at==null){var K=F.current||l.end(e,[]);D.select(e,K)}g.unref(),F.unref()}}})},unsetNodes(e,r){var t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Array.isArray(r)||(r=[r]);var n={};for(var a of r)n[a]=null;D.setNodes(e,n,t)},unwrapNodes(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};l.withoutNormalizing(e,()=>{var{mode:t="lowest",split:n=!1,voids:a=!1}=r,{at:s=e.selection,match:i}=r;if(s){i==null&&(i=p.isPath(s)?Ie(e,s):f=>l.isBlock(e,f)),p.isPath(s)&&(s=l.range(e,s));var o=S.isRange(s)?l.rangeRef(e,s):null,c=l.nodes(e,{at:s,match:i,mode:t,voids:a}),v=Array.from(c,f=>{var[,u]=f;return l.pathRef(e,u)}).reverse(),w=function(u){var x=u.unref(),[E]=l.node(e,x),C=l.range(e,x);n&&o&&(C=S.intersection(o.current,C)),D.liftNodes(e,{at:C,match:A=>V.isAncestor(E)&&E.children.includes(A),voids:a})};for(var g of v)w(g);o&&o.unref()}})},wrapNodes(e,r){var t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};l.withoutNormalizing(e,()=>{var{mode:n="lowest",split:a=!1,voids:s=!1}=t,{match:i,at:o=e.selection}=t;if(o){if(i==null&&(p.isPath(o)?i=Ie(e,o):e.isInline(r)?i=C=>l.isInline(e,C)||B.isText(C):i=C=>l.isBlock(e,C)),a&&S.isRange(o)){var[c,v]=S.edges(o),w=l.rangeRef(e,o,{affinity:"inward"});D.splitNodes(e,{at:v,match:i,voids:s}),D.splitNodes(e,{at:c,match:i,voids:s}),o=w.unref(),t.at==null&&D.select(e,o)}var g=Array.from(l.nodes(e,{at:o,match:e.isInline(r)?C=>l.isBlock(e,C):C=>l.isEditor(C),mode:"lowest",voids:s}));for(var[,f]of g){var u=S.isRange(o)?S.intersection(o,l.range(e,f)):o;if(u){var x=Array.from(l.nodes(e,{at:u,match:i,mode:n,voids:s}));if(x.length>0){var E=function(){var[C]=x,A=x[x.length-1],[,h]=C,[,b]=A;if(h.length===0&&b.length===0)return"continue";var k=p.equals(h,b)?p.parent(h):p.common(h,b),F=l.range(e,h,b),O=l.node(e,k),[d]=O,y=k.length+1,m=p.next(b.slice(0,y)),T=Ot(Ot({},r),{},{children:[]});D.insertNodes(e,T,{at:m,voids:s}),D.moveNodes(e,{at:F,match:R=>V.isAncestor(d)&&d.children.includes(R),to:m.concat(0),voids:s})}();if(E==="continue")continue}}}}})}},tn=(e,r)=>{if(V.isElement(r)){var t=r;return l.isVoid(e,r)?!0:t.children.length===1?tn(e,t.children[0]):!1}else return!l.isEditor(r)},ls=(e,r)=>{if(S.isCollapsed(r))return r.anchor;var[,t]=S.edges(r),n=l.pointRef(e,t);return D.delete(e,{at:r}),n.unref()},Ie=(e,r)=>{var[t]=l.node(e,r);return n=>n===t};function kt(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),t.push.apply(t,n)}return t}function Ct(e){for(var r=1;r<arguments.length;r++){var t=arguments[r]!=null?arguments[r]:{};r%2?kt(Object(t),!0).forEach(function(n){pe(e,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):kt(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})}return e}var us={collapse(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},{edge:t="anchor"}=r,{selection:n}=e;if(n){if(t==="anchor")D.select(e,n.anchor);else if(t==="focus")D.select(e,n.focus);else if(t==="start"){var[a]=S.edges(n);D.select(e,a)}else if(t==="end"){var[,s]=S.edges(n);D.select(e,s)}}else return},deselect(e){var{selection:r}=e;r&&e.apply({type:"set_selection",properties:r,newProperties:null})},move(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},{selection:t}=e,{distance:n=1,unit:a="character",reverse:s=!1}=r,{edge:i=null}=r;if(t){i==="start"&&(i=S.isBackward(t)?"focus":"anchor"),i==="end"&&(i=S.isBackward(t)?"anchor":"focus");var{anchor:o,focus:c}=t,v={distance:n,unit:a},w={};if(i==null||i==="anchor"){var g=s?l.before(e,o,v):l.after(e,o,v);g&&(w.anchor=g)}if(i==null||i==="focus"){var f=s?l.before(e,c,v):l.after(e,c,v);f&&(w.focus=f)}D.setSelection(e,w)}},select(e,r){var{selection:t}=e;if(r=l.range(e,r),t){D.setSelection(e,r);return}if(!S.isRange(r))throw new Error("When setting the selection and the current selection is `null` you must provide at least an `anchor` and `focus`, but you passed: ".concat(JSON.stringify(r)));e.apply({type:"set_selection",properties:t,newProperties:r})},setPoint(e,r){var t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},{selection:n}=e,{edge:a="both"}=t;if(n){a==="start"&&(a=S.isBackward(n)?"focus":"anchor"),a==="end"&&(a=S.isBackward(n)?"anchor":"focus");var{anchor:s,focus:i}=n,o=a==="anchor"?s:i;D.setSelection(e,{[a==="anchor"?"anchor":"focus"]:Ct(Ct({},o),r)})}},setSelection(e,r){var{selection:t}=e,n={},a={};if(t){for(var s in r)(s==="anchor"&&r.anchor!=null&&!Z.equals(r.anchor,t.anchor)||s==="focus"&&r.focus!=null&&!Z.equals(r.focus,t.focus)||s!=="anchor"&&s!=="focus"&&r[s]!==t[s])&&(n[s]=t[s],a[s]=r[s]);Object.keys(n).length>0&&e.apply({type:"set_selection",properties:n,newProperties:a})}}},fs={delete(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};l.withoutNormalizing(e,()=>{var{reverse:t=!1,unit:n="character",distance:a=1,voids:s=!1}=r,{at:i=e.selection,hanging:o=!1}=r;if(i){if(S.isRange(i)&&S.isCollapsed(i)&&(i=i.anchor),Z.isPoint(i)){var c=l.void(e,{at:i,mode:"highest"});if(!s&&c){var[,v]=c;i=v}else{var w={unit:n,distance:a},g=t?l.before(e,i,w)||l.start(e,[]):l.after(e,i,w)||l.end(e,[]);i={anchor:i,focus:g},o=!0}}if(p.isPath(i)){D.removeNodes(e,{at:i,voids:s});return}if(!S.isCollapsed(i)){if(!o){var[,f]=S.edges(i),u=l.end(e,[]);Z.equals(f,u)||(i=l.unhangRange(e,i,{voids:s}))}var[x,E]=S.edges(i),C=l.above(e,{match:ie=>l.isBlock(e,ie),at:x,voids:s}),A=l.above(e,{match:ie=>l.isBlock(e,ie),at:E,voids:s}),h=C&&A&&!p.equals(C[1],A[1]),b=p.equals(x.path,E.path),k=s?null:l.void(e,{at:x,mode:"highest"}),F=s?null:l.void(e,{at:E,mode:"highest"});if(k){var O=l.before(e,x);O&&C&&p.isAncestor(C[1],O.path)&&(x=O)}if(F){var d=l.after(e,E);d&&A&&p.isAncestor(A[1],d.path)&&(E=d)}var y=[],m;for(var T of l.nodes(e,{at:i,voids:s})){var[R,M]=T;m&&p.compare(M,m)===0||(!s&&l.isVoid(e,R)||!p.isCommon(M,x.path)&&!p.isCommon(M,E.path))&&(y.push(T),m=M)}var _=Array.from(y,ie=>{var[,fe]=ie;return l.pathRef(e,fe)}),q=l.pointRef(e,x),$=l.pointRef(e,E);if(!b&&!k){var K=q.current,[Q]=l.leaf(e,K),{path:U}=K,{offset:G}=x,I=Q.text.slice(G);I.length>0&&e.apply({type:"remove_text",path:U,offset:G,text:I})}for(var J of _){var z=J.unref();D.removeNodes(e,{at:z,voids:s})}if(!F){var le=$.current,[W]=l.leaf(e,le),{path:Y}=le,X=b?x.offset:0,ae=W.text.slice(X,E.offset);ae.length>0&&e.apply({type:"remove_text",path:Y,offset:X,text:ae})}!b&&h&&$.current&&q.current&&D.mergeNodes(e,{at:$.current,hanging:!0,voids:s});var ue=t?q.unref()||$.unref():$.unref()||q.unref();r.at==null&&ue&&D.select(e,ue)}}})},insertFragment(e,r){var t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};l.withoutNormalizing(e,()=>{var{hanging:n=!1,voids:a=!1}=t,{at:s=e.selection}=t;if(r.length){if(s)if(S.isRange(s))if(n||(s=l.unhangRange(e,s)),S.isCollapsed(s))s=s.anchor;else{var[,i]=S.edges(s);if(!a&&l.void(e,{at:i}))return;var o=l.pointRef(e,i);D.delete(e,{at:s}),s=o.unref()}else p.isPath(s)&&(s=l.start(e,s));else return;if(!(!a&&l.void(e,{at:s}))){var c=l.above(e,{at:s,match:W=>l.isInline(e,W),mode:"highest",voids:a});if(c){var[,v]=c;if(l.isEnd(e,s,v)){var w=l.after(e,v);s=w}else if(l.isStart(e,s,v)){var g=l.before(e,v);s=g}}var f=l.above(e,{match:W=>l.isBlock(e,W),at:s,voids:a}),[,u]=f,x=l.isStart(e,s,u),E=l.isEnd(e,s,u),C=x&&E,A=!x||x&&E,h=!E,[,b]=N.first({children:r},[]),[,k]=N.last({children:r},[]),F=[],O=W=>{var[Y,X]=W,ae=X.length===0;return ae?!1:C?!0:!(A&&p.isAncestor(X,b)&&V.isElement(Y)&&!e.isVoid(Y)&&!e.isInline(Y)||h&&p.isAncestor(X,k)&&V.isElement(Y)&&!e.isVoid(Y)&&!e.isInline(Y))};for(var d of N.nodes({children:r},{pass:O}))O(d)&&F.push(d);var y=[],m=[],T=[],R=!0,M=!1;for(var[_]of F)V.isElement(_)&&!e.isInline(_)?(R=!1,M=!0,m.push(_)):R?y.push(_):T.push(_);var[q]=l.nodes(e,{at:s,match:W=>B.isText(W)||l.isInline(e,W),mode:"highest",voids:a}),[,$]=q,K=l.isStart(e,s,$),Q=l.isEnd(e,s,$),U=l.pathRef(e,E?p.next(u):u),G=l.pathRef(e,Q?p.next($):$),I=l.pathRef(e,u);D.splitNodes(e,{at:s,match:W=>M?l.isBlock(e,W):B.isText(W)||l.isInline(e,W),mode:M?"lowest":"highest",voids:a});var J=l.pathRef(e,!K||K&&Q?p.next($):$);if(D.insertNodes(e,y,{at:J.current,match:W=>B.isText(W)||l.isInline(e,W),mode:"highest",voids:a}),C&&m.length&&D.delete(e,{at:I.unref(),voids:a}),D.insertNodes(e,m,{at:U.current,match:W=>l.isBlock(e,W),mode:"lowest",voids:a}),D.insertNodes(e,T,{at:G.current,match:W=>B.isText(W)||l.isInline(e,W),mode:"highest",voids:a}),!t.at){var z;T.length>0?z=p.previous(G.current):m.length>0?z=p.previous(U.current):z=p.previous(J.current);var le=l.end(e,z);D.select(e,le)}J.unref(),U.unref(),G.unref()}}})},insertText(e,r){var t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};l.withoutNormalizing(e,()=>{var{voids:n=!1}=t,{at:a=e.selection}=t;if(a){if(p.isPath(a)&&(a=l.range(e,a)),S.isRange(a))if(S.isCollapsed(a))a=a.anchor;else{var s=S.end(a);if(!n&&l.void(e,{at:s}))return;var i=l.pointRef(e,s);D.delete(e,{at:a,voids:n}),a=i.unref(),D.setSelection(e,{anchor:a,focus:a})}if(!(!n&&l.void(e,{at:a}))){var{path:o,offset:c}=a;r.length>0&&e.apply({type:"insert_text",path:o,offset:c,text:r})}}})}};function Ft(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),t.push.apply(t,n)}return t}function Ye(e){for(var r=1;r<arguments.length;r++){var t=arguments[r]!=null?arguments[r]:{};r%2?Ft(Object(t),!0).forEach(function(n){pe(e,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):Ft(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})}return e}var D=Ye(Ye(Ye(Ye({},as),os),us),fs),cs=gs,nn="---",an="A-Za-z--------",ds=new RegExp("^[^"+an+"]*["+nn+"]"),vs=new RegExp("^[^"+nn+"]*["+an+"]");function gs(e){return e=String(e||""),ds.test(e)?"rtl":vs.test(e)?"ltr":"neutral"}const sn=jr(cs);var hs=ka,ps=function(){return hs.Date.now()},ms=ps,ws=Xt,pr=ms,St=Ca,ys="Expected a function",bs=Math.max,xs=Math.min;function Es(e,r,t){var n,a,s,i,o,c,v=0,w=!1,g=!1,f=!0;if(typeof e!="function")throw new TypeError(ys);r=St(r)||0,ws(t)&&(w=!!t.leading,g="maxWait"in t,s=g?bs(St(t.maxWait)||0,r):s,f="trailing"in t?!!t.trailing:f);function u(O){var d=n,y=a;return n=a=void 0,v=O,i=e.apply(y,d),i}function x(O){return v=O,o=setTimeout(A,r),w?u(O):i}function E(O){var d=O-c,y=O-v,m=r-d;return g?xs(m,s-y):m}function C(O){var d=O-c,y=O-v;return c===void 0||d>=r||d<0||g&&y>=s}function A(){var O=pr();if(C(O))return h(O);o=setTimeout(A,E(O))}function h(O){return o=void 0,f&&n?u(O):(n=a=void 0,i)}function b(){o!==void 0&&clearTimeout(o),v=0,n=c=a=o=void 0}function k(){return o===void 0?i:h(pr())}function F(){var O=pr(),d=C(O);if(n=arguments,a=this,c=O,d){if(o===void 0)return x(c);if(g)return clearTimeout(o),o=setTimeout(A,r),u(c)}return o===void 0&&(o=setTimeout(A,r)),i}return F.cancel=b,F.flush=k,F}var Os=Es,ks=Os,Cs=Xt,Fs="Expected a function";function Ss(e,r,t){var n=!0,a=!0;if(typeof e!="function")throw new TypeError(Fs);return Cs(t)&&(n="leading"in t?!!t.leading:n,a="trailing"in t?!!t.trailing:a),ks(e,r,{leading:n,maxWait:r,trailing:a})}var As=Ss;const on=jr(As);function At(e){return typeof e=="object"&&e!=null&&e.nodeType===1}function Dt(e,r){return(!r||e!=="hidden")&&e!=="visible"&&e!=="clip"}function mr(e,r){if(e.clientHeight<e.scrollHeight||e.clientWidth<e.scrollWidth){var t=getComputedStyle(e,null);return Dt(t.overflowY,r)||Dt(t.overflowX,r)||function(n){var a=function(s){if(!s.ownerDocument||!s.ownerDocument.defaultView)return null;try{return s.ownerDocument.defaultView.frameElement}catch{return null}}(n);return!!a&&(a.clientHeight<n.scrollHeight||a.clientWidth<n.scrollWidth)}(e)}return!1}function Je(e,r,t,n,a,s,i,o){return s<e&&i>r||s>e&&i<r?0:s<=e&&o<=t||i>=r&&o>=t?s-e-n:i>r&&o<t||s<e&&o>t?i-r+a:0}function Pt(e,r){var t=window,n=r.scrollMode,a=r.block,s=r.inline,i=r.boundary,o=r.skipOverflowHiddenElements,c=typeof i=="function"?i:function(fe){return fe!==i};if(!At(e))throw new TypeError("Invalid target");for(var v=document.scrollingElement||document.documentElement,w=[],g=e;At(g)&&c(g);){if((g=g.parentElement)===v){w.push(g);break}g!=null&&g===document.body&&mr(g)&&!mr(document.documentElement)||g!=null&&mr(g,o)&&w.push(g)}for(var f=t.visualViewport?t.visualViewport.width:innerWidth,u=t.visualViewport?t.visualViewport.height:innerHeight,x=window.scrollX||pageXOffset,E=window.scrollY||pageYOffset,C=e.getBoundingClientRect(),A=C.height,h=C.width,b=C.top,k=C.right,F=C.bottom,O=C.left,d=a==="start"||a==="nearest"?b:a==="end"?F:b+A/2,y=s==="center"?O+h/2:s==="end"?k:O,m=[],T=0;T<w.length;T++){var R=w[T],M=R.getBoundingClientRect(),_=M.height,q=M.width,$=M.top,K=M.right,Q=M.bottom,U=M.left;if(n==="if-needed"&&b>=0&&O>=0&&F<=u&&k<=f&&b>=$&&F<=Q&&O>=U&&k<=K)return m;var G=getComputedStyle(R),I=parseInt(G.borderLeftWidth,10),J=parseInt(G.borderTopWidth,10),z=parseInt(G.borderRightWidth,10),le=parseInt(G.borderBottomWidth,10),W=0,Y=0,X="offsetWidth"in R?R.offsetWidth-R.clientWidth-I-z:0,ae="offsetHeight"in R?R.offsetHeight-R.clientHeight-J-le:0;if(v===R)W=a==="start"?d:a==="end"?d-u:a==="nearest"?Je(E,E+u,u,J,le,E+d,E+d+A,A):d-u/2,Y=s==="start"?y:s==="center"?y-f/2:s==="end"?y-f:Je(x,x+f,f,I,z,x+y,x+y+h,h),W=Math.max(0,W+E),Y=Math.max(0,Y+x);else{W=a==="start"?d-$-J:a==="end"?d-Q+le+ae:a==="nearest"?Je($,Q,_,J,le+ae,d,d+A,A):d-($+_/2)+ae/2,Y=s==="start"?y-U-I:s==="center"?y-(U+q/2)+X/2:s==="end"?y-K+z+X:Je(U,K,q,I,z+X,y,y+h,h);var ue=R.scrollLeft,ie=R.scrollTop;d+=ie-(W=Math.max(0,Math.min(ie+W,R.scrollHeight-_+ae))),y+=ue-(Y=Math.max(0,Math.min(ue+Y,R.scrollWidth-q+X)))}m.push({el:R,top:W,left:Y})}return m}function ln(e){return e===Object(e)&&Object.keys(e).length!==0}function Ds(e,r){r===void 0&&(r="auto");var t="scrollBehavior"in document.body.style;e.forEach(function(n){var a=n.el,s=n.top,i=n.left;a.scroll&&t?a.scroll({top:s,left:i,behavior:r}):(a.scrollTop=s,a.scrollLeft=i)})}function Ps(e){return e===!1?{block:"end",inline:"nearest"}:ln(e)?e:{block:"start",inline:"nearest"}}function un(e,r){var t=!e.ownerDocument.documentElement.contains(e);if(ln(r)&&typeof r.behavior=="function")return r.behavior(t?[]:Pt(e,r));if(!t){var n=Ps(r);return Ds(Pt(e,n),n.behavior)}}var be={};Object.defineProperty(be,"__esModule",{value:!0});var Ts=typeof window<"u"&&/Mac|iPod|iPhone|iPad/.test(window.navigator.platform),wr={alt:"altKey",control:"ctrlKey",meta:"metaKey",shift:"shiftKey"},js={add:"+",break:"pause",cmd:"meta",command:"meta",ctl:"control",ctrl:"control",del:"delete",down:"arrowdown",esc:"escape",ins:"insert",left:"arrowleft",mod:Ts?"meta":"control",opt:"alt",option:"alt",return:"enter",right:"arrowright",space:" ",spacebar:" ",up:"arrowup",win:"meta",windows:"meta"},fn={backspace:8,tab:9,enter:13,shift:16,control:17,alt:18,pause:19,capslock:20,escape:27," ":32,pageup:33,pagedown:34,end:35,home:36,arrowleft:37,arrowup:38,arrowright:39,arrowdown:40,insert:45,delete:46,meta:91,numlock:144,scrolllock:145,";":186,"=":187,",":188,"-":189,".":190,"/":191,"`":192,"[":219,"\\":220,"]":221,"'":222};for(var Xe=1;Xe<20;Xe++)fn["f"+Xe]=111+Xe;function or(e,r,t){r&&!("byKey"in r)&&(t=r,r=null),Array.isArray(e)||(e=[e]);var n=e.map(function(i){return cn(i,r)}),a=function(o){return n.some(function(c){return dn(c,o)})},s=t==null?a:a(t);return s}function Rs(e,r){return or(e,r)}function Ns(e,r){return or(e,{byKey:!0},r)}function cn(e,r){var t=r&&r.byKey,n={};e=e.replace("++","+add");var a=e.split("+"),s=a.length;for(var i in wr)n[wr[i]]=!1;var o=!0,c=!1,v=void 0;try{for(var w=a[Symbol.iterator](),g;!(o=(g=w.next()).done);o=!0){var f=g.value,u=f.endsWith("?")&&f.length>1;u&&(f=f.slice(0,-1));var x=Mr(f),E=wr[x];(s===1||!E)&&(t?n.key=x:n.which=vn(f)),E&&(n[E]=u?null:!0)}}catch(C){c=!0,v=C}finally{try{!o&&w.return&&w.return()}finally{if(c)throw v}}return n}function dn(e,r){for(var t in e){var n=e[t],a=void 0;if(n!=null&&(t==="key"&&r.key!=null?a=r.key.toLowerCase():t==="which"?a=n===91&&r.which===93?91:r.which:a=r[t],!(a==null&&n===!1)&&a!==n))return!1}return!0}function vn(e){e=Mr(e);var r=fn[e]||e.toUpperCase().charCodeAt(0);return r}function Mr(e){return e=e.toLowerCase(),e=js[e]||e,e}be.default=or;be.isHotkey=or;be.isCodeHotkey=Rs;var yr=be.isKeyHotkey=Ns;be.parseHotkey=cn;be.compareHotkey=dn;be.toKeyCode=vn;be.toKeyName=Mr;function Ir(e,r,t){return r in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}function Bs(e,r){if(e==null)return{};var t={},n=Object.keys(e),a,s;for(s=0;s<n.length;s++)a=n[s],!(r.indexOf(a)>=0)&&(t[a]=e[a]);return t}function He(e,r){if(e==null)return{};var t=Bs(e,r),n,a;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(a=0;a<s.length;a++)n=s[a],!(r.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(t[n]=e[n])}return t}var Ms=e=>{var{isLast:r,leaf:t,parent:n,text:a}=e,s=je(),i=j.findPath(s,a),o=p.parent(i);return s.isVoid(n)?H.createElement(br,{length:N.string(n).length}):t.text===""&&n.children[n.children.length-1]===a&&!s.isInline(n)&&l.string(s,o)===""?H.createElement(br,{isLineBreak:!0}):t.text===""?H.createElement(br,null):r&&t.text.slice(-1)===`
`?H.createElement(Tt,{isTrailing:!0,text:t.text}):H.createElement(Tt,{text:t.text})},Tt=e=>{var{text:r,isTrailing:t=!1}=e,n=P.useRef(null),a=P.useRef(!1);return n.current&&n.current.textContent!==r&&(a.current=!a.current),H.createElement("span",{"data-slate-string":!0,ref:n,key:a.current?"A":"B"},r,t?`
`:null)},br=e=>{var{length:r=0,isLineBreak:t=!1}=e;return H.createElement("span",{"data-slate-zero-width":t?"n":"z","data-slate-length":r},"\uFEFF",t?H.createElement("br",null):null)},Lr=new WeakMap,$r=new WeakMap,Wr=new WeakMap,Ke=new WeakMap,Ve=new WeakMap,Oe=new WeakMap,Fr=new WeakMap,lr=new WeakMap,_r=new WeakMap,ce=new WeakMap,Sr=new WeakMap,Ar=new WeakMap,Te=Symbol("placeholder"),Is=e=>{var{leaf:r,isLast:t,text:n,parent:a,renderPlaceholder:s,renderLeaf:i=g=>H.createElement($s,Object.assign({},g))}=e,o=P.useRef(null);P.useEffect(()=>{var g=o==null?void 0:o.current,f=document.querySelector('[data-slate-editor="true"]');if(!(!g||!f))return f.style.minHeight="".concat(g.clientHeight,"px"),()=>{f.style.minHeight="auto"}},[o,r]);var c=H.createElement(Ms,{isLast:t,leaf:r,parent:a,text:n});if(r[Te]){var v={children:r.placeholder,attributes:{"data-slate-placeholder":!0,style:{position:"absolute",pointerEvents:"none",width:"100%",maxWidth:"100%",display:"block",opacity:"0.333",userSelect:"none",textDecoration:"none"},contentEditable:!1,ref:o}};c=H.createElement(H.Fragment,null,s(v),c)}var w={"data-slate-leaf":!0};return i({attributes:w,children:c,leaf:r,text:n})},Ls=H.memo(Is,(e,r)=>r.parent===e.parent&&r.isLast===e.isLast&&r.renderLeaf===e.renderLeaf&&r.renderPlaceholder===e.renderPlaceholder&&r.text===e.text&&B.equals(r.leaf,e.leaf)&&r.leaf[Te]===e.leaf[Te]),$s=e=>{var{attributes:r,children:t}=e;return H.createElement("span",Object.assign({},r),t)},Ws=typeof navigator<"u"&&typeof window<"u"&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream,jt=typeof navigator<"u"&&/Mac OS X/.test(navigator.userAgent),_s=typeof navigator<"u"&&/Android/.test(navigator.userAgent),Rt=typeof navigator<"u"&&/^(?!.*Seamonkey)(?=.*Firefox).*/i.test(navigator.userAgent),xr=typeof navigator<"u"&&/Version\/[\d\.]+.*Safari/.test(navigator.userAgent),zs=typeof navigator<"u"&&/Edge?\/(?:[0-6][0-9]|[0-7][0-8])/i.test(navigator.userAgent),Dr=typeof navigator<"u"&&/Chrome/i.test(navigator.userAgent),qs=typeof navigator<"u"&&/Chrome?\/(?:[0-7][0-5]|[0-6][0-9])/i.test(navigator.userAgent),Hs=typeof navigator<"u"&&/^(?!.*Seamonkey)(?=.*Firefox\/(?:[0-7][0-9]|[0-8][0-6])).*/i.test(navigator.userAgent),Ks=typeof navigator<"u"&&/.*QQBrowser/.test(navigator.userAgent),Vs=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",xe=!qs&&!zs&&typeof globalThis<"u"&&globalThis.InputEvent&&typeof globalThis.InputEvent.prototype.getTargetRanges=="function",ve=Vs?P.useLayoutEffect:P.useEffect,Us=["anchor","focus"],Gs=["anchor","focus"],Zs=(e,r)=>Object.keys(e).length===Object.keys(r).length&&Object.keys(e).every(t=>r.hasOwnProperty(t)&&e[t]===r[t]),gn=(e,r)=>{if(e.length!==r.length)return!1;for(var t=0;t<e.length;t++){var n=e[t],a=r[t],s=He(n,Us),i=He(a,Gs);if(!S.equals(n,a)||n[Te]!==a[Te]||!Zs(s,i))return!1}return!0},Ys=e=>{for(var{decorations:r,isLast:t,parent:n,renderPlaceholder:a,renderLeaf:s,text:i}=e,o=je(),c=P.useRef(null),v=B.decorations(i,r),w=j.findKey(o,i),g=[],f=0;f<v.length;f++){var u=v[f];g.push(H.createElement(Ls,{isLast:t&&f===v.length-1,key:"".concat(w.id,"-").concat(f),renderPlaceholder:a,leaf:u,text:i,parent:n,renderLeaf:s}))}return ve(()=>{var x=lr.get(o);c.current?(x==null||x.set(w,c.current),Oe.set(i,c.current),Ve.set(c.current,i)):(x==null||x.delete(w),Oe.delete(i))}),H.createElement("span",{"data-slate-node":"text",ref:c},g)},hn=H.memo(Ys,(e,r)=>r.parent===e.parent&&r.isLast===e.isLast&&r.renderLeaf===e.renderLeaf&&r.text===e.text&&gn(r.decorations,e.decorations)),Js=e=>{var{decorations:r,element:t,renderElement:n=h=>H.createElement(Qs,Object.assign({},h)),renderPlaceholder:a,renderLeaf:s,selection:i}=e,o=P.useRef(null),c=je(),v=si(),w=c.isInline(t),g=j.findKey(c,t),f=qr({decorations:r,node:t,renderElement:n,renderPlaceholder:a,renderLeaf:s,selection:i}),u={"data-slate-node":"element",ref:o};if(w&&(u["data-slate-inline"]=!0),!w&&l.hasInlines(c,t)){var x=N.string(t),E=sn(x);E==="rtl"&&(u.dir=E)}if(l.isVoid(c,t)){u["data-slate-void"]=!0,!v&&w&&(u.contentEditable=!1);var C=w?"span":"div",[[A]]=N.texts(t);f=v?null:H.createElement(C,{"data-slate-spacer":!0,style:{height:"0",color:"transparent",outline:"none",position:"absolute"}},H.createElement(hn,{renderPlaceholder:a,decorations:[],isLast:!1,parent:t,text:A})),Lr.set(A,0),$r.set(A,t)}return ve(()=>{var h=lr.get(c);o.current?(h==null||h.set(g,o.current),Oe.set(t,o.current),Ve.set(o.current,t)):(h==null||h.delete(g),Oe.delete(t))}),n({attributes:u,children:f,element:t})},Xs=H.memo(Js,(e,r)=>e.element===r.element&&e.renderElement===r.renderElement&&e.renderLeaf===r.renderLeaf&&gn(e.decorations,r.decorations)&&(e.selection===r.selection||!!e.selection&&!!r.selection&&S.equals(e.selection,r.selection))),Qs=e=>{var{attributes:r,children:t,element:n}=e,a=je(),s=a.isInline(n)?"span":"div";return H.createElement(s,Object.assign({},r,{style:{position:"relative"}}),t)},pn=P.createContext(null),je=()=>{var e=P.useContext(pn);if(!e)throw new Error("The `useSlateStatic` hook must be used inside the <Slate> component's context.");return e},zr=P.createContext(()=>[]),ei=()=>P.useContext(zr),mn=P.createContext(!1),ri=()=>P.useContext(mn),qr=e=>{for(var{decorations:r,node:t,renderElement:n,renderPlaceholder:a,renderLeaf:s,selection:i}=e,o=ei(),c=je(),v=j.findPath(c,t),w=[],g=V.isElement(t)&&!c.isInline(t)&&l.hasInlines(c,t),f=0;f<t.children.length;f++){var u=v.concat(f),x=t.children[f],E=j.findKey(c,x),C=l.range(c,u),A=i&&S.intersection(C,i),h=o([x,u]);for(var b of r){var k=S.intersection(b,C);k&&h.push(k)}V.isElement(x)?w.push(H.createElement(mn.Provider,{key:"provider-".concat(E.id),value:!!A},H.createElement(Xs,{decorations:h,element:x,key:E.id,renderElement:n,renderPlaceholder:a,renderLeaf:s,selection:A}))):w.push(H.createElement(hn,{decorations:h,key:E.id,isLast:g&&f===t.children.length-1,parent:t,renderPlaceholder:a,renderLeaf:s,text:x})),Lr.set(x,f),$r.set(x,t)}return w},ti={bold:"mod+b",compose:["down","left","right","up","backspace","enter"],moveBackward:"left",moveForward:"right",moveWordBackward:"ctrl+left",moveWordForward:"ctrl+right",deleteBackward:"shift?+backspace",deleteForward:"shift?+delete",extendBackward:"shift+left",extendForward:"shift+right",italic:"mod+i",splitBlock:"shift?+enter",undo:"mod+z"},ni={moveLineBackward:"opt+up",moveLineForward:"opt+down",moveWordBackward:"opt+left",moveWordForward:"opt+right",deleteBackward:["ctrl+backspace","ctrl+h"],deleteForward:["ctrl+delete","ctrl+d"],deleteLineBackward:"cmd+shift?+backspace",deleteLineForward:["cmd+shift?+delete","ctrl+k"],deleteWordBackward:"opt+shift?+backspace",deleteWordForward:"opt+shift?+delete",extendLineBackward:"opt+shift+up",extendLineForward:"opt+shift+down",redo:"cmd+shift+z",transposeCharacter:"ctrl+t"},ai={deleteWordBackward:"ctrl+shift?+backspace",deleteWordForward:"ctrl+shift?+delete",redo:["ctrl+y","ctrl+shift+z"]},re=e=>{var r=ti[e],t=ni[e],n=ai[e],a=r&&yr(r),s=t&&yr(t),i=n&&yr(n);return o=>!!(a&&a(o)||jt&&s&&s(o)||!jt&&i&&i(o))},te={isBold:re("bold"),isCompose:re("compose"),isMoveBackward:re("moveBackward"),isMoveForward:re("moveForward"),isDeleteBackward:re("deleteBackward"),isDeleteForward:re("deleteForward"),isDeleteLineBackward:re("deleteLineBackward"),isDeleteLineForward:re("deleteLineForward"),isDeleteWordBackward:re("deleteWordBackward"),isDeleteWordForward:re("deleteWordForward"),isExtendBackward:re("extendBackward"),isExtendForward:re("extendForward"),isExtendLineBackward:re("extendLineBackward"),isExtendLineForward:re("extendLineForward"),isItalic:re("italic"),isMoveLineBackward:re("moveLineBackward"),isMoveLineForward:re("moveLineForward"),isMoveWordBackward:re("moveWordBackward"),isMoveWordForward:re("moveWordForward"),isRedo:re("redo"),isSplitBlock:re("splitBlock"),isTransposeCharacter:re("transposeCharacter"),isUndo:re("undo")},Hr=P.createContext(!1),si=()=>P.useContext(Hr),wn=P.createContext(null),yn=()=>{var e=P.useContext(wn);if(!e)throw new Error("The `useSlate` hook must be used inside the <Slate> component's context.");var[r]=e;return r},ur=e=>e&&e.ownerDocument&&e.ownerDocument.defaultView||null,ii=e=>ke(e)&&e.nodeType===8,de=e=>ke(e)&&e.nodeType===1,ke=e=>{var r=ur(e);return!!r&&e instanceof r.Node},Nt=e=>{var r=e&&e.anchorNode&&ur(e.anchorNode);return!!r&&e instanceof r.Selection},bn=e=>ke(e)&&e.nodeType===3,oi=e=>e.clipboardData&&e.clipboardData.getData("text/plain")!==""&&e.clipboardData.types.length===1,li=e=>{var[r,t]=e;if(de(r)&&r.childNodes.length){var n=t===r.childNodes.length,a=n?t-1:t;for([r,a]=xn(r,a,n?"backward":"forward"),n=a<t;de(r)&&r.childNodes.length;){var s=n?r.childNodes.length-1:0;r=fi(r,s,n?"backward":"forward")}t=n&&r.textContent!=null?r.textContent.length:0}return[r,t]},ui=()=>!!(window.document.activeElement&&window.document.activeElement.shadowRoot),xn=(e,r,t)=>{for(var{childNodes:n}=e,a=n[r],s=r,i=!1,o=!1;(ii(a)||de(a)&&a.childNodes.length===0||de(a)&&a.getAttribute("contenteditable")==="false")&&!(i&&o);){if(s>=n.length){i=!0,s=r-1,t="backward";continue}if(s<0){o=!0,s=r+1,t="forward";continue}a=n[s],r=s,s+=t==="forward"?1:-1}return[a,r]},fi=(e,r,t)=>{var[n]=xn(e,r,t);return n},En=e=>{var r="";if(bn(e)&&e.nodeValue)return e.nodeValue;if(de(e)){for(var t of Array.from(e.childNodes))r+=En(t);var n=getComputedStyle(e).getPropertyValue("display");(n==="block"||n==="list"||e.tagName==="BR")&&(r+=`
`)}return r},ci=/data-slate-fragment="(.+?)"/m,On=e=>{var r=e.getData("text/html"),[,t]=r.match(ci)||[];return t},di=e=>{if(!e.getData("application/x-slate-fragment")){var r=On(e);if(r){var t=new DataTransfer;return e.types.forEach(n=>{t.setData(n,e.getData(n))}),t.setData("application/x-slate-fragment",r),t}}return e},nr=new WeakMap,ar=new WeakMap,vi=(e,r)=>{nr.set(e,!0),r(),nr.set(e,!1)},kn=e=>{var r=ar.get(e);ar.set(e,[]),r&&l.withoutNormalizing(e,()=>{r.forEach(t=>{e.apply(t)})})},gi=["autoFocus","decorate","onDOMBeforeInput","placeholder","readOnly","renderElement","renderLeaf","renderPlaceholder","scrollSelectionIntoView","style","as"];function Bt(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),t.push.apply(t,n)}return t}function Mt(e){for(var r=1;r<arguments.length;r++){var t=arguments[r]!=null?arguments[r]:{};r%2?Bt(Object(t),!0).forEach(function(n){Ir(e,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):Bt(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})}return e}var hi=e=>H.createElement(H.Fragment,null,qr(e)),pi=e=>{var{autoFocus:r,decorate:t=Fn,onDOMBeforeInput:n,placeholder:a,readOnly:s=!1,renderElement:i,renderLeaf:o,renderPlaceholder:c=d=>H.createElement(Cn,Object.assign({},d)),scrollSelectionIntoView:v=mi,style:w={},as:g="div"}=e,f=He(e,gi),u=yn(),[x,E]=P.useState(!1),C=P.useRef(null);_r.set(u,s);var A=P.useMemo(()=>({isComposing:!1,hasInsertPrefixInCompositon:!1,isDraggingInternally:!1,isUpdatingSelection:!1,latestElement:null}),[]);ve(()=>{var d;C.current&&(d=ur(C.current))?(Wr.set(u,d),Ke.set(u,C.current),Oe.set(u,C.current),Ve.set(C.current,u)):Oe.delete(u);var{selection:y}=u,m=j.findDocumentOrShadowRoot(u),T=m.getSelection();if(!(A.isComposing||!T||!j.isFocused(u))){var R=T.type!=="None";if(!(!y&&!R)){var M=Ke.get(u),_=!1;if(M.contains(T.anchorNode)&&M.contains(T.focusNode)&&(_=!0),R&&_&&y){var q=j.toSlateRange(u,T,{exactMatch:!0});if(q&&S.equals(q,y))return}if(y&&!j.hasRange(u,y)){u.selection=j.toSlateRange(u,T,{exactMatch:!1});return}A.isUpdatingSelection=!0;var $=y&&j.toDOMRange(u,y);$?(S.isBackward(y)?T.setBaseAndExtent($.endContainer,$.endOffset,$.startContainer,$.startOffset):T.setBaseAndExtent($.startContainer,$.startOffset,$.endContainer,$.endOffset),v(u,$)):T.removeAllRanges(),setTimeout(()=>{if($&&Rt){var K=j.toDOMNode(u,u);K.focus()}A.isUpdatingSelection=!1})}}}),P.useEffect(()=>{C.current&&r&&C.current.focus()},[r]);var h=P.useCallback(d=>{if(!s&&ne(u,d.target)&&!Sn(d,n)){var{selection:y}=u,{inputType:m}=d,T=d.dataTransfer||d.data||void 0;if(m==="insertCompositionText"||m==="deleteCompositionText")return;var R=!1;if(m==="insertText"&&y&&S.isCollapsed(y)&&d.data&&d.data.length===1&&/[a-z ]/i.test(d.data)&&y.anchor.offset!==0){R=!0,u.marks&&(R=!1);var{anchor:M}=y,_=l.above(u,{at:M,match:G=>l.isInline(u,G),mode:"highest"});if(_){var[,q]=_;l.isEnd(u,y.anchor,q)&&(R=!1)}}if(R||d.preventDefault(),!m.startsWith("delete")||m.startsWith("deleteBy")){var[$]=d.getTargetRanges();if($){var K=j.toSlateRange(u,$,{exactMatch:!1});(!y||!S.equals(y,K))&&D.select(u,K)}}if(y&&S.isExpanded(y)&&m.startsWith("delete")){var Q=m.endsWith("Backward")?"backward":"forward";l.deleteFragment(u,{direction:Q});return}switch(m){case"deleteByComposition":case"deleteByCut":case"deleteByDrag":{l.deleteFragment(u);break}case"deleteContent":case"deleteContentForward":{l.deleteForward(u);break}case"deleteContentBackward":{l.deleteBackward(u);break}case"deleteEntireSoftLine":{l.deleteBackward(u,{unit:"line"}),l.deleteForward(u,{unit:"line"});break}case"deleteHardLineBackward":{l.deleteBackward(u,{unit:"block"});break}case"deleteSoftLineBackward":{l.deleteBackward(u,{unit:"line"});break}case"deleteHardLineForward":{l.deleteForward(u,{unit:"block"});break}case"deleteSoftLineForward":{l.deleteForward(u,{unit:"line"});break}case"deleteWordBackward":{l.deleteBackward(u,{unit:"word"});break}case"deleteWordForward":{l.deleteForward(u,{unit:"word"});break}case"insertLineBreak":case"insertParagraph":{l.insertBreak(u);break}case"insertFromComposition":case"insertFromDrop":case"insertFromPaste":case"insertFromYank":case"insertReplacementText":case"insertText":{m==="insertFromComposition"&&(A.isComposing&&E(!1),A.isComposing=!1);var U=j.getWindow(u);T instanceof U.DataTransfer?j.insertData(u,T):typeof T=="string"&&(R?vi(u,()=>l.insertText(u,T)):l.insertText(u,T));break}}}},[s,n]);ve(()=>(C.current&&xe&&C.current.addEventListener("beforeinput",h),()=>{C.current&&xe&&C.current.removeEventListener("beforeinput",h)}),[h]);var b=P.useCallback(on(()=>{if(!s&&!A.isComposing&&!A.isUpdatingSelection&&!A.isDraggingInternally){var d=j.findDocumentOrShadowRoot(u),{activeElement:y}=d,m=j.toDOMNode(u,u),T=d.getSelection();if(y===m?(A.latestElement=y,ce.set(u,!0)):ce.delete(u),!T)return D.deselect(u);var{anchorNode:R,focusNode:M}=T,_=ne(u,R)||sr(u,R),q=ne(u,M)||sr(u,M);if(_&&q){var $=j.toSlateRange(u,T,{exactMatch:!1});D.select(u,$)}else D.deselect(u)}},100),[s]),k=P.useCallback(()=>setTimeout(b),[b]);ve(()=>{var d=j.getWindow(u);return d.document.addEventListener("selectionchange",k),()=>{d.document.removeEventListener("selectionchange",k)}},[k]);var F=t([u,[]]);if(a&&u.children.length===1&&Array.from(N.texts(u)).length===1&&N.string(u)===""&&!x){var O=l.start(u,[]);F.push({[Te]:!0,placeholder:a,anchor:O,focus:O})}return H.createElement(Hr.Provider,{value:s},H.createElement(zr.Provider,{value:t},H.createElement(g,Object.assign({"data-gramm":!1,role:s?void 0:"textbox"},f,{spellCheck:xe?f.spellCheck:!1,autoCorrect:xe?f.autoCorrect:"false",autoCapitalize:xe?f.autoCapitalize:"false","data-slate-editor":!0,"data-slate-node":"value",contentEditable:s?void 0:!0,suppressContentEditableWarning:!0,ref:C,style:Mt({position:"relative",outline:"none",whiteSpace:"pre-wrap",wordWrap:"break-word"},w),onBeforeInput:P.useCallback(d=>{if(!xe&&!s&&!se(d,f.onBeforeInput)&&ne(u,d.target)&&(d.preventDefault(),!A.isComposing)){var y=d.data;l.insertText(u,y)}},[s]),onInput:P.useCallback(d=>{kn(u)},[]),onBlur:P.useCallback(d=>{if(!(s||A.isUpdatingSelection||!ne(u,d.target)||se(d,f.onBlur))){var y=j.findDocumentOrShadowRoot(u);if(A.latestElement!==y.activeElement){var{relatedTarget:m}=d,T=j.toDOMNode(u,u);if(m!==T&&!(de(m)&&m.hasAttribute("data-slate-spacer"))){if(m!=null&&ke(m)&&j.hasDOMNode(u,m)){var R=j.toSlateNode(u,m);if(V.isElement(R)&&!u.isVoid(R))return}if(xr){var M=y.getSelection();M==null||M.removeAllRanges()}ce.delete(u)}}}},[s,f.onBlur]),onClick:P.useCallback(d=>{if(!s&&Le(u,d.target)&&!se(d,f.onClick)&&ke(d.target)){var y=j.toSlateNode(u,d.target),m=j.findPath(u,y),T=l.start(u,m),R=l.end(u,m),M=l.void(u,{at:T}),_=l.void(u,{at:R});if(M&&_&&p.equals(M[1],_[1])){var q=l.range(u,T);D.select(u,q)}}},[s,f.onClick]),onCompositionEnd:P.useCallback(d=>{if(ne(u,d.target)&&!se(d,f.onCompositionEnd)&&(A.isComposing&&E(!1),A.isComposing=!1,!xr&&!Hs&&!Ws&&!Ks&&d.data&&l.insertText(u,d.data),u.selection&&S.isCollapsed(u.selection))){var y=u.selection.anchor.path,m=N.leaf(u,y);A.hasInsertPrefixInCompositon&&(A.hasInsertPrefixInCompositon=!1,l.withoutNormalizing(u,()=>{var T=m.text.replace(/^\uFEFF/,"");D.delete(u,{distance:m.text.length,reverse:!0}),D.insertText(u,T)}))}},[f.onCompositionEnd]),onCompositionUpdate:P.useCallback(d=>{ne(u,d.target)&&!se(d,f.onCompositionUpdate)&&(!A.isComposing&&E(!0),A.isComposing=!0)},[f.onCompositionUpdate]),onCompositionStart:P.useCallback(d=>{if(ne(u,d.target)&&!se(d,f.onCompositionStart)){var{selection:y,marks:m}=u;if(y){if(S.isExpanded(y)){l.deleteFragment(u);return}var T=l.above(u,{match:_=>l.isInline(u,_),mode:"highest"});if(T){var[,R]=T;if(l.isEnd(u,y.anchor,R)){var M=l.after(u,R);D.setSelection(u,{anchor:M,focus:M})}}m&&(A.hasInsertPrefixInCompositon=!0,D.insertNodes(u,Mt({text:"\uFEFF"},m),{select:!0}))}}},[f.onCompositionStart]),onCopy:P.useCallback(d=>{ne(u,d.target)&&!se(d,f.onCopy)&&(d.preventDefault(),j.setFragmentData(u,d.clipboardData))},[f.onCopy]),onCut:P.useCallback(d=>{if(!s&&ne(u,d.target)&&!se(d,f.onCut)){d.preventDefault(),j.setFragmentData(u,d.clipboardData);var{selection:y}=u;if(y)if(S.isExpanded(y))l.deleteFragment(u);else{var m=N.parent(u,y.anchor.path);l.isVoid(u,m)&&D.delete(u)}}},[s,f.onCut]),onDragOver:P.useCallback(d=>{if(Le(u,d.target)&&!se(d,f.onDragOver)){var y=j.toSlateNode(u,d.target);l.isVoid(u,y)&&d.preventDefault()}},[f.onDragOver]),onDragStart:P.useCallback(d=>{if(Le(u,d.target)&&!se(d,f.onDragStart)){var y=j.toSlateNode(u,d.target),m=j.findPath(u,y),T=l.isVoid(u,y)||l.void(u,{at:m,voids:!0});if(T){var R=l.range(u,m);D.select(u,R)}A.isDraggingInternally=!0,j.setFragmentData(u,d.dataTransfer)}},[f.onDragStart]),onDrop:P.useCallback(d=>{if(!s&&Le(u,d.target)&&!se(d,f.onDrop)){d.preventDefault();var y=u.selection,m=j.findEventRange(u,d),T=d.dataTransfer;D.select(u,m),A.isDraggingInternally&&(y&&D.delete(u,{at:y}),A.isDraggingInternally=!1),j.insertData(u,T),j.isFocused(u)||j.focus(u)}},[s,f.onDrop]),onDragEnd:P.useCallback(d=>{!s&&A.isDraggingInternally&&Le(u,d.target)&&!se(d,f.onDragEnd)&&(A.isDraggingInternally=!1)},[s,f.onDragEnd]),onFocus:P.useCallback(d=>{if(!s&&!A.isUpdatingSelection&&ne(u,d.target)&&!se(d,f.onFocus)){var y=j.toDOMNode(u,u),m=j.findDocumentOrShadowRoot(u);if(A.latestElement=m.activeElement,Rt&&d.target!==y){y.focus();return}ce.set(u,!0)}},[s,f.onFocus]),onKeyDown:P.useCallback(d=>{if(!s&&!A.isComposing&&ne(u,d.target)&&!se(d,f.onKeyDown)){var{nativeEvent:y}=d,{selection:m}=u,T=u.children[m!==null?m.focus.path[0]:0],R=sn(N.string(T))==="rtl";if(te.isRedo(y)){d.preventDefault();var M=u;typeof M.redo=="function"&&M.redo();return}if(te.isUndo(y)){d.preventDefault();var _=u;typeof _.undo=="function"&&_.undo();return}if(te.isMoveLineBackward(y)){d.preventDefault(),D.move(u,{unit:"line",reverse:!0});return}if(te.isMoveLineForward(y)){d.preventDefault(),D.move(u,{unit:"line"});return}if(te.isExtendLineBackward(y)){d.preventDefault(),D.move(u,{unit:"line",edge:"focus",reverse:!0});return}if(te.isExtendLineForward(y)){d.preventDefault(),D.move(u,{unit:"line",edge:"focus"});return}if(te.isMoveBackward(y)){d.preventDefault(),m&&S.isCollapsed(m)?D.move(u,{reverse:!R}):D.collapse(u,{edge:"start"});return}if(te.isMoveForward(y)){d.preventDefault(),m&&S.isCollapsed(m)?D.move(u,{reverse:R}):D.collapse(u,{edge:"end"});return}if(te.isMoveWordBackward(y)){d.preventDefault(),m&&S.isExpanded(m)&&D.collapse(u,{edge:"focus"}),D.move(u,{unit:"word",reverse:!R});return}if(te.isMoveWordForward(y)){d.preventDefault(),m&&S.isExpanded(m)&&D.collapse(u,{edge:"focus"}),D.move(u,{unit:"word",reverse:R});return}if(xe){if((Dr||xr)&&m&&(te.isDeleteBackward(y)||te.isDeleteForward(y))&&S.isCollapsed(m)){var q=N.parent(u,m.anchor.path);if(V.isElement(q)&&l.isVoid(u,q)&&l.isInline(u,q)){d.preventDefault(),D.delete(u,{unit:"block"});return}}}else{if(te.isBold(y)||te.isItalic(y)||te.isTransposeCharacter(y)){d.preventDefault();return}if(te.isSplitBlock(y)){d.preventDefault(),l.insertBreak(u);return}if(te.isDeleteBackward(y)){d.preventDefault(),m&&S.isExpanded(m)?l.deleteFragment(u,{direction:"backward"}):l.deleteBackward(u);return}if(te.isDeleteForward(y)){d.preventDefault(),m&&S.isExpanded(m)?l.deleteFragment(u,{direction:"forward"}):l.deleteForward(u);return}if(te.isDeleteLineBackward(y)){d.preventDefault(),m&&S.isExpanded(m)?l.deleteFragment(u,{direction:"backward"}):l.deleteBackward(u,{unit:"line"});return}if(te.isDeleteLineForward(y)){d.preventDefault(),m&&S.isExpanded(m)?l.deleteFragment(u,{direction:"forward"}):l.deleteForward(u,{unit:"line"});return}if(te.isDeleteWordBackward(y)){d.preventDefault(),m&&S.isExpanded(m)?l.deleteFragment(u,{direction:"backward"}):l.deleteBackward(u,{unit:"word"});return}if(te.isDeleteWordForward(y)){d.preventDefault(),m&&S.isExpanded(m)?l.deleteFragment(u,{direction:"forward"}):l.deleteForward(u,{unit:"word"});return}}}},[s,f.onKeyDown]),onPaste:P.useCallback(d=>{!s&&ne(u,d.target)&&!se(d,f.onPaste)&&(!xe||oi(d.nativeEvent))&&(d.preventDefault(),j.insertData(u,d.clipboardData))},[s,f.onPaste])}),H.createElement(hi,{decorations:F,node:u,renderElement:i,renderPlaceholder:c,renderLeaf:o,selection:u.selection}))))},Cn=e=>{var{attributes:r,children:t}=e;return H.createElement("span",Object.assign({},r),t)},Fn=()=>[],mi=(e,r)=>{var t=r.startContainer.parentElement;t.getBoundingClientRect=r.getBoundingClientRect.bind(r),un(t,{scrollMode:"if-needed"}),delete t.getBoundingClientRect},Le=(e,r)=>ke(r)&&j.hasDOMNode(e,r),ne=(e,r)=>ke(r)&&j.hasDOMNode(e,r,{editable:!0}),sr=(e,r)=>{var t=Le(e,r)&&j.toSlateNode(e,r);return l.isVoid(e,t)},se=(e,r)=>{if(!r)return!1;var t=r(e);return t??(e.isDefaultPrevented()||e.isPropagationStopped())},Sn=(e,r)=>{if(!r)return!1;var t=r(e);return t??e.defaultPrevented},wi=0;class yi{constructor(){this.id="".concat(wi++)}}var j={getWindow(e){var r=Wr.get(e);if(!r)throw new Error("Unable to find a host window element for this editor");return r},findKey(e,r){var t=Fr.get(r);return t||(t=new yi,Fr.set(r,t)),t},findPath(e,r){for(var t=[],n=r;;){var a=$r.get(n);if(a==null){if(l.isEditor(n))return t;break}var s=Lr.get(n);if(s==null)break;t.unshift(s),n=a}throw new Error("Unable to find the path for Slate node: ".concat(JSON.stringify(r)))},findDocumentOrShadowRoot(e){var r=j.toDOMNode(e,e),t=r.getRootNode();return(t instanceof Document||t instanceof ShadowRoot)&&t.getSelection!=null?t:r.ownerDocument},isFocused(e){return!!ce.get(e)},isReadOnly(e){return!!_r.get(e)},blur(e){var r=j.toDOMNode(e,e),t=j.findDocumentOrShadowRoot(e);ce.set(e,!1),t.activeElement===r&&r.blur()},focus(e){var r=j.toDOMNode(e,e),t=j.findDocumentOrShadowRoot(e);ce.set(e,!0),t.activeElement!==r&&r.focus({preventScroll:!0})},deselect(e){j.toDOMNode(e,e);var{selection:r}=e,t=j.findDocumentOrShadowRoot(e),n=t.getSelection();n&&n.rangeCount>0&&n.removeAllRanges(),r&&D.deselect(e)},hasDOMNode(e,r){var t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},{editable:n=!1}=t,a=j.toDOMNode(e,e),s;try{s=de(r)?r:r.parentElement}catch(i){if(!i.message.includes('Permission denied to access property "nodeType"'))throw i}return s?s.closest("[data-slate-editor]")===a&&(!n||s.isContentEditable||!!s.getAttribute("data-slate-zero-width")):!1},insertData(e,r){e.insertData(r)},setFragmentData(e,r){e.setFragmentData(r)},toDOMNode(e,r){var t=lr.get(e),n=l.isEditor(r)?Ke.get(e):t==null?void 0:t.get(j.findKey(e,r));if(!n)throw new Error("Cannot resolve a DOM node from Slate node: ".concat(JSON.stringify(r)));return n},toDOMPoint(e,r){var[t]=l.node(e,r.path),n=j.toDOMNode(e,t),a;l.void(e,{at:r})&&(r={path:r.path,offset:0});var s="[data-slate-string], [data-slate-zero-width]",i=Array.from(n.querySelectorAll(s)),o=0;for(var c of i){var v=c.childNodes[0];if(!(v==null||v.textContent==null)){var{length:w}=v.textContent,g=c.getAttribute("data-slate-length"),f=g==null?w:parseInt(g,10),u=o+f;if(r.offset<=u){var x=Math.min(w,Math.max(0,r.offset-o));a=[v,x];break}o=u}}if(!a)throw new Error("Cannot resolve a DOM point from Slate point: ".concat(JSON.stringify(r)));return a},toDOMRange(e,r){var{anchor:t,focus:n}=r,a=S.isBackward(r),s=j.toDOMPoint(e,t),i=S.isCollapsed(r)?s:j.toDOMPoint(e,n),o=j.getWindow(e),c=o.document.createRange(),[v,w]=a?i:s,[g,f]=a?s:i,u=de(v)?v:v.parentElement,x=!!u.getAttribute("data-slate-zero-width"),E=de(g)?g:g.parentElement,C=!!E.getAttribute("data-slate-zero-width");return c.setStart(v,x?1:w),c.setEnd(g,C?1:f),c},toSlateNode(e,r){var t=de(r)?r:r.parentElement;t&&!t.hasAttribute("data-slate-node")&&(t=t.closest("[data-slate-node]"));var n=t?Ve.get(t):null;if(!n)throw new Error("Cannot resolve a Slate node from DOM node: ".concat(t));return n},findEventRange(e,r){"nativeEvent"in r&&(r=r.nativeEvent);var{clientX:t,clientY:n,target:a}=r;if(t==null||n==null)throw new Error("Cannot resolve a Slate range from a DOM event: ".concat(r));var s=j.toSlateNode(e,r.target),i=j.findPath(e,s);if(l.isVoid(e,s)){var o=a.getBoundingClientRect(),c=e.isInline(s)?t-o.left<o.left+o.width-t:n-o.top<o.top+o.height-n,v=l.point(e,i,{edge:c?"start":"end"}),w=c?l.before(e,v):l.after(e,v);if(w){var g=l.range(e,w);return g}}var f,{document:u}=window;if(u.caretRangeFromPoint)f=u.caretRangeFromPoint(t,n);else{var x=u.caretPositionFromPoint(t,n);x&&(f=u.createRange(),f.setStart(x.offsetNode,x.offset),f.setEnd(x.offsetNode,x.offset))}if(!f)throw new Error("Cannot resolve a Slate range from a DOM event: ".concat(r));var E=j.toSlateRange(e,f,{exactMatch:!1});return E},toSlatePoint(e,r,t){var[n,a]=t?r:li(r),s=n.parentNode,i=null,o=0;if(s){var c=s.closest('[data-slate-void="true"]'),v=s.closest("[data-slate-leaf]"),w=null;if(v){i=v.closest('[data-slate-node="text"]');var g=j.getWindow(e),f=g.document.createRange();f.setStart(i,0),f.setEnd(n,a);var u=f.cloneContents(),x=[...Array.prototype.slice.call(u.querySelectorAll("[data-slate-zero-width]")),...Array.prototype.slice.call(u.querySelectorAll("[contenteditable=false]"))];x.forEach(A=>{A.parentNode.removeChild(A)}),o=u.textContent.length,w=i}else c&&(v=c.querySelector("[data-slate-leaf]"),v?(i=v.closest('[data-slate-node="text"]'),w=v,o=w.textContent.length,w.querySelectorAll("[data-slate-zero-width]").forEach(A=>{o-=A.textContent.length})):o=1);w&&o===w.textContent.length&&s.hasAttribute("data-slate-zero-width")&&o--}if(!i){if(t)return null;throw new Error("Cannot resolve a Slate point from DOM point: ".concat(r))}var E=j.toSlateNode(e,i),C=j.findPath(e,E);return{path:C,offset:o}},toSlateRange(e,r,t){var{exactMatch:n}=t,a=Nt(r)?r.anchorNode:r.startContainer,s,i,o,c,v;if(a)if(Nt(r)){if(s=r.anchorNode,i=r.anchorOffset,o=r.focusNode,c=r.focusOffset,Dr&&s&&o&&s.nodeType!==o.nodeType&&r.anchorOffset===0&&r.focusOffset===0&&o.nodeValue==null){var w=s.parentNode,g=w.closest('[data-slate-node="element"]');if(g){var{childElementCount:f}=g;if(f===1)o=s,c=o.length;else if(f>1){var u=g.lastElementChild,x=document.createNodeIterator(u,NodeFilter.SHOW_TEXT);o=x.nextNode(),c=o.length}}}Dr&&ui()?v=r.anchorNode===r.focusNode&&r.anchorOffset===r.focusOffset:v=r.isCollapsed}else s=r.startContainer,i=r.startOffset,o=r.endContainer,c=r.endOffset,v=r.collapsed;if(s==null||o==null||i==null||c==null)throw new Error("Cannot resolve a Slate range from DOM range: ".concat(r));var E=j.toSlatePoint(e,[s,i],n);if(!E)return null;var C=v?E:j.toSlatePoint(e,[o,c],n);return C?{anchor:E,focus:C}:null},hasRange(e,r){var{anchor:t,focus:n}=r;return l.hasPath(e,t.path)&&l.hasPath(e,n.path)}};function bi(e,r){for(var t=Math.min(e.length,r.length),n=0;n<t;n++)if(e.charAt(n)!==r.charAt(n))return n;return e.length!==r.length?t:null}function xi(e,r,t){for(var n=e.length,a=r.length,s=Math.min(n,a,t),i=0;i<s;i++){var o=e.charAt(n-i-1),c=r.charAt(a-i-1);if(o!==c)return i}return e.length!==r.length?s:null}function Ei(e,r){if(e===r)return null;var t=bi(e,r);if(t===null)return null;var n=Math.min(e.length-t,r.length-t),a=xi(e,r,n);return a===null?null:{start:t,end:a}}function It(e,r){return e.slice(r.start,e.length-r.end)}function Oi(e,r){if(e===void 0||r===void 0)return null;var t=Ei(e,r);if(t==null)return null;var n=It(r,t),a=It(e,t);return{start:t.start,end:e.length-t.end,insertText:n,removeText:a}}function ki(e){return e.reduce((r,t)=>{var{text:n}=t;return"".concat(r).concat(n.insertText)},"")}function Ci(e,r){var t=j.toSlateNode(e,r);if(B.isText(t)){var n=t.text,a=r.textContent;if(a.endsWith(`
`)&&(a=a.slice(0,a.length-1)),a!==n){var s=Oi(n,a);if(s!==null){var i=j.findPath(e,t);return{text:s,path:i}}}}}function Fi(e,r,t){var{path:n,text:a}=t,s={anchor:{path:n,offset:a.start},focus:{path:n,offset:a.end}};if(!r||!S.isCollapsed(r))return s;var{insertText:i,removeText:o}=a,c=i.length===1||o.length===1;if(c&&p.equals(r.anchor.path,n)){var[v]=Array.from(l.nodes(e,{at:r,match:B.isText}));if(v){var[w]=v,{anchor:g}=r,f=w.text[g.offset-1],u=w.text[g.offset];if(i.length===1&&i===u)return r;if(o.length===1&&o===f)return{anchor:{path:n,offset:g.offset-1},focus:{path:n,offset:g.offset}}}}return s}function Si(e,r){var t=[],n=[],a=[],s=[];return r.forEach(i=>{switch(i.type){case"childList":{i.addedNodes.length&&i.addedNodes.forEach(v=>{t.push(v)}),i.removedNodes.forEach(v=>{n.push(v)});break}case"characterData":{s.push(i);var{parentNode:o}=i.target;if(!o)return;var c=Ci(e,o);if(!c||a.some(v=>{var{path:w}=v;return p.equals(w,c.path)}))return;a.push(c)}}}),{addedNodes:t,removedNodes:n,insertedText:a,characterDataMutations:s}}var Ai=(e,r)=>{var{addedNodes:t}=r,{selection:n}=e,a=n?N.parent(e,n.anchor.path):null,s=a?j.toDOMNode(e,a):null;return s?t.some(i=>i instanceof HTMLElement&&i.tagName===(s==null?void 0:s.tagName)):!1},Di=(e,r)=>{var{removedNodes:t}=r;return t.length>0},Pi=(e,r)=>{var{selection:t}=e,{removedNodes:n}=r;return t?S.isExpanded(t)&&n.length>0:!1},Ti=(e,r)=>{var{insertedText:t}=r;return t.length>0},ji=(e,r)=>{var{addedNodes:t,characterDataMutations:n,removedNodes:a}=r;return a.length>0&&t.length===0&&n.length>0};function ze(e){try{var r=Ar.get(e);r&&r()}catch(t){console.error(t)}}function Lt(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),t.push.apply(t,n)}return t}function Ri(e){for(var r=1;r<arguments.length;r++){var t=arguments[r]!=null?arguments[r]:{};r%2?Lt(Object(t),!0).forEach(function(n){Ir(e,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):Lt(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})}return e}class Ni{constructor(r){this.editor=r,this.flush=t=>{try{this.reconcileMutations(t)}catch(n){console.error(n),ze(this.editor)}},this.reconcileMutations=t=>{var n=Si(this.editor,t),{insertedText:a,removedNodes:s}=n;if(Pi(this.editor,n)){var i=ki(a);this.replaceExpandedSelection(i)}else Ai(this.editor,n)?this.insertBreak():ji(this.editor,n)?this.removeLeafNodes(s):Di(this.editor,n)?this.deleteBackward():Ti(this.editor,n)&&this.insertText(a)},this.insertText=t=>{var{selection:n,marks:a}=this.editor;t.forEach(s=>{var i=s.text.insertText,o=Fi(this.editor,n,s);if(a){var c=Ri({text:i},a);D.insertNodes(this.editor,c,{match:B.isText,at:o,select:!0}),this.editor.marks=null}else D.insertText(this.editor,i,{at:o})})},this.insertBreak=()=>{var{selection:t}=this.editor;l.insertBreak(this.editor),ze(this.editor),t&&setTimeout(()=>{this.editor.selection&&S.equals(t,this.editor.selection)&&D.move(this.editor)},100)},this.replaceExpandedSelection=t=>{l.deleteFragment(this.editor),t.length&&l.insertText(this.editor,t),ze(this.editor)},this.deleteBackward=()=>{l.deleteBackward(this.editor),j.focus(this.editor),ze(this.editor)},this.removeLeafNodes=t=>{for(var n of t){var a=j.toSlateNode(this.editor,n);if(a){var s=j.findPath(this.editor,a);D.delete(this.editor,{at:s}),ze(this.editor)}}},this.editor=r}}function Bi(e,r,t){var[n]=P.useState(()=>new MutationObserver(r));ve(()=>{n.disconnect()}),P.useEffect(()=>{if(!e.current)throw new Error("Failed to attach MutationObserver, `node` is undefined");return n.observe(e.current,t),n.disconnect.bind(n)})}function Mi(){var e=je(),r=P.useRef(!1),t=P.useRef(null),n=P.useCallback(()=>{if(r.current===!1){var a=j.getWindow(e);r.current=!0,t.current&&a.cancelAnimationFrame(t.current),t.current=a.requestAnimationFrame(()=>{r.current=!1,t.current=null})}},[]);return P.useEffect(()=>{r.current&&(r.current=!1)}),{receivedUserInput:r,onUserInput:n}}var Ii={childList:!0,characterData:!0,characterDataOldValue:!0,subtree:!0};function Li(e){var r=je(),[t]=P.useState(()=>new Ni(r)),{receivedUserInput:n,onUserInput:a}=Mi(),s=P.useRef(null),i=P.useRef(!1),o=P.useCallback(c=>{n.current&&(i.current=!0,t.flush(c),s.current&&clearTimeout(s.current),s.current=setTimeout(()=>{i.current=!1,s.current=null},250))},[]);return Bi(e,o,Ii),{isReconciling:i,onUserInput:a}}var $i=["autoFocus","decorate","onDOMBeforeInput","placeholder","readOnly","renderElement","renderLeaf","renderPlaceholder","style","as"];function $t(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),t.push.apply(t,n)}return t}function Wi(e){for(var r=1;r<arguments.length;r++){var t=arguments[r]!=null?arguments[r]:{};r%2?$t(Object(t),!0).forEach(function(n){Ir(e,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):$t(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})}return e}var _i=e=>{var{autoFocus:r,decorate:t=Fn,onDOMBeforeInput:n,placeholder:a,readOnly:s=!1,renderElement:i,renderLeaf:o,renderPlaceholder:c=d=>H.createElement(Cn,Object.assign({},d)),style:v={},as:w="div"}=e,g=He(e,$i),f=yn(),u=P.useRef(null),x=Li(u);_r.set(f,s);var E=P.useMemo(()=>({isUpdatingSelection:!1,latestElement:null}),[]),[C,A]=P.useState(0),h=P.useCallback(()=>{A(d=>d+1)},[C]);ve(()=>{var d;u.current&&(d=ur(u.current))?(Wr.set(f,d),Ke.set(f,u.current),Oe.set(f,u.current),Ve.set(u.current,f),Ar.set(f,h)):(Oe.delete(f),Ar.delete(f));try{var{selection:y}=f,m=j.findDocumentOrShadowRoot(f),T=m.getSelection();if(!T||!j.isFocused(f))return;var R=T.type!=="None";if(!y&&!R)return;var M=Ke.get(f),_=!1;if(M.contains(T.anchorNode)&&M.contains(T.focusNode)&&(_=!0),R&&_&&y){var q=j.toSlateRange(f,T,{exactMatch:!0});if(q&&S.equals(q,y))return}if(y&&!j.hasRange(f,y)){f.selection=j.toSlateRange(f,T,{exactMatch:!1});return}var $=j.toDOMNode(f,f);E.isUpdatingSelection=!0;var K=y&&j.toDOMRange(f,y);if(K){S.isBackward(y)?T.setBaseAndExtent(K.endContainer,K.endOffset,K.startContainer,K.startOffset):T.setBaseAndExtent(K.startContainer,K.startOffset,K.endContainer,K.endOffset);var Q=K.startContainer.parentElement;Q.getBoundingClientRect=K.getBoundingClientRect.bind(K),un(Q,{scrollMode:"if-needed",boundary:$}),delete Q.getBoundingClientRect}else T.removeAllRanges();setTimeout(()=>{E.isUpdatingSelection=!1})}catch{E.isUpdatingSelection=!1}}),P.useEffect(()=>{u.current&&r&&u.current.focus()},[r]);var b=P.useCallback(d=>{!s&&ne(f,d.target)&&!Sn(d,n)&&x.onUserInput()},[s,n]);ve(()=>{var d=u.current;return d==null||d.addEventListener("beforeinput",b),()=>d==null?void 0:d.removeEventListener("beforeinput",b)},[C,n]);var k=P.useCallback(on(()=>{try{if(!s&&!E.isUpdatingSelection&&!x.isReconciling.current){var d=j.findDocumentOrShadowRoot(f),{activeElement:y}=d,m=j.toDOMNode(f,f),T=d.getSelection();if(y===m?(E.latestElement=y,ce.set(f,!0)):ce.delete(f),!T)return D.deselect(f);var{anchorNode:R,focusNode:M}=T,_=ne(f,R)||sr(f,R),q=ne(f,M)||sr(f,M);if(_&&q){var $=j.toSlateRange(f,T,{exactMatch:!1});D.select(f,$)}else D.deselect(f)}}catch{}},100),[s]);ve(()=>{var d=j.getWindow(f);return d.document.addEventListener("selectionchange",k),()=>{d.document.removeEventListener("selectionchange",k)}});var F=t([f,[]]);if(a&&f.children.length===1&&Array.from(N.texts(f)).length===1&&N.string(f)===""){var O=l.start(f,[]);F.push({[Te]:!0,placeholder:a,anchor:O,focus:O})}return H.createElement(Hr.Provider,{value:s},H.createElement(zr.Provider,{value:t},H.createElement(w,Object.assign({key:C,role:s?void 0:"textbox"},g,{spellCheck:g.spellCheck,autoCorrect:g.autoCorrect,autoCapitalize:g.autoCapitalize,"data-slate-editor":!0,"data-slate-node":"value",contentEditable:s?void 0:!0,suppressContentEditableWarning:!0,ref:u,style:Wi({position:"relative",outline:"none",whiteSpace:"pre-wrap",wordWrap:"break-word"},v),onCopy:P.useCallback(d=>{ne(f,d.target)&&!se(d,g.onCopy)&&(d.preventDefault(),j.setFragmentData(f,d.clipboardData))},[g.onCopy]),onCut:P.useCallback(d=>{if(!s&&ne(f,d.target)&&!se(d,g.onCut)){d.preventDefault(),j.setFragmentData(f,d.clipboardData);var{selection:y}=f;if(y)if(S.isExpanded(y))l.deleteFragment(f);else{var m=N.parent(f,y.anchor.path);l.isVoid(f,m)&&D.delete(f)}}},[s,g.onCut]),onFocus:P.useCallback(d=>{if(!s&&!E.isUpdatingSelection&&ne(f,d.target)&&!se(d,g.onFocus)){var y=j.findDocumentOrShadowRoot(f);E.latestElement=y.activeElement,ce.set(f,!0)}},[s,g.onFocus]),onBlur:P.useCallback(d=>{if(!(s||E.isUpdatingSelection||!ne(f,d.target)||se(d,g.onBlur))){var y=j.findDocumentOrShadowRoot(f);if(E.latestElement!==y.activeElement){var{relatedTarget:m}=d,T=j.toDOMNode(f,f);if(m!==T&&!(de(m)&&m.hasAttribute("data-slate-spacer"))){if(m!=null&&ke(m)&&j.hasDOMNode(f,m)){var R=j.toSlateNode(f,m);if(V.isElement(R)&&!f.isVoid(R))return}ce.delete(f)}}}},[s,g.onBlur]),onPaste:P.useCallback(d=>{d.clipboardData=di(d.clipboardData),ne(f,d.target)&&!se(d,g.onPaste)&&!s&&(d.preventDefault(),j.insertData(f,d.clipboardData))},[s,g.onPaste])}),qr({decorations:F,node:f,renderElement:i,renderPlaceholder:c,renderLeaf:o,selection:f.selection}))))},zi=P.createContext(!1),qi=["editor","children","onChange","value"],An=e=>{var{editor:r,children:t,onChange:n,value:a}=e,s=He(e,qi),[i,o]=P.useState(0),c=P.useMemo(()=>{if(!N.isNodeList(a))throw new Error("[Slate] value is invalid! Expected a list of elements"+"but got: ".concat(JSON.stringify(a)));if(!l.isEditor(r))throw new Error("[Slate] editor is invalid! you passed:"+"".concat(JSON.stringify(r)));return r.children=a,Object.assign(r,s),[r]},[i,a,...Object.values(s)]),v=P.useCallback(()=>{n(r.children),o(i+1)},[i,n]);Sr.set(r,v),P.useEffect(()=>()=>{Sr.set(r,()=>{})},[]);var[w,g]=P.useState(j.isFocused(r));return P.useEffect(()=>{g(j.isFocused(r))}),ve(()=>{var f=()=>g(j.isFocused(r));return document.addEventListener("focus",f,!0),()=>document.removeEventListener("focus",f,!0)},[]),ve(()=>{var f=()=>g(j.isFocused(r));return document.addEventListener("blur",f,!0),()=>document.removeEventListener("blur",f,!0)},[]),H.createElement(wn.Provider,{value:c},H.createElement(pn.Provider,{value:r},H.createElement(zi.Provider,{value:w},t)))},Wt=(e,r)=>{var t=(r.top+r.bottom)/2;return e.top<=t&&e.bottom>=t},_t=(e,r,t)=>{var n=j.toDOMRange(e,r).getBoundingClientRect(),a=j.toDOMRange(e,t).getBoundingClientRect();return Wt(n,a)&&Wt(a,n)},Hi=(e,r)=>{var t=l.range(e,S.end(r)),n=Array.from(l.positions(e,{at:r})),a=0,s=n.length,i=Math.floor(s/2);if(_t(e,l.range(e,n[a]),t))return l.range(e,n[a],t);if(n.length<2)return l.range(e,n[n.length-1],t);for(;i!==n.length&&i!==a;)_t(e,l.range(e,n[i]),t)?s=i:a=i,i=Math.floor((a+s)/2);return l.range(e,n[s],t)},Dn=e=>{var r=e,{apply:t,onChange:n,deleteBackward:a}=r;return lr.set(r,new WeakMap),r.deleteBackward=s=>{if(s!=="line")return a(s);if(e.selection&&S.isCollapsed(e.selection)){var i=l.above(e,{match:w=>l.isBlock(e,w),at:e.selection});if(i){var[,o]=i,c=l.range(e,o,e.selection.anchor),v=Hi(r,c);S.isCollapsed(v)||D.delete(e,{at:v})}}},r.apply=s=>{if(s.type!=="insert_text"&&(nr.set(e,!1),kn(e)),nr.get(e)){var i=ar.get(e);i?i.push(s):ar.set(e,[s]);return}var o=[];switch(s.type){case"insert_text":case"remove_text":case"set_node":{for(var[c,v]of l.levels(r,{at:s.path})){var w=j.findKey(r,c);o.push([v,w])}break}case"insert_node":case"remove_node":case"merge_node":case"split_node":{for(var[g,f]of l.levels(r,{at:p.parent(s.path)})){var u=j.findKey(r,g);o.push([f,u])}break}case"move_node":{for(var[x,E]of l.levels(r,{at:p.common(p.parent(s.path),p.parent(s.newPath))})){var C=j.findKey(r,x);o.push([E,C])}break}}t(s);for(var[A,h]of o){var[b]=l.node(r,A);Fr.set(b,h)}},r.setFragmentData=s=>{var{selection:i}=r;if(i){var[o,c]=S.edges(i),v=l.void(r,{at:o.path}),w=l.void(r,{at:c.path});if(!(S.isCollapsed(i)&&!v)){var g=j.toDOMRange(r,i),f=g.cloneContents(),u=f.childNodes[0];if(f.childNodes.forEach(O=>{O.textContent&&O.textContent.trim()!==""&&(u=O)}),w){var[x]=w,E=g.cloneRange(),C=j.toDOMNode(r,x);E.setEndAfter(C),f=E.cloneContents()}if(v&&(u=f.querySelector("[data-slate-spacer]")),Array.from(f.querySelectorAll("[data-slate-zero-width]")).forEach(O=>{var d=O.getAttribute("data-slate-zero-width")==="n";O.textContent=d?`
`:""}),bn(u)){var A=document.createElement("span");A.style.whiteSpace="pre",A.appendChild(u),f.appendChild(A),u=A}var h=r.getFragment(),b=JSON.stringify(h),k=window.btoa(encodeURIComponent(b));u.setAttribute("data-slate-fragment",k),s.setData("application/x-slate-fragment",k);var F=document.createElement("div");return F.appendChild(f),F.setAttribute("hidden","true"),document.body.appendChild(F),s.setData("text/html",F.innerHTML),s.setData("text/plain",En(F)),document.body.removeChild(F),s}}},r.insertData=s=>{var i=s.getData("application/x-slate-fragment")||On(s);if(i){var o=decodeURIComponent(window.atob(i)),c=JSON.parse(o);r.insertFragment(c);return}var v=s.getData("text/plain");if(v){var w=v.split(/\r\n|\r|\n/),g=!1;for(var f of w)g&&D.splitNodes(r,{always:!0}),r.insertText(f),g=!0}},r.onChange=()=>{ia.unstable_batchedUpdates(()=>{var s=Sr.get(r);s&&s(),n()})},r},Pn=_s?_i:pi;const Ki=Ce()(e=>({mentionSpan:{color:e.palette.primary.main,"&.selected":{border:`2px solid ${e.palette.info.light}`,borderRadius:e.shape.borderRadius}}})),Tn=({attributes:e,children:r,element:t,readOnly:n})=>{const{classes:a,cx:s}=Ki(),i=t,o=ri();return L.jsxs(oa,{...e,contentEditable:!1,app:la.APP_HRADMIN,className:s(a.mentionSpan,o&&"selected"),to:n?`/company/people/${i.id}/profile/social`:"",children:["@",i.character,r]})},Vi=Ce()(e=>({coloredText:{color:e.palette.primary.main},boldText:{fontWeight:"bold"},italicText:{fontStyle:"italic"}})),jn=e=>{const{classes:r,cx:t}=Vi();return L.jsx("span",{...e.attributes,className:t(e.leaf.bold&&r.boldText,(e.leaf.hashtag||e.leaf.link)&&r.coloredText,e.leaf.italic&&r.italicText),children:e.children})},Rn=/https?:\/\/(www\.)?[-a-zA-Z0-9@:%._\\+~#=]{1,256}\.[a-zA-Z0-9()]{1,6}\b([-a-zA-Z0-9()!@:%_\\+.~#?&\\/\\/=]*)/,Nn=/(([^<>()[]\\.,;:s@"]+(.[^<>()[]\\.,;:s@"]+)*)|(".+"))@(([[0-9]{1,3}.[0-9]{1,3}.[0-9]{1,3}.[0-9]{1,3}])|(([a-zA-Z-0-9]+.)+[a-zA-Z]{2,}))?/,Ui=/@[0-9a-fA-F-]{36}/,Gi=/\+(.*?)\+/,Zi=/_[a-zA-Z0-9 .@!$%\-&:()]+_/,Bn=e=>{const{insertData:r,isInline:t,normalizeNode:n}=e;return e.isInline=a=>a.type==="link"||a.type==="email"?!0:t(a),e.normalizeNode=a=>{const[s,i]=a;if(V.isElement(s)&&(s.type==="link"||s.type==="email")&&s.children.length>0){const o=s.children[0].text;if(s.type==="link"&&!qt(o)){D.unwrapNodes(e,{at:i});return}else if(s.type==="email"&&!Ht(o)){D.unwrapNodes(e,{at:i});return}}n(a)},e.insertData=a=>{const s=a.getData("text/plain");s&&qt(s)?zt(e,s,"link"):s&&Ht(s)?zt(e,s,"email"):r(a)},e},zt=(e,r,t)=>{Ji(e,t)&&Yi(e,t);const{selection:n}=e,a=n&&S.isCollapsed(n);let s={type:t,children:a?[{text:r}]:[]};a?D.insertNodes(e,s):(D.wrapNodes(e,s,{split:!0}),D.collapse(e,{edge:"end"}))},Yi=(e,r)=>{D.unwrapNodes(e,{match:t=>!l.isEditor(t)&&V.isElement(t)&&t.type===r})},Ji=(e,r)=>{const[t]=l.nodes(e,{match:n=>!l.isEditor(n)&&V.isElement(n)&&n.type===r});return!!t},qt=e=>!!e&&Rn.test(e),Ht=e=>!!e&&Nn.test(e),Mn=e=>{const{isInline:r,isVoid:t}=e;return e.isInline=n=>n.type==="mention"?!0:r(n),e.isVoid=n=>n.type==="mention"?!0:t(n),e},Xi=(e,r,t)=>{const n={type:"mention",character:r,id:t,children:[{text:""}]};D.insertNodes(e,n),D.move(e)};function In(e,r,t){return r in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}var Ln=new WeakMap,$n=new WeakMap;class Kr{}class fr extends Kr{constructor(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};super();var{offset:t,path:n}=r;this.offset=t,this.path=n}}class cr extends Kr{constructor(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};super();var{offset:t,path:n}=r;this.offset=t,this.path=n}}var Qi=(e,r)=>{var t=e.text.length;Ln.set(e,[t,r])},eo=e=>Ln.get(e),ro=(e,r)=>{var t=e.text.length;$n.set(e,[t,r])},to=e=>$n.get(e);function Kt(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),t.push.apply(t,n)}return t}function Pr(e){for(var r=1;r<arguments.length;r++){var t=arguments[r]!=null?arguments[r]:{};r%2?Kt(Object(t),!0).forEach(function(n){In(e,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):Kt(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})}return e}var rr=new WeakSet,dr=e=>{var r=[],t=a=>{if(a!=null){var s=r[r.length-1];if(typeof a=="string"){var i={text:a};rr.add(i),a=i}if(B.isText(a)){var o=a;B.isText(s)&&rr.has(s)&&rr.has(o)&&B.equals(s,o,{loose:!0})?s.text+=o.text:r.push(o)}else if(V.isElement(a))r.push(a);else if(a instanceof Kr){var c=r[r.length-1];B.isText(c)||(t(""),c=r[r.length-1]),a instanceof fr?Qi(c,a):a instanceof cr&&ro(c,a)}else throw new Error("Unexpected hyperscript child object: ".concat(a))}};for(var n of e.flat(1/0))t(n);return r};function no(e,r,t){return new fr(r)}function ao(e,r,t){return[new fr(r),new cr(r)]}function Wn(e,r,t){return Pr(Pr({},r),{},{children:dr(t)})}function so(e,r,t){return new cr(r)}function io(e,r,t){return dr(t)}function oo(e,r,t){var n=t.find(s=>s instanceof fr),a=t.find(s=>s instanceof cr);if(!n||n.offset==null||n.path==null)throw new Error("The <selection> hyperscript tag must have an <anchor> tag as a child with `path` and `offset` attributes defined.");if(!a||a.offset==null||a.path==null)throw new Error("The <selection> hyperscript tag must have a <focus> tag as a child with `path` and `offset` attributes defined.");return Pr({anchor:{offset:n.offset,path:n.path},focus:{offset:a.offset,path:a.path}},r)}function lo(e,r,t){var n=dr(t);if(n.length>1)throw new Error("The <text> hyperscript tag must only contain a single node's worth of children.");var[a]=n;if(a==null&&(a={text:""}),!B.isText(a))throw new Error(`
    The <text> hyperscript tag can only contain text content as children.`);return rr.delete(a),Object.assign(a,r),a}function uo(e,r,t){var n=[],a;for(var s of t)S.isRange(s)?a=s:n.push(s);var i=dr(n),o={},c=Rr();Object.assign(c,r),c.children=i;for(var[v,w]of N.texts(c)){var g=eo(v),f=to(v);if(g!=null){var[u]=g;o.anchor={path:w,offset:u}}if(f!=null){var[x]=f;o.focus={path:w,offset:x}}}if(o.anchor&&!o.focus)throw new Error("Slate hyperscript ranges must have both `<anchor />` and `<focus />` defined if one is defined, but you only defined `<anchor />`. For collapsed selections, use `<cursor />` instead.");if(!o.anchor&&o.focus)throw new Error("Slate hyperscript ranges must have both `<anchor />` and `<focus />` defined if one is defined, but you only defined `<focus />`. For collapsed selections, use `<cursor />` instead.");return a!=null?c.selection=a:S.isRange(o)&&(c.selection=o),c}function Vt(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),t.push.apply(t,n)}return t}function qe(e){for(var r=1;r<arguments.length;r++){var t=arguments[r]!=null?arguments[r]:{};r%2?Vt(Object(t),!0).forEach(function(n){In(e,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):Vt(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})}return e}var fo={anchor:no,cursor:ao,editor:uo,element:Wn,focus:so,fragment:io,selection:oo,text:lo},co=function(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},{elements:t={}}=r,n=go(t),a=qe(qe(qe({},fo),n),r.creators),s=vo(a);return s},vo=e=>{var r=function(n,a){for(var s=arguments.length,i=new Array(s>2?s-2:0),o=2;o<s;o++)i[o-2]=arguments[o];var c=e[n];if(!c)throw new Error("No hyperscript creator found for tag: <".concat(n,">"));a==null&&(a={}),oe(a)||(i=[a].concat(i),a={}),i=i.filter(w=>!!w).flat();var v=c(n,a,i);return v};return r},go=e=>{var r={},t=function(s){var i=e[s];if(typeof i!="object")throw new Error("Properties specified for a hyperscript shorthand should be an object, but for the custom element <".concat(s,">  tag you passed: ").concat(i));r[s]=(o,c,v)=>Wn("element",qe(qe({},i),c),v)};for(var n in e)t(n);return r},Pe=co();const ho=new RegExp(Nn,"g"),po=new RegExp(Rn,"g"),mo=new RegExp(Ui,"g"),wo=new RegExp(Gi,"g"),yo=new RegExp(Zi,"g"),Tr=(e,r)=>e===""?[{type:"paragraph",children:[{text:""}]}]:Cr.escape(e).split(`
`).map(t=>{if(t.trim()==="")return{type:"paragraph",children:[{text:""}]};const n=t.replace(po,'<a href="$&"></a>').replace(ho,'<email url="$&"></email>').replace(mo,'<mention id="$&"></mention>').replace(wo,"<st>$&</st>").replace(yo,"<it>$&</it>"),a=new DOMParser().parseFromString(n,"text/html");return bo(a.body,r)}),bo=(e,r)=>{const t=Array.from(e.childNodes).map(n=>_n(n,r));return Pe("element",{type:"paragraph"},t)},_n=(e,r)=>{if(e.nodeType===3)return{text:e.textContent??""};let t=Array.from(e.childNodes).map(a=>_n(a,r));t.length===0&&(t=[{text:""}]);const n=e.nodeType===1?e.getAttribute("url"):"";switch(e.nodeName){case"ST":{const a=t.length>0?t[0].text:"++";return Pe("text",{bold:!0},{text:a.substring(1,a.length-1)})}case"IT":{const a=t.length>0?t[0].text:"__";return Pe("text",{italic:!0},{text:a.substring(1,a.length-1)})}case"P":return Pe("element",{type:"paragraph"},t);case"A":return Pe("element",{type:"link"},[{text:e.getAttribute("href")}]);case"EMAIL":return Pe("element",{type:"email"},[{text:n}]);case"MENTION":{const s=(e.nodeType===1?e.getAttribute("id")??"@":"@").substring(1),i=s?r[s]:"";return Pe("element",{type:"mention",id:s,character:i},t)}default:return{text:e.textContent??""}}};var zn={exports:{}};(function(e){var r=typeof window<"u"?window:typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope?self:{};/**
 * Prism: Lightweight, robust, elegant syntax highlighting
 *
 * @license MIT <https://opensource.org/licenses/MIT>
 * @author Lea Verou <https://lea.verou.me>
 * @namespace
 * @public
 */var t=function(n){var a=/(?:^|\s)lang(?:uage)?-([\w-]+)(?=\s|$)/i,s=0,i={},o={manual:n.Prism&&n.Prism.manual,disableWorkerMessageHandler:n.Prism&&n.Prism.disableWorkerMessageHandler,util:{encode:function h(b){return b instanceof c?new c(b.type,h(b.content),b.alias):Array.isArray(b)?b.map(h):b.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/\u00a0/g," ")},type:function(h){return Object.prototype.toString.call(h).slice(8,-1)},objId:function(h){return h.__id||Object.defineProperty(h,"__id",{value:++s}),h.__id},clone:function h(b,k){k=k||{};var F,O;switch(o.util.type(b)){case"Object":if(O=o.util.objId(b),k[O])return k[O];F={},k[O]=F;for(var d in b)b.hasOwnProperty(d)&&(F[d]=h(b[d],k));return F;case"Array":return O=o.util.objId(b),k[O]?k[O]:(F=[],k[O]=F,b.forEach(function(y,m){F[m]=h(y,k)}),F);default:return b}},getLanguage:function(h){for(;h;){var b=a.exec(h.className);if(b)return b[1].toLowerCase();h=h.parentElement}return"none"},setLanguage:function(h,b){h.className=h.className.replace(RegExp(a,"gi"),""),h.classList.add("language-"+b)},currentScript:function(){if(typeof document>"u")return null;if("currentScript"in document&&1<2)return document.currentScript;try{throw new Error}catch(F){var h=(/at [^(\r\n]*\((.*):[^:]+:[^:]+\)$/i.exec(F.stack)||[])[1];if(h){var b=document.getElementsByTagName("script");for(var k in b)if(b[k].src==h)return b[k]}return null}},isActive:function(h,b,k){for(var F="no-"+b;h;){var O=h.classList;if(O.contains(b))return!0;if(O.contains(F))return!1;h=h.parentElement}return!!k}},languages:{plain:i,plaintext:i,text:i,txt:i,extend:function(h,b){var k=o.util.clone(o.languages[h]);for(var F in b)k[F]=b[F];return k},insertBefore:function(h,b,k,F){F=F||o.languages;var O=F[h],d={};for(var y in O)if(O.hasOwnProperty(y)){if(y==b)for(var m in k)k.hasOwnProperty(m)&&(d[m]=k[m]);k.hasOwnProperty(y)||(d[y]=O[y])}var T=F[h];return F[h]=d,o.languages.DFS(o.languages,function(R,M){M===T&&R!=h&&(this[R]=d)}),d},DFS:function h(b,k,F,O){O=O||{};var d=o.util.objId;for(var y in b)if(b.hasOwnProperty(y)){k.call(b,y,b[y],F||y);var m=b[y],T=o.util.type(m);T==="Object"&&!O[d(m)]?(O[d(m)]=!0,h(m,k,null,O)):T==="Array"&&!O[d(m)]&&(O[d(m)]=!0,h(m,k,y,O))}}},plugins:{},highlightAll:function(h,b){o.highlightAllUnder(document,h,b)},highlightAllUnder:function(h,b,k){var F={callback:k,container:h,selector:'code[class*="language-"], [class*="language-"] code, code[class*="lang-"], [class*="lang-"] code'};o.hooks.run("before-highlightall",F),F.elements=Array.prototype.slice.apply(F.container.querySelectorAll(F.selector)),o.hooks.run("before-all-elements-highlight",F);for(var O=0,d;d=F.elements[O++];)o.highlightElement(d,b===!0,F.callback)},highlightElement:function(h,b,k){var F=o.util.getLanguage(h),O=o.languages[F];o.util.setLanguage(h,F);var d=h.parentElement;d&&d.nodeName.toLowerCase()==="pre"&&o.util.setLanguage(d,F);var y=h.textContent,m={element:h,language:F,grammar:O,code:y};function T(M){m.highlightedCode=M,o.hooks.run("before-insert",m),m.element.innerHTML=m.highlightedCode,o.hooks.run("after-highlight",m),o.hooks.run("complete",m),k&&k.call(m.element)}if(o.hooks.run("before-sanity-check",m),d=m.element.parentElement,d&&d.nodeName.toLowerCase()==="pre"&&!d.hasAttribute("tabindex")&&d.setAttribute("tabindex","0"),!m.code){o.hooks.run("complete",m),k&&k.call(m.element);return}if(o.hooks.run("before-highlight",m),!m.grammar){T(o.util.encode(m.code));return}if(b&&n.Worker){var R=new Worker(o.filename);R.onmessage=function(M){T(M.data)},R.postMessage(JSON.stringify({language:m.language,code:m.code,immediateClose:!0}))}else T(o.highlight(m.code,m.grammar,m.language))},highlight:function(h,b,k){var F={code:h,grammar:b,language:k};if(o.hooks.run("before-tokenize",F),!F.grammar)throw new Error('The language "'+F.language+'" has no grammar.');return F.tokens=o.tokenize(F.code,F.grammar),o.hooks.run("after-tokenize",F),c.stringify(o.util.encode(F.tokens),F.language)},tokenize:function(h,b){var k=b.rest;if(k){for(var F in k)b[F]=k[F];delete b.rest}var O=new g;return f(O,O.head,h),w(h,O,b,O.head,0),x(O)},hooks:{all:{},add:function(h,b){var k=o.hooks.all;k[h]=k[h]||[],k[h].push(b)},run:function(h,b){var k=o.hooks.all[h];if(!(!k||!k.length))for(var F=0,O;O=k[F++];)O(b)}},Token:c};n.Prism=o;function c(h,b,k,F){this.type=h,this.content=b,this.alias=k,this.length=(F||"").length|0}c.stringify=function h(b,k){if(typeof b=="string")return b;if(Array.isArray(b)){var F="";return b.forEach(function(T){F+=h(T,k)}),F}var O={type:b.type,content:h(b.content,k),tag:"span",classes:["token",b.type],attributes:{},language:k},d=b.alias;d&&(Array.isArray(d)?Array.prototype.push.apply(O.classes,d):O.classes.push(d)),o.hooks.run("wrap",O);var y="";for(var m in O.attributes)y+=" "+m+'="'+(O.attributes[m]||"").replace(/"/g,"&quot;")+'"';return"<"+O.tag+' class="'+O.classes.join(" ")+'"'+y+">"+O.content+"</"+O.tag+">"};function v(h,b,k,F){h.lastIndex=b;var O=h.exec(k);if(O&&F&&O[1]){var d=O[1].length;O.index+=d,O[0]=O[0].slice(d)}return O}function w(h,b,k,F,O,d){for(var y in k)if(!(!k.hasOwnProperty(y)||!k[y])){var m=k[y];m=Array.isArray(m)?m:[m];for(var T=0;T<m.length;++T){if(d&&d.cause==y+","+T)return;var R=m[T],M=R.inside,_=!!R.lookbehind,q=!!R.greedy,$=R.alias;if(q&&!R.pattern.global){var K=R.pattern.toString().match(/[imsuy]*$/)[0];R.pattern=RegExp(R.pattern.source,K+"g")}for(var Q=R.pattern||R,U=F.next,G=O;U!==b.tail&&!(d&&G>=d.reach);G+=U.value.length,U=U.next){var I=U.value;if(b.length>h.length)return;if(!(I instanceof c)){var J=1,z;if(q){if(z=v(Q,G,h,_),!z||z.index>=h.length)break;var X=z.index,le=z.index+z[0].length,W=G;for(W+=U.value.length;X>=W;)U=U.next,W+=U.value.length;if(W-=U.value.length,G=W,U.value instanceof c)continue;for(var Y=U;Y!==b.tail&&(W<le||typeof Y.value=="string");Y=Y.next)J++,W+=Y.value.length;J--,I=h.slice(G,W),z.index-=G}else if(z=v(Q,0,I,_),!z)continue;var X=z.index,ae=z[0],ue=I.slice(0,X),ie=I.slice(X+ae.length),fe=G+I.length;d&&fe>d.reach&&(d.reach=fe);var me=U.prev;ue&&(me=f(b,me,ue),G+=ue.length),u(b,me,J);var Ue=new c(y,M?o.tokenize(ae,M):ae,$,ae);if(U=f(b,me,Ue),ie&&f(b,U,ie),J>1){var Fe={cause:y+","+T,reach:fe};w(h,b,k,U.prev,G,Fe),d&&Fe.reach>d.reach&&(d.reach=Fe.reach)}}}}}}function g(){var h={value:null,prev:null,next:null},b={value:null,prev:h,next:null};h.next=b,this.head=h,this.tail=b,this.length=0}function f(h,b,k){var F=b.next,O={value:k,prev:b,next:F};return b.next=O,F.prev=O,h.length++,O}function u(h,b,k){for(var F=b.next,O=0;O<k&&F!==h.tail;O++)F=F.next;b.next=F,F.prev=b,h.length-=O}function x(h){for(var b=[],k=h.head.next;k!==h.tail;)b.push(k.value),k=k.next;return b}if(!n.document)return n.addEventListener&&(o.disableWorkerMessageHandler||n.addEventListener("message",function(h){var b=JSON.parse(h.data),k=b.language,F=b.code,O=b.immediateClose;n.postMessage(o.highlight(F,o.languages[k],k)),O&&n.close()},!1)),o;var E=o.util.currentScript();E&&(o.filename=E.src,E.hasAttribute("data-manual")&&(o.manual=!0));function C(){o.manual||o.highlightAll()}if(!o.manual){var A=document.readyState;A==="loading"||A==="interactive"&&E&&E.defer?document.addEventListener("DOMContentLoaded",C):window.requestAnimationFrame?window.requestAnimationFrame(C):window.setTimeout(C,16)}return o}(r);e.exports&&(e.exports=t),typeof Qr<"u"&&(Qr.Prism=t),t.languages.markup={comment:{pattern:/<!--(?:(?!<!--)[\s\S])*?-->/,greedy:!0},prolog:{pattern:/<\?[\s\S]+?\?>/,greedy:!0},doctype:{pattern:/<!DOCTYPE(?:[^>"'[\]]|"[^"]*"|'[^']*')+(?:\[(?:[^<"'\]]|"[^"]*"|'[^']*'|<(?!!--)|<!--(?:[^-]|-(?!->))*-->)*\]\s*)?>/i,greedy:!0,inside:{"internal-subset":{pattern:/(^[^\[]*\[)[\s\S]+(?=\]>$)/,lookbehind:!0,greedy:!0,inside:null},string:{pattern:/"[^"]*"|'[^']*'/,greedy:!0},punctuation:/^<!|>$|[[\]]/,"doctype-tag":/^DOCTYPE/i,name:/[^\s<>'"]+/}},cdata:{pattern:/<!\[CDATA\[[\s\S]*?\]\]>/i,greedy:!0},tag:{pattern:/<\/?(?!\d)[^\s>\/=$<%]+(?:\s(?:\s*[^\s>\/=]+(?:\s*=\s*(?:"[^"]*"|'[^']*'|[^\s'">=]+(?=[\s>]))|(?=[\s/>])))+)?\s*\/?>/,greedy:!0,inside:{tag:{pattern:/^<\/?[^\s>\/]+/,inside:{punctuation:/^<\/?/,namespace:/^[^\s>\/:]+:/}},"special-attr":[],"attr-value":{pattern:/=\s*(?:"[^"]*"|'[^']*'|[^\s'">=]+)/,inside:{punctuation:[{pattern:/^=/,alias:"attr-equals"},{pattern:/^(\s*)["']|["']$/,lookbehind:!0}]}},punctuation:/\/?>/,"attr-name":{pattern:/[^\s>\/]+/,inside:{namespace:/^[^\s>\/:]+:/}}}},entity:[{pattern:/&[\da-z]{1,8};/i,alias:"named-entity"},/&#x?[\da-f]{1,8};/i]},t.languages.markup.tag.inside["attr-value"].inside.entity=t.languages.markup.entity,t.languages.markup.doctype.inside["internal-subset"].inside=t.languages.markup,t.hooks.add("wrap",function(n){n.type==="entity"&&(n.attributes.title=n.content.replace(/&amp;/,"&"))}),Object.defineProperty(t.languages.markup.tag,"addInlined",{value:function(a,s){var i={};i["language-"+s]={pattern:/(^<!\[CDATA\[)[\s\S]+?(?=\]\]>$)/i,lookbehind:!0,inside:t.languages[s]},i.cdata=/^<!\[CDATA\[|\]\]>$/i;var o={"included-cdata":{pattern:/<!\[CDATA\[[\s\S]*?\]\]>/i,inside:i}};o["language-"+s]={pattern:/[\s\S]+/,inside:t.languages[s]};var c={};c[a]={pattern:RegExp(/(<__[^>]*>)(?:<!\[CDATA\[(?:[^\]]|\](?!\]>))*\]\]>|(?!<!\[CDATA\[)[\s\S])*?(?=<\/__>)/.source.replace(/__/g,function(){return a}),"i"),lookbehind:!0,greedy:!0,inside:o},t.languages.insertBefore("markup","cdata",c)}}),Object.defineProperty(t.languages.markup.tag,"addAttribute",{value:function(n,a){t.languages.markup.tag.inside["special-attr"].push({pattern:RegExp(/(^|["'\s])/.source+"(?:"+n+")"+/\s*=\s*(?:"[^"]*"|'[^']*'|[^\s'">=]+(?=[\s>]))/.source,"i"),lookbehind:!0,inside:{"attr-name":/^[^\s=]+/,"attr-value":{pattern:/=[\s\S]+/,inside:{value:{pattern:/(^=\s*(["']|(?!["'])))\S[\s\S]*(?=\2$)/,lookbehind:!0,alias:[a,"language-"+a],inside:t.languages[a]},punctuation:[{pattern:/^=/,alias:"attr-equals"},/"|'/]}}}})}}),t.languages.html=t.languages.markup,t.languages.mathml=t.languages.markup,t.languages.svg=t.languages.markup,t.languages.xml=t.languages.extend("markup",{}),t.languages.ssml=t.languages.xml,t.languages.atom=t.languages.xml,t.languages.rss=t.languages.xml,function(n){var a=/(?:"(?:\\(?:\r\n|[\s\S])|[^"\\\r\n])*"|'(?:\\(?:\r\n|[\s\S])|[^'\\\r\n])*')/;n.languages.css={comment:/\/\*[\s\S]*?\*\//,atrule:{pattern:RegExp("@[\\w-](?:"+/[^;{\s"']|\s+(?!\s)/.source+"|"+a.source+")*?"+/(?:;|(?=\s*\{))/.source),inside:{rule:/^@[\w-]+/,"selector-function-argument":{pattern:/(\bselector\s*\(\s*(?![\s)]))(?:[^()\s]|\s+(?![\s)])|\((?:[^()]|\([^()]*\))*\))+(?=\s*\))/,lookbehind:!0,alias:"selector"},keyword:{pattern:/(^|[^\w-])(?:and|not|only|or)(?![\w-])/,lookbehind:!0}}},url:{pattern:RegExp("\\burl\\((?:"+a.source+"|"+/(?:[^\\\r\n()"']|\\[\s\S])*/.source+")\\)","i"),greedy:!0,inside:{function:/^url/i,punctuation:/^\(|\)$/,string:{pattern:RegExp("^"+a.source+"$"),alias:"url"}}},selector:{pattern:RegExp(`(^|[{}\\s])[^{}\\s](?:[^{};"'\\s]|\\s+(?![\\s{])|`+a.source+")*(?=\\s*\\{)"),lookbehind:!0},string:{pattern:a,greedy:!0},property:{pattern:/(^|[^-\w\xA0-\uFFFF])(?!\s)[-_a-z\xA0-\uFFFF](?:(?!\s)[-\w\xA0-\uFFFF])*(?=\s*:)/i,lookbehind:!0},important:/!important\b/i,function:{pattern:/(^|[^-a-z0-9])[-a-z0-9]+(?=\()/i,lookbehind:!0},punctuation:/[(){};:,]/},n.languages.css.atrule.inside.rest=n.languages.css;var s=n.languages.markup;s&&(s.tag.addInlined("style","css"),s.tag.addAttribute("style","css"))}(t),t.languages.clike={comment:[{pattern:/(^|[^\\])\/\*[\s\S]*?(?:\*\/|$)/,lookbehind:!0,greedy:!0},{pattern:/(^|[^\\:])\/\/.*/,lookbehind:!0,greedy:!0}],string:{pattern:/(["'])(?:\\(?:\r\n|[\s\S])|(?!\1)[^\\\r\n])*\1/,greedy:!0},"class-name":{pattern:/(\b(?:class|extends|implements|instanceof|interface|new|trait)\s+|\bcatch\s+\()[\w.\\]+/i,lookbehind:!0,inside:{punctuation:/[.\\]/}},keyword:/\b(?:break|catch|continue|do|else|finally|for|function|if|in|instanceof|new|null|return|throw|try|while)\b/,boolean:/\b(?:false|true)\b/,function:/\b\w+(?=\()/,number:/\b0x[\da-f]+\b|(?:\b\d+(?:\.\d*)?|\B\.\d+)(?:e[+-]?\d+)?/i,operator:/[<>]=?|[!=]=?=?|--?|\+\+?|&&?|\|\|?|[?*/~^%]/,punctuation:/[{}[\];(),.:]/},t.languages.javascript=t.languages.extend("clike",{"class-name":[t.languages.clike["class-name"],{pattern:/(^|[^$\w\xA0-\uFFFF])(?!\s)[_$A-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\.(?:constructor|prototype))/,lookbehind:!0}],keyword:[{pattern:/((?:^|\})\s*)catch\b/,lookbehind:!0},{pattern:/(^|[^.]|\.\.\.\s*)\b(?:as|assert(?=\s*\{)|async(?=\s*(?:function\b|\(|[$\w\xA0-\uFFFF]|$))|await|break|case|class|const|continue|debugger|default|delete|do|else|enum|export|extends|finally(?=\s*(?:\{|$))|for|from(?=\s*(?:['"]|$))|function|(?:get|set)(?=\s*(?:[#\[$\w\xA0-\uFFFF]|$))|if|implements|import|in|instanceof|interface|let|new|null|of|package|private|protected|public|return|static|super|switch|this|throw|try|typeof|undefined|var|void|while|with|yield)\b/,lookbehind:!0}],function:/#?(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*(?:\.\s*(?:apply|bind|call)\s*)?\()/,number:{pattern:RegExp(/(^|[^\w$])/.source+"(?:"+(/NaN|Infinity/.source+"|"+/0[bB][01]+(?:_[01]+)*n?/.source+"|"+/0[oO][0-7]+(?:_[0-7]+)*n?/.source+"|"+/0[xX][\dA-Fa-f]+(?:_[\dA-Fa-f]+)*n?/.source+"|"+/\d+(?:_\d+)*n/.source+"|"+/(?:\d+(?:_\d+)*(?:\.(?:\d+(?:_\d+)*)?)?|\.\d+(?:_\d+)*)(?:[Ee][+-]?\d+(?:_\d+)*)?/.source)+")"+/(?![\w$])/.source),lookbehind:!0},operator:/--|\+\+|\*\*=?|=>|&&=?|\|\|=?|[!=]==|<<=?|>>>?=?|[-+*/%&|^!=<>]=?|\.{3}|\?\?=?|\?\.?|[~:]/}),t.languages.javascript["class-name"][0].pattern=/(\b(?:class|extends|implements|instanceof|interface|new)\s+)[\w.\\]+/,t.languages.insertBefore("javascript","keyword",{regex:{pattern:RegExp(/((?:^|[^$\w\xA0-\uFFFF."'\])\s]|\b(?:return|yield))\s*)/.source+/\//.source+"(?:"+/(?:\[(?:[^\]\\\r\n]|\\.)*\]|\\.|[^/\\\[\r\n])+\/[dgimyus]{0,7}/.source+"|"+/(?:\[(?:[^[\]\\\r\n]|\\.|\[(?:[^[\]\\\r\n]|\\.|\[(?:[^[\]\\\r\n]|\\.)*\])*\])*\]|\\.|[^/\\\[\r\n])+\/[dgimyus]{0,7}v[dgimyus]{0,7}/.source+")"+/(?=(?:\s|\/\*(?:[^*]|\*(?!\/))*\*\/)*(?:$|[\r\n,.;:})\]]|\/\/))/.source),lookbehind:!0,greedy:!0,inside:{"regex-source":{pattern:/^(\/)[\s\S]+(?=\/[a-z]*$)/,lookbehind:!0,alias:"language-regex",inside:t.languages.regex},"regex-delimiter":/^\/|\/$/,"regex-flags":/^[a-z]+$/}},"function-variable":{pattern:/#?(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*[=:]\s*(?:async\s*)?(?:\bfunction\b|(?:\((?:[^()]|\([^()]*\))*\)|(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*)\s*=>))/,alias:"function"},parameter:[{pattern:/(function(?:\s+(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*)?\s*\(\s*)(?!\s)(?:[^()\s]|\s+(?![\s)])|\([^()]*\))+(?=\s*\))/,lookbehind:!0,inside:t.languages.javascript},{pattern:/(^|[^$\w\xA0-\uFFFF])(?!\s)[_$a-z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*=>)/i,lookbehind:!0,inside:t.languages.javascript},{pattern:/(\(\s*)(?!\s)(?:[^()\s]|\s+(?![\s)])|\([^()]*\))+(?=\s*\)\s*=>)/,lookbehind:!0,inside:t.languages.javascript},{pattern:/((?:\b|\s|^)(?!(?:as|async|await|break|case|catch|class|const|continue|debugger|default|delete|do|else|enum|export|extends|finally|for|from|function|get|if|implements|import|in|instanceof|interface|let|new|null|of|package|private|protected|public|return|set|static|super|switch|this|throw|try|typeof|undefined|var|void|while|with|yield)(?![$\w\xA0-\uFFFF]))(?:(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*\s*)\(\s*|\]\s*\(\s*)(?!\s)(?:[^()\s]|\s+(?![\s)])|\([^()]*\))+(?=\s*\)\s*\{)/,lookbehind:!0,inside:t.languages.javascript}],constant:/\b[A-Z](?:[A-Z_]|\dx?)*\b/}),t.languages.insertBefore("javascript","string",{hashbang:{pattern:/^#!.*/,greedy:!0,alias:"comment"},"template-string":{pattern:/`(?:\\[\s\S]|\$\{(?:[^{}]|\{(?:[^{}]|\{[^}]*\})*\})+\}|(?!\$\{)[^\\`])*`/,greedy:!0,inside:{"template-punctuation":{pattern:/^`|`$/,alias:"string"},interpolation:{pattern:/((?:^|[^\\])(?:\\{2})*)\$\{(?:[^{}]|\{(?:[^{}]|\{[^}]*\})*\})+\}/,lookbehind:!0,inside:{"interpolation-punctuation":{pattern:/^\$\{|\}$/,alias:"punctuation"},rest:t.languages.javascript}},string:/[\s\S]+/}},"string-property":{pattern:/((?:^|[,{])[ \t]*)(["'])(?:\\(?:\r\n|[\s\S])|(?!\2)[^\\\r\n])*\2(?=\s*:)/m,lookbehind:!0,greedy:!0,alias:"property"}}),t.languages.insertBefore("javascript","operator",{"literal-property":{pattern:/((?:^|[,{])[ \t]*)(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*:)/m,lookbehind:!0,alias:"property"}}),t.languages.markup&&(t.languages.markup.tag.addInlined("script","javascript"),t.languages.markup.tag.addAttribute(/on(?:abort|blur|change|click|composition(?:end|start|update)|dblclick|error|focus(?:in|out)?|key(?:down|up)|load|mouse(?:down|enter|leave|move|out|over|up)|reset|resize|scroll|select|slotchange|submit|unload|wheel)/.source,"javascript")),t.languages.js=t.languages.javascript,function(){if(typeof t>"u"||typeof document>"u")return;Element.prototype.matches||(Element.prototype.matches=Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector);var n="Loading",a=function(E,C){return" Error "+E+" while fetching file: "+C},s=" Error: File does not exist or is empty",i={js:"javascript",py:"python",rb:"ruby",ps1:"powershell",psm1:"powershell",sh:"bash",bat:"batch",h:"c",tex:"latex"},o="data-src-status",c="loading",v="loaded",w="failed",g="pre[data-src]:not(["+o+'="'+v+'"]):not(['+o+'="'+c+'"])';function f(E,C,A){var h=new XMLHttpRequest;h.open("GET",E,!0),h.onreadystatechange=function(){h.readyState==4&&(h.status<400&&h.responseText?C(h.responseText):h.status>=400?A(a(h.status,h.statusText)):A(s))},h.send(null)}function u(E){var C=/^\s*(\d+)\s*(?:(,)\s*(?:(\d+)\s*)?)?$/.exec(E||"");if(C){var A=Number(C[1]),h=C[2],b=C[3];return h?b?[A,Number(b)]:[A,void 0]:[A,A]}}t.hooks.add("before-highlightall",function(E){E.selector+=", "+g}),t.hooks.add("before-sanity-check",function(E){var C=E.element;if(C.matches(g)){E.code="",C.setAttribute(o,c);var A=C.appendChild(document.createElement("CODE"));A.textContent=n;var h=C.getAttribute("data-src"),b=E.language;if(b==="none"){var k=(/\.(\w+)$/.exec(h)||[,"none"])[1];b=i[k]||k}t.util.setLanguage(A,b),t.util.setLanguage(C,b);var F=t.plugins.autoloader;F&&F.loadLanguages(b),f(h,function(O){C.setAttribute(o,v);var d=u(C.getAttribute("data-range"));if(d){var y=O.split(/\r\n?|\n/g),m=d[0],T=d[1]==null?y.length:d[1];m<0&&(m+=y.length),m=Math.max(0,Math.min(m-1,y.length)),T<0&&(T+=y.length),T=Math.max(0,Math.min(T,y.length)),O=y.slice(m,T).join(`
`),C.hasAttribute("data-start")||C.setAttribute("data-start",String(m+1))}A.textContent=O,t.highlightElement(A)},function(O){C.setAttribute(o,w),A.textContent=O})}}),t.plugins.fileHighlight={highlight:function(C){for(var A=(C||document).querySelectorAll(g),h=0,b;b=A[h++];)t.highlightElement(b)}};var x=!1;t.fileHighlight=function(){x||(console.warn("Prism.fileHighlight is deprecated. Use `Prism.plugins.fileHighlight.highlight` instead."),x=!0),t.plugins.fileHighlight.highlight.apply(this,arguments)}}()})(zn);var xo=zn.exports;const he=jr(xo);he.languages.markdown=he.languages.extend("markup",{});he.languages.insertBefore("markdown","prolog",{hashtag:{pattern:/\B#[a-zA-Z0-9]+\b/,lookbehind:!0}});const Yo=({className:e,employees:r,value:t,DefaultElement:n,additionalContent:a})=>{const s=xa(),i=P.useMemo(()=>Mn(Bn(Dn(Rr()))),[]),o=P.useMemo(()=>{const u={};return r.forEach(x=>{u[x.id]=x.fullName}),u[s.id]=ua(s),u},[s,r]),[c,v]=P.useState(t?Tr(t,o):[{type:"paragraph",children:[{text:""}]}]),w=P.useCallback(Eo,[]);P.useEffect(()=>{v(Tr(t??"",o))},[o,t]);const g=P.useCallback(u=>{const{children:x,...E}=u;switch(u.element.type){case"mention":return L.jsx(Tn,{...E,readOnly:!0,children:x});case"link":case"email":return L.jsx(en,{...E,readOnly:!0,children:x});default:return n?L.jsx(n,{...E,children:x}):L.jsx(Qt,{...E,children:x})}},[n]),f=P.useCallback(u=>{const{children:x,...E}=u;return L.jsx(jn,{...E,children:x})},[]);return L.jsx("div",{className:e,children:L.jsxs(An,{editor:i,value:c,onChange:()=>{},children:[L.jsx(Pn,{renderElement:g,renderLeaf:f,decorate:w,readOnly:!0}),a]})})},Eo=([e,r])=>{const t=[];if(!B.isText(e))return t;const n=i=>typeof i=="string"?i.length:typeof i.content=="string"?i.content.length:i.content.reduce((o,c)=>o+n(c),0),a=he.tokenize(e.text,he.languages.markdown);let s=0;for(const i of a){const o=n(i),c=s+o;typeof i!="string"&&t.push({[i.type]:!0,anchor:{path:r,offset:s},focus:{path:r,offset:c}}),s=c}return t},Oo=Ce()(e=>({emojiPickerButton:{position:"absolute",right:e.spacing(1),bottom:e.spacing(1),color:ge.grey[300],"&:hover":{color:ge.grey[800]}},popper:{zIndex:e.zIndex.modal+1}})),ko=({open:e,onClose:r,onEmojiButtonClick:t,onSelect:n})=>{const{classes:a}=Oo(),s=P.useRef(null);return L.jsxs(L.Fragment,{children:[L.jsx(fa,{ref:s,className:a.emojiPickerButton,size:"small",onClick:t,children:L.jsx(Ea,{fontSize:"x-small"})}),L.jsx(ca,{open:e,anchorEl:s.current,className:a.popper,onClose:r,children:L.jsx(Oa,{title:"Pick an emoji",emoji:"",emojiTooltip:!1,showPreview:!1,showSkinTones:!1,onSelect:n})})]})},Co=Ce()((e,{containerWidth:r})=>({mentionPopper:{zIndex:e.zIndex.modal+1,width:r},mentionPaper:{minWidth:200}})),Fo=Jt({inactive:{id:"common.inactive",defaultMessage:"Inactive"}}),So=({open:e,containerRef:r,suggestions:t,selectedIndex:n,onItemClick:a})=>{const s=(r==null?void 0:r.getBoundingClientRect().width)||0,{classes:i}=Co({containerWidth:s}),{isLocaleEn:o}=da(),c=Zt();return L.jsx(va,{open:e,anchorEl:r,className:i.mentionPopper,placement:o?"bottom-start":"bottom-end",children:L.jsx(ga,{className:i.mentionPaper,children:L.jsx(ha,{children:t&&t.map((v,w)=>L.jsxs(pa,{selected:w===n,"data-external-id":"mention-picker-list-item",onClick:g=>{g.stopPropagation(),g.preventDefault(),a==null||a(w)},children:[L.jsx(ma,{children:L.jsx(Yt,{person:{id:v.id}})}),L.jsx(wa,{primary:v.fullName,secondary:v==null?void 0:v.position}),L.jsx("div",{children:(v==null?void 0:v.isActive)===!1&&L.jsx(ya,{label:c.formatMessage(Fo.inactive),variant:"neutral"})})]},v.id))})})})},Ut=(e,r,t)=>{const n=l.before(e,r,t),a=n&&l.before(e,n),s=a&&l.range(e,a,r);return s&&l.string(e,s)},Ao=(e,r,t)=>{const n=l.after(e,r,t),a=l.range(e,r,n);return l.string(e,a)},qn=e=>e.length===1&&V.isElement(e[0])&&e[0].children.length===1&&B.isText(e[0].children[0])&&e[0].children[0].text.length===0;var Do={isHistory(e){return oe(e)&&Array.isArray(e.redos)&&Array.isArray(e.undos)&&(e.redos.length===0||Ee.isOperationList(e.redos[0]))&&(e.undos.length===0||Ee.isOperationList(e.undos[0]))}},Er=new WeakMap,Or=new WeakMap,$e={isHistoryEditor(e){return Do.isHistory(e.history)&&l.isEditor(e)},isMerging(e){return Or.get(e)},isSaving(e){return Er.get(e)},redo(e){e.redo()},undo(e){e.undo()},withoutMerging(e,r){var t=$e.isMerging(e);Or.set(e,!1),r(),Or.set(e,t)},withoutSaving(e,r){var t=$e.isSaving(e);Er.set(e,!1),r(),Er.set(e,t)}},Po=e=>{var r=e,{apply:t}=r;return r.history={undos:[],redos:[]},r.redo=()=>{var{history:n}=r,{redos:a}=n;if(a.length>0){var s=a[a.length-1];$e.withoutSaving(r,()=>{l.withoutNormalizing(r,()=>{for(var i of s)r.apply(i)})}),n.redos.pop(),n.undos.push(s)}},r.undo=()=>{var{history:n}=r,{undos:a}=n;if(a.length>0){var s=a[a.length-1];$e.withoutSaving(r,()=>{l.withoutNormalizing(r,()=>{var i=s.map(Ee.inverse).reverse();for(var o of i)r.apply(o)})}),n.redos.push(s),n.undos.pop()}},r.apply=n=>{var{operations:a,history:s}=r,{undos:i}=s,o=i[i.length-1],c=o&&o[o.length-1],v=Ro(n,c),w=$e.isSaving(r),g=$e.isMerging(r);if(w==null&&(w=jo(n)),w){if(g==null&&(o==null?g=!1:a.length!==0?g=!0:g=To(n,c)||v),o&&g)v&&o.pop(),o.push(n);else{var f=[n];i.push(f)}for(;i.length>100;)i.shift();No(n)&&(s.redos=[])}t(n)},r},To=(e,r)=>!!(e.type==="set_selection"||r&&e.type==="insert_text"&&r.type==="insert_text"&&e.offset===r.offset+r.text.length&&p.equals(e.path,r.path)||r&&e.type==="remove_text"&&r.type==="remove_text"&&e.offset+e.text.length===r.offset&&p.equals(e.path,r.path)),jo=(e,r)=>!(e.type==="set_selection"&&(e.properties==null||e.newProperties==null)),Ro=(e,r)=>!!(r&&e.type==="set_selection"&&r.type==="set_selection"),No=e=>e.type!=="set_selection";he.languages.markdown=he.languages.extend("markup",{});he.languages.insertBefore("markdown","prolog",{hashtag:{pattern:/\B#[a-zA-Z0-9]+\b/,lookbehind:!0}});const Bo=Ce()(e=>({editorContainer:{position:"relative",borderWidth:1,borderStyle:"solid",borderColor:ge.grey[300],borderRadius:e.shape.borderRadius,backgroundColor:ge.grey[0],paddingLeft:parseInt(e.spacing(1),10)+1,paddingRight:parseInt(e.spacing(1),10)+1,paddingTop:1,paddingBottom:1,"&:hover":{borderColor:ge.grey[900]},"&:focus-within":{borderWidth:2,borderColor:e.palette.primary.main,paddingLeft:e.spacing(1),paddingRight:e.spacing(1),paddingTop:0,paddingBottom:0}},editor:{paddingRight:e.spacing(2)}})),Mo=({editor:e,classes:r,readOnly:t,employees:n,placeholder:a,value:s,autoFocus:i,onChange:o,"data-external-id":c})=>{const{classes:v,cx:w}=Bo(),g=P.useRef(null),[f,u]=P.useState(),[x,E]=P.useState(),[C,A]=P.useState(""),[h,b]=P.useState(0),[k,F]=P.useState(!1),O=P.useCallback(Io,[]),d=P.useMemo(()=>qn(s),[s]),y=n.filter(I=>Cr.lowerCase(I.fullName).includes(Cr.lowerCase(C))&&!I.isDeleted).slice(0,5);P.useEffect(()=>{d&&f&&u(void 0)},[f,d]);const m=P.useCallback(I=>{const{selection:J}=e;if(J&&S.isCollapsed(J)){const[z]=S.edges(J),le=l.before(e,z,{unit:"word"}),W=Ut(e,z,{unit:"word"}),Y=le&&Ut(e,le,{unit:"character"}),X=Ao(e,z)??"",ae=W&&W.match(/^(@((\w|[\u0600-\u06FF])+)|(((\w|[\u0600-\u06FF])+)@))$/u),ue=X.match(/^(\s|$)/);if(ae&&ue&&(!Y||Y===" @"||Y==="@")){const ie=l.before(e,z,{unit:"word"}),fe=ie&&l.before(e,ie),me=fe&&l.range(e,fe,z);E(me),A(ae[1]),b(0)}}else E(void 0);o&&o(I)},[e,o]),T=I=>{(I.metaKey||I.ctrlKey)&&I.key==="b"?(I.preventDefault(),Gt(e,"bold")):(I.metaKey||I.ctrlKey)&&I.key==="i"&&(I.preventDefault(),Gt(e,"italic")),x&&(I.key==="Enter"?(I.preventDefault(),y&&q(y[h])):I.key==="ArrowDown"&&h!==4?(I.preventDefault(),b(h+1)):I.key==="ArrowUp"&&h!==0?(I.preventDefault(),b(h-1)):I.key==="Escape"&&(E(void 0),F(!1)))},R=I=>{x&&y&&(q(y[I]),b(I),K())},M=P.useCallback(I=>{const{children:J,...z}=I;switch(I.element.type){case"mention":return L.jsx(Tn,{...z,readOnly:t,children:J});case"link":case"email":return L.jsx(en,{...z,readOnly:t,children:J});default:return L.jsx(Qt,{...z,children:J})}},[t]),_=P.useCallback(I=>{const{children:J,...z}=I;return L.jsx(jn,{...z,children:J})},[]),q=P.useCallback(I=>{x&&(D.select(e,x),Xi(e,I.fullName,I.id),E(void 0))},[e,x]),$=P.useCallback(()=>{D.select(e,f??{path:[0,0],offset:0})},[f,e]),K=P.useCallback(()=>{u(e.selection)},[e.selection]),Q=P.useCallback(async I=>{F(!1),u(e.selection??void 0),await setTimeout(()=>{j.focus(e)},10),await setTimeout(()=>{D.insertText(e,I.native)},10)},[e]),U=P.useCallback(()=>{F(!0)},[]),G=P.useCallback(()=>{F(!1)},[]);return L.jsx(An,{editor:e,value:s,onChange:m,children:L.jsxs("div",{ref:g,className:w(!t&&v.editorContainer,r==null?void 0:r.container),"data-external-id":c,children:[L.jsx(Pn,{className:w(!t&&v.editor,r==null?void 0:r.editor),onKeyDown:T,renderElement:M,renderLeaf:_,decorate:O,placeholder:a,readOnly:t,onFocus:$,onBlur:K,autoFocus:i}),L.jsx(So,{open:!!x&&!!y&&y.length>0,suggestions:y,containerRef:g.current,selectedIndex:h,onItemClick:R}),L.jsx(ko,{open:k,onClose:G,onEmojiButtonClick:U,onSelect:Q})]})})},Io=([e,r])=>{const t=[];if(!B.isText(e))return t;const n=i=>typeof i=="string"?i.length:typeof i.content=="string"?i.content.length:i.content.reduce((o,c)=>o+n(c),0),a=he.tokenize(e.text,he.languages.markdown);let s=0;for(const i of a){const o=n(i),c=s+o;typeof i!="string"&&t.push({[i.type]:!0,anchor:{path:r,offset:s},focus:{path:r,offset:c}}),s=c}return t},Gt=(e,r)=>{Lo(e,r)?l.removeMark(e,r):l.addMark(e,r,!0)},Lo=(e,r)=>{const t=l.marks(e);return t?t[r]===!0:!1},$o=()=>P.useMemo(()=>Mn(Bn(Po(Dn(Rr())))),[]),Wo=e=>e.map(Hn).join(`
`).trim(),Hn=e=>{if(B.isText(e))return _o(e);if(V.isElement(e)){const r=e.children.map(t=>Hn(t)).join("");switch(e.type){case"mention":return`@${e.id}`;default:return r}}return N.string(e)},_o=e=>{let r=e.text;return e.bold&&(r=`+${r}+`),e.italic&&(r=`_${r}_`),r},zo=Ce()(e=>({box:{padding:e.spacing(2),backgroundColor:ge.grey[200],zIndex:e.zIndex.tooltip+1,maxWidth:"100%"},editorContainer:{flexGrow:1},writeCommentContainer:{color:ge.text.dark.disabled,cursor:"pointer",borderWidth:1,borderStyle:"solid",borderColor:ge.grey[300],borderRadius:e.shape.borderRadius,backgroundColor:ge.grey[0],paddingLeft:parseInt(e.spacing(2),10)+1,paddingRight:parseInt(e.spacing(2),10)+1,paddingTop:parseInt(e.spacing(1),10)+1,paddingBottom:parseInt(e.spacing(1),10)+1,"&:hover":{borderColor:ge.grey[900]}}})),Qe=[{type:"paragraph",children:[{text:""}]}],kr=e=>{setTimeout(()=>{j.focus(e)},100)},Jo=({commentToEdit:e,employeeId:r,className:t,employees:n,eagerRenderEditor:a=!1,onSubmit:s,onCancelEditing:i,commentTooltipProps:o,isCommentEditorFocused:c})=>{const{classes:v,cx:w}=zo(),g=P.useMemo(()=>{const m={};return n&&n.forEach(T=>{m[T.id]=T.fullName}),m},[n]),f=$o(),[u,x]=P.useState(a),[E,C]=P.useState(),[A,h]=P.useState(!1),b=P.useMemo(()=>!E||qn(E),[E]),k=Zt();P.useEffect(()=>{e&&b&&(x(!0),C(Tr((e==null?void 0:e.content)??"",g)),kr(f))},[e,f,E,b,g]),P.useEffect(()=>{e||C(Qe)},[e]),P.useEffect(()=>{A&&(x(!0),kr(f),h(!1))},[f,A]),P.useEffect(()=>{c&&h(!0)},[c]);const F=P.useCallback(m=>{C(m)},[]),O=P.useCallback(()=>{E&&(s(Wo(E)),C(Qe))},[E,s]),d=P.useCallback(()=>{i(),C(Qe)},[i]),y=P.useCallback(()=>{x(!0),kr(f)},[f]);return L.jsxs(De,{className:w(v.box,t),children:[e&&L.jsxs(De,{pb:1,display:"flex",alignItems:"center",children:[L.jsx(et,{variant:"subtitle1",children:k.formatMessage(er.editingComment)}),L.jsx(De,{pl:1,children:L.jsx(rt,{variant:"text",size:"small",onClick:d,children:k.formatMessage(er.cancel)})})]}),L.jsxs(De,{display:"flex",children:[L.jsx(ba,{title:(o==null?void 0:o.title)??"",...o,children:L.jsx(De,{pr:1,children:L.jsx(Yt,{shouldUseSkeletonLoading:!0,person:{id:r}})})}),u&&n?L.jsx(Mo,{editor:f,classes:{container:v.editorContainer},onChange:F,value:E??Qe,employees:n,placeholder:k.formatMessage({id:"common.write-a-comment",defaultMessage:"Write a comment..."}),"data-external-id":"write-comment-text"}):L.jsx(De,{flexGrow:1,className:v.writeCommentContainer,onClick:y,"data-external-id":"comment-container",children:L.jsx(et,{variant:"body1",children:k.formatMessage(er.writeAComment)})}),!b&&L.jsx(De,{pl:1,children:L.jsx(rt,{variant:"contained",onClick:O,"data-external-id":"send-quick-comment-button",children:k.formatMessage(er.post)})})]})]})},er=Jt({editingComment:{id:"common.editing-comment",defaultMessage:"Editing comment"},cancel:{id:"common.action.cancel",defaultMessage:"Cancel"},writeAComment:{id:"common.write-a-comment",defaultMessage:"Write a comment..."},post:{id:"common.action.post",defaultMessage:"Post"}});export{Jo as C,Qt as D,Pn as E,N,j as R,Yo as S,D as T,Dn as a,jn as b,Rr as c,An as d,B as e,V as f,$o as g,Mo as h,Tr as i,Pe as j,Wo as s,ri as u,Po as w};
