import{gA as at,r as g,gh as ae,gT as ct,gU as ee,gV as ft}from"./assets/index-rhBbSAok.js";function Fe({array1:a,array2:b,parser:m=x=>x}){return a&&b&&a.length===b.length&&a.every((x,L)=>m(x)===m(b[L]))}function He(a){return a.normalize("NFD").replace(/[\u0300-\u036f]/g,"")}function dt(a={}){const{ignoreAccents:b=!0,ignoreCase:m=!0,limit:x,matchFrom:L="any",stringify:_,trim:N=!1}=a;return(R,{inputValue:z,getOptionLabel:q})=>{let k=N?z.trim():z;m&&(k=k.toLowerCase()),b&&(k=He(k));const W=k?R.filter(te=>{let S=(_||q)(te);return m&&(S=S.toLowerCase()),b&&(S=He(S)),L==="start"?S.startsWith(k):S.includes(k)}):R;return typeof x=="number"?W.slice(0,x):W}}const pt=dt(),Re=5,gt=a=>{var b;return a.current!==null&&((b=a.current.parentElement)==null?void 0:b.contains(document.activeElement))},ht=[];function Me(a,b,m,x){if(b||a==null||x)return"";const L=m(a);return typeof L=="string"?L:""}function mt(a){const{unstable_isActiveElementInListbox:b=gt,unstable_classNamePrefix:m="Mui",autoComplete:x=!1,autoHighlight:L=!1,autoSelect:_=!1,blurOnSelect:N=!1,clearOnBlur:R=!a.freeSolo,clearOnEscape:z=!1,componentName:q="useAutocomplete",defaultValue:k=a.multiple?ht:null,disableClearable:W=!1,disableCloseOnSelect:te=!1,disabled:S,disabledItemsFocusable:Ne=!1,disableListWrap:ce=!1,filterOptions:qe=pt,filterSelectedOptions:fe=!1,freeSolo:B=!1,getOptionDisabled:j,getOptionKey:ne,getOptionLabel:de=t=>t.label??t,groupBy:G,handleHomeEndKeys:pe=!a.freeSolo,id:Be,includeInputInList:ge=!1,inputValue:ve,isOptionEqualToValue:v=(t,e)=>t===e,multiple:s=!1,onChange:he,onClose:be,onHighlightChange:me,onInputChange:V,onOpen:xe,open:Ke,openOnFocus:Ue=!1,options:_e,readOnly:T=!1,renderValue:D,selectOnFocus:ze=!a.freeSolo,value:Ie}=a,C=at(Be);let d=de;d=t=>{const e=de(t);return typeof e!="string"?String(e):e};const re=g.useRef(!1),oe=g.useRef(!0),p=g.useRef(null),y=g.useRef(null),[J,We]=g.useState(null),[I,le]=g.useState(-1),Oe=L?0:-1,h=g.useRef(Oe),je=g.useRef(Me(k??Ie,s,d)).current,[r,se]=ae({controlled:Ie,default:k,name:q}),[i,Q]=ae({controlled:ve,default:je,name:q,state:"inputValue"}),[X,ye]=g.useState(!1),Y=g.useCallback((t,e,n)=>{if(!(s?r.length<e.length:e!==null)&&!R)return;const o=Me(e,s,d,D);i!==o&&(Q(o),V&&V(t,o,n))},[d,i,s,V,Q,R,r,D]),[M,ke]=ae({controlled:Ke,default:!1,name:q,state:"open"}),[Ge,Se]=g.useState(!0),De=!s&&r!=null&&i===d(r),O=M&&!T,u=O?qe(_e.filter(t=>!(fe&&(s?r:[r]).some(e=>e!==null&&v(t,e)))),{inputValue:De&&Ge?"":i,getOptionLabel:d}):[],P=ct({filteredOptions:u,value:r,inputValue:i});g.useEffect(()=>{const t=r!==P.value;X&&!t||B&&!t||Y(null,r,"reset")},[r,Y,X,P.value,B]);const Ce=M&&u.length>0&&!T,E=ee(t=>{if(t===-1)p.current.focus();else{const e=D?"data-item-index":"data-tag-index";J.querySelector(`[${e}="${t}"]`).focus()}});g.useEffect(()=>{s&&I>r.length-1&&(le(-1),E(-1))},[r,s,I,E]);function Je(t,e){if(!y.current||t<0||t>=u.length)return-1;let n=t;for(;;){const l=y.current.querySelector(`[data-option-index="${n}"]`),o=Ne?!1:!l||l.disabled||l.getAttribute("aria-disabled")==="true";if(l&&l.hasAttribute("tabindex")&&!o)return n;if(e==="next"?n=(n+1)%u.length:n=(n-1+u.length)%u.length,n===t)return-1}}const $=ee(({event:t,index:e,reason:n})=>{if(h.current=e,e===-1?p.current.removeAttribute("aria-activedescendant"):p.current.setAttribute("aria-activedescendant",`${C}-option-${e}`),me&&["mouse","keyboard","touch"].includes(n)&&me(t,e===-1?null:u[e],n),!y.current)return;const l=y.current.querySelector(`[role="option"].${m}-focused`);l&&(l.classList.remove(`${m}-focused`),l.classList.remove(`${m}-focusVisible`));let o=y.current;if(y.current.getAttribute("role")!=="listbox"&&(o=y.current.parentElement.querySelector('[role="listbox"]')),!o)return;if(e===-1){o.scrollTop=0;return}const f=y.current.querySelector(`[data-option-index="${e}"]`);if(f&&(f.classList.add(`${m}-focused`),n==="keyboard"&&f.classList.add(`${m}-focusVisible`),o.scrollHeight>o.clientHeight&&n!=="mouse"&&n!=="touch")){const c=f,A=o.clientHeight+o.scrollTop,$e=c.offsetTop+c.offsetHeight;$e>A?o.scrollTop=$e-o.clientHeight:c.offsetTop-c.offsetHeight*(G?1.3:0)<o.scrollTop&&(o.scrollTop=c.offsetTop-c.offsetHeight*(G?1.3:0))}}),w=ee(({event:t,diff:e,direction:n="next",reason:l})=>{if(!O)return;const f=Je((()=>{const c=u.length-1;if(e==="reset")return Oe;if(e==="start")return 0;if(e==="end")return c;const A=h.current+e;return A<0?A===-1&&ge?-1:ce&&h.current!==-1||Math.abs(e)>1?0:c:A>c?A===c+1&&ge?-1:ce||Math.abs(e)>1?c:0:A})(),n);if($({index:f,reason:l,event:t}),x&&e!=="reset")if(f===-1)p.current.value=i;else{const c=d(u[f]);p.current.value=c,c.toLowerCase().indexOf(i.toLowerCase())===0&&i.length>0&&p.current.setSelectionRange(i.length,c.length)}}),Ae=!Fe({array1:P.filteredOptions,array2:u,parser:d}),Qe=()=>{const t=(e,n)=>{const l=e?d(e):"",o=n?d(n):"";return l===o};if(h.current!==-1&&!Fe({array1:P.filteredOptions,array2:u,parser:d})&&P.inputValue===i&&(s?r.length===P.value.length&&P.value.every((e,n)=>d(r[n])===d(e)):t(P.value,r))){const e=P.filteredOptions[h.current];if(e)return u.findIndex(n=>d(n)===d(e))}return-1},ie=g.useCallback(()=>{if(!O)return;const t=Qe();if(t!==-1){h.current=t;return}const e=s?r[0]:r;if(u.length===0||e==null){w({diff:"reset"});return}if(y.current){if(e!=null){const n=u[h.current];if(s&&n&&r.findIndex(o=>v(n,o))!==-1)return;const l=u.findIndex(o=>v(o,e));l===-1?w({diff:"reset"}):$({index:l});return}if(h.current>=u.length-1){$({index:u.length-1});return}$({index:h.current})}},[u.length,s?!1:r,fe,w,$,O,i,s]),Xe=ee(t=>{ft(y,t),t&&ie()});g.useEffect(()=>{Ae&&ie()},[ie,Ae]);const F=t=>{M||(ke(!0),Se(!0),xe&&xe(t))},K=(t,e)=>{M&&(ke(!1),be&&be(t,e))},H=(t,e,n,l)=>{if(s){if(r.length===e.length&&r.every((o,f)=>o===e[f]))return}else if(r===e)return;he&&he(t,e,n,l),se(e)},Z=g.useRef(!1),U=(t,e,n="selectOption",l="options")=>{let o=n,f=e;if(s){f=Array.isArray(r)?r.slice():[];const c=f.findIndex(A=>v(e,A));c===-1?f.push(e):l!=="freeSolo"&&(f.splice(c,1),o="removeOption")}Y(t,f,o),H(t,f,o,{option:e}),!te&&(!t||!t.ctrlKey&&!t.metaKey)&&K(t,o),(N===!0||N==="touch"&&Z.current||N==="mouse"&&!Z.current)&&p.current.blur()};function Ye(t,e){if(t===-1)return-1;let n=t;for(;;){if(e==="next"&&n===r.length||e==="previous"&&n===-1)return-1;const l=D?"data-item-index":"data-tag-index",o=J.querySelector(`[${l}="${n}"]`);if(!o||!o.hasAttribute("tabindex")||o.disabled||o.getAttribute("aria-disabled")==="true")n+=e==="next"?1:-1;else return n}}const Pe=(t,e)=>{if(!s)return;i===""&&K(t,"toggleInput");let n=I;I===-1?i===""&&e==="previous"&&(n=r.length-1):(n+=e==="next"?1:-1,n<0&&(n=0),n===r.length&&(n=-1)),n=Ye(n,e),le(n),E(n)},we=t=>{re.current=!0,Q(""),V&&V(t,"","clear"),H(t,s?[]:null,"clear")},Ze=t=>e=>{if(t.onKeyDown&&t.onKeyDown(e),!e.defaultMuiPrevented&&(I!==-1&&!["ArrowLeft","ArrowRight"].includes(e.key)&&(le(-1),E(-1)),e.which!==229))switch(e.key){case"Home":O&&pe&&(e.preventDefault(),w({diff:"start",direction:"next",reason:"keyboard",event:e}));break;case"End":O&&pe&&(e.preventDefault(),w({diff:"end",direction:"previous",reason:"keyboard",event:e}));break;case"PageUp":e.preventDefault(),w({diff:-Re,direction:"previous",reason:"keyboard",event:e}),F(e);break;case"PageDown":e.preventDefault(),w({diff:Re,direction:"next",reason:"keyboard",event:e}),F(e);break;case"ArrowDown":e.preventDefault(),w({diff:1,direction:"next",reason:"keyboard",event:e}),F(e);break;case"ArrowUp":e.preventDefault(),w({diff:-1,direction:"previous",reason:"keyboard",event:e}),F(e);break;case"ArrowLeft":!s&&D?E(0):Pe(e,"previous");break;case"ArrowRight":!s&&D?E(-1):Pe(e,"next");break;case"Enter":if(h.current!==-1&&O){const n=u[h.current],l=j?j(n):!1;if(e.preventDefault(),l)return;U(e,n,"selectOption"),x&&p.current.setSelectionRange(p.current.value.length,p.current.value.length)}else B&&i!==""&&De===!1&&(s&&e.preventDefault(),U(e,i,"createOption","freeSolo"));break;case"Escape":O?(e.preventDefault(),e.stopPropagation(),K(e,"escape")):z&&(i!==""||s&&r.length>0||D)&&(e.preventDefault(),e.stopPropagation(),we(e));break;case"Backspace":if(s&&!T&&i===""&&r.length>0){const n=I===-1?r.length-1:I,l=r.slice();l.splice(n,1),H(e,l,"removeOption",{option:r[n]})}!s&&D&&!T&&(se(null),E(-1));break;case"Delete":if(s&&!T&&i===""&&r.length>0&&I!==-1){const n=I,l=r.slice();l.splice(n,1),H(e,l,"removeOption",{option:r[n]})}!s&&D&&!T&&(se(null),E(-1));break}},et=t=>{ye(!0),Ue&&!re.current&&F(t)},Le=t=>{if(b(y)){p.current.focus();return}ye(!1),oe.current=!0,re.current=!1,_&&h.current!==-1&&O?U(t,u[h.current],"blur"):_&&B&&i!==""?U(t,i,"blur","freeSolo"):R&&Y(t,r,"blur"),K(t,"blur")},tt=t=>{const e=t.target.value;i!==e&&(Q(e),Se(!1),V&&V(t,e,"input")),e===""?!W&&!s&&H(t,null,"clear"):F(t)},nt=t=>{const e=Number(t.currentTarget.getAttribute("data-option-index"));h.current!==e&&$({event:t,index:e,reason:"mouse"})},rt=t=>{$({event:t,index:Number(t.currentTarget.getAttribute("data-option-index")),reason:"touch"}),Z.current=!0},ot=t=>{const e=Number(t.currentTarget.getAttribute("data-option-index"));U(t,u[e],"selectOption"),Z.current=!1},Te=t=>e=>{const n=r.slice();n.splice(t,1),H(e,n,"removeOption",{option:r[t]})},lt=t=>{H(t,null,"removeOption",{option:r})},Ee=t=>{M?K(t,"toggleInput"):F(t)},st=t=>{t.currentTarget.contains(t.target)&&t.target.getAttribute("id")!==C&&t.preventDefault()},it=t=>{t.currentTarget.contains(t.target)&&(p.current.focus(),ze&&oe.current&&p.current.selectionEnd-p.current.selectionStart===0&&p.current.select(),oe.current=!1)},ut=t=>{!S&&(i===""||!M)&&Ee(t)};let ue=B&&i.length>0;ue=ue||(s?r.length>0:r!==null);let Ve=u;return G&&(Ve=u.reduce((t,e,n)=>{const l=G(e);return t.length>0&&t[t.length-1].group===l?t[t.length-1].options.push(e):t.push({key:n,index:n,group:l,options:[e]}),t},[])),S&&X&&Le(),{getRootProps:(t={})=>({...t,onKeyDown:Ze(t),onMouseDown:st,onClick:it}),getInputLabelProps:()=>({id:`${C}-label`,htmlFor:C}),getInputProps:()=>({id:C,value:i,onBlur:Le,onFocus:et,onChange:tt,onMouseDown:ut,"aria-activedescendant":O?"":null,"aria-autocomplete":x?"both":"list","aria-controls":Ce?`${C}-listbox`:void 0,"aria-expanded":Ce,autoComplete:"off",ref:p,autoCapitalize:"none",spellCheck:"false",role:"combobox",disabled:S}),getClearProps:()=>({tabIndex:-1,type:"button",onClick:we}),getItemProps:({index:t=0}={})=>({...s&&{key:t},...D?{"data-item-index":t}:{"data-tag-index":t},tabIndex:-1,...!T&&{onDelete:s?Te(t):lt}}),getPopupIndicatorProps:()=>({tabIndex:-1,type:"button",onClick:Ee}),getTagProps:({index:t})=>({key:t,"data-tag-index":t,tabIndex:-1,...!T&&{onDelete:Te(t)}}),getListboxProps:()=>({role:"listbox",id:`${C}-listbox`,"aria-labelledby":`${C}-label`,ref:Xe,onMouseDown:t=>{t.preventDefault()}}),getOptionProps:({index:t,option:e})=>{const n=(s?r:[r]).some(o=>o!=null&&v(e,o)),l=j?j(e):!1;return{key:(ne==null?void 0:ne(e))??d(e),tabIndex:-1,role:"option",id:`${C}-option-${t}`,onMouseMove:nt,onClick:ot,onTouchStart:rt,"data-option-index":t,"aria-disabled":l,"aria-selected":n}},id:C,inputValue:i,value:r,dirty:ue,expanded:O&&J,popupOpen:O,focused:X||I!==-1,anchorEl:J,setAnchorEl:We,focusedItem:I,focusedTag:I,groupedOptions:Ve}}export{mt as u};
