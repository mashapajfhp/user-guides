import{j as t,O as C,Q as ct,b2 as h,lT as it,b1 as z,bl as rt,a6 as lt,H as T,a as k,r,X as V,iV as ut,P as gt,ah as d,T as M,bW as dt,a0 as U,c7 as pt,B as l,cV as mt,fT as Ct,d as A,af as ht,S as ft,dg as yt,lU as xt,cj as St,W as bt,cC as It,b9 as jt,c2 as wt,bN as Mt,aS as kt,lV as At,cv as Bt,cw as Rt,bB as Lt,aN as v}from"./assets/index-rhBbSAok.js";import{d as H}from"./GenericSuccessResponse-R235NyAN__cache.js";import{a as Ut,C as vt}from"./ConfirmDataAccessDialog-3WIW2NtF__cache.js";import{c as Dt}from"./AccountIntegration.abilities-iGk72gZu__cache.js";import{R as Pt}from"./RemoveBannerDialog-y2iWxANl__cache.js";import{A as p}from"./AccountIntegrationPlatfromName-nYaV6OQR__cache.js";import{x as _t}from"./xeroIcon-HeOeRCiQ__cache.js";import{u as Nt}from"./useAccountingPlatformName-2eNC-XXr__cache.js";const D="/react-ts-app/assets/dynamicsIcon-TpWxjMZ2__cache.png",zt="/react-ts-app/assets/dynamicsIcon@2x-KXbjeWgS__cache.png",Tt="/react-ts-app/assets/netsuiteIcon-nkiiau6G__cache.svg",Vt="data:image/svg+xml,%3csvg%20width='60'%20height='60'%20viewBox='0%200%2060%2060'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M30%200C35.933%203.99933e-07%2041.7327%201.75919%2046.666%205.05515C51.5992%208.3511%2055.4444%2013.0358%2057.7153%2018.5169C59.9863%2023.9981%2060.581%2030.0295%2059.4244%2035.8486C58.2677%2041.6678%2055.4116%2047.0133%2051.2171%2051.2093C47.0226%2055.4053%2041.6782%2058.2634%2035.8595%2059.4222C30.0408%2060.581%2024.0091%2059.9885%2018.5271%2057.7195C13.0452%2055.4506%208.35904%2051.6071%205.06127%2046.6751C1.7635%2041.7431%200.00218046%2035.944%202.02245e-06%2030.011C-0.00144486%2026.0704%200.773457%2022.1682%202.28045%2018.5271C3.78744%2014.8861%205.997%2011.5776%208.7829%208.79069C11.5688%206.00377%2014.8765%203.793%2018.5169%202.28467C22.1574%200.776337%2026.0594%20-2.65629e-07%2030%200Z'%20fill='%232CA11C'/%3e%3cpath%20d='M8.33206%2030.0108C8.32843%2031.5437%208.62768%2033.0622%209.21262%2034.4791C9.79756%2035.896%2010.6567%2037.1834%2011.7406%2038.2674C12.8245%2039.3513%2014.1119%2040.2104%2015.5289%2040.7953C16.9458%2041.3803%2018.4643%2041.6795%2019.9972%2041.6759H21.6495V37.3414H19.9972C18.053%2037.3414%2016.1884%2036.5691%2014.8137%2035.1943C13.4389%2033.8196%2012.6666%2031.955%2012.6666%2030.0108C12.6666%2028.0666%2013.4389%2026.202%2014.8137%2024.8272C16.1884%2023.4525%2018.053%2022.6801%2019.9972%2022.6801H23.9957V45.344C23.9943%2045.9136%2024.1054%2046.4779%2024.3227%2047.0044C24.54%2047.531%2024.8592%2048.0094%2025.262%2048.4122C25.6648%2048.815%2026.1432%2049.1342%2026.6698%2049.3515C27.1963%2049.5688%2027.7606%2049.6799%2028.3302%2049.6785V18.3346H19.9972C16.9024%2018.3375%2013.9354%2019.569%2011.748%2021.7584C9.56071%2023.9478%208.33206%2026.916%208.33206%2030.0108ZM39.9954%2018.3456H38.3431V22.6801H39.9954C41.9396%2022.6801%2043.8041%2023.4525%2045.1789%2024.8272C46.5537%2026.202%2047.326%2028.0666%2047.326%2030.0108C47.326%2031.955%2046.5537%2033.8196%2045.1789%2035.1943C43.8041%2036.5691%2041.9396%2037.3414%2039.9954%2037.3414H35.9968V14.6666C35.9983%2014.0969%2035.8872%2013.5326%2035.6698%2013.0061C35.4525%2012.4795%2035.1333%2012.0011%2034.7305%2011.5984C34.3277%2011.1956%2033.8493%2010.8764%2033.3228%2010.659C32.7962%2010.4417%2032.232%2010.3306%2031.6623%2010.332V41.6649H39.9954C43.0891%2041.6649%2046.0562%2040.4359%2048.2439%2038.2482C50.4315%2036.0606%2051.6605%2033.0935%2051.6605%2029.9998C51.6605%2026.906%2050.4315%2023.9389%2048.2439%2021.7513C46.0562%2019.5636%2043.0891%2018.3346%2039.9954%2018.3346V18.3456Z'%20fill='white'/%3e%3c/svg%3e",Ht=({platformName:n,iconWidth:e})=>{switch((n??"").toLowerCase()){case p.MsDynamics:return t.jsx("img",{src:D,srcSet:`${D} 1x, ${zt} 2x`,width:e,alt:"Dynamics"});case p.OracleNetsuite:return t.jsx("img",{src:Tt,width:e,alt:"Netsuite"});case p.QuickbooksOnline:return t.jsx("img",{src:Vt,width:e,alt:"Quickbook"});case p.Xero:return t.jsx("img",{src:_t,width:e,alt:"Xero"});default:return null}},F=({companyId:n,employeeId:e})=>`/companies/${n}/employees/${e}/accounting/banner-visibility`,$=(n,e)=>{const s=Ft.useMocker();return ct({toURLFunction:F,mapResponseFunction:h(it),options:{mocker:s}})(n,void 0,e)},Ft=C($),E=()=>{const n=$t.useMocker();return z({toURLFunction:F,mapResponseFunction:h(H),options:{mocker:n}})},$t=C(E);function Et(n){const e={};return e.companyId=n.company_id,e.name=n.name,e.redirectUrl=n.redirect_url,e}const Ot=({companyId:n})=>`/companies/${n}/accounting/connection/status`,O=()=>{const n=Qt.useMocker();return rt({toURLFunction:Ot,mapResponseFunction:h(H),options:{mocker:n}})},Qt=C(O),Zt=({companyId:n})=>`/companies/${n}/accounting/company`,Q=()=>{const n=qt.useMocker();return z({toURLFunction:Zt,mapResponseFunction:h(Et),options:{mocker:n}})},qt=C(Q),Gt="/react-ts-app/assets/CalculatorIllustration-OSjseA0P__cache.svg",Kt=n=>t.jsx(lt,{url:Gt,...n}),Xt="/react-ts-app/assets/background@2x-n1HoAiUV__cache.png",Wt=T()(n=>({banner:{minHeight:n.spacing(24),display:"flex",flexDirection:"column",backgroundImage:`url("${Xt}")`,backgroundSize:"100% 100%",marginBottom:n.spacing(3),backgroundRepeat:"no-repeat",backgroundColor:"transparent"},link:{marginRight:n.spacing(3)},closeIcon:{marginTop:n.spacing(1),marginRight:n.spacing(1)}})),m=A({heading:{id:"hr.payroll.accounting-integration.banner.heading",defaultMessage:"Connect Bayzat payroll with your accounting software"},learnMoreLink:{id:"hr.payroll.accounting-integration.banner.learn-more",defaultMessage:"Learn More"},contactSupportButton:{id:"hr.payroll.accounting-integration.banner.contact-support",defaultMessage:"Contact Support"},startConnectionButton:{id:"hr.payroll.accounting-integration.banner.start-connection",defaultMessage:"Start Connection"}}),Yt=({onClose:n,onCustomerSupportClick:e,onStartConnection:s,isCodatCompanyCreationLoading:i})=>{const a=k(),{classes:o}=Wt(),[u,f]=r.useState(!1),g=V(Dt);return r.useEffect(()=>f(!0),[u]),t.jsx(ut,{in:u,children:t.jsxs(gt,{elevation:0,className:o.banner,children:[t.jsxs(d,{order:2,container:!0,justifyContent:"space-between",alignItems:"center",gap:{xs:2,md:0},children:[t.jsx(d,{display:"flex",justifyContent:"center",size:{xs:12,md:3},children:t.jsx(Kt,{size:220,alt:"QBO connection"})}),t.jsx(d,{textAlign:{xs:"center",md:"left"},size:{xs:12,md:5},children:t.jsx(M,{variant:"h3","data-external-id":"qbo-banner-heading",children:a.formatMessage(m.heading)})}),t.jsxs(d,{display:"flex",alignItems:"center",justifyContent:"center",pb:1,size:{xs:12,md:4},children:[t.jsx(dt,{className:o.link,external:!0,target:"_blank",to:"https://help.bayzat.com/en/collections/3890178-accounting-integration",children:a.formatMessage(m.learnMoreLink)}),g?t.jsx(U,{variant:"contained",onClick:s,"data-external-id":"start-connection-button",children:t.jsx(pt,{loading:i,children:a.formatMessage(m.startConnectionButton)})}):t.jsx(U,{variant:"contained",onClick:e,"data-external-id":"contact-support-button",children:a.formatMessage(m.contactSupportButton)})]})]}),t.jsx(l,{textAlign:"end",children:t.jsx(mt,{onClick:n,disableFocusRipple:!0,disableRipple:!0,"data-external-id":"close-button",className:o.closeIcon,children:t.jsx(Ct,{fontSize:"x-small"})})})]})})},P="data:image/svg+xml,%3csvg%20width='38'%20height='9'%20viewBox='0%200%2038%209'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M0.646447%204.14645C0.451184%204.34171%200.451184%204.65829%200.646447%204.85355L3.82843%208.03553C4.02369%208.2308%204.34027%208.2308%204.53553%208.03553C4.7308%207.84027%204.7308%207.52369%204.53553%207.32843L1.70711%204.5L4.53553%201.67157C4.7308%201.47631%204.7308%201.15973%204.53553%200.964466C4.34027%200.769204%204.02369%200.769204%203.82843%200.964466L0.646447%204.14645ZM37.3536%204.85355C37.5488%204.65829%2037.5488%204.34171%2037.3536%204.14645L34.1716%200.964466C33.9763%200.769204%2033.6597%200.769204%2033.4645%200.964466C33.2692%201.15973%2033.2692%201.47631%2033.4645%201.67157L36.2929%204.5L33.4645%207.32843C33.2692%207.52369%2033.2692%207.84027%2033.4645%208.03553C33.6597%208.2308%2033.9763%208.2308%2034.1716%208.03553L37.3536%204.85355ZM1%205H37V4H1V5Z'%20fill='%234ED4A9'/%3e%3c/svg%3e",Jt=T()(()=>({iconSize:{fontSize:32},connectionSuccessIconBackground:{background:ht.green[50],borderRadius:"50%",width:63,height:63,display:"flex",alignItems:"center",justifyContent:"center"}})),_=A({dialogHeader:{id:"hr.payroll.accounting-integration.successfull-setup-dialog.header",defaultMessage:"Connection Successful"},dialogBody:{id:"hr.payroll.accounting-integration.successfull-setup-dialog.sub-header",defaultMessage:"Please wait while we fetch data needed to complete the configuration. We will let you know once the system is ready to continue setting up accounts."}}),tn=["XERO","ORACLE NETSUITE","QUICKBOOKS ONLINE","DYNAMICS"],nn=({open:n,onClose:e})=>{const s=k(),{classes:i}=Jt(),{platformName:a}=Nt(),o=a&&tn.includes(a.toUpperCase());return t.jsx(ft,{open:n,content:t.jsxs(l,{sx:{display:"flex",alignItems:"center",justifyContent:"center",flexDirection:"column",marginTop:3,marginBottom:3,maxWidth:400},children:[t.jsx(M,{variant:"h4",children:s.formatMessage(_.dialogHeader)}),t.jsx(M,{variant:"body1",component:"p",marginTop:2,children:s.formatMessage(_.dialogBody)})]}),title:t.jsxs(l,{display:"flex",alignItems:"center",justifyContent:"center",children:[o&&t.jsxs(t.Fragment,{children:[t.jsx(yt,{logoType:xt.FullSize}),t.jsx(l,{marginLeft:2,marginRight:.5,children:t.jsx("img",{src:P,alt:"Connection"})})]}),t.jsx(l,{className:i.connectionSuccessIconBackground,children:t.jsx(St,{color:"success",className:i.iconSize,fontSize:"x-small"})}),o&&t.jsxs(t.Fragment,{children:[t.jsx(l,{marginLeft:.5,marginRight:1,children:t.jsx("img",{src:P,alt:"Connection"})}),t.jsx(Ht,{platformName:a,iconWidth:45})]})]}),showCloseButton:!0,onClose:e,confirmButton:{show:!1}})},en=10*1e3,sn=27*1e3;function an(n){if(!n)return null;const s=new URL(n).pathname.split("/");return s[s.length-1]}const N=A({startAccountIntegration:{id:"hr.payroll.accounting-integration.banner.start-account-integration",defaultMessage:"I would like to know more about payroll & accounting integrations"},contactCustomerSupport:{id:"hr.payroll.accounting-integration.banner.contact-customer-support",defaultMessage:"Please contact with customer support to start with account integration"}}),mn=({redirectToSettings:n})=>{const e=bt(),s=It(),i=k(),a=jt(),o=wt(),{handleRequestExceptionAlert:u}=Mt(),f=kt(),g=V(At),[Z,y]=r.useState(!1),[q,x]=r.useState(!1),[G,B]=r.useState(!1),[S,b]=r.useState(null),{data:I,refetch:R}=$({companyId:e,employeeId:s},{enabled:g}),{mutateAsync:K}=E(),{mutateAsync:X,isPending:W}=Q(),{mutateAsync:Y}=O(),J=I==null?void 0:I.data,j=()=>{f.invalidateQueries({queryKey:["GET",`/companies/${e}/accounting/connection/status`]})},tt=c=>{c&&K({urlParams:{companyId:e,employeeId:s}}),x(!1)},nt=async()=>{try{const c=await X({urlParams:{companyId:e}}),L=an(c.redirectUrl);Lt(L,"codatCompanyId can not be null."),b(L),y(!1)}catch(c){u(c)}},w=async()=>{R(),b(null),n&&a.pushToApp(v.APP_HRADMIN,"/settings/payroll")},et=async()=>{try{await Y({urlParams:{companyId:e}}),b(null),setTimeout(()=>{j()},en),setTimeout(()=>{j()},sn),n&&a.pushToApp(v.APP_HRADMIN,"/settings/payroll"),B(!0)}catch(c){u(c)}finally{R()}},st=c=>{o.error({message:c}),w()},at=r.useCallback(()=>{Bt()?(o.info({message:i.formatMessage(N.startAccountIntegration)}),Rt()):o.info({message:i.formatMessage(N.contactCustomerSupport)})},[i,o]),ot=()=>{j(),B(!1)};return g===!1?null:t.jsxs(t.Fragment,{children:[J&&t.jsx(Yt,{onClose:()=>x(!0),onCustomerSupportClick:at,onStartConnection:()=>y(!0),isCodatCompanyCreationLoading:W}),t.jsx(Pt,{isVisible:q,onConfirm:tt,onCancel:()=>x(!1)}),!!S&&t.jsx(Ut,{handleError:st,handleSuccessfulConnection:et,codatCompanyId:S,open:!!S,onClose:w,onFinish:w}),t.jsx(vt,{open:Z,onConfirm:nt,onCancel:()=>y(!1)}),t.jsx(nn,{open:G,onClose:ot})]})};export{Ht as A,nn as S,mn as a,sn as b,en as c,an as g,O as u};
