{
  "instructions": {
    "payload_format": "reference-based-v2",
    "description": "This payload uses ID references to avoid data duplication. You MUST resolve references before executing tests.",
    "reference_resolution": {
      "access_path_ref": {
        "description": "Reference to a navigation path",
        "lookup": "Find in definitions.access_paths.configuration OR definitions.access_paths.operational where path_id matches",
        "returns": "Navigation steps array, canonical_path for Supabase lookup, and path details"
      },
      "setup_flow_ref": {
        "description": "Reference to a setup/configuration flow",
        "lookup": "Find in definitions.setup_flows where flow_id matches",
        "returns": "Array of steps to execute in order"
      },
      "business_rule_refs": {
        "description": "Array of business rule IDs to validate",
        "lookup": "Find each in definitions.business_rules where rule_id matches",
        "returns": "Rule description and expected UI manifestation"
      },
      "edge_case_refs": {
        "description": "Array of edge case IDs to check",
        "lookup": "Find each in definitions.edge_cases where case_id matches",
        "returns": "Scenario description and expected UI behavior"
      },
      "ui_element_refs": {
        "description": "Array of UI element names relevant to test",
        "lookup": "Find each in definitions.ui_elements where element_name matches",
        "returns": "Element type and location"
      }
    },
    "navigation_taxonomy": {
      "description": "Use canonical_path with Supabase resolve_navigation_path() for reliable navigation",
      "usage": "curl -s \"${SUPABASE_URL}/rest/v1/rpc/resolve_navigation_path\" -H \"apikey: ${SUPABASE_ANON_KEY}\" -H \"Authorization: Bearer ${SUPABASE_ANON_KEY}\" -H \"Content-Type: application/json\" -d '{\"p_canonical_path\": \"<canonical_path>\", \"p_env\": \"prod\"}'",
      "returns": "nav_steps array with labels and levels for menu clicks"
    },
    "execution_workflow": [
      "1. Read the test from tests array",
      "2. Resolve access_path_ref → get canonical_path",
      "3. Query Supabase resolve_navigation_path(canonical_path) → get nav_steps",
      "4. Resolve setup_flow_ref → get setup steps",
      "5. Execute nav_steps using Playwright (click each menu item in order)",
      "6. Execute setup steps using Playwright",
      "7. Perform test validations from assertions",
      "8. Check resolved business_rules are satisfied",
      "9. Verify resolved edge_cases behave as expected",
      "10. Capture screenshots as evidence",
      "11. Record pass/fail result"
    ],
    "example": {
      "test_with_refs": {
        "test_id": "TEST-EXAMPLE-001",
        "setup_flow_ref": "SETUP-001",
        "business_rule_refs": [
          "BR-001",
          "BR-002"
        ]
      },
      "resolution_steps": [
        "1. Look up SETUP-001 in definitions.setup_flows",
        "2. Find the flow object with matching flow_id",
        "3. Execute each step in the steps array in order",
        "4. Look up BR-001 and BR-002 in definitions.business_rules",
        "5. Validate that the UI behaves according to those rules"
      ]
    }
  },
  "metadata": {
    "feature_name": "Air Ticket",
    "feature_slug": "air-ticket",
    "version": "v37",
    "folder_path": "air-ticket/v37",
    "readme_path": "air-ticket/v37/README.md",
    "github_root_path": "air-ticket/",
    "generated_at": "2026-01-10T21:52:47.090Z",
    "source": "jira+zendesk",
    "payload_format": "reference-based-v2",
    "zendesk_status": {
      "available": true
    }
  },
  "summary": {
    "total_tests": 4,
    "by_priority": {
      "must_test": 2,
      "should_test": 2,
      "nice_to_test": 0
    },
    "by_test_type": {
      "workflow": 2,
      "ui_visibility": 1,
      "text_verification": 1,
      "form_interaction": 0,
      "permission_check": 0
    },
    "documentation_candidates": 6,
    "excluded": 2,
    "zendesk_data_available": true
  },
  "definitions": {
    "access_paths": {
      "configuration": [
        {
          "path_id": "CFG-001",
          "path_name": "Create Air Ticket Allowance Policy",
          "navigation": [
            "Settings",
            "Company",
            "Air ticket policies"
          ],
          "canonical_path": "Settings > Company > Air ticket policies",
          "source_article": "Setting up an air ticket allowance policy"
        },
        {
          "path_id": "CFG-002",
          "path_name": "Configure Air Ticket Auto Encashment Workflow",
          "navigation": [
            "Settings",
            "Workflows",
            "Air Tickets Auto Encashment Recipe"
          ],
          "canonical_path": "Settings > Workflows > Air Tickets Auto Encashment",
          "source_article": "Air Tickets Auto Encashments via Workflows"
        }
      ],
      "operational": []
    },
    "setup_flows": [
      {
        "flow_id": "SETUP-001",
        "flow_name": "Create Air Ticket Allowance Policy",
        "steps": [
          {
            "step": 1,
            "action": "Navigate to Settings > Company > Air ticket policies",
            "element_type": "navigation",
            "expected_result": "Air ticket policies page loads"
          },
          {
            "step": 2,
            "action": "Click Add New button",
            "element_type": "button",
            "expected_result": "Policy creation form opens"
          },
          {
            "step": 3,
            "action": "Enter policy name in text field",
            "element_type": "input",
            "expected_result": "Policy name is captured"
          },
          {
            "step": 4,
            "action": "Enter allowance amount in currency field",
            "element_type": "input",
            "expected_result": "Allowance amount is set"
          },
          {
            "step": 5,
            "action": "Select redemption options via checkboxes (Reimbursement, Encashment, Ticket Booking)",
            "element_type": "checkbox",
            "expected_result": "Redemption options are selected"
          },
          {
            "step": 6,
            "action": "Select eligible employees from dropdown or table",
            "element_type": "dropdown",
            "expected_result": "Employees are assigned to policy"
          },
          {
            "step": 7,
            "action": "Review policy details and click Save",
            "element_type": "button",
            "expected_result": "Policy is created and activated"
          }
        ],
        "source_article": "Setting up an air ticket allowance policy"
      },
      {
        "flow_id": "SETUP-002",
        "flow_name": "Configure Air Ticket Auto Encashment Workflow",
        "steps": [
          {
            "step": 1,
            "action": "Navigate to Settings > Workflows",
            "element_type": "navigation",
            "expected_result": "Workflows page loads"
          },
          {
            "step": 2,
            "action": "Click Create New Workflow button",
            "element_type": "button",
            "expected_result": "Workflow creation modal opens"
          },
          {
            "step": 3,
            "action": "Select Air Tickets Auto Encashment recipe from dropdown",
            "element_type": "dropdown",
            "expected_result": "Recipe template is loaded"
          },
          {
            "step": 4,
            "action": "Set trigger date and time (hour-level precision)",
            "element_type": "date_picker",
            "expected_result": "Trigger schedule is configured"
          },
          {
            "step": 5,
            "action": "Select encashment criteria and request type",
            "element_type": "dropdown",
            "expected_result": "Encashment options are selected"
          },
          {
            "step": 6,
            "action": "Assign employee and save workflow",
            "element_type": "button",
            "expected_result": "Workflow is activated and ready to execute"
          }
        ],
        "source_article": "Air Tickets Auto Encashments via Workflows"
      }
    ],
    "business_rules": [
      {
        "rule_id": "BR-001",
        "rule": "Air ticket request options must be enabled by admin before employees can submit requests",
        "ui_manifestation": "Request Air Ticket button is disabled or hidden if options are not enabled in policy settings",
        "source_article": "How to request Air ticket"
      },
      {
        "rule_id": "BR-002",
        "rule": "Employees cannot be assigned to multiple air ticket policies simultaneously",
        "ui_manifestation": "Employee selection dropdown prevents duplicate policy assignments; system validates on save",
        "source_article": "Setting up an air ticket allowance policy"
      },
      {
        "rule_id": "BR-004",
        "rule": "Active policies cannot be edited once ticket requests are raised",
        "ui_manifestation": "Edit button is disabled for policies with pending or approved requests; tooltip explains restriction",
        "source_article": "Setting up an air ticket allowance policy"
      },
      {
        "rule_id": "BR-005",
        "rule": "Allowance amount applies collectively to listed dependents, not individually",
        "ui_manifestation": "Policy configuration shows single allowance field; dependent selection does not create separate allowances",
        "source_article": "Setting up an air ticket allowance policy"
      },
      {
        "rule_id": "BR-006",
        "rule": "Workflow trigger time is based on account location (UAE or KSA)",
        "ui_manifestation": "Time picker displays timezone information; hour-level precision only",
        "source_article": "Air Tickets Auto Encashments via Workflows"
      },
      {
        "rule_id": "BR-007",
        "rule": "Allowance can vary by employee seniority or country/region",
        "ui_manifestation": "Policy creation allows multiple policies with different allowance amounts; employee assignment filters by criteria",
        "source_article": "Setting up an air ticket allowance policy"
      }
    ],
    "edge_cases": [
      {
        "case_id": "EC-002",
        "scenario": "Admin attempts to edit an active policy with existing ticket requests",
        "expected_ui_behavior": "Edit button is disabled; modal or tooltip explains that policy cannot be modified with pending requests",
        "source_article": "Setting up an air ticket allowance policy"
      },
      {
        "case_id": "EC-004",
        "scenario": "Workflow minute selector is used to set encashment trigger time",
        "expected_ui_behavior": "Minute field is non-functional or hidden; only hour selection is available",
        "source_article": "Air Tickets Auto Encashments via Workflows"
      },
      {
        "case_id": "EC-005",
        "scenario": "Admin creates multiple policies for different hierarchy levels with varying allowances",
        "expected_ui_behavior": "System allows multiple policies; employee assignment correctly filters by seniority/level criteria",
        "source_article": "Setting up an air ticket allowance policy"
      },
      {
        "case_id": "EC-006",
        "scenario": "Workflow is configured without selecting an assignee employee",
        "expected_ui_behavior": "Save button is disabled or validation error appears requiring assignee selection",
        "source_article": "Air Tickets Auto Encashments via Workflows"
      }
    ],
    "ui_elements": [
      {
        "element_name": "Add New Policy button",
        "element_type": "button",
        "location": "Settings > Company > Air ticket policies"
      },
      {
        "element_name": "Policy Name input field",
        "element_type": "input",
        "location": "Settings > Company > Air ticket policies > Create Policy"
      },
      {
        "element_name": "Allowance Amount input field",
        "element_type": "input",
        "location": "Settings > Company > Air ticket policies > Create Policy"
      },
      {
        "element_name": "Redemption Options checkboxes",
        "element_type": "checkbox",
        "location": "Settings > Company > Air ticket policies > Create Policy"
      },
      {
        "element_name": "Eligible Employees dropdown",
        "element_type": "dropdown",
        "location": "Settings > Company > Air ticket policies > Create Policy"
      },
      {
        "element_name": "Request Timing dropdown",
        "element_type": "dropdown",
        "location": "Settings > Company > Air ticket policies > Create Policy"
      },
      {
        "element_name": "Renewal Cycle dropdown",
        "element_type": "dropdown",
        "location": "Settings > Company > Air ticket policies > Create Policy"
      },
      {
        "element_name": "Create New Workflow button",
        "element_type": "button",
        "location": "Settings > Workflows"
      },
      {
        "element_name": "Air Tickets Auto Encashment Recipe dropdown",
        "element_type": "dropdown",
        "location": "Settings > Workflows > Create Workflow"
      },
      {
        "element_name": "Trigger Date picker",
        "element_type": "date_picker",
        "location": "Settings > Workflows > Create Workflow > Configure Trigger"
      },
      {
        "element_name": "Trigger Time picker (Hour only)",
        "element_type": "date_picker",
        "location": "Settings > Workflows > Create Workflow > Configure Trigger"
      },
      {
        "element_name": "Encashment Options dropdown",
        "element_type": "dropdown",
        "location": "Settings > Workflows > Create Workflow > Define Criteria"
      },
      {
        "element_name": "Request Type dropdown",
        "element_type": "dropdown",
        "location": "Settings > Workflows > Create Workflow > Set Request Details"
      },
      {
        "element_name": "Assignee Employee dropdown",
        "element_type": "dropdown",
        "location": "Settings > Workflows > Create Workflow > Set Request Details"
      },
      {
        "element_name": "Save Workflow button",
        "element_type": "button",
        "location": "Settings > Workflows > Create Workflow"
      },
      {
        "element_name": "Workflow Activity Log",
        "element_type": "table",
        "location": "Settings > Workflows > Workflow Details"
      },
      {
        "element_name": "Save Policy button",
        "element_type": "button",
        "location": "Settings > Company > Air ticket policies > Create Policy"
      }
    ]
  },
  "tests": [
    {
      "test_id": "TEST-TSSD-3193",
      "ticket_key": "TSSD-3193",
      "test_name": "Client is unable to remove Processed Air tickets",
      "validation_priority": "must_test",
      "test_type": "workflow",
      "theme": "Air ticket deletion workflow",
      "description": "verify fix works",
      "what_to_test": "Requests > Air tickets > Processed air ticket deletion workflow after payroll transaction rejection",
      "access_path_ref": "CFG-002",
      "setup_flow_ref": "SETUP-002",
      "business_rule_refs": [
        "BR-001",
        "BR-002",
        "BR-004"
      ],
      "edge_case_refs": [
        "EC-002",
        "EC-006"
      ],
      "ui_element_refs": [
        "Air Tickets Auto Encashment Recipe dropdown",
        "Request Timing dropdown",
        "Add New Policy button",
        "Policy Name input field",
        "Allowance Amount input field",
        "Redemption Options checkboxes",
        "Eligible Employees dropdown",
        "Renewal Cycle dropdown",
        "Save Policy button",
        "Request Type dropdown"
      ],
      "assertions": [
        "Assert processed air ticket shows in list with rejection option disabled initially",
        "Assert reopening payroll month makes transaction visible",
        "Assert rejecting payroll transaction enables air ticket rejection option",
        "Assert air ticket can be rejected after transaction rejection",
        "Assert rejected air ticket no longer appears in processed list"
      ],
      "source": {
        "ticket_key": "TSSD-3193",
        "status": "Resolved",
        "issue_type": "Bug"
      }
    },
    {
      "test_id": "TEST-AV-6477",
      "ticket_key": "AV-6477",
      "test_name": "FE: Show remaining air tickets when balance is on hold due to booking request",
      "validation_priority": "should_test",
      "test_type": "ui_visibility",
      "theme": "Air ticket balance visibility",
      "description": "validate implementation",
      "what_to_test": "Employee Benefits > Air tickets > Balance display during pending booking request",
      "access_path_ref": "CFG-002",
      "setup_flow_ref": "SETUP-002",
      "business_rule_refs": [
        "BR-001",
        "BR-004",
        "BR-002"
      ],
      "edge_case_refs": [
        "EC-002",
        "EC-006"
      ],
      "ui_element_refs": [
        "Request Timing dropdown",
        "Air Tickets Auto Encashment Recipe dropdown",
        "Assignee Employee dropdown",
        "Request Type dropdown",
        "Eligible Employees dropdown",
        "Add New Policy button",
        "Policy Name input field",
        "Allowance Amount input field",
        "Redemption Options checkboxes",
        "Renewal Cycle dropdown"
      ],
      "assertions": [
        "Assert remaining air ticket balance is visible when booking request is pending",
        "Assert balance shows accurate count despite on-hold status",
        "Assert balance updates correctly after booking request completes",
        "Assert no loading state obscures balance information"
      ],
      "source": {
        "ticket_key": "AV-6477",
        "status": "Already Done",
        "issue_type": "Bug"
      }
    },
    {
      "test_id": "TEST-AV-6343",
      "ticket_key": "AV-6343",
      "test_name": "FE: Unclear indication of available air ticket requests",
      "validation_priority": "should_test",
      "test_type": "text_verification",
      "theme": "Air ticket request counter clarity",
      "description": "validate implementation",
      "what_to_test": "Employee Benefits > Air tickets > Request counter label clarity",
      "access_path_ref": "CFG-001",
      "setup_flow_ref": "SETUP-002",
      "business_rule_refs": [
        "BR-001",
        "BR-004",
        "BR-002",
        "BR-006"
      ],
      "edge_case_refs": [
        "EC-002",
        "EC-006",
        "EC-004"
      ],
      "ui_element_refs": [
        "Request Timing dropdown",
        "Eligible Employees dropdown",
        "Add New Policy button",
        "Policy Name input field",
        "Allowance Amount input field",
        "Redemption Options checkboxes",
        "Renewal Cycle dropdown",
        "Air Tickets Auto Encashment Recipe dropdown",
        "Save Policy button",
        "Assignee Employee dropdown"
      ],
      "assertions": [
        "Assert request counter displays clear label (not ambiguous 0/1 notation)",
        "Assert label indicates remaining requests or used requests unambiguously",
        "Assert zero-state message clearly communicates no requests available",
        "Assert info card redesign displays request status intuitively"
      ],
      "source": {
        "ticket_key": "AV-6343",
        "status": "Already Done",
        "issue_type": "Bug"
      }
    },
    {
      "test_id": "TEST-TSSD-3366",
      "ticket_key": "TSSD-3366",
      "test_name": "Need to remove processed (Encashment) Air tickets with Payroll reopen",
      "validation_priority": "must_test",
      "test_type": "workflow",
      "theme": "Payroll reopen air ticket transfer",
      "description": "verify fix works",
      "what_to_test": "Payroll Management > Reopen payroll > Move processed air ticket encashment to pending and transfer between periods",
      "access_path_ref": "CFG-002",
      "setup_flow_ref": "SETUP-002",
      "business_rule_refs": [
        "BR-001",
        "BR-004",
        "BR-002"
      ],
      "edge_case_refs": [
        "EC-002"
      ],
      "ui_element_refs": [
        "Air Tickets Auto Encashment Recipe dropdown",
        "Add New Policy button",
        "Policy Name input field",
        "Allowance Amount input field",
        "Redemption Options checkboxes",
        "Eligible Employees dropdown",
        "Request Timing dropdown",
        "Renewal Cycle dropdown",
        "Save Policy button",
        "Encashment Options dropdown"
      ],
      "assertions": [
        "Assert closed payroll month can be reopened",
        "Assert processed air ticket transaction appears in reopened payroll",
        "Assert transaction can be deleted from payroll table",
        "Assert air ticket request returns to pending status after transaction deletion",
        "Assert pending request can be rejected and deleted",
        "Assert request can be moved to different payroll period"
      ],
      "source": {
        "ticket_key": "TSSD-3366",
        "status": "Resolved",
        "issue_type": "Support"
      }
    }
  ],
  "limitations": {
    "documentation_candidates": [
      {
        "ticket_key": "TSSD-2933",
        "summary": "Air ticket carry over",
        "documentation_type": "configuration_note",
        "limitation_statement": "Air ticket policies do not support indefinite carry-over of unused balances between renewal cycles. Unused ticket allowances expire at the end of each policy period.",
        "user_impact": "Organizations must carefully plan air ticket allocations upfront; unused tickets cannot be rolled forward to future years.",
        "workaround": "For multi-year policies, calculate total requests as (annual requests × number of years) and set that as the total request limit in the policy.",
        "guide_section": "Air Ticket Policy Configuration > Renewal Cycles and Request Allocation"
      },
      {
        "ticket_key": "TSSD-3954",
        "summary": "Air tickets - Booked tickets notification (tagging LM when not in approval flow OR workflow on ticket requests)",
        "documentation_type": "feature_gap",
        "limitation_statement": "The platform cannot notify or tag line managers about air ticket booking completion when they are outside the formal approval workflow. Air ticket application is not available in Workflows to configure automated notifications.",
        "user_impact": "Line managers lack visibility into ticket processing status for requests they submit for employees, creating communication gaps and tracking challenges.",
        "workaround": "Ensure line managers are included in the air ticket approval flow to receive notifications, or use manual status checks through the request list.",
        "guide_section": "Air Ticket Notifications > Tracking Requests Submitted on Behalf of Employees"
      },
      {
        "ticket_key": "OS-695",
        "summary": "As an employee I want to manage my air ticket requests from my air tickets",
        "documentation_type": "business_decision",
        "limitation_statement": "The platform does not provide a unified interface for employees to manage air ticket requests across different policy states (inactive policies, missing hire dates, ineligibility conditions).",
        "user_impact": "Employees have limited visibility and control over air ticket requests under various policy conditions, requiring HR intervention for status clarification.",
        "workaround": "Contact HR or admin to check policy status, verify employee record completeness, and confirm eligibility before attempting air ticket requests.",
        "guide_section": "Air Ticket Management > Policy States and Eligibility"
      },
      {
        "ticket_key": "TSSD-1995",
        "summary": "Expense Manager access to Loans",
        "documentation_type": "feature_gap",
        "limitation_statement": "The Expense Manager role has visibility to employee loans and air tickets beyond work expenses. The platform lacks granular permission controls to restrict role visibility to specific data categories.",
        "user_impact": "Expense Managers have unintended access to sensitive employee financial information, creating potential data privacy and security concerns.",
        "workaround": "Use custom role development or request platform team to enable granular permission controls for your account.",
        "guide_section": "Role Permissions > Expense Manager Visibility Scope"
      },
      {
        "ticket_key": "TSSD-2511",
        "summary": "Letter requests - upload the document after stamping",
        "documentation_type": "feature_gap",
        "limitation_statement": "The platform does not support external document signing workflows for letter requests. Approved requests cannot be returned to pending status, and attachments cannot be added to approved requests.",
        "user_impact": "Organizations requiring external document stamping or attestation must use email-based workarounds instead of centralized document management.",
        "workaround": "Download letter from pending status, have it stamped externally, and share via email. Alternatively, request super admin to manually attach signed documents if system allows backend modification.",
        "guide_section": "Letter Requests > External Signing and Attestation Workflows"
      },
      {
        "ticket_key": "TSSD-4672",
        "summary": "Restricted People manager role - can still see other employees (out of assigned group)",
        "documentation_type": "feature_gap",
        "limitation_statement": "Employee group restrictions only apply to finance and payroll modules. People Manager and Adjustment Manager roles can view and edit employees outside their assigned groups in HR modules, Documents, and Departments.",
        "user_impact": "Organizations cannot enforce department-level access restrictions for HR staff, creating potential data privacy and organizational control issues.",
        "workaround": "Restrict sensitive HR operations to dedicated HR admin roles; use finance/payroll module grouping for expense-related access control only.",
        "guide_section": "Employee Groups and Role Restrictions > Module Coverage and Limitations"
      }
    ],
    "excluded": [
      {
        "ticket_key": "TSSD-4272",
        "summary": "Limited access for employees to view other users",
        "blocker": "feature_roadmap_pending",
        "reason": "Feature is on product roadmap with employee grouping and structures in development. No current UI to test; awaiting platform team implementation."
      },
      {
        "ticket_key": "TSSD-1403",
        "summary": "Need to delete the test air tickets processed",
        "blocker": "backend_calculation",
        "reason": "Ticket documents a system limitation (processed air tickets cannot be deleted) with no UI mechanism to test. No fix or workaround available; purely informational."
      }
    ]
  },
  "source_articles": [
    {
      "article_id": 13937889131409,
      "title": "How to request Air ticket"
    },
    {
      "article_id": 13937322643857,
      "title": "Setting up an air ticket allowance policy"
    },
    {
      "article_id": 31099964679057,
      "title": "Air Tickets Auto Encashments via Workflows"
    },
    {
      "article_id": 23328000633489,
      "title": "Air ticket request"
    }
  ]
}