<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Leave Encashment - User Guide | Bayzat</title>

  <style>
    /* CSS Reset and Base */
    *, *::before, *::after {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
    }

    body {
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, sans-serif;
      line-height: 1.6;
      color: #1a1a1a;
      background-color: #ffffff;
      max-width: 900px;
      margin: 0 auto;
      padding: 20px;
    }

    /* Hero Banner */
    .hero-banner {
      background: linear-gradient(135deg, #6B46C1 0%, #805AD5 100%);
      color: #ffffff;
      padding: 60px 40px;
      border-radius: 12px;
      margin-bottom: 40px;
      text-align: center;
    }

    .hero-banner h1 {
      font-size: 2.5rem;
      font-weight: 700;
      margin-bottom: 16px;
      color: #ffffff;
    }

    .hero-subtitle {
      font-size: 1.2rem;
      opacity: 0.95;
      color: #ffffff;
    }

    /* Typography */
    h1, h2, h3, h4, h5, h6 {
      color: #1a1a1a;
      font-weight: 600;
      margin-top: 2rem;
      margin-bottom: 1rem;
    }

    h2 {
      font-size: 1.75rem;
      padding-bottom: 0.5rem;
      border-bottom: 2px solid #E2E8F0;
    }

    h3 {
      font-size: 1.35rem;
    }

    p {
      color: #1a1a1a;
      margin-bottom: 1rem;
    }

    /* Sections */
    section, .section {
      margin-bottom: 3rem;
      padding: 24px;
      background: #ffffff;
      border-radius: 8px;
      border: 1px solid #E2E8F0;
    }

    /* Info Boxes */
    .info-box, .note-box, .tip-box {
      padding: 16px 20px;
      border-radius: 8px;
      margin: 20px 0;
      background: #FAF5FF;
      border-left: 4px solid #6B46C1;
    }

    .info-box p, .note-box p, .tip-box p {
      color: #1a1a1a;
      margin: 0;
    }

    .warning-box, .important-box, .caution-box {
      padding: 16px 20px;
      border-radius: 8px;
      margin: 20px 0;
      background: #FFFBEB;
      border-left: 4px solid #D97706;
    }

    .warning-box p, .important-box p, .caution-box p {
      color: #1a1a1a;
      margin: 0;
    }

    /* Lists */
    ul, ol {
      margin: 1rem 0;
      padding-left: 2rem;
      color: #1a1a1a;
    }

    li {
      margin-bottom: 0.5rem;
      color: #1a1a1a;
    }

    /* Tables */
    table {
      width: 100%;
      border-collapse: collapse;
      margin: 20px 0;
      background: #ffffff;
    }

    th, td {
      padding: 12px 16px;
      text-align: left;
      border: 1px solid #E2E8F0;
      color: #1a1a1a;
    }

    th {
      background: #F7FAFC;
      font-weight: 600;
      color: #1a1a1a;
    }

    tr:hover {
      background: #F7FAFC;
    }

    /* Screenshots */
    .screenshot-container, figure {
      margin: 24px auto;
      text-align: center;
    }

    .screenshot, figure img {
      max-width: 100%;
      height: auto;
      border-radius: 8px;
      box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
      border: 1px solid #E2E8F0;
      display: block;
      margin: 0 auto;
    }

    figcaption {
      margin-top: 12px;
      font-size: 0.9rem;
      color: #1a1a1a;
      font-style: italic;
    }

    /* Feature Grid and Cards */
    .feature-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
      gap: 16px;
      margin: 20px 0;
    }

    .feature-card, .card {
      background: #ffffff;
      border: 1px solid #E2E8F0;
      border-radius: 8px;
      padding: 20px;
      margin: 16px 0;
    }

    .feature-card h4, .card h4 {
      color: #1a1a1a;
      margin-top: 0;
    }

    .feature-card p, .card p {
      color: #1a1a1a;
    }

    /* Journey Grid */
    .journey-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
      gap: 16px;
      margin: 20px 0;
    }

    .journey-step {
      background: #F7FAFC;
      border-radius: 8px;
      padding: 20px;
      position: relative;
    }

    .journey-step .step-number {
      background: #6B46C1;
      color: #ffffff;
      width: 32px;
      height: 32px;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      font-weight: 600;
      margin-bottom: 12px;
    }

    .journey-step h4 {
      margin: 0 0 8px 0;
      color: #1a1a1a;
    }

    .journey-step p {
      margin: 0;
      color: #1a1a1a;
    }

    /* Steps */
    .step, .step-item {
      display: flex;
      gap: 16px;
      margin: 20px 0;
      padding: 16px;
      background: #F7FAFC;
      border-radius: 8px;
    }

    .step-number {
      background: #6B46C1;
      color: #ffffff;
      width: 32px;
      height: 32px;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      font-weight: 600;
      flex-shrink: 0;
    }

    .step-content {
      flex: 1;
    }

    .step-content h4 {
      margin: 0 0 8px 0;
      color: #1a1a1a;
    }

    .step-content p {
      color: #1a1a1a;
      margin: 0;
    }

    /* Navigation Path */
    .nav-path, .breadcrumb {
      background: #F7FAFC;
      padding: 12px 16px;
      border-radius: 6px;
      font-family: monospace;
      color: #1a1a1a;
      margin: 16px 0;
    }

    /* Code blocks */
    code {
      background: #F7FAFC;
      padding: 2px 6px;
      border-radius: 4px;
      font-family: 'SF Mono', Monaco, monospace;
      font-size: 0.9em;
      color: #1a1a1a;
    }

    pre {
      background: #F7FAFC;
      padding: 16px;
      border-radius: 8px;
      overflow-x: auto;
      color: #1a1a1a;
    }

    /* Links */
    a {
      color: #6B46C1;
      text-decoration: none;
    }

    a:hover {
      text-decoration: underline;
    }

    /* Footer */
    footer, .footer {
      margin-top: 40px;
      padding-top: 20px;
      border-top: 1px solid #E2E8F0;
      text-align: center;
      color: #1a1a1a;
      font-size: 0.9rem;
    }

    /* Responsive Design */
    @media (max-width: 768px) {
      body {
        padding: 16px;
      }

      .hero-banner {
        padding: 40px 24px;
      }

      .hero-banner h1 {
        font-size: 1.75rem;
      }

      h2 {
        font-size: 1.5rem;
      }

      section, .section {
        padding: 16px;
      }

      table {
        font-size: 0.9rem;
      }

      th, td {
        padding: 8px 12px;
      }
    }

    @media (max-width: 480px) {
      .hero-banner h1 {
        font-size: 1.5rem;
      }

      .hero-subtitle {
        font-size: 1rem;
      }

      .step {
        flex-direction: column;
        gap: 12px;
      }
    }

    /* Print Styles */
    @media print {
      body {
        max-width: 100%;
        padding: 0;
      }

      .hero-banner {
        background: #6B46C1 !important;
        -webkit-print-color-adjust: exact;
        print-color-adjust: exact;
      }

      section, .section {
        break-inside: avoid;
      }
    }

    /* Quick Navigation */
    .guide-nav { background: linear-gradient(135deg, #f8f9ff 0%, #f0f4ff 100%); border-radius: 16px; padding: 24px; margin-bottom: 40px; border: 1px solid #e2e8f0; }
    .nav-header { display: flex; align-items: center; gap: 12px; margin-bottom: 20px; padding-bottom: 16px; border-bottom: 2px solid #e2e8f0; }
    .nav-icon { font-size: 1.5rem; }
    .nav-title { font-size: 1.1rem; font-weight: 600; color: #1e293b; }
    .nav-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(180px, 1fr)); gap: 12px; }
    .nav-card { display: flex; align-items: center; gap: 10px; padding: 14px 16px; background: #ffffff; border-radius: 12px; text-decoration: none; color: #334155; font-size: 0.9rem; font-weight: 500; border: 1px solid #e2e8f0; transition: all 0.2s ease; }
    .nav-card:hover { border-color: #6B46C1; box-shadow: 0 4px 12px rgba(107, 70, 193, 0.15); transform: translateY(-2px); }
    .card-icon { font-size: 1.1rem; }
    .card-label { flex: 1; }

    /* Journey Phases */
    .journey-roadmap { padding: 24px 0; }
    .journey-phases { display: grid; grid-template-columns: repeat(auto-fit, minmax(280px, 1fr)); gap: 16px; }
    .journey-phase { background: #ffffff; border-radius: 12px; padding: 20px; border: 1px solid #e2e8f0; transition: all 0.2s ease; }
    .journey-phase:hover { border-color: #6B46C1; box-shadow: 0 4px 12px rgba(107, 70, 193, 0.1); }
    .phase-marker { width: 36px; height: 36px; background: linear-gradient(135deg, #6B46C1 0%, #805AD5 100%); color: #ffffff; border-radius: 10px; display: flex; align-items: center; justify-content: center; font-weight: 700; margin-bottom: 12px; }
    .phase-content h4 { margin: 0 0 8px 0; font-size: 1rem; color: #1e293b; }
    .phase-content .nav-path { font-size: 0.85rem; color: #64748b; margin: 0 0 12px 0; padding: 8px 12px; background: #f8fafc; border-radius: 6px; }
    .phase-link { display: inline-flex; align-items: center; gap: 4px; font-size: 0.85rem; color: #6B46C1; text-decoration: none; font-weight: 500; }
    .phase-link:hover { text-decoration: underline; }
  </style>

</head>
<body>
<div class="hero-banner">
  <h1>Leave Encashment</h1>
  <p class="hero-subtitle">Convert unused leave into monetary compensation with flexible policy management</p>
</div>

<figure>
  <img src="screenshots/03-leave-encashment-policy-form-step1.png" alt="Leave Encashment Policy Configuration" />
  <figcaption>Leave Encashment Policy Configuration - Define calculation methods and eligibility criteria</figcaption>
</figure>

<!-- Quick Navigation -->
<nav class="guide-nav">
  <div class="nav-header">
    <span class="nav-icon">üß≠</span>
    <span class="nav-title">Quick Navigation</span>
  </div>
  <div class="nav-grid">
    <a href="#overview" class="nav-card"><span class="card-icon">üìã</span><span class="card-label">Overview</span></a>
    <a href="#users" class="nav-card"><span class="card-icon">üë•</span><span class="card-label">Who Uses This</span></a>
    <a href="#navigation" class="nav-card"><span class="card-icon">üß≠</span><span class="card-label">How to Access</span></a>
    <a href="#user-journey" class="nav-card"><span class="card-icon">üó∫Ô∏è</span><span class="card-label">User Journey</span></a>
    <a href="#policy-setup" class="nav-card"><span class="card-icon">‚öôÔ∏è</span><span class="card-label">Policy Setup</span></a>
    <a href="#employee-request" class="nav-card"><span class="card-icon">üìù</span><span class="card-label">Employee Request</span></a>
    <a href="#approval-workflow" class="nav-card"><span class="card-icon">‚úÖ</span><span class="card-label">Approval Workflow</span></a>
    <a href="#payroll-integration" class="nav-card"><span class="card-icon">üí∞</span><span class="card-label">Payroll Integration</span></a>
    <a href="#business-rules" class="nav-card"><span class="card-icon">‚öñÔ∏è</span><span class="card-label">Business Rules</span></a>
    <a href="#troubleshooting" class="nav-card"><span class="card-icon">üîß</span><span class="card-label">Troubleshooting</span></a>
  </div>
</nav>

<section class="section" id="overview">
  <h2>What is Leave Encashment?</h2>

  <h3>Overview</h3>
  <p>Leave Encashment is a comprehensive leave management feature that allows organizations to convert employees' unused leave balances into monetary compensation. The feature supports two primary use cases: voluntary leave encashment during employment (where employees can request to cash out accrued leave days) and mandatory leave encashment during end-of-service settlements.</p>

  <h3>Key Benefits</h3>
  <ul>
    <li>Enable employees to encash unused leave balances through a structured ticket system</li>
    <li>Configure customizable policies with salary components, calculation methods, and eligibility criteria</li>
    <li>Streamline approval workflows and integrate approved encashments directly into payroll processing</li>
    <li>Support both mid-year leave encashment requests and end-of-service leave settlements</li>
  </ul>
</section>

<section class="section">
  <h2>Who Uses This Feature?</h2>

  <p>The Leave Encashment feature serves multiple user personas across the organization:</p>

  <table>
    <thead>
      <tr>
        <th>User Role</th>
        <th>What They Do</th>
        <th>Value Proposition</th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td><strong>Employees</strong></td>
        <td>Submit leave encashment requests through the mobile ticket system to convert unused vacation days into financial compensation</td>
        <td>Convert unused leave into cash with a simple request and transparent tracking‚Äîeliminating uncertainty about eligibility and payment timelines</td>
      </tr>
      <tr>
        <td><strong>HR Administrators & Payroll Managers</strong></td>
        <td>Configure leave encashment policies, define eligibility criteria, set calculation rules, and manage the overall encashment framework</td>
        <td>Design encashment policies that match your organization's rules and have them enforced automatically‚Äîwithout manual eligibility checks or calculation errors</td>
      </tr>
      <tr>
        <td><strong>Super Admins</strong></td>
        <td>Configure end-of-service leave encashment settings, including salary components and calculation methods for final settlements</td>
        <td>Ensure consistent, compliant leave encashment across all employee departures‚Äîeliminating ad-hoc calculations and potential legal disputes</td>
      </tr>
      <tr>
        <td><strong>Approvers</strong></td>
        <td>Review, approve, or reject leave encashment requests through configured approval workflows (Line Managers, Payroll Admins, Transaction Processing Admins)</td>
        <td>Make informed approval decisions with full visibility into leave balances and policy compliance‚Äîrather than manually verifying eligibility</td>
      </tr>
      <tr>
        <td><strong>System Administrators</strong></td>
        <td>Set up leave encashment employee ticket types and configure which employees can access the feature</td>
        <td>Control feature access and request workflows with granular permissions‚Äîensuring only eligible employees can submit encashment requests</td>
      </tr>
    </tbody>
  </table>
</section>

<section class="section section-product-foundation" id="product-foundation">
  <header class="section-header">
    <h2 class="section-title">Product Foundation Overview</h2>
  </header>
  <div class="section-body">
    <div class="subsection">
      <h3>How Leave Encashment Fits</h3>
      <p>Leave Encashment is a <strong>leave-to-cash conversion system</strong> that allows employees to convert unused leave balances into monetary compensation. It supports both voluntary mid-year requests and mandatory end-of-service settlements with configurable policies and payroll integration.</p>
      <div class="info-box">
        <p><strong>Mental model:</strong> HR creates policy ‚Üí Defines eligibility and calculation rules ‚Üí Employee submits ticket ‚Üí System validates balance ‚Üí Approver reviews ‚Üí Approved amount added to payroll.</p>
      </div>
      <p>Properly configured leave encashment policies automate calculations and ensure compliance with labor regulations.</p>
    </div>

    <div class="subsection">
      <h3>Key Decisions Before Setup</h3>
      <p>Answer these questions before configuring leave encashment:</p>
      <ul>
        <li><strong>Which leave types are encashable?</strong> ‚Äî Typically Vacation/Annual Leave; exclude sick or unpaid leave</li>
        <li><strong>What are the eligibility criteria?</strong> ‚Äî Minimum tenure, minimum accrued days, probation restrictions</li>
        <li><strong>How should amounts be calculated?</strong> ‚Äî Basic Salary only vs. Basic + Allowances; calendar vs. working days</li>
        <li><strong>What approval workflow applies?</strong> ‚Äî Define approvers (Line Manager, Payroll Admin, etc.)</li>
      </ul>
    </div>

    <div class="subsection">
      <h3>Related Features</h3>
      <ul>
        <li><strong>Leave Management</strong> ‚Äî Source for leave balances and accrual tracking</li>
        <li><strong>Payroll Module</strong> ‚Äî Processes approved encashment amounts in payroll cycles</li>
        <li><strong>Employee Tickets</strong> ‚Äî Request submission and tracking system</li>
        <li><strong>End of Service</strong> ‚Äî Integrates leave encashment into final settlements</li>
        <li><strong>Daily Wage Calculator</strong> ‚Äî Provides calculation basis for encashment amounts</li>
      </ul>
    </div>

    <div class="subsection">
      <h3>Prerequisites & Requirements</h3>
      <table class="requirements-table">
        <thead>
          <tr>
            <th>Requirement</th>
            <th>Description</th>
            <th>Status</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td>Leave Management Module</td>
            <td>Active with at least one encashable leave type configured</td>
            <td>Required</td>
          </tr>
          <tr>
            <td>Payroll Module</td>
            <td>Configured with employee salary information</td>
            <td>Required</td>
          </tr>
          <tr>
            <td>Daily Wage Settings</td>
            <td>Calculation basis configured in Settings > Payroll</td>
            <td>Required</td>
          </tr>
          <tr>
            <td>Employee Ticket Type</td>
            <td>Leave encashment ticket type created and assigned</td>
            <td>Required</td>
          </tr>
        </tbody>
      </table>
    </div>
  </div>
</section>

<section class="section">
  <h2>Key Capabilities</h2>

  <p>The Leave Encashment feature provides the following core capabilities:</p>

  <div class="feature-grid">
    <div class="feature-card">
      <h4>Policy Configuration</h4>
      <p>Create and manage leave encashment policies with customizable rules including minimum accrued leave days, minimum job tenure requirements, maximum encashment limits per request, and probation period restrictions.</p>
    </div>
    <div class="feature-card">
      <h4>Flexible Calculation Methods</h4>
      <p>Configure encashment calculations based on Basic Salary or Basic Salary + Allowances, with options for calendar days, working days, or custom day calculations.</p>
    </div>
    <div class="feature-card">
      <h4>Employee Eligibility Management</h4>
      <p>Define which employees are eligible for leave encashment by selecting specific employees or applying policies to all staff members.</p>
    </div>
    <div class="feature-card">
      <h4>Ticket-Based Request System</h4>
      <p>Employees submit leave encashment requests through a structured ticket system with fields for leave type, number of days, and automatic amount calculation.</p>
    </div>
  </div>

  <figure>
    <img src="screenshots/04-leave-encashment-calculation-and-criteria.png" alt="Leave Encashment Calculation Settings" />
    <figcaption>Configure calculation formula and eligibility criteria for leave encashment</figcaption>
  </figure>

  <ul>
    <li><strong>Approval Workflows:</strong> Configure multi-level approval flows with parallel or sequential approvers, routing requests based on assigned roles</li>
    <li><strong>Payroll Integration:</strong> Automatically include approved leave encashment amounts in the current payroll cycle for seamless compensation processing</li>
    <li><strong>End-of-Service Integration:</strong> Calculate leave encashment as part of end-of-service settlements based on configured eligibility and calculation rules</li>
    <li><strong>Request Tracking & Reporting:</strong> Monitor leave encashment requests through Pending, Approved, and Rejected tabs with downloadable reports</li>
  </ul>
</section>

<section class="section">
  <h2>Business Value</h2>

  <p>Leave Encashment delivers significant value to organizations by:</p>

  <ul>
    <li><strong>Enhancing Employee Flexibility:</strong> Provides employees with financial flexibility by allowing them to convert unused leave into immediate compensation, improving employee satisfaction and work-life balance</li>
    <li><strong>Ensuring Compliance:</strong> Supports labor law requirements for leave encashment during end-of-service, particularly in jurisdictions like the UAE where MOHRE regulations govern leave settlements</li>
    <li><strong>Reducing Administrative Burden:</strong> Automates leave encashment calculations, approval routing, and payroll integration, reducing manual processing time and potential errors</li>
    <li><strong>Improving Financial Planning:</strong> Enables organizations to manage leave liabilities more effectively by providing employees with encashment options during employment rather than accumulating large leave balances</li>
    <li><strong>Supporting Policy Customization:</strong> Allows organizations to tailor leave encashment rules to their specific business needs, culture, and regulatory requirements</li>
    <li><strong>Providing Audit Trails:</strong> Maintains complete records of leave encashment requests, approvals, and payments for compliance and audit purposes</li>
  </ul>

  <div class="info-box">
    <p><strong>Note:</strong> The Leave Encashment feature is currently under active development. Some capabilities described in this guide may have known limitations or require workarounds. Refer to the Business Rules & Limitations section for detailed information about current constraints.</p>
  </div>
</section>

<section class="section">
  <h2>Technical Prerequisites</h2>

  <p>Before implementing Leave Encashment, ensure the following technical prerequisites are in place:</p>

  <h3>Required System Configuration</h3>
  <ul>
    <li><strong>Leave Management Module:</strong> The Time Off/Leave Management module must be active and configured with at least one leave type (e.g., Vacation, Annual Leave)</li>
    <li><strong>Payroll Module:</strong> The Payroll module must be enabled and configured with employee salary information, including basic salary and allowances</li>
    <li><strong>Employee Profiles:</strong> Complete employee profiles with accurate hire dates, salary components, and leave type assignments</li>
    <li><strong>Daily Wage Calculation:</strong> Daily wage calculation settings must be configured in Settings > Payroll > Daily Wage Calculation, specifying the calculation basis (calendar days, working days, or custom days)</li>
    <li><strong>Leave Policies:</strong> Active leave policies with accrual rules and balance tracking must be assigned to employees</li>
  </ul>

  <h3>Required User Roles & Permissions</h3>
  <p>The following roles are required for different aspects of Leave Encashment functionality:</p>
  <ul>
    <li><strong>Super Admin:</strong> Required for configuring end-of-service leave encashment settings and global payroll configurations</li>
    <li><strong>Payroll Table Admin:</strong> Required for managing leave encashment policies and accessing payroll-related configurations</li>
    <li><strong>Transaction Processing Admin:</strong> Required for processing approved leave encashment requests and adding them to payroll</li>
    <li><strong>Adjustment Manager:</strong> Required for creating and managing salary adjustments related to leave encashment</li>
    <li><strong>System Administrator:</strong> Required for setting up leave encashment employee ticket types and configuring ticket visibility</li>
  </ul>

  <div class="warning-box">
    <p><strong>Known Limitation:</strong> Custom roles for leave encashment approval flows must be mapped to the correct policy by backend administrators. Custom roles do not automatically appear in approval flow dropdowns without proper policy mapping (Jira: TSSD-4337).</p>
  </div>
</section>

<section class="section">
  <h2>Dependencies on Other Modules</h2>

  <p>Leave Encashment integrates with and depends on the following Bayzat platform modules:</p>

  <h3>Leave Management Module</h3>
  <ul>
    <li><strong>Leave Types:</strong> Leave encashment policies are tied to specific leave types configured in the Time Off module</li>
    <li><strong>Leave Balances:</strong> The system validates employee leave balances to ensure sufficient accrued days exist before processing encashment requests</li>
    <li><strong>Leave Accrual:</strong> Leave encashment calculations depend on accurate leave accrual tracking based on configured accrual rules</li>
  </ul>

  <h3>Payroll Module</h3>
  <ul>
    <li><strong>Salary Components:</strong> Leave encashment calculations use employee salary data (basic salary and/or allowances) from the Payroll module</li>
    <li><strong>Daily Wage Calculator:</strong> The Daily Wage Calculation settings determine how daily rates are computed for leave encashment amounts</li>
    <li><strong>Payroll Table:</strong> Approved leave encashment requests are automatically added to the payroll table as salary adjustments</li>
    <li><strong>End of Service:</strong> Leave encashment is calculated as part of end-of-service settlements based on configured eligibility rules</li>
  </ul>

  <figure>
    <img src="screenshots/01-payroll-settings-leave-encashment-section.png" alt="Payroll Settings - Leave Encashment Section" />
    <figcaption>Leave Encashment settings in the Payroll configuration area</figcaption>
  </figure>

  <h3>Employee Tickets Module</h3>
  <ul>
    <li><strong>Ticket System:</strong> Leave encashment requests are submitted and tracked through the Employee Tickets system</li>
    <li><strong>Ticket Types:</strong> A dedicated Leave Encashment ticket type must be configured and enabled in Settings > Tickets</li>
    <li><strong>Ticket Visibility:</strong> Employee eligibility for submitting leave encashment tickets is controlled through ticket type configuration</li>
  </ul>

  <h3>Approval Flows Module</h3>
  <ul>
    <li><strong>Approval Routing:</strong> Leave encashment requests route through configured approval workflows based on assigned roles</li>
    <li><strong>Multi-Level Approvals:</strong> The system supports sequential and parallel approval steps for leave encashment requests</li>
    <li><strong>Approval Notifications:</strong> Email and in-app notifications are triggered based on approval flow configurations</li>
  </ul>
</section>

<section class="section">
  <h2>Setting Up Leave Encashment Tickets</h2>

  <p>To enable employees to submit leave encashment requests, you need to configure the Leave Encashment ticket type:</p>

  <div class="nav-path">Settings > Tickets > Payroll Category > Leave Encashment</div>

  <figure>
    <img src="screenshots/06-tickets-payroll-category-leave-encashment.png" alt="Leave Encashment Ticket Configuration" />
    <figcaption>Configure Leave Encashment ticket type in Settings</figcaption>
  </figure>

  <h3>Configuration Steps</h3>
  <ol>
    <li>Navigate to <strong>Settings > Tickets</strong></li>
    <li>Locate the <strong>Leave Encashment</strong> ticket under the Payroll category</li>
    <li>Enable the ticket type by toggling it to Active</li>
    <li>Configure admin roles allowed to manage leave encashment tickets</li>
    <li>Select employees who can request leave encashment tickets (all employees or custom selection)</li>
    <li>Review and save the ticket type configuration</li>
  </ol>

  <figure>
    <img src="screenshots/07-leave-encashment-ticket-config-step1.png" alt="Leave Encashment Ticket Configuration Step 1" />
    <figcaption>Step 1: Basic ticket configuration settings</figcaption>
  </figure>

  <figure>
    <img src="screenshots/08-leave-encashment-ticket-admin-roles-fields.png" alt="Leave Encashment Ticket Admin Roles and Fields" />
    <figcaption>Configure admin roles and employee fields for leave encashment tickets</figcaption>
  </figure>
</section>

<section class="section">
  <h2>Known Limitations & Workarounds</h2>

  <p>The following limitations are currently known for the Leave Encashment feature:</p>

  <table>
    <thead>
      <tr>
        <th>Issue</th>
        <th>Severity</th>
        <th>Workaround</th>
        <th>Reference</th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td>Inaccurate prorated leave encashment calculations for partial year exits</td>
        <td>High</td>
        <td>Manual calculation and adjustment needed for accurate leave encashment</td>
        <td>OS-345, TSSD-2499</td>
      </tr>
      <tr>
        <td>Custom role configuration complexity for leave encashment approvals</td>
        <td>Medium</td>
        <td>Manual backend configuration required to map custom roles to policies</td>
        <td>TSSD-4337</td>
      </tr>
      <tr>
        <td>Leave Encashment ticket visibility cannot be restricted by employee selection</td>
        <td>Medium</td>
        <td>No workaround available; selective ticket visibility is not supported</td>
        <td>TSSD-4764</td>
      </tr>
      <tr>
        <td>Unclear handling of overused leave days in end of service leave encashment</td>
        <td>Medium</td>
        <td>Manual verification and adjustment may be required for MOHRE compliance</td>
        <td>TSSD-1404</td>
      </tr>
      <tr>
        <td>User interface does not clearly confirm leave encashment configuration changes</td>
        <td>Medium</td>
        <td>Users should verify changes by revisiting configuration screens</td>
        <td>TSSD-3939</td>
      </tr>
      <tr>
        <td>No ability to delete leave encashment policies</td>
        <td>Low</td>
        <td>Policies must be disabled or replaced; deletion is not possible</td>
        <td>OS-655</td>
      </tr>
    </tbody>
  </table>

  <div class="warning-box">
    <p><strong>Important:</strong> The platform currently lacks specific backend endpoints for creating, editing, and deleting leave encashment requests programmatically (Jira: OS-657, OS-662). All leave encashment operations must be performed through the Bayzat user interface.</p>
  </div>
</section>

<section class="section" id="user-journey">
  <h2>Data Flow</h2>

  <p>The leave encashment process follows this workflow:</p>

  <div class="journey-roadmap">
    <div class="journey-phases">
      <div class="journey-phase">
        <div class="phase-marker">1</div>
        <div class="phase-content">
          <h4>Policy Configuration</h4>
          <p class="nav-path">Settings ‚Üí Leave ‚Üí Encashment Policies</p>
          <p>Administrators configure leave encashment policies with eligibility rules and calculation methods</p>
          <a href="#policy-setup" class="phase-link">Learn more ‚Üí</a>
        </div>
      </div>
      <div class="journey-phase">
        <div class="phase-marker">2</div>
        <div class="phase-content">
          <h4>Employee Request</h4>
          <p class="nav-path">Requests ‚Üí Leave Encashment ‚Üí New Request</p>
          <p>Employees submit leave encashment tickets through the mobile or web interface</p>
          <a href="#employee-request" class="phase-link">Learn more ‚Üí</a>
        </div>
      </div>
      <div class="journey-phase">
        <div class="phase-marker">3</div>
        <div class="phase-content">
          <h4>Validation</h4>
          <p class="nav-path">Automatic System Check</p>
          <p>The system validates the request against policy rules, leave balances, and employee eligibility</p>
          <a href="#business-rules" class="phase-link">Learn more ‚Üí</a>
        </div>
      </div>
      <div class="journey-phase">
        <div class="phase-marker">4</div>
        <div class="phase-content">
          <h4>Approval Routing</h4>
          <p class="nav-path">Requests ‚Üí Leave Encashment ‚Üí Pending</p>
          <p>The request routes through configured approval workflows</p>
          <a href="#approval-workflow" class="phase-link">Learn more ‚Üí</a>
        </div>
      </div>
      <div class="journey-phase">
        <div class="phase-marker">5</div>
        <div class="phase-content">
          <h4>Calculation</h4>
          <p class="nav-path">Automatic Calculation Engine</p>
          <p>Upon approval, the system calculates the encashment amount using configured salary components</p>
          <a href="#policy-setup" class="phase-link">Learn more ‚Üí</a>
        </div>
      </div>
      <div class="journey-phase">
        <div class="phase-marker">6</div>
        <div class="phase-content">
          <h4>Payroll Integration</h4>
          <p class="nav-path">Payroll ‚Üí Payroll Table</p>
          <p>The approved amount is added to the payroll table for the current pay period</p>
          <a href="#payroll-integration" class="phase-link">Learn more ‚Üí</a>
        </div>
      </div>
    </div>
  </div>
</section>

<footer>
  <p>Generated by Bayzat Documentation System</p>
  <p>Last updated: 2026-01-13</p>
</footer>

</body>
</html>
