name: Generate User Guide

on:
  workflow_dispatch:
    inputs:
      feature_slug:
        description: 'Feature slug with underscores (e.g., daily_wage_calculator)'
        required: true
        type: string
      feature_name:
        description: 'Human-readable feature name (e.g., Daily Wage Calculator)'
        required: true
        type: string
      folder_path:
        description: 'Versioned folder path from n8n (e.g., daily-wage-calculator/v28) - primary source for all files'
        required: false
        type: string
      next_version:
        description: 'Version number from n8n (e.g., v28) - used when folder_path is provided'
        required: false
        type: string
      jira_report_path:
        description: 'Path to Jira analysis report (legacy - prefer folder_path)'
        required: false
        type: string
      zendesk_report_path:
        description: 'Path to Zendesk analysis report (legacy - prefer folder_path)'
        required: false
        type: string
      validation_artifact_path:
        description: 'Path to validation artifact (e.g., interface-validation-20409366764)'
        required: false
        type: string
      validation_artifact_url:
        description: 'URL to download validation artifact'
        required: false
        type: string
      clean_feature_name:
        description: 'Feature name with hyphens (e.g., daily-wage-calculator)'
        required: false
        type: string

env:
  SUPABASE_URL: ${{ secrets.SUPABASE_URL }}
  SUPABASE_KEY: ${{ secrets.SUPABASE_SERVICE_KEY }}
  SLACK_WEBHOOK_URL: ${{ secrets.SLACK_WEBHOOK_URL }}
  N8N_CALLBACK_URL: ${{ secrets.N8N_CALLBACK_URL }}
  ANTHROPIC_API_KEY: ${{ secrets.ANTHROPIC_API_KEY }}

jobs:
  generate:
    runs-on: self-hosted
    timeout-minutes: 30

    steps:
      - name: Checkout repository
        uses: actions/checkout@v4
        with:
          fetch-depth: 0

      - name: Calculate version number
        id: version
        run: |
          FEATURE_SLUG="${{ inputs.feature_slug }}"
          FOLDER_PATH="${{ inputs.folder_path }}"
          NEXT_VERSION="${{ inputs.next_version }}"

          # If n8n provided folder_path, use its version
          if [ -n "$FOLDER_PATH" ]; then
            echo "üì¶ Using folder_path from n8n: ${FOLDER_PATH}"

            # Extract version from folder_path (e.g., daily-wage-calculator/v28 -> 28)
            if [ -n "$NEXT_VERSION" ]; then
              VERSION="${NEXT_VERSION#v}"  # Remove 'v' prefix if present
            else
              VERSION=$(echo "$FOLDER_PATH" | sed 's/.*\/v\([0-9]*\)$/\1/')
            fi

            echo "version=$VERSION" >> $GITHUB_OUTPUT
            echo "folder_path=$FOLDER_PATH" >> $GITHUB_OUTPUT
            echo "üìä Using n8n version: v$VERSION (folder: ${FOLDER_PATH})"
          else
            # Fallback: calculate version locally
            echo "‚ö†Ô∏è No folder_path from n8n, calculating version locally..."
            OUTPUT_DIR="outputs/${FEATURE_SLUG}"

            # Find existing versions - check both old and new structures
            if [ -d "$OUTPUT_DIR" ]; then
              # New structure: outputs/{feature}/v{n}/user-guide.html
              NEW_LATEST=$(ls -1d "$OUTPUT_DIR"/v* 2>/dev/null | sed 's/.*\/v\([0-9]*\)$/\1/' | sort -n | tail -1)

              # Old structure (fallback): outputs/{feature}/user-guide_v{n}.html
              OLD_LATEST=$(ls -1 "$OUTPUT_DIR"/user-guide_v*.html 2>/dev/null | sed 's/.*_v\([0-9]*\)\.html/\1/' | sort -n | tail -1)

              # Use the higher of the two
              if [ -n "$NEW_LATEST" ] && [ -n "$OLD_LATEST" ]; then
                LATEST_VERSION=$((NEW_LATEST > OLD_LATEST ? NEW_LATEST : OLD_LATEST))
              elif [ -n "$NEW_LATEST" ]; then
                LATEST_VERSION=$NEW_LATEST
              elif [ -n "$OLD_LATEST" ]; then
                LATEST_VERSION=$OLD_LATEST
              else
                LATEST_VERSION=0
              fi

              VERSION=$((LATEST_VERSION + 1))
            else
              VERSION=1
            fi

            echo "version=$VERSION" >> $GITHUB_OUTPUT
            echo "folder_path=" >> $GITHUB_OUTPUT
            echo "üìä Calculated local version: v$VERSION (outputs/${FEATURE_SLUG}/v${VERSION}/)"
          fi

      - name: Verify input files exist
        id: verify
        env:
          N8N_FOLDER_PATH: ${{ inputs.folder_path }}
          FEATURE_SLUG: ${{ inputs.feature_slug }}
          VERSION: ${{ steps.version.outputs.version }}
        run: |
          echo "üîç Checking input files for: ${FEATURE_SLUG}"
          START_TIME=$(date +%s)

          # Determine source paths based on n8n folder_path
          if [ -n "${N8N_FOLDER_PATH}" ]; then
            echo "üì¶ Using n8n folder_path: ${N8N_FOLDER_PATH}"

            # n8n folder structure: {folder_path}/jira/, {folder_path}/zendesk/, {folder_path}/validation/
            ZENDESK_FILE=$(ls -t "${N8N_FOLDER_PATH}/zendesk/"*.md 2>/dev/null | head -1)
            JIRA_FILE=$(ls -t "${N8N_FOLDER_PATH}/jira/"*.md 2>/dev/null | head -1)
            VALIDATION_DIR="${N8N_FOLDER_PATH}/validation"
          else
            echo "‚ö†Ô∏è No n8n folder_path, using legacy paths..."

            # Legacy paths: reports/zendesk/..., reports/jira/..., .validation/output/...
            ZENDESK_FILE=$(ls -t reports/zendesk/${FEATURE_SLUG}/versions/zendesk_md_*.md 2>/dev/null | head -1)
            JIRA_FILE=$(ls -t reports/jira/${FEATURE_SLUG}/versions/v1/runs/jira-analysis_*.md 2>/dev/null | head -1)
            VALIDATION_DIR=".validation/output/${FEATURE_SLUG}/v${VERSION}"

            # Fallback to flat structure if versioned doesn't exist
            if [ ! -d "$VALIDATION_DIR" ]; then
              echo "‚ö†Ô∏è Versioned validation dir not found, checking flat structure..."
              VALIDATION_DIR=".validation/output"
            fi
          fi

          # Check Zendesk report
          if [ -z "$ZENDESK_FILE" ] || [ ! -f "$ZENDESK_FILE" ]; then
            echo "‚ùå Zendesk report not found"
            exit 1
          fi
          echo "‚úÖ Zendesk: $ZENDESK_FILE"
          echo "zendesk_file=$ZENDESK_FILE" >> $GITHUB_OUTPUT

          # Check Jira report
          if [ -z "$JIRA_FILE" ] || [ ! -f "$JIRA_FILE" ]; then
            echo "‚ùå Jira report not found"
            exit 1
          fi
          echo "‚úÖ Jira: $JIRA_FILE"
          echo "jira_file=$JIRA_FILE" >> $GITHUB_OUTPUT

          echo "validation_dir=$VALIDATION_DIR" >> $GITHUB_OUTPUT

          # Check for pw_result.json (primary) or result.json (fallback)
          if [ -f "${VALIDATION_DIR}/pw_result.json" ]; then
            echo "‚úÖ Validation: ${VALIDATION_DIR}/pw_result.json"
          elif [ -f "${VALIDATION_DIR}/result.json" ]; then
            echo "‚úÖ Validation: ${VALIDATION_DIR}/result.json"
          else
            echo "‚ùå Validation result not found in ${VALIDATION_DIR}"
            exit 1
          fi

          # Check screenshots
          if [ -d "${VALIDATION_DIR}/screenshots" ]; then
            SCREENSHOT_COUNT=$(ls ${VALIDATION_DIR}/screenshots/*.png 2>/dev/null | wc -l | tr -d ' ')
          else
            SCREENSHOT_COUNT=0
          fi

          if [ "$SCREENSHOT_COUNT" -eq 0 ]; then
            echo "‚ùå No screenshots found in ${VALIDATION_DIR}/screenshots/"
            exit 1
          fi
          echo "‚úÖ Screenshots: $SCREENSHOT_COUNT files in ${VALIDATION_DIR}/screenshots/"
          echo "screenshot_count=$SCREENSHOT_COUNT" >> $GITHUB_OUTPUT

          # Check template
          if [ ! -f "clean-template-reorganized.html" ]; then
            echo "‚ùå Template not found"
            exit 1
          fi
          echo "‚úÖ Template: clean-template-reorganized.html"

          echo "start_time=$START_TIME" >> $GITHUB_OUTPUT

      - name: Preprocess input files
        id: preprocess
        env:
          FEATURE_SLUG: ${{ inputs.feature_slug }}
          ZENDESK_FILE: ${{ steps.verify.outputs.zendesk_file }}
          JIRA_FILE: ${{ steps.verify.outputs.jira_file }}
          VALIDATION_DIR: ${{ steps.verify.outputs.validation_dir }}
        run: |
          echo "üìÇ Preprocessing input files for: ${FEATURE_SLUG}"

          # Create temp directory for consolidated input
          mkdir -p .generation-input

          # 1. Copy Zendesk report (path from verify step)
          echo "üìÑ Zendesk: $ZENDESK_FILE"
          cp "$ZENDESK_FILE" .generation-input/zendesk-report.md

          # 2. Copy Jira report (path from verify step)
          echo "üìÑ Jira: $JIRA_FILE"
          cp "$JIRA_FILE" .generation-input/jira-report.md

          # 3. Copy validation results - use versioned path from verify step (env already set)
          echo "üìÇ Using validation directory: $VALIDATION_DIR"

          if [ -f "${VALIDATION_DIR}/pw_result.json" ]; then
            cp "${VALIDATION_DIR}/pw_result.json" .generation-input/pw-result.json
            cp "${VALIDATION_DIR}/pw_result.json" .generation-input/validation-result.json
          elif [ -f "${VALIDATION_DIR}/result.json" ]; then
            cp "${VALIDATION_DIR}/result.json" .generation-input/validation-result.json
          fi

          # 4. Copy template
          cp clean-template-reorganized.html .generation-input/template.html

          # 5. List screenshots from versioned directory
          ls -1 ${VALIDATION_DIR}/screenshots/*.png > .generation-input/screenshot-list.txt 2>/dev/null || echo "No screenshots" > .generation-input/screenshot-list.txt

          # 6. Create consolidated prompt file with all content
          cat > .generation-input/full-prompt.md << 'PROMPT_END'
          # User Guide Generation Task

          Generate a complete HTML user guide by filling in the template with content from the source files below.

          ## Instructions
          1. Read the ZENDESK REPORT for feature documentation and help content
          2. Read the JIRA REPORT for known issues, limitations, and customer requests
          3. Read the VALIDATION RESULT for verified interface elements and screenshots
          4. Use the TEMPLATE structure - replace all [PLACEHOLDER] text with real content
          5. Output ONLY the final HTML - no explanations, no markdown code blocks

          PROMPT_END

          echo -e "\n---\n## ZENDESK REPORT\n---\n" >> .generation-input/full-prompt.md
          cat .generation-input/zendesk-report.md >> .generation-input/full-prompt.md

          echo -e "\n---\n## JIRA REPORT\n---\n" >> .generation-input/full-prompt.md
          cat .generation-input/jira-report.md >> .generation-input/full-prompt.md

          echo -e "\n---\n## VALIDATION RESULT\n---\n" >> .generation-input/full-prompt.md
          cat .generation-input/validation-result.json >> .generation-input/full-prompt.md

          echo -e "\n---\n## AVAILABLE SCREENSHOTS\n---\n" >> .generation-input/full-prompt.md
          cat .generation-input/screenshot-list.txt >> .generation-input/full-prompt.md

          echo -e "\n---\n## HTML TEMPLATE (fill this in)\n---\n" >> .generation-input/full-prompt.md
          cat .generation-input/template.html >> .generation-input/full-prompt.md

          # Get file size
          PROMPT_SIZE=$(wc -c < .generation-input/full-prompt.md | tr -d ' ')
          echo "üìä Total prompt size: ${PROMPT_SIZE} bytes"
          echo "prompt_size=$PROMPT_SIZE" >> $GITHUB_OUTPUT

          echo "‚úÖ Preprocessing complete"

      - name: Generate User Guide
        timeout-minutes: 20
        env:
          FEATURE_SLUG: ${{ inputs.feature_slug }}
          FEATURE_NAME: ${{ inputs.feature_name }}
          N8N_FOLDER_PATH: ${{ inputs.folder_path }}
          VALIDATION_DIR: ${{ steps.verify.outputs.validation_dir }}
        run: |
          # Normalize API key (remove any whitespace/newlines)
          export ANTHROPIC_API_KEY=$(echo "$ANTHROPIC_API_KEY" | tr -d '[:space:]')

          VERSION="${{ steps.version.outputs.version }}"
          echo "üìù Generating user guide v$VERSION for: ${FEATURE_SLUG} (${FEATURE_NAME})"

          # Determine output directory - use n8n folder_path if provided
          if [ -n "${N8N_FOLDER_PATH}" ]; then
            OUTPUT_DIR="${N8N_FOLDER_PATH}"
            echo "üì¶ Using n8n folder_path for output: ${OUTPUT_DIR}"
          else
            OUTPUT_DIR="outputs/${FEATURE_SLUG}/v${VERSION}"
            echo "üìÅ Using legacy output directory: ${OUTPUT_DIR}"
          fi

          mkdir -p "${OUTPUT_DIR}/screenshots"
          echo "üìÅ Output directory: ${OUTPUT_DIR}"

          # Copy screenshots from versioned validation directory to versioned output
          if [ -d "${VALIDATION_DIR}/screenshots" ]; then
            cp ${VALIDATION_DIR}/screenshots/*.png "${OUTPUT_DIR}/screenshots/" 2>/dev/null && \
              echo "‚úÖ Copied screenshots from ${VALIDATION_DIR}/screenshots/" || \
              echo "‚ö†Ô∏è No screenshots to copy"
          else
            echo "‚ö†Ô∏è Screenshots directory not found: ${VALIDATION_DIR}/screenshots/"
          fi

          # Copy Jira and Zendesk reports to versioned output for self-contained documentation
          JIRA_FILE="${{ steps.verify.outputs.jira_file }}"
          ZENDESK_FILE="${{ steps.verify.outputs.zendesk_file }}"

          if [ -f "$JIRA_FILE" ]; then
            cp "$JIRA_FILE" "${OUTPUT_DIR}/jira-report.md"
            echo "‚úÖ Copied Jira report to ${OUTPUT_DIR}/jira-report.md"
          else
            echo "‚ö†Ô∏è Jira report not found: $JIRA_FILE"
          fi

          if [ -f "$ZENDESK_FILE" ]; then
            cp "$ZENDESK_FILE" "${OUTPUT_DIR}/zendesk-report.md"
            echo "‚úÖ Copied Zendesk report to ${OUTPUT_DIR}/zendesk-report.md"
          else
            echo "‚ö†Ô∏è Zendesk report not found: $ZENDESK_FILE"
          fi

          # Run claude (step-level timeout-minutes: 20 handles timeout on macOS)
          echo "‚è±Ô∏è Starting Claude generation..."
          echo "üìÑ Input prompt size: ${{ steps.preprocess.outputs.prompt_size }} bytes"

          # Pass prompt as argument to claude --print
          claude --print "$(cat .generation-input/full-prompt.md)" > "${OUTPUT_DIR}/user-guide.html"

          # Verify output was created
          OUTPUT_FILE="${OUTPUT_DIR}/user-guide.html"
          if [ -f "$OUTPUT_FILE" ] && [ -s "$OUTPUT_FILE" ]; then
            OUTPUT_SIZE=$(wc -c < "$OUTPUT_FILE" | tr -d ' ')
            echo "‚úÖ User guide generated: ${OUTPUT_SIZE} bytes"
            echo "üìÅ Location: ${OUTPUT_FILE}"
          else
            echo "‚ùå Output file is empty or missing"
            exit 1
          fi

      - name: Commit and push user guide
        id: commit
        env:
          N8N_FOLDER_PATH: ${{ inputs.folder_path }}
        run: |
          VERSION="${{ steps.version.outputs.version }}"
          FEATURE_SLUG="${{ inputs.feature_slug }}"

          git config user.name "github-actions[bot]"
          git config user.email "github-actions[bot]@users.noreply.github.com"

          # Determine output directory - use n8n folder_path if provided
          if [ -n "${N8N_FOLDER_PATH}" ]; then
            OUTPUT_DIR="${N8N_FOLDER_PATH}"
            # Add the n8n folder_path (contains all outputs: jira, zendesk, validation, user-guide)
            git add "${N8N_FOLDER_PATH}" || true
          else
            OUTPUT_DIR="outputs/${FEATURE_SLUG}/v${VERSION}"
            git add outputs/${FEATURE_SLUG}/ || true
          fi

          if git diff --staged --quiet; then
            echo "No changes to commit"
            echo "committed=false" >> $GITHUB_OUTPUT
          else
            git commit -m "Generate user guide v${VERSION} for ${FEATURE_SLUG}

            ü§ñ Generated with Claude Code"
            git pull --rebase origin main
            git push
            echo "‚úÖ User guide committed and pushed"
            echo "committed=true" >> $GITHUB_OUTPUT
          fi

          # Set VERSIONED output paths
          FILE_PATH="${OUTPUT_DIR}/user-guide.html"
          SCREENSHOTS_PATH="${OUTPUT_DIR}/screenshots"
          GITHUB_URL="https://raw.githubusercontent.com/${{ github.repository }}/main/${FILE_PATH}"
          JIRA_GITHUB_URL="https://raw.githubusercontent.com/${{ github.repository }}/main/${{ steps.verify.outputs.jira_file }}"
          ZENDESK_GITHUB_URL="https://raw.githubusercontent.com/${{ github.repository }}/main/${{ steps.verify.outputs.zendesk_file }}"

          echo "output_dir=$OUTPUT_DIR" >> $GITHUB_OUTPUT
          echo "file_path=$FILE_PATH" >> $GITHUB_OUTPUT
          echo "screenshots_path=$SCREENSHOTS_PATH" >> $GITHUB_OUTPUT
          echo "github_url=$GITHUB_URL" >> $GITHUB_OUTPUT
          echo "jira_github_url=$JIRA_GITHUB_URL" >> $GITHUB_OUTPUT
          echo "zendesk_github_url=$ZENDESK_GITHUB_URL" >> $GITHUB_OUTPUT

      - name: Calculate generation duration
        id: duration
        run: |
          START_TIME="${{ steps.verify.outputs.start_time }}"
          END_TIME=$(date +%s)
          DURATION=$((END_TIME - START_TIME))
          echo "duration=$DURATION" >> $GITHUB_OUTPUT
          echo "‚è±Ô∏è Generation took ${DURATION} seconds"

      - name: Count validated claims
        id: claims
        run: |
          VALIDATION_DIR="${{ steps.verify.outputs.validation_dir }}"
          # Try pw_result.json first (Playwright output), then result.json
          if [ -f "${VALIDATION_DIR}/pw_result.json" ]; then
            CLAIMS_COUNT=$(cat "${VALIDATION_DIR}/pw_result.json" | python3 -c "import sys, json; d=json.load(sys.stdin); print(len(d.get('claim_ui_checks', [])))" 2>/dev/null || echo "0")
          elif [ -f "${VALIDATION_DIR}/result.json" ]; then
            CLAIMS_COUNT=$(cat "${VALIDATION_DIR}/result.json" | python3 -c "import sys, json; d=json.load(sys.stdin); print(len(d.get('validated_claims', [])))" 2>/dev/null || echo "0")
          else
            CLAIMS_COUNT=0
          fi
          echo "claims_count=$CLAIMS_COUNT" >> $GITHUB_OUTPUT
          echo "üìã Validated claims: $CLAIMS_COUNT"

      - name: Insert into Supabase
        if: steps.commit.outputs.committed == 'true'
        run: |
          VERSION="${{ steps.version.outputs.version }}"

          curl -X POST "${{ env.SUPABASE_URL }}/rest/v1/user_guides" \
            -H "apikey: ${{ env.SUPABASE_KEY }}" \
            -H "Authorization: Bearer ${{ env.SUPABASE_KEY }}" \
            -H "Content-Type: application/json" \
            -H "Prefer: return=minimal" \
            -d '{
              "feature_slug": "${{ inputs.feature_slug }}",
              "feature_name": "${{ inputs.feature_name }}",
              "version": '"$VERSION"',
              "output_dir": "${{ steps.commit.outputs.output_dir }}",
              "file_path": "${{ steps.commit.outputs.file_path }}",
              "screenshots_path": "${{ steps.commit.outputs.screenshots_path }}",
              "github_url": "${{ steps.commit.outputs.github_url }}",
              "jira_report_path": "${{ inputs.jira_report_path }}",
              "jira_report_github_url": "${{ steps.commit.outputs.jira_github_url }}",
              "zendesk_report_path": "${{ inputs.zendesk_report_path }}",
              "zendesk_report_github_url": "${{ steps.commit.outputs.zendesk_github_url }}",
              "validation_artifact_path": "${{ inputs.validation_artifact_path }}",
              "validation_artifact_url": "${{ inputs.validation_artifact_url }}",
              "screenshot_count": ${{ steps.verify.outputs.screenshot_count }},
              "validated_claims_count": ${{ steps.claims.outputs.claims_count }},
              "status": "generated",
              "generated_by": "claude-haiku",
              "generation_duration_seconds": ${{ steps.duration.outputs.duration }}
            }'

          echo "‚úÖ Inserted into Supabase"

      # TODO: Uncomment when Slack webhook is approved
      # - name: Send Slack notification
      #   if: always()
      #   run: |
      #     VERSION="${{ steps.version.outputs.version }}"
      #     STATUS="${{ job.status }}"
      #
      #     if [ "$STATUS" = "success" ]; then
      #       EMOJI="‚úÖ"
      #       COLOR="#36a64f"
      #       MESSAGE="User guide v${VERSION} generated successfully!"
      #     else
      #       EMOJI="‚ùå"
      #       COLOR="#ff0000"
      #       MESSAGE="User guide generation failed"
      #     fi
      #
      #     curl -X POST "${{ env.SLACK_WEBHOOK_URL }}" \
      #       -H "Content-Type: application/json" \
      #       -d '{
      #         "attachments": [{
      #           "color": "'"$COLOR"'",
      #           "blocks": [
      #             {
      #               "type": "header",
      #               "text": {
      #                 "type": "plain_text",
      #                 "text": "'"$EMOJI"' User Guide Generation",
      #                 "emoji": true
      #               }
      #             },
      #             {
      #               "type": "section",
      #               "fields": [
      #                 {"type": "mrkdwn", "text": "*Feature:*\n${{ inputs.feature_name }}"},
      #                 {"type": "mrkdwn", "text": "*Version:*\nv'"$VERSION"'"},
      #                 {"type": "mrkdwn", "text": "*Screenshots:*\n${{ steps.verify.outputs.screenshot_count }}"},
      #                 {"type": "mrkdwn", "text": "*Duration:*\n${{ steps.duration.outputs.duration }}s"}
      #               ]
      #             },
      #             {
      #               "type": "section",
      #               "text": {
      #                 "type": "mrkdwn",
      #                 "text": "*GitHub URL:*\n<${{ steps.commit.outputs.github_url }}|View User Guide>"
      #               }
      #             }
      #           ]
      #         }]
      #       }' || echo "Slack notification failed (non-critical)"

      - name: Callback to n8n
        if: env.N8N_CALLBACK_URL != ''
        run: |
          VERSION="${{ steps.version.outputs.version }}"

          curl -X POST "${{ env.N8N_CALLBACK_URL }}" \
            -H "Content-Type: application/json" \
            -d '{
              "status": "${{ job.status }}",
              "feature_slug": "${{ inputs.feature_slug }}",
              "feature_name": "${{ inputs.feature_name }}",
              "version": '"$VERSION"',
              "file_path": "${{ steps.commit.outputs.file_path }}",
              "github_url": "${{ steps.commit.outputs.github_url }}",
              "screenshot_count": ${{ steps.verify.outputs.screenshot_count }},
              "validated_claims_count": ${{ steps.claims.outputs.claims_count }},
              "generation_duration_seconds": ${{ steps.duration.outputs.duration }}
            }' || echo "n8n callback failed (non-critical)"

      - name: Output result
        run: |
          VERSION="${{ steps.version.outputs.version }}"
          echo "üéâ User guide generation complete!"
          echo ""
          echo "üìÇ Versioned Output Structure (self-contained):"
          echo "   outputs/${{ inputs.feature_slug }}/v${VERSION}/"
          echo "   ‚îú‚îÄ‚îÄ user-guide.html"
          echo "   ‚îú‚îÄ‚îÄ screenshots/*.png"
          echo "   ‚îú‚îÄ‚îÄ jira-report.md"
          echo "   ‚îî‚îÄ‚îÄ zendesk-report.md"
          echo ""
          echo "üìÅ User Guide: ${{ steps.commit.outputs.file_path }}"
          echo "üì∏ Screenshots: ${{ steps.commit.outputs.screenshots_path }}"
          echo "üîó GitHub URL: ${{ steps.commit.outputs.github_url }}"
          echo "üìä Screenshot Count: ${{ steps.verify.outputs.screenshot_count }}"
          echo "üìã Validated Claims: ${{ steps.claims.outputs.claims_count }}"
          echo "‚è±Ô∏è Duration: ${{ steps.duration.outputs.duration }}s"
