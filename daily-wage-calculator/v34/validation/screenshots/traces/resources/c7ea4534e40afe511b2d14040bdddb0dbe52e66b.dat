import{r,bL as m,H as le,bH as ne,me as oe,a as re,W as ce,j as e,ck as ie,P as me,T as S,a1 as C,a0 as z,d as de,cl as X,a3 as pe,cm as ue,cn as fe}from"./assets/index-rhBbSAok.js";import{u as ge}from"./Departments-lZVTJGKj__cache.js";import{u as xe}from"./Offices-DfYbdBLq__cache.js";import{C as ye}from"./CheckboxGroupInput-U1UoP8PM__cache.js";import{G as L,g as B}from"./Gender-5xAefzUN__cache.js";import{M as G,m as P}from"./MaritalStatus-UdQkRbwD__cache.js";import{S as _,a as Me,n as H}from"./Nationality-0qhLYdc8__cache.js";import{E as Q,a as V}from"./EmployeeStatus-lQbxLUib__cache.js";import{s as je,S as Se}from"./Select-2iMMU_Ha__cache.js";import{a as q,A as he}from"./Autocomplete-ldKA24XJ__cache.js";import{T as Ce}from"./TextField-TqOYmhqJ__cache.js";const J={search:"",departments:new Set,offices:new Set,nationality:void 0,countryOfResidence:void 0,maritalStatus:void 0,gender:void 0,employeeStatus:void 0},N=()=>{};function We(n=J){const[s,o]=r.useState(()=>m(n,N)),[i,f]=r.useState(()=>m(s,N)),[p,g]=r.useState(!1),y=r.useMemo(()=>!!(s.offices.size>0||s.departments.size>0||s.nationality&&s.nationality.size>0||s.countryOfResidence&&s.countryOfResidence.size>0||s.gender&&s.gender.size>0||s.maritalStatus&&s.maritalStatus.size>0||s.employeeStatus&&s.employeeStatus.size>0),[s]),M=()=>{o(m(i,N)),g(!1)},u=()=>{o(m(J,N)),g(!1)};return r.useEffect(()=>{p===!1&&f(m(s,N))},[p,s]),[p,g,i,f,s,o,M,u,y]}const c=de({departments:{id:"common.departments",defaultMessage:"Departments"},offices:{id:"common.offices",defaultMessage:"Offices"},nationality:{id:"common.nationality",defaultMessage:"Nationality"},selectDepartment:{id:"common.select-department",defaultMessage:"Select department"},selectOffice:{id:"common.select-office",defaultMessage:"Select office"},selectNationality:{id:"common.select-nationality",defaultMessage:"Select nationality"},filter:{id:"common.action.filter",defaultMessage:"Filter"},clearFilters:{id:"common.action.clear-filters",defaultMessage:"Clear filters"},legalCountryOfResidence:{id:"common.legal-country-of-residence",defaultMessage:"Legal Country of Residence"},selectLegalCountryOfResidence:{id:"common.select-legal-country-of-residence",defaultMessage:"Select legal country of residence"},gender:{id:"common.gender",defaultMessage:"Gender"},maritalStatus:{id:"common.marital-status",defaultMessage:"Marital Status"},employeeStatus:{id:"common.employee-status",defaultMessage:"Employee status"}}),I=le()(n=>({filtersWrapper:{display:"flex",flexDirection:"column",gap:n.spacing(1),padding:n.spacing(2)},fieldWrapper:{display:"flex",alignItems:"center",gap:n.spacing(1)},label:{flexGrow:1,flexBasis:"20%"},field:{flexGrow:2,flexBasis:"80%"},filterButton:{alignSelf:"end"},multipleSelectField:{[`& .${je.select}`]:{paddingTop:n.spacing(.75)}},multipleAutocompleteField:{[`& .${q.inputRoot}`]:{paddingLeft:n.spacing(2),paddingTop:n.spacing(.875),paddingBottom:n.spacing(1),gap:n.spacing(.5)},[`& .${q.input}`]:{padding:0,"&::placeholder":{color:n.palette.text.secondary,opacity:1}},[`& .${ne.root}`]:{margin:0},[`& .${oe.root}`]:{height:"auto",margin:0}},multipleSelectFieldSpacing:{display:"inline-flex",gap:n.spacing(.5),flexWrap:"wrap"},filtersSummary:{display:"flex",gap:n.spacing(1),flexWrap:"wrap",alignItems:"baseline"},groupRoot:{display:"flex",flexDirection:"row",justifyContent:"space-between",flexWrap:"wrap",gap:n.spacing(1)},groupItem:{flexBasis:`calc(50% - ${n.spacing(1)})`,margin:0}})),K=({items:n,selectedIds:s=new Set,className:o,placeholder:i,onChange:f,inputId:p})=>{const{classes:g,cx:y}=I(),[M,u]=r.useState(!1),j=r.useRef(!1),b=r.useMemo(()=>Array.from(s),[s]),w=r.useMemo(()=>Array.from(n.values()),[n]);return e.jsx(Se,{className:y(g.multipleSelectField,o),multiple:!0,displayEmpty:!0,value:b,open:M,onClose:()=>u(!1),onOpen:()=>{!j.current&&u(!0)},onChange:({target:{value:x}})=>f(new Set(x)),MenuProps:{disablePortal:!0},"data-external-id":`multiple-select-field${p?`-${p}`:""}`,renderValue:x=>x.length===0?i?e.jsx(S,{variant:"body1",color:"textSecondary",children:i}):null:e.jsx("div",{className:g.multipleSelectFieldSpacing,children:x.map(l=>{var d;return e.jsx(X,{size:"small",label:(d=n.get(l))==null?void 0:d.name,onDelete:()=>{f(new Set(b.filter(F=>F!==l))),j.current=!1},onMouseEnter:()=>j.current=!0,onMouseLeave:()=>j.current=!1},l)})}),children:w.map(({id:x,name:l})=>e.jsxs(pe,{value:x,"data-external-id":`multiple-select-item${p?`-${p}`:""}`,children:[e.jsx(ue,{color:"primary",checked:s.has(x)}),e.jsx(fe,{primary:l})]},x))})},U=({items:n,selectedIds:s=new Set,className:o,placeholder:i,onChange:f})=>{const{classes:p,cx:g}=I(),y=r.useMemo(()=>Array.from(s),[s]),M=r.useMemo(()=>Array.from(n.keys()),[n]);return e.jsx(he,{"data-external-id":"multiple-select-field",className:g(p.multipleAutocompleteField,o),multiple:!0,filterSelectedOptions:!0,disableClearable:!0,options:M,value:y,getOptionLabel:u=>n.get(u).name,renderInput:u=>e.jsx(Ce,{...u,placeholder:y.length===0?i:void 0}),onChange:(u,j)=>f(new Set(j))})},A=({items:n,onChange:s})=>{const{classes:o,cx:i}=I();return e.jsx(ye,{options:n,onChange:f=>s(new Set(f)),classes:{groupRoot:i(o.field,o.groupRoot),groupItem:o.groupItem}})},v=({name:n,items:s,selectedIds:o,onDelete:i,"data-external-id":f})=>{const p=r.useMemo(()=>Array.from(o),[o]),g=r.useMemo(()=>o.size,[o]);return g===0?null:e.jsx(X,{"data-external-id":f,size:"small",color:"secondary",label:e.jsxs(e.Fragment,{children:[e.jsx("strong",{children:n})," ",p.map((y,M)=>{var u;return e.jsxs(r.Fragment,{children:[(u=s.get(y))==null?void 0:u.name,M<g-1?", ":null]},y)})]}),onDelete:i})},Ee=({areFiltersExpanded:n,filters:s,setFilters:o,setAppliedFilters:i,onApplyFilters:f,onDismissFilters:p,onClearFilters:g,hasAnyFilters:y,withNationalityFilter:M,withCountryOfResidenceFilter:u,withGenderFilter:j,withMaritalStatusFilter:b,withEmployeeStatusFilter:w,classes:x})=>{const l=re(),{classes:d,cx:F}=I(),D=ce(),{data:R}=ge({companyId:D}),{data:k}=xe({companyId:D}),W=r.useMemo(()=>(R??[]).reduce((a,{id:t,name:O})=>a.set(t,{id:t,name:O}),new Map),[R]),E=r.useMemo(()=>(k??[]).reduce((a,{id:t,name:O})=>a.set(t,{id:t,name:O}),new Map),[k]),T=r.useMemo(()=>_.reduce((a,t)=>a.set(t,{id:t,name:`${Me(l,t)} (${H(l,t)})`}),new Map),[l]),$=r.useMemo(()=>_.reduce((a,t)=>a.set(t,{id:t,name:H(l,t)}),new Map),[l]),Y=r.useMemo(()=>L.map(a=>{var t;return{value:a,label:B(l,a),isChecked:(t=s.gender)==null?void 0:t.has(a)}}),[s.gender,l]),Z=r.useMemo(()=>L.reduce((a,t)=>a.set(t,{id:t,name:B(l,t)}),new Map),[l]),ee=r.useMemo(()=>Q.map(a=>{var t;return{value:a,label:V(l,a),isChecked:(t=s.employeeStatus)==null?void 0:t.has(a)}}),[s.employeeStatus,l]),ae=r.useMemo(()=>Q.reduce((a,t)=>a.set(t,{id:t,name:V(l,t)}),new Map),[l]),se=r.useMemo(()=>G.map(a=>{var t;return{value:a,label:P(l,a),isChecked:(t=s.maritalStatus)==null?void 0:t.has(a)}}),[s.maritalStatus,l]),te=r.useMemo(()=>G.reduce((a,t)=>a.set(t,{id:t,name:P(l,t)}),new Map),[l]),h=F(d.label,x==null?void 0:x.label);return e.jsxs(e.Fragment,{children:[n&&e.jsx(ie,{onClickAway:p,children:e.jsxs(me,{variant:"outlined",className:d.filtersWrapper,children:[e.jsxs("div",{className:d.fieldWrapper,children:[e.jsx(S,{variant:"body1",className:h,children:l.formatMessage(c.departments)}),e.jsx(K,{items:W,selectedIds:s.departments,placeholder:l.formatMessage(c.selectDepartment),className:d.field,onChange:a=>o(m(t=>({...t,departments:a})))})]}),e.jsx(C,{}),e.jsxs("div",{className:d.fieldWrapper,children:[e.jsx(S,{variant:"body1",className:h,children:l.formatMessage(c.offices)}),e.jsx(K,{items:E,selectedIds:s.offices,placeholder:l.formatMessage(c.selectOffice),className:d.field,onChange:a=>o(m(t=>({...t,offices:a})))})]}),e.jsx(C,{}),M&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:d.fieldWrapper,children:[e.jsx(S,{variant:"body1",className:h,children:l.formatMessage(c.nationality)}),e.jsx(U,{items:T,selectedIds:s.nationality,placeholder:l.formatMessage(c.selectNationality),className:d.field,onChange:a=>o(m(t=>({...t,nationality:a})))})]}),e.jsx(C,{})]}),u&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:d.fieldWrapper,children:[e.jsx(S,{variant:"body1",className:h,children:l.formatMessage(c.legalCountryOfResidence)}),e.jsx(U,{items:$,selectedIds:s.countryOfResidence,placeholder:l.formatMessage(c.selectLegalCountryOfResidence),className:d.field,onChange:a=>o(m(t=>({...t,countryOfResidence:a})))})]}),e.jsx(C,{})]}),j&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:d.fieldWrapper,children:[e.jsx(S,{variant:"body1",className:h,children:l.formatMessage(c.gender)}),e.jsx(A,{items:Y,onChange:a=>o(m(t=>({...t,gender:a})))})]}),e.jsx(C,{})]}),b&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:d.fieldWrapper,children:[e.jsx(S,{variant:"body1",className:h,children:l.formatMessage(c.maritalStatus)}),e.jsx(A,{items:se,onChange:a=>o(m(t=>({...t,maritalStatus:a})))})]}),e.jsx(C,{})]}),w&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:d.fieldWrapper,children:[e.jsx(S,{variant:"body1",className:h,children:l.formatMessage(c.employeeStatus)}),e.jsx(A,{items:ee,onChange:a=>o(m(t=>({...t,employeeStatus:a})))})]}),e.jsx(C,{})]}),e.jsx(z,{"data-external-id":"apply-filters-button",color:"primary",variant:"contained",className:d.filterButton,onClick:f,children:l.formatMessage(c.filter)})]})}),y&&!n&&e.jsxs("div",{className:d.filtersSummary,children:[e.jsx(v,{name:l.formatMessage(c.offices),items:E,selectedIds:s.offices,onDelete:()=>i(m(({offices:a})=>{a.clear()}))}),e.jsx(v,{name:l.formatMessage(c.departments),items:W,selectedIds:s.departments,onDelete:()=>i(m(({departments:a})=>{a.clear()}))}),s.nationality&&e.jsx(v,{name:l.formatMessage(c.nationality),items:T,selectedIds:s.nationality,onDelete:()=>i(m(({nationality:a})=>{a==null||a.clear()}))}),s.countryOfResidence&&e.jsx(v,{name:l.formatMessage(c.legalCountryOfResidence),items:$,selectedIds:s.countryOfResidence,onDelete:()=>i(m(({countryOfResidence:a})=>{a==null||a.clear()}))}),s.gender&&e.jsx(v,{name:l.formatMessage(c.gender),items:Z,selectedIds:s.gender,onDelete:()=>i(m(({gender:a})=>{a==null||a.clear()}))}),s.maritalStatus&&e.jsx(v,{name:l.formatMessage(c.maritalStatus),items:te,selectedIds:s.maritalStatus,onDelete:()=>i(m(({maritalStatus:a})=>{a==null||a.clear()}))}),s.employeeStatus&&e.jsx(v,{"data-external-id":"employee-status-filter-summary",name:l.formatMessage(c.employeeStatus),items:ae,selectedIds:s.employeeStatus,onDelete:()=>i(m(({employeeStatus:a})=>{a==null||a.clear()}))}),e.jsx(z,{"data-external-id":"clear-filters-button",variant:"text",onClick:g,children:l.formatMessage(c.clearFilters)})]})]})};export{Ee as E,We as u};
