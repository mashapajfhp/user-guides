import{F as Xn,G as ea,ce as Ht,H as Ee,af as Ue,bA as Re,a as ce,r as Y,b7 as ee,j as m,df as J,U as Xe,V as et,k6 as ir,f_ as or,cn as lr,aa as Ge,M as yt,I as Ft,J as mt,T as ae,dB as sr,K as gt,d as ve,mq as Ie,fi as ur,a0 as Ce,dy as Gt,dA as Zt,hx as cr,fw as ta,du as ke,cl as xt,go as st,bI as kt,bo as Se,S as jt,lD as Yt,W as ct,a4 as wt,c7 as na,bW as aa,B as gn,cX as ra,b4 as vn,gd as dr,m_ as fr,h$ as hr,dt as ut,bp as bn,Z as Qt,b0 as pr,a1 as Be,gn as ia,a8 as Ze,cV as xn,bS as oa,ac as yr,k$ as la,X as sa,cP as mr,aN as ua,L as ca,cf as da,br as gr,ad as Ct,ae as Nt,b_ as tt,dH as vr,b$ as br,hh as Rn,d9 as fa,c2 as Jt,bN as wn,cR as xr,dc as wr,bn as rn,u as En,C as Er,bB as Ar,c3 as Or,b1 as An,b2 as On,bm as Sn,co as Sr,c_ as _r,ah as Mr,fT as Tr,cz as ha,b9 as kr,dd as jr,aK as Cr,c6 as Nr}from"./assets/index-rhBbSAok.js";import{a as At}from"./timeOff-S3szKU9S__cache.js";import{u as Pr}from"./CompanyTimeOffConfig-DiITXe4E__cache.js";import{T as Ne,a as Dr,u as Rr,d as _n,b as Ir,c as Lr,e as Oe,f as be,g as qr}from"./TimeOffPolicyDetailAccordions-6EO-tyD0__cache.js";import{S as Fr}from"./SearchInput-CIzwHG7W__cache.js";import{u as Br,T as Ur,L as zr,R as Wr}from"./TransferLists-fd6UceTE__cache.js";import{u as Hr,E as $r}from"./EmployeesFilters-9N-emr4d__cache.js";import{C as pa}from"./Card-0cclI5zr__cache.js";import{A as Vr}from"./ArrowLeftIcon-Sfxicbe3__cache.js";import{u as ya}from"./useTrackEventBaynalytics-qtCjzqQ4__cache.js";import{A as Mn}from"./ConfigurationAccordion-sH02smW7__cache.js";import{C as Bt}from"./CheckIcon-c0UFDX9v__cache.js";import{C as Ut}from"./CheckboxInput-9e4-y5wq__cache.js";import{B as Kr,I as Ke}from"./ButtonWithTooltip-ZRvEDUuf__cache.js";import{F as yn}from"./CheckboxInput.form-5LK-WYE6__cache.js";import{a as Gr,F as mn}from"./TextField.form-wfmQrmdl__cache.js";import{A as Zr}from"./ArrowDownIcon-dtMA6p8q__cache.js";import{F as Yr,D as Qr}from"./DecimalNumberField-n0yiM-mI__cache.js";import{F as Jr}from"./Select.form-INoc4nXN__cache.js";import{N as Xr}from"./TextField-tMfA-iyC__cache.js";import{F as ma}from"./react-final-form-arrays.es-BOp2xzTD__cache.js";import{s as ei}from"./Select-2iMMU_Ha__cache.js";import{D as $t,P as on,s as ti}from"./PayrollLeaveDailyRateDayType-85b-5icy__cache.js";import{u as ni}from"./PayrollConfiguration-mnBW9R6M__cache.js";import{I as ai}from"./InvestmentDataIllustration-bUy8YsxJ__cache.js";import{e as ri}from"./Application.tracking-4_lGcJG1__cache.js";import{H as ii}from"./Hyperlink3Icon-ddHc9UkS__cache.js";import{L as oi}from"./ListBulletsIcon-wbIJ0rzB__cache.js";import{L as li}from"./ListNumbersIcon-tHc8fzvo__cache.js";import{P as si}from"./emoji-7BluM_UO__cache.js";/* empty css                          */import{a as ui}from"./_baseIsEqual-F74Z986S__cache.js";import{g as ci}from"./getContentTextFromHtmlString-LE-Oavew__cache.js";import{m as di}from"./final-form-arrays.es-HP7IFYu8__cache.js";import{g as fi}from"./gtGenerator-X2aQKCiP__cache.js";import{c as hi}from"./createUseValidatorWithExternalProps-jVkwmf7___cache.js";import{g as In}from"./gte-lVlExXJk__cache.js";import{l as It}from"./lte-f-euUrru__cache.js";import{m as pi}from"./maxLength-KIK4JrSH__cache.js";import{m as yi}from"./minLength-vljhPzwh__cache.js";import{t as mi,g as gi,a as vi}from"./getLeaveCycleStartDate-1iNtwL6___cache.js";import{B as bi,a as xi}from"./BottomActionBar-dL3NqCxN__cache.js";import{H as wi}from"./HorizontalStepper-uRw5znAK__cache.js";import{P as Ei}from"./PageHeading-nXhD4Nsd__cache.js";import{P as Ai}from"./PageContent-363tIqWz__cache.js";import{F as Ln}from"./FormatDate-f2AQWiWt__cache.js";import{t as ga,a as Tn,b as va,u as Oi}from"./transformSheetsDataToUploadPayload-wU1sspFP__cache.js";import{S as Si}from"./SheetsRowsWithErrorFilterChip-9QeBqMQd__cache.js";import{D as _i}from"./DownloadBottomIcon-rr6q8xxr__cache.js";import{U as Mi}from"./UploadBottomIcon-_5B4PMn3__cache.js";import{i as kn,c as Ti,e as ki,r as ji,t as Ci,g as Ni,h as ba,u as Pi,a as Di,b as Ri,S as Ii,P as Li,d as qi}from"./filterRowsWithContent-CcSD4Q0g__cache.js";import{u as Pt,h as Fi,S as Bi}from"./SheetsDataManager-LxEuYNTa__cache.js";import{c as Ui}from"./createTxtFile-U2q9QzUN__cache.js";import{v as zi}from"./validateExcelFileWithHeaderRowExistence-c-vHYsSV__cache.js";import{u as Xt}from"./useDialog-gRSbQfEN__cache.js";import{u as Wi}from"./usePrompt-wHoy_R1b__cache.js";import{s as Hi,a as $i,b as Vi,c as Ki,d as Gi,e as Zi,f as Yi,A as qn,g as Fn,D as Bn,L as De,h as ln,i as Qi,j as sn,k as Un,l as Ji,t as Xi}from"./timeoffV2Phase4-kCCJVkW8__cache.js";import{i as jn,u as eo,a as to}from"./AssignedAndUnassignedEmployees-eg-RiGqN__cache.js";import{S as no}from"./SheetsConfirmSaveDialogContent-Ot3M9SiD__cache.js";import{a as ao}from"./TypeformDialog-s2PPlhux__cache.js";import{C as ro}from"./CheckCircle1AlternateIcon-021zJtEa__cache.js";import{u as io}from"./useEmployeeProfile-CS8UTcD4__cache.js";import{u as oo}from"./useOnDidMount-YEvKcyHq__cache.js";import"./DaysType-rxTPbDQH__cache.js";import"./SearchableEmployeeDialog-d9H_SAfT__cache.js";import"./InputAdornment-hva1Jw6n__cache.js";import"./ArrowButtonRight1Icon-mIZi9wNh__cache.js";import"./index.m-hKwAibfH__cache.js";import"./Departments-lZVTJGKj__cache.js";import"./commonPaginationForAllRows-6o5gbw64__cache.js";import"./mapResponseArrayDataOnlyGenerator-vWqRqF0l__cache.js";import"./mapResponseArrayGenerator-jtAzkRDY__cache.js";import"./Offices-DfYbdBLq__cache.js";import"./OfficeResponsePayload-gL-37kkA__cache.js";import"./CheckboxGroupInput-U1UoP8PM__cache.js";import"./FormGroup-CG9DRFZI__cache.js";import"./Gender-5xAefzUN__cache.js";import"./MaritalStatus-UdQkRbwD__cache.js";import"./Nationality-0qhLYdc8__cache.js";import"./EmployeeStatus-lQbxLUib__cache.js";import"./Autocomplete-ldKA24XJ__cache.js";import"./useAutocomplete-m434FNIm__cache.js";import"./TextField-TqOYmhqJ__cache.js";import"./Select-rkw5r0hr__cache.js";import"./defineProperty-CSQu1qWQ__cache.js";import"./typeof-Q9eVcF_1__cache.js";import"./index-0cpOJbKN__cache.js";import"./isObjectLike-Zu3gTr-k__cache.js";import"./_baseTimes-qwe36cM4__cache.js";import"./gteGenerator-h-JQ1EQy__cache.js";import"./lteGenerator--wdXZeIV__cache.js";import"./maxLengthGenerator-lvQvKiVB__cache.js";import"./minLengthGenerator-oCk5AMD5__cache.js";import"./index-Uo5f76c2__cache.js";import"./Check1Icon-E6ZeO5d6__cache.js";import"./Breadcrumbs-vaEJs3BD__cache.js";import"./Breadcrumbs-iuU7DkbN__cache.js";import"./PageBody-DUqeS0DQ__cache.js";import"./createSheetsRow-rAhDxP-u__cache.js";import"./copyTextToClipboard-rOz2YpPj__cache.js";import"./ArrowRightIcon-7MADsS01__cache.js";import"./DesktopDatePicker-nh7PrzvA__cache.js";import"./PickersLayout-LyIBs7iN__cache.js";import"./index-RtT5owvQ__cache.js";import"./shared-n9IQD7JL__cache.js";import"./dateViewRenderers-rA8oPqeF__cache.js";import"./useDesktopPicker-ru3jT7CX__cache.js";import"./date-time-utils-I0Zx97XW__cache.js";import"./DesktopTimePicker-fmuGlJMu__cache.js";import"./index-0U0L5i9N__cache.js";import"./index-Y63zM8x7__cache.js";import"./useStateWatcherRef-3bCYpZiX__cache.js";import"./TimeoffWorkTimingResponsePayload-bbwB-sxk__cache.js";const lo=Xn("/companies/{companyId}/time-off/leave-policy/templates/{templateId}","get",{isGlobalProgressEnabled:!1,apiUrlPrefix:At});function xa(n,O={}){const[v,l]=lo(n,xa);return ea({queryKey:v,queryFn:l,...O})}const zn=n=>n.map(O=>({...O,formattedName:Ht(O),searchableName:Ht(O).toLowerCase(),key:O.id})),wa=Ee()(n=>({root:{padding:n.spacing(3)},transferLists:{height:500},listContainer:{minWidth:"50%"},filterLabel:{flexBasis:"30%"},accordionContainer:{border:`1px solid ${Ue.grey[200]}`,borderRadius:n.shape.borderRadius}})),Le=ve({searchFilterEmployeeNameId:{id:"common.search-filter-employee-name-id",defaultMessage:"Search by employee name, ID"},included:{id:"hr.time-off.included",defaultMessage:"Included"},notIncluded:{id:"hr.time-off.not-included",defaultMessage:"Not included"},viewingAllEmployees:{id:"hr.time-off.viewing-all-employees",defaultMessage:"You are viewing all active employees in the company"},removingEmployeeFromPolicy:{id:"hr.time-off.removing-an-employee-from-this-policy",defaultMessage:"Removing an employee from this policy"},noChangeToEmployeesExistingLeaveRequests:{id:"hr.time-off.there-will-be-no-change-to-employees-existing-leave-requests",defaultMessage:"There will be no change to employee’s existing leave requests"},theFollowingDataWillBeErased:{id:"hr.time-off.the-following-data-will-be-erased",defaultMessage:"The following data will be erased:"},anyManualAdjustmentToLeaveAllowance:{id:"hr.time-off.any-manual-adjustment-to-leave-allowance",defaultMessage:"Any manual adjustment to leave allowance"},carriedOverDaysFromPreviousCycle:{id:"hr.time-off.carried-over-days-from-previous-cycle",defaultMessage:"Carried over days from previous cycle"},daysUsedBeforeSetup:{id:"hr.time-off.days-used-before-setup",defaultMessage:"Days used before setup"},onReaddEmployeeUpdateInformationManually:{id:"hr.time-off.on-re-add-employee-update-information-manually",defaultMessage:"If you re-add the employee to the policy later on, you'll have to update this information manually"},inactive:{id:"common.inactive",defaultMessage:"Inactive"}}),un={search:"",departments:new Set,offices:new Set,nationality:void 0,countryOfResidence:void 0,maritalStatus:void 0,gender:void 0,employeeStatus:new Set([Re.Active])},cn=new WeakMap;function so({filters:n}){var l;if(!(n&&Object.keys(n).some(o=>!ee.isEmpty(n[o]))))return;const v=(l=n==null?void 0:n.search)==null?void 0:l.toLowerCase();return function(o){const E=cn.get(o),x=(E==null?void 0:E.name)??o.searchableName,g=(E==null?void 0:E.workIdentifier)??o.workIdentifier;cn.has(o)||cn.set(o,{name:x,workIdentifier:g});let h=!0;return n.search!==void 0&&n.search!==""&&(h=!!(x.includes(v)||g!=null&&g.includes(v))),h&&n.departments&&n.departments.size>0&&(h=!!o.departmentId&&n.departments.has(o.departmentId)),h&&n.offices&&n.offices.size>0&&(h=!!o.officeId&&n.offices.has(o.officeId)),h&&n.gender&&n.gender.size>0&&(h=!!o.gender&&n.gender.has(o.gender)),h&&n.maritalStatus&&n.maritalStatus.size>0&&(h=!!o.maritalStatus&&n.maritalStatus.has(o.maritalStatus)),h&&n.countryOfResidence&&n.countryOfResidence.size>0&&(h=!!o.countryOfResidence&&n.countryOfResidence.has(o.countryOfResidence)),h&&n.employeeStatus&&n.employeeStatus.size>0&&(h=!!o.status&&n.employeeStatus.has(o.status)),h}}const uo=()=>{const n=ce(),{classes:O}=wa(),{includedEmployees:v,excludedEmployees:l,setTimeOffPolicyEmployees:o,isPolicyPublishedWithEmployeesAssigned:E,originalEmployeesAssignedToPolicy:x}=Y.useContext(Ne),[g,h]=Y.useState(!1),[b,d,r,e,a,f,c,i,u]=Hr(un),s=!!(a&&un&&ee.isEqual(a,un)),p=Y.useMemo(()=>so({filters:a}),[a]),{leftListProps:t,rightListProps:y}=Br({initialLeftItems:zn(l),initialRightItems:zn(v),render:co,filter:p}),k=M=>{e({...r,search:M}),f(S=>({...S,search:M}))};return Y.useEffect(()=>{o({excludedEmployees:t.completeList.map(M=>M),includedEmployees:y.completeList.map(M=>M)})},[t.completeList,y.completeList,o]),Y.useEffect(()=>{const M=x==null?void 0:x.every(S=>y.completeList.some(j=>j.id===S.id));h(!M)},[h,x,y.completeList]),m.jsx(pa,{variant:"outlined",elevation:0,className:O.root,children:m.jsxs(J,{spacing:2,children:[g&&E&&m.jsx(fo,{}),m.jsx(Fr,{value:r.search,placeholder:n.formatMessage(Le.searchFilterEmployeeNameId),showFiltersButton:!0,showClearButton:!1,areFiltersExpanded:!1,onChange:k,onFiltersButtonClick:()=>d(!b)}),m.jsx($r,{areFiltersExpanded:b,setFiltersExpanded:d,filters:r,setFilters:e,setAppliedFilters:f,onApplyFilters:c,onDismissFilters:()=>d(!1),onClearFilters:i,hasAnyFilters:u,withCountryOfResidenceFilter:!0,withGenderFilter:!0,withMaritalStatusFilter:!0,withEmployeeStatusFilter:!0,classes:{label:O.filterLabel}}),s&&!r.search&&m.jsx(Xe,{"data-external-id":"all-active-employees-alert",variant:et.Info,withIcon:!0,message:n.formatMessage(Le.viewingAllEmployees)}),m.jsxs(Ur,{className:O.transferLists,children:[m.jsx(zr,{...t,list:t.filteredList,heading:n.formatMessage(Le.notIncluded),className:O.listContainer}),m.jsx(Wr,{...y,list:y.filteredList,heading:n.formatMessage(Le.included),className:O.listContainer})]})]})})};function co({item:n,intl:O}){return m.jsxs(J,{px:1,width:"100%",direction:"row",alignItems:"center",justifyContent:"space-between",flexWrap:"wrap",children:[m.jsxs(m.Fragment,{children:[m.jsx(ir,{children:m.jsx(or,{person:n})}),m.jsx(lr,{primary:n.formattedName})]}),n.status===Re.Inactive&&m.jsx(Ge,{variant:"neutral",label:O.formatMessage(Le.inactive)})]})}const fo=()=>{const n=ce(),{classes:O}=wa();return m.jsx(m.Fragment,{children:m.jsxs(yt,{className:O.accordionContainer,elevation:0,children:[m.jsx(Ft,{expandIcon:m.jsx(mt,{fontSize:"x-small"}),children:m.jsxs(ae,{variant:"h6",display:"flex",gap:1,alignItems:"center",children:[m.jsx(sr,{fontSize:"medium",color:"warning"}),m.jsx("span",{children:n.formatMessage(Le.removingEmployeeFromPolicy)})]})}),m.jsx(gt,{children:m.jsxs(J,{gap:3,children:[m.jsxs(ae,{variant:"body2",display:"flex",gap:1,children:[m.jsx("span",{children:" ✅ "}),m.jsxs("span",{children:[" ",n.formatMessage(Le.noChangeToEmployeesExistingLeaveRequests)," "]})]}),m.jsxs(J,{gap:1,children:[m.jsx(ae,{variant:"subtitle2",children:n.formatMessage(Le.theFollowingDataWillBeErased)}),m.jsxs(ae,{variant:"body2",display:"flex",gap:1,children:[m.jsx("span",{children:" ❌ "}),m.jsxs("span",{children:[" ",n.formatMessage(Le.anyManualAdjustmentToLeaveAllowance)," "]})]}),m.jsxs(ae,{variant:"body2",display:"flex",gap:1,children:[m.jsx("span",{children:" ❌ "}),m.jsx("span",{children:n.formatMessage(Le.carriedOverDaysFromPreviousCycle)})]}),m.jsxs(ae,{variant:"body2",display:"flex",gap:1,children:[m.jsx("span",{children:" ❌ "}),m.jsx("span",{children:n.formatMessage(Le.daysUsedBeforeSetup)})]}),m.jsxs(ae,{variant:"body2",display:"flex",gap:1,children:[m.jsx("span",{children:" ✏️ "}),m.jsx("span",{children:n.formatMessage(Le.onReaddEmployeeUpdateInformationManually)})]})]})]})})]})})},We={allowOutOfOfficeCheckIns:!0,breakEnabled:!1,builtIn:!0,companyId:Ie,considerAbsentCheckEnabled:!0,considerAbsentInterval:2,earlyDepartureCheckEnabled:!0,earlyDepartureInterval:2,endsAt:"2022-12-12",extraHoursType:ur.ExtraHoursAfterWorkHours,halfDay:!1,id:"1",lateArrivalCheckEnabled:!0,lateArrivalInterval:2,name:"Work timing 1",startsAt:"2022-12-12",totalBreakDuration:12},He={builtIn:!1,companyId:Ie,containsHalfDay:!0,friday:!0,fridayHalfDay:!0,id:"1",monday:!0,mondayHalfDay:!1,saturday:!1,saturdayHalfDay:!1,sunday:!1,sundayHalfDay:!1,thursday:!0,thursdayHalfDay:!1,title:"Work week 1",tuesday:!0,tuesdayHalfDay:!1,wednesday:!0,wednesdayHalfDay:!1},ho={assignedEmployees:[{id:"eeee3333-1111-1111-1111-111111111111",canChangeHiredAt:!1,companyId:Ie,firstName:"John",lastName:"Doe",isRegistered:!0,status:Re.Active,workTiming:We,workWeek:He,officeId:"office-1",departmentId:"department-1",hiredAt:"2020-10-10",probationEndDate:"2021-03-03"},{id:"eeee3333-1111-1111-1111-111111111111",canChangeHiredAt:!1,companyId:Ie,firstName:"Alice",lastName:"Smith",isRegistered:!1,status:Re.Active,workTiming:We,workWeek:He,officeId:"office-2",departmentId:"department-2",hiredAt:"2020-10-10",probationEndDate:"2021-03-03"}],unassignedEmployees:[{id:"eeee3333-1111-1111-1111-111111111111",canChangeHiredAt:!1,companyId:Ie,firstName:"Jane",lastName:"Doe",isRegistered:!0,status:Re.Active,workTiming:We,workWeek:He,officeId:"office-1",departmentId:"department-1",hiredAt:"2020-10-10",probationEndDate:"2021-03-03"},{id:"eeee3333-1111-1111-1111-111111111111",canChangeHiredAt:!1,companyId:Ie,firstName:"Bob",lastName:"Johnson",isRegistered:!0,status:Re.Active,workTiming:We,workWeek:He,officeId:"office-2",departmentId:"department-2",hiredAt:"2020-10-10",probationEndDate:"2021-03-03"},{id:"eeee3333-1111-1111-1111-111111111111",canChangeHiredAt:!1,companyId:Ie,firstName:"Kate",lastName:"Lee",isRegistered:!0,status:Re.Active,workTiming:We,workWeek:He,officeId:"office-2",departmentId:"department-3",hiredAt:"2020-10-10",probationEndDate:"2021-03-03"},{id:"eeee3333-1111-1111-1111-111111111111",canChangeHiredAt:!1,companyId:Ie,firstName:"Tom",lastName:"Nguyen",isRegistered:!0,status:Re.Active,workTiming:We,workWeek:He,officeId:"office-3",departmentId:"department-3",hiredAt:"2020-10-10",probationEndDate:"2021-03-03"},{id:"eeee3333-1111-1111-1111-111111111111",canChangeHiredAt:!1,companyId:Ie,firstName:"Samantha",lastName:"Kim",isRegistered:!0,status:Re.Active,workTiming:We,workWeek:He,officeId:"office-3",departmentId:"department-3",hiredAt:"2020-10-10",probationEndDate:"2021-03-03"},{id:"eeee3333-1111-1111-1111-111111111111",canChangeHiredAt:!1,companyId:Ie,firstName:"Michael",lastName:"Brown",isRegistered:!0,status:Re.Active,workTiming:We,workWeek:He,officeId:"office-3",departmentId:"department-4",hiredAt:"2020-10-10",probationEndDate:"2021-03-03"},{id:"eeee3333-1111-1111-1111-111111111111",canChangeHiredAt:!1,companyId:Ie,firstName:"Emma",lastName:"Davis",isRegistered:!0,status:Re.Active,workTiming:We,workWeek:He,officeId:"office-4",departmentId:"department-4",hiredAt:"2020-10-10",probationEndDate:"2021-03-03"},{id:"eeee3333-1111-1111-1111-111111111111",canChangeHiredAt:!1,companyId:Ie,firstName:"William",lastName:"Miller",isRegistered:!0,status:Re.Active,workTiming:We,workWeek:He,officeId:"office-4",departmentId:"department-4",hiredAt:"2020-10-10",probationEndDate:"2021-03-03"}]},po=Ee()(n=>({root:{padding:n.spacing(3),display:"flex",flexDirection:"column",gap:n.spacing(1)},actionButton:{width:"fit-content"},alert:{margin:n.spacing(1,0)}})),Fe=ve({employeesMissingDetailsCount:{id:"hr.time-off.employees-missing-details-count",defaultMessage:"{count, plural, one {# employee is} other {# employees are}} missing details required for policy setup"},employeesMissingDetailsCantRequest:{id:"hr.time-off.employees-missing-details-cant-request",defaultMessage:"Employees missing details cannot request for a leave in any leave policy"},updateEmployeeDetails:{id:"hr.time-off.update-employee-details",defaultMessage:"Update employee details"},allowanceAndProbation:{id:"hr.time-off.allowance-and-probation-individual-employees",defaultMessage:"Allowance and proration for individual employees ({count})"},viewAndEdit:{id:"hr.time-off.view-and-edit",defaultMessage:"View and edit"},employeeName:{id:"hr.time-off.employee-name",defaultMessage:"Employee name"},hireDate:{id:"hr.time-off.hire-date",defaultMessage:"Hire date"},probationEndDate:{id:"hr.time-off.probation-end-date",defaultMessage:"Probation end date"},allowance:{id:"hr.time-off.allowance",defaultMessage:"Allowance"},proratedDays:{id:"hr.time-off.pro-rated-days",defaultMessage:"Prorated days"},daysUsed:{id:"hr.time-off.days-used",defaultMessage:"Days used"},carryOverAllowance:{id:"hr.time-off.carry-over-allowance",defaultMessage:"Carry over allowance"},addEmployees:{id:"hr.time-off.add-employees",defaultMessage:"Add employees"},countEmployeesRemovedRecently:{id:"hr.time-off.count-employees-removed-recently",defaultMessage:"{count, plural, one {# employee} other {# employees}} removed recently"},allowanceAndProbationForNewEmployees:{id:"hr.time-off.allowance-and-probation-new-employees",defaultMessage:"Allowance and proration for newly added employees ({count})"},allowanceAndProbationForEmployees:{id:"hr.time-off.allowance-and-probation-for-employees",defaultMessage:"Allowance and proration for employees ({count})"},manuallyAdjustedCount:{id:"hr.time-off.manually-adjusted-count",defaultMessage:"You have manually adjusted allowance for {count, plural, one {# employee} other {# employees}}"},manuallyAdjustedWillApplyForAllConditions:{id:"hr.time-off.manually-adjusted-will-apply-for-all-conditions",defaultMessage:"Individually adjusted allowances will apply for all policy conditions and future cycles"},viewEmployeesCount:{id:"hr.time-off.view-employees-count",defaultMessage:"View employees ({count})"}}),yo=({onAddEmployees:n})=>{const{classes:O}=po(),v=ce(),{leavePolicy:l,includedEmployees:o,bayzatSheetRowsWithErrors:E,bayzatSheetEditableRows:x,originalEmployeesAssignedToPolicy:g,manuallyAdjustedEmployeeDetailsCount:h,setIsEmployeeDetailsSheetOpen:b,setIsSheetsShowingManuallyAdjustedEmployees:d}=Y.useContext(Ne),r=t=>{d(!!t),b(!0)},e=g==null?void 0:g.map(t=>t.id),a=o.map(t=>t.id),f=e==null?void 0:e.filter(t=>!a.includes(t)),c=e&&!ee.isEmpty(f),i=(f==null?void 0:f.length)||0,u=l&&!l.isDraft&&l.numberOfSetupEmployees>0,s=ee.isEmpty(o)||u&&x<=0,p=!ee.isEmpty(o)&&h>0;return m.jsxs(pa,{elevation:0,variant:"outlined",className:O.root,children:[m.jsx(ae,{"data-external-id":"allowance-and-probation-text",variant:"subtitle1",children:u?v.formatMessage(Fe.allowanceAndProbationForEmployees,{count:x}):v.formatMessage(Fe.allowanceAndProbation,{count:o.length})}),!!c&&m.jsx(ae,{color:"textSecondary",children:v.formatMessage(Fe.countEmployeesRemovedRecently,{count:i})}),!ee.isEmpty(o)&&E>0&&m.jsx(Xe,{className:O.alert,"data-external-id":"missing-details-alert",withIcon:!0,variant:et.Error,title:v.formatMessage(Fe.employeesMissingDetailsCount,{count:E}),message:v.formatMessage(Fe.employeesMissingDetailsCantRequest),primaryAction:{text:v.formatMessage(Fe.updateEmployeeDetails),onClick:()=>r()}}),p&&E<=0&&m.jsx(Xe,{className:O.alert,"data-external-id":"manually-adjusted-employees-alert",withIcon:!0,variant:et.Warning,title:v.formatMessage(Fe.manuallyAdjustedCount,{count:h}),message:v.formatMessage(Fe.manuallyAdjustedWillApplyForAllConditions),primaryAction:{text:v.formatMessage(Fe.viewEmployeesCount,{count:h}),onClick:()=>r(!0)}}),!s&&m.jsx(Ce,{"data-external-id":"view-and-edit-button",onClick:()=>r(),className:O.actionButton,variant:"outlined",children:v.formatMessage(Fe.viewAndEdit)}),s&&m.jsx(Ce,{"data-external-id":"add-employees-button",variant:"outlined",onClick:n,className:O.actionButton,startIcon:m.jsx(Vr,{fontSize:"x-small"}),children:v.formatMessage(Fe.addEmployees)})]})},mo=({onNavigateToStep:n})=>{const{leavePolicy:O,includedEmployees:v,isPolicyPublishedWithEmployeesAssigned:l}=Y.useContext(Ne);return O?m.jsx(Dr,{showEditButtons:!0,policyName:O.name,description:O.description,isAllowanceConditional:O.isAllowanceConditional,leaveAllowanceConditions:O.leaveAllowanceConditions,allowanceType:O.allowanceType,daysType:O.daysType,restrictDuringProbation:O.restrictDuringProbation,restrictLeaveDaysEdit:O.restrictLeaveDaysModification,leavePayRateConditions:O.leavePayRateConditions,leavePayRatePercentage:O.leavePayRatePercentage,isPayRateConditional:O.isPayRateConditional,carryOverAllowance:O.carryOverSupport?O.carryOverAllowance:void 0,dailyRateCustomDayCount:O.dailyRateCustomDayCount,numberOfDays:O.numberOfDays,includedEmployees:v,onNavigateToStep:n,paid:O.paid,carryOverSupport:O.carryOverSupport,publicHolidaysExcluded:O.publicHolidaysExcluded,dailyRateDayType:O.dailyRateDayType,dailyRateSalaryComponent:O.dailyRateSalaryComponent,isPolicyPublishedWithEmployeesAssigned:l,leavePolicyId:O.id,negativeBalanceSupport:O.negativeBalanceSupport,accrualType:O.accrualType,nonConditionalPauseAccrualSetting:O.pauseAccrualSetting,eligibleForLeaveSalary:O.eligibleForLeaveSalary}):m.jsx(m.Fragment,{})},go=Gt("/companies/{companyId}/time-off/leave-types","post",{apiUrlPrefix:At});function Ea(n={}){const O=go(Ea);return Zt({mutationFn:O,...n})}const vo=Gt("/companies/{companyId}/time-off/leave-types/{leaveTypeId}","post",{apiUrlPrefix:At});function Aa(n={}){const O=vo(Aa);return Zt({mutationFn:O,...n})}const bo=Xn("/companies/{companyId}/time-off/leave-types/{leaveTypeId}/disabled-fields","get",{isGlobalProgressEnabled:!1,apiUrlPrefix:At});function Oa(n,O={}){const[v,l]=bo(n,Oa);return ea({queryKey:v,queryFn:l,...O})}const xo=Gt("/companies/{companyId}/time-off/leave-types/{leaveTypeId}/validate","post",{apiUrlPrefix:At});function Sa(n={}){const O=xo(Sa);return Zt({mutationFn:O,...n})}const wo=Ee()(n=>({accordionSummary:{width:"100%",padding:n.spacing(2),position:"sticky",top:n.spacing(7),zIndex:2,background:n.palette.background.paper,'&[aria-expanded="true"]':{borderBottom:`1px solid ${Ue.grey[200]}`}},accordionSummaryMargin:{margin:`${n.spacing(1,2,1,0)} !important`},accordionDetails:{width:"100%",display:"flex",flexDirection:"column",alignItems:"center",padding:n.spacing(4)}})),Eo=ve({notComplete:{id:"common.incomplete",defaultMessage:"Incomplete"}}),Dt=({title:n,showNotCompleteLozenge:O=!1,children:v,"data-external-id":l})=>{const o=ce(),{classes:E}=wo();return m.jsx("div",{children:m.jsxs(yt,{id:l,variant:"outlined",defaultExpanded:!0,"data-external-id":l,children:[m.jsx(Mn,{classes:{root:E.accordionSummary,content:E.accordionSummaryMargin},expandIcon:m.jsx(mt,{fontSize:"xx-small"}),"data-external-id":"summary",children:m.jsxs(J,{width:"100%",direction:"row",alignItems:"baseline",justifyContent:"space-between",children:[m.jsx(ae,{variant:"h5",children:n}),O&&m.jsx(Ge,{"data-external-id":"not-complete-lozenge",variant:"critical",label:o.formatMessage(Eo.notComplete)})]})}),m.jsx(gt,{className:E.accordionDetails,"data-external-id":"details",children:m.jsx(J,{width:{lg:"60%",md:"80%",sm:"100%",xs:"100%"},children:v})})]})})},Ao=Ee()(n=>({chip:{marginLeft:n.spacing(1)}}));function Cn(n){const{name:O,label:v,options:l,renderOption:o,helperText:E,disabled:x,validate:g,onDone:h}=n,{classes:b}=Ao();return m.jsx(cr,{name:O,validate:g,render:({input:d,meta:r})=>m.jsx(ta,{error:!!r.error&&r.touched,"data-external-id":`radio-chips-${O}`,sx:{margin:0},children:m.jsxs(J,{spacing:1,children:[v&&m.jsx(ke,{heading:v}),m.jsx(J,{direction:"row",spacing:1,display:"flex",flexWrap:"wrap",children:l==null?void 0:l.map((e,a)=>{const f=d.value===e;return m.jsx(xt,{disabled:x,label:o(e),onClick:()=>{d.onChange(e),h==null||h()},variant:"outlined",color:f?"primary":"default",icon:f?m.jsx(Bt,{fontSize:"small"}):void 0,className:b.chip,"data-external-id":`${e}-radio-chip`,"aria-checked":f},a)})}),r.error&&r.touched&&m.jsx(st,{"data-external-id":O+"-helper-text",children:r.error}),E&&m.jsx(ae,{variant:"body2",color:"textSecondary",children:E})]})})})}const Oo="/react-ts-app/assets/june-calendar-99w6Ny3w__cache.svg",So=({onChange:n,onClose:O,open:v,leaveTypes:l,namePrefix:o})=>{const E=ce(),x=kt(),{classes:g}=_o(),{values:h}=Se({subscription:{values:!0}}),[b]=Y.useMemo(()=>[ee.get(h,o?`${o}.pauseAccrualSetting.pauseAccrualPolicyIds`:"pauseAccrualPolicyIds")],[o,h]),d=l==null?void 0:l.filter(c=>!c.isPayRateConditional&&c.paid===!1&&c.leavePayRatePercentage===0),r=l==null?void 0:l.filter(c=>c.isPayRateConditional),e=l==null?void 0:l.filter(c=>!c.isPayRateConditional&&c.leavePayRatePercentage),a=(c,i)=>{if(c)b.push(i.id),x.change(o?`${o}.pauseAccrualSetting.pauseAccrualPolicyIds`:"pauseAccrualPolicyIds",b);else{const u=b.indexOf(i.id);u!==-1&&(b.splice(u,1),x.change(o?`${o}.pauseAccrualSetting.pauseAccrualPolicyIds`:"pauseAccrualPolicyIds",b))}n()},f=Y.useMemo(()=>{const c={unPaidSelectedPolicies:[],conditionalPayRatesSelectedPolicies:[],paidOrPartiallyPaidSelectedPolicies:[]},i=b;return d==null||d.forEach(u=>{i.includes(u.id)&&c.unPaidSelectedPolicies.push(u)}),r==null||r.forEach(u=>{i.includes(u.id)&&c.conditionalPayRatesSelectedPolicies.push(u)}),e==null||e.forEach(u=>{i.includes(u.id)&&c.paidOrPartiallyPaidSelectedPolicies.push(u)}),c},[d,r,e,b]);return m.jsx(jt,{fullWidth:!0,showCloseButton:!0,title:E.formatMessage(Qe.selectLeavePolicies),onClose:O,open:v,confirmButton:{text:E.formatMessage(Qe.apply),onClick:O},content:m.jsxs("div",{className:g.accordionContainer,children:[d&&d.length>0&&m.jsxs(yt,{elevation:0,children:[m.jsx(Ft,{expandIcon:m.jsx(mt,{fontSize:"xx-small"}),children:m.jsxs("div",{className:g.rowWithGap,children:[m.jsx(ae,{variant:"h5",children:E.formatMessage(Qe.unPaid)}),f.unPaidSelectedPolicies.length>0&&m.jsx(Ge,{label:E.formatMessage(Qe.selected,{count:f.unPaidSelectedPolicies.length})})]})}),m.jsx(gt,{children:m.jsx("div",{className:g.columnFlex,children:d==null?void 0:d.map(c=>m.jsx(Ut,{checked:f.unPaidSelectedPolicies.some(i=>i.id===c.id),onChange:i=>a(i,c),text:m.jsx(ke,{heading:c.name}),className:g.alignCenter},c.id))})})]}),r&&r.length>0&&m.jsxs(yt,{elevation:0,children:[m.jsx(Ft,{expandIcon:m.jsx(mt,{fontSize:"xx-small"}),children:m.jsxs("div",{className:g.rowWithGap,children:[m.jsx(ae,{variant:"h5",children:E.formatMessage(Qe.conditionalPayRate)}),f.conditionalPayRatesSelectedPolicies.length>0&&m.jsx(Ge,{label:E.formatMessage(Qe.selected,{count:f.conditionalPayRatesSelectedPolicies.length})})]})}),m.jsx(gt,{children:m.jsx("div",{className:g.columnFlex,children:r==null?void 0:r.map(c=>m.jsx(Ut,{checked:f.conditionalPayRatesSelectedPolicies.some(i=>i.id===c.id),onChange:i=>a(i,c),text:m.jsx(ke,{heading:c.name}),className:g.alignCenter},c.id))})})]}),e&&e.length>0&&m.jsxs(yt,{elevation:0,children:[m.jsx(Ft,{expandIcon:m.jsx(mt,{fontSize:"xx-small"}),children:m.jsxs("div",{className:g.rowWithGap,children:[m.jsx(ae,{variant:"h5",children:E.formatMessage(Qe.paidOrPartiallyPaid)}),f.paidOrPartiallyPaidSelectedPolicies.length>0&&m.jsx(Ge,{label:E.formatMessage(Qe.selected,{count:f.paidOrPartiallyPaidSelectedPolicies.length})})]})}),m.jsx(gt,{children:m.jsx("div",{className:g.columnFlex,children:e==null?void 0:e.map(c=>{const{leavePayRatePercentage:i=0}=c,u=i<100;return m.jsx(Ut,{checked:f.paidOrPartiallyPaidSelectedPolicies.some(s=>s.id===c.id),onChange:s=>a(s,c),text:m.jsx(ke,{heading:c.name,subtext:u?E.formatMessage(Qe.paidPercentage,{percentage:i}):void 0}),className:u?void 0:g.alignCenter},c.id)})})})]})]})})},Qe=ve({apply:{id:"common.action.apply",defaultMessage:"Apply"},selectLeavePolicies:{id:"hr.time-off.select-leave-policies",defaultMessage:"Select leave policies"},unPaid:{id:"hr.time-off.unpaid",defaultMessage:"Unpaid"},conditionalPayRate:{id:"hr.time-off.conditional-pay-rate",defaultMessage:"Conditional pay rate"},paidOrPartiallyPaid:{id:"hr.time-off.paid-or-partially-paid",defaultMessage:"Paid / partially paid"},paidPercentage:{id:"hr.time-off.paid-percentage",defaultMessage:"Paid {percentage}%"},selected:{id:"hr.time-off.selected",defaultMessage:"{count} selected"}}),_o=Ee()(n=>({accordionContainer:{border:`1px solid ${n.palette.grey[200]}`,borderRadius:n.spacing(.5),padding:0},alignCenter:{alignItems:"center"},columnFlex:{display:"flex",flexDirection:"column"},rowWithGap:{display:"flex",gap:n.spacing(1)}})),Pe=Y.createContext({disabledFields:[]}),Mo=({children:n,value:O})=>m.jsx(Pe.Provider,{value:O,children:n}),_a=Ee()(n=>({alert:{marginTop:n.spacing(1)},exampleCheckboxContainer:{border:`1px solid ${Ue.grey[200]}`,borderRadius:n.spacing(1),padding:n.spacing(2),pointerEvents:"none"},popOverContent:{padding:n.spacing(2)},buttonContainer:{margin:`0 ${n.spacing(4)}`},popupButton:{padding:`0 ${n.spacing(.5)}`},unsetWidth:{width:"unset"},numberOfDaysField:{margin:0,width:"155px"},suffixStyle:{marginBottom:n.spacing(1),marginRight:"8px",pointerEvents:"none",color:n.palette.text.secondary},alignCenter:{alignItems:"center"},noMarginInput:{margin:0,[`& .${Yt.root}`]:{marginTop:0,marginBottom:0}}})),ge=ve({reduceAccrualDays:{id:"hr.time-off.reduce-accrual-days",defaultMessage:"Reduce accrued days if employee takes a leave from a different policy"},setMinimumDays:{id:"hr.time-off.set-minimum-days",defaultMessage:"Set minimum days"},reductionOn:{id:"hr.time-off.accrual-reduction-on",defaultMessage:"ON: Allowance accrual will be reduced if employee uses a leave from the selected policies"},reductionOff:{id:"hr.time-off.accrual-reduction-off",defaultMessage:"OFF: No effect on allowance accrual"},selectLeavePolicies:{id:"hr.time-off.select-leave-policies",defaultMessage:"Select leave policies"},noPoliciesToSelectFrom:{id:"hr.time-off.no-policies-to-select-from",defaultMessage:"There are no active leave policies to select from"},viewAnExample:{id:"hr.time-off.view-an-example",defaultMessage:"View an example"},exampleOfReducedAccrualForAnEmployee:{id:"hr.time-off.example-of-reduced-accrual-for-an-employee",defaultMessage:"Example of reduced accrual for an employee"},policyA:{id:"hr.time-off.policy-a",defaultMessage:"Policy A"},employeeUsedDays:{id:"hr.time-off.employee-used",defaultMessage:"Employee used <element>4 days</element> in June with <b>Policy A</b>"},junesAccruedAllowance:{id:"hr.time-off.junes-accrued-allowance-is-reduced-for",defaultMessage:"June's accrued allowance* is reduced for <b>this policy</b>"},accruedPerMonth:{id:"hr.time-off.accrued-per-month",defaultMessage:"Accrued per month (total allowance: 36 days)"},accruedPerDay:{id:"hr.time-off.accrued-per-day",defaultMessage:"Accrued per day (3/30 days in June)"},accruedOnlyForJune:{id:"hr.time-off.accrued-only-for-june",defaultMessage:"Accrued only for June after reducing 4 days used with Policy A<br></br>3 - (0.1*4 days used)"},accruedAllowanceForAMonthIsGivenAtTheStartOfNextMonth:{id:"hr.time-off.accrued-allowance-for-a-month-is-given-at-the-start-of-next-month ",defaultMessage:"Accrued allowance for a month is given at the start of next month "},egJunesAllowanceIsGivenOnJuly1st:{id:"hr.time-off.eg-junes-allowance-is-given-on-july-1st",defaultMessage:"eg June's allowance is given on July 1st"},threeDays:{id:"hr.time-off.three-days",defaultMessage:"3 days"},pointOneDay:{id:"hr.time-off.point-one-day",defaultMessage:"0.1 day"},twoPointSixDays:{id:"hr.time-off.two-point-six-days",defaultMessage:"2.6 days"},daysUsed:{id:"hr.time-off.day-s-used",defaultMessage:"Day(s) used"},greaterThanOrEqual:{id:"validation.error.greater-than-or-equal",defaultMessage:"Value must be greater than or equal to {minValue}"},lessThanOrEqual:{id:"validation.error.less-than-or-equal",defaultMessage:"Value must be less than or equal to {maxValue}"}}),To=({namePrefix:n})=>{const O=ce(),v=kt(),[l,o]=Y.useState(),[E,x]=Y.useState(!1),{leavePolicy:g}=Y.useContext(Ne),{disabledFields:h}=Y.useContext(Pe),b=n?h.includes("leaveAllowanceConditions"):h.includes("pauseAccrualSetting"),{classes:d}=_a(),{values:r}=Se({subscription:{values:!0}}),[e,a,f]=Y.useMemo(()=>[ee.get(r,n?`${n}.pauseAccrualSetting.reduceAccrualDays`:"reduceAccrualDays"),ee.get(r,n?`${n}.pauseAccrualSetting.minimumRequiredDaysCheckbox`:"minimumRequiredDaysCheckbox"),ee.get(r,n?`${n}.pauseAccrualSetting.pauseAccrualPolicyIds`:"pauseAccrualPolicyIds")],[n,r]),c=ct(),{data:i,isFetching:u}=Rr({companyId:c,filters:{excludeId:g==null?void 0:g.id}},{select:wt}),s=ee.sortBy(i,({name:S})=>S==null?void 0:S.toLowerCase()),[p,t]=Y.useState([]),y=Y.useCallback(()=>{const S=(s==null?void 0:s.filter(j=>f.includes(j.id)))||[];t(S),(S==null?void 0:S.length)===0&&e&&(v.change(n?`${n}.pauseAccrualSetting.minimumRequiredDaysCheckbox`:"minimumRequiredDaysCheckbox",!1),v.change(n?`${n}.pauseAccrualSetting.minimumRequiredDays`:"minimumRequiredDays",0))},[e,v,s,n,f]),k=S=>{const j=f.indexOf(S);j!==-1&&(f.splice(j,1),v.change(n?`${n}.pauseAccrualSetting.pauseAccrualPolicyIds`:"pauseAccrualPolicyIds",f)),y()};Y.useEffect(()=>{!ee.isEmpty(f)&&ee.isEmpty(p)&&!u&&y()},[y,u,f,p]);const M=S=>{if(!(ee.isNil(S)||ee.isNaN(S)))return S<0?O.formatMessage(ge.greaterThanOrEqual,{minValue:0}):S>365?O.formatMessage(ge.lessThanOrEqual,{maxValue:365}):void 0};return m.jsxs(na,{loading:u,children:[m.jsx(yn,{name:n?`${n}.pauseAccrualSetting.reduceAccrualDays`:"reduceAccrualDays",formControlClass:d.noMarginInput,disabled:b,label:m.jsx(ke,{heading:O.formatMessage(ge.reduceAccrualDays),subtext:e?O.formatMessage(ge.reductionOn):O.formatMessage(ge.reductionOff)})}),e&&m.jsxs(J,{flexDirection:"column",gap:2,ml:4,children:[m.jsx(aa,{onClick:S=>o(S.currentTarget),children:O.formatMessage(ge.viewAnExample)}),m.jsx("span",{children:m.jsx(Kr,{variant:"outlined",onClick:()=>x(!0),disabled:b||s.length===0,title:s.length===0?O.formatMessage(ge.noPoliciesToSelectFrom):void 0,children:O.formatMessage(ge.selectLeavePolicies)})}),m.jsx(So,{leaveTypes:s,open:E,onClose:()=>x(!1),namePrefix:n,onChange:y}),(p==null?void 0:p.length)>0&&m.jsx(gn,{gap:1,display:"flex",flexWrap:"wrap",children:p.map(S=>m.jsx(xt,{disabled:b,label:S.name,onDelete:()=>k(S.id)},S.id))}),m.jsxs(J,{flexDirection:{sm:"column",md:"row"},alignItems:{sm:"flex-start",md:"center"},gap:2,children:[m.jsx(yn,{disabled:b||(p==null?void 0:p.length)===0,onChange:S=>{!S&&v.change(n?`${n}.pauseAccrualSetting.minimumRequiredDays`:"minimumRequiredDays",0)},name:n?`${n}.pauseAccrualSetting.minimumRequiredDaysCheckbox`:"minimumRequiredDaysCheckbox",className:d.alignCenter,formControlClass:d.noMarginInput,label:m.jsx(ke,{heading:O.formatMessage(ge.setMinimumDays)})}),m.jsx(Gr,{hiddenLabel:!0,name:n?`${n}.pauseAccrualSetting.minimumRequiredDays`:"minimumRequiredDays",placeholder:"0",classes:{suffix:d.suffixStyle},className:d.numberOfDaysField,validate:M,disabled:b||!a,onChange:S=>{v.change(n?`${n}.pauseAccrualSetting.minimumRequiredDays`:"minimumRequiredDays",S)},suffix:O.formatMessage(ge.daysUsed)})]}),m.jsx(ko,{anchorEl:l,onClose:()=>o(void 0)})]})]})},ko=({onClose:n,anchorEl:O})=>{const v=ce(),{classes:l}=_a();return m.jsx(ra,{open:O!==void 0,anchorEl:O,onClose:n,"data-external-id":"view-example-popover",anchorOrigin:{vertical:"top",horizontal:"center"},transformOrigin:{vertical:"bottom",horizontal:"center"},children:m.jsxs(J,{className:l.popOverContent,gap:1,children:[m.jsx(ae,{paddingBottom:1,variant:"h5",children:v.formatMessage(ge.exampleOfReducedAccrualForAnEmployee)}),m.jsxs(J,{gap:1,className:l.exampleCheckboxContainer,children:[m.jsx(Ut,{name:"example",checked:!0,text:m.jsx(ke,{heading:v.formatMessage(ge.reduceAccrualDays),subtext:v.formatMessage(ge.reductionOn)})}),m.jsx("div",{className:l.buttonContainer,children:m.jsx(Ce,{variant:"outlined",children:v.formatMessage(ge.selectLeavePolicies)})}),m.jsx("div",{className:l.buttonContainer,children:m.jsx(xt,{label:v.formatMessage(ge.policyA),onDelete:()=>{}})})]}),m.jsxs(J,{gap:3,m:2,children:[m.jsx(ae,{variant:"body1",children:v.formatMessage(ge.employeeUsedDays,{element:o=>m.jsx(Ge,{variant:"critical",label:o}),b:o=>m.jsx("b",{children:o})})}),m.jsx(J,{alignItems:"center",children:m.jsx(Zr,{fontSize:"large"})}),m.jsxs(J,{gap:2,children:[m.jsx(ae,{variant:"body1",children:v.formatMessage(ge.junesAccruedAllowance,{b:o=>m.jsx("b",{children:o})})}),m.jsxs(J,{gap:1,children:[m.jsxs(J,{direction:"row",children:[m.jsx(J,{direction:"row",width:"14%",children:m.jsx(Ge,{label:v.formatMessage(ge.threeDays)})}),m.jsx(ae,{variant:"body1",children:v.formatMessage(ge.accruedPerMonth)})]}),m.jsxs(J,{direction:"row",children:[m.jsx(J,{direction:"row",width:"14%",children:m.jsx(Ge,{label:v.formatMessage(ge.pointOneDay)})}),m.jsx(ae,{variant:"body1",children:v.formatMessage(ge.accruedPerDay)})]}),m.jsxs(J,{direction:"row",children:[m.jsx(J,{direction:"row",width:"14%",children:m.jsx(Ge,{variant:"critical",emphasis:"high",label:v.formatMessage(ge.twoPointSixDays)})}),m.jsx(ae,{variant:"body1",children:v.formatMessage(ge.accruedOnlyForJune,{br:()=>m.jsx("br",{})})})]})]})]}),m.jsx(ae,{variant:"caption",color:"textSecondary",children:m.jsxs(J,{gap:.5,direction:"row",children:["*",m.jsxs("div",{children:[m.jsx("div",{children:v.formatMessage(ge.accruedAllowanceForAMonthIsGivenAtTheStartOfNextMonth)}),m.jsx("div",{children:v.formatMessage(ge.egJunesAllowanceIsGivenOnJuly1st)})]})]})})]})]})})},jo=(n,O)=>{switch(O){case"days":return n.formatMessage({id:"hr.time-off.days",defaultMessage:"Day(s)"});case"months":return n.formatMessage({id:"hr.time-off.months",defaultMessage:"Month(s)"});case"years":return n.formatMessage({id:"hr.time-off.years",defaultMessage:"Year(s)"})}},Co=vn(jo),No=(n,O)=>{switch(O){case"between":return n.formatMessage({id:"hr.time-off.between",defaultMessage:"Between"});case"greater-than":return n.formatMessage({id:"hr.time-off.greater-than",defaultMessage:"Greater than"});case"less-than":return n.formatMessage({id:"hr.time-off.less-than",defaultMessage:"Less than"});case"greater-than-or-equal":return n.formatMessage({id:"hr.time-off.greater-than-and-equal-to",defaultMessage:"Greater than and equal to"});case"less-than-or-equal":return n.formatMessage({id:"hr.time-off.less-than-or-equal",defaultMessage:"Less than or equal"})}},Ma=vn(No),Et=dr(Jr,n=>({root:{minWidth:"120px",margin:0,[`& .${ei.select}`]:{boxSizing:"border-box",height:n.spacing(6.75),display:"flex",alignItems:"center"}}})),nt=Ee()(n=>({conditionalSection:{border:`1px solid ${Ue.grey[300]}`,borderRadius:n.shape.borderRadius},accordionSummary:{width:"100%",padding:n.spacing(2),[`& .${fr.content}`]:{margin:n.spacing(1,2,1,0)}},accordionDetails:{padding:n.spacing(0,2,2)},accordionContent:{padding:n.spacing(2),background:Ue.grey[50]},addConditionButton:{padding:n.spacing(2)},noMarginInput:{margin:0,[`& .${Yt.root}`]:{marginTop:0,marginBottom:0}},noMargin:{margin:0},unsetWidth:{width:"unset"},endAdornment:{padding:n.spacing(2,2,0,0),height:"100%",position:"absolute",right:0,display:"flex",alignItems:"center"},noTopPadding:{paddingTop:0}})),en=Ee()(n=>({dividerMargin:{margin:n.spacing(4,0)},numberField:{minWidth:n.spacing(8),width:n.spacing(8),margin:0,padding:0,"& input":{boxSizing:"border-box",height:n.spacing(6.75)}},popover:{borderRadius:n.shape.borderRadius},popoverCloseIcon:{width:12,height:12},calculatedDaysExample:{background:Ue.grey[100],padding:n.spacing(1),borderRadius:n.spacing(1),width:"fit-content",marginTop:n.spacing(1)},daysTypeChangeAlert:{marginTop:n.spacing(2)},calendarImage:{width:"50%"}})),lt=n=>{const{classes:O,cx:v}=en(),{name:l,validate:o,isDecimal:E,...x}=n,g=E?Qr:Xr;return m.jsx(la,{name:l,validate:o,render:({input:h,meta:b})=>m.jsx(g,{...h,...x,className:v(O.numberField,n.className),"data-external-id":n["data-external-id"],error:!!b.error&&b.touched})})},re=ve({leaveAllowance:{id:"hr.time-off.leave-allowance",defaultMessage:"Leave allowance"},leaveAllowanceForEmployees:{id:"hr.time-off.leave-allowance-for-employees",defaultMessage:"What is the leave allowance employees can request?"},allowance:{id:"hr.time-off.allowance",defaultMessage:"Allowance"},leaveAllowanceCalendarDaysDescription:{id:"hr.time-off.leave-allowance-description",defaultMessage:"Everyday from the departure until return is counted against the leave balance, even if some days fall on the weekend or public holidays."},leaveAllowanceCalendarDayDescriptionWithPublicHolidayToggle:{id:"hr.time-off.leave-allowance-description-with-public-holiday-toggle",defaultMessage:"Everyday from the departure until return is counted against the leave balance, even if some days fall on the weekend"},leaveAllowanceWorkingDaysDescription:{id:"hr.time-off.leave-allowance-working-days-description",defaultMessage:"Only business days are counted as days of leave. Weekends and holidays do not count as used leave."},allowanceConditional:{id:"hr.time-off.allowance-conditional",defaultMessage:"Set conditional leave allowance based on <b>employee's job tenure</b>"},allowanceConditionalTooltip:{id:"hr.time-off.allowance-conditional-tooltip",defaultMessage:"Job tenure is calculated from employee's hire date to current date / departure date."},allowanceConditionalDescription:{id:"hr.time-off.allowance-conditional-description",defaultMessage:"An employee will see 0 allowance days if they do not match any condition"},addAnotherCondition:{id:"hr.time-off.add-another-condition",defaultMessage:"Add another condition"},leaveAllowanceCondition:{id:"hr.time-off.leave-allowance-condition",defaultMessage:"Leave allowance {count}"},employeeJobTenure:{id:"hr.time-off.employee-job-tenure",defaultMessage:"If employee's job tenure is"},updateLeaveAllowanceTo:{id:"hr.time-off.update-leave-allowance-to",defaultMessage:"Then update the leave allowance to"},allowanceAccrued:{id:"hr.time-off.allowance-accrued",defaultMessage:"Should leave allowance be accrued?"},accrueOnMonthlyBasis:{id:"hr.time-off.accrue-allowance-on-monthly-basis",defaultMessage:"Accrue allowance on a monthly basis"},accrueOnMonthlyBasisOn:{id:"hr.time-off.accrue-allowance-on-monthly-basis-on",defaultMessage:"ON: <b>{count} days</b> will be added to available days each month"},allowNegativeBalance:{id:"hr.time-off.allow-negative-balance",defaultMessage:"Allow negative balance"},allowNegativeBalanceOn:{id:"hr.time-off.allow-negative-balance-on",defaultMessage:"ON: Employees can request more than accrued days each month ({allowanceCount} days) but not more than the total allowance ({totalCount} days)"},allowNegativeBalanceOff:{id:"hr.time-off.allow-negative-balance-off",defaultMessage:"OFF: Employees cannot request more than available days each month"},allowNegativeBalanceNoRequest:{id:"hr.time-off.allow-negative-balance-no-request",defaultMessage:"OFF: A request cannot be made if available allowance is less than 0.5 day"},recurringPolicy:{id:"hr.time-off.recurring-policy",defaultMessage:"Is this a recurring policy?"},annuallyRecurring:{id:"hr.time-off.annually-recurring",defaultMessage:"Annually recurring"},annuallyRecurringDescription:{id:"hr.time-off.leave-on-recurring-basis",defaultMessage:"Leave is used on a recurring basis"},oneTime:{id:"hr.time-off.one-time",defaultMessage:"One time"},oneTimeDescription:{id:"hr.time-off.leaves-given-as-a-block",defaultMessage:"Given as a block at the beginning of employment and never replenished"},carryOverPaidLeave:{id:"hr.time-off.carry-over-paid-leave",defaultMessage:"Carry over paid leave allowance each cycle"},carryOverDays:{id:"hr.time-off.carry-over-days",defaultMessage:"Carry over days"},carryOverDaysHelperText:{id:"hr.time-off.carry-over-days-helper-text",defaultMessage:"You can change this number for individual employees."},required:{id:"validation.error.required",defaultMessage:"Required"},valueRequired:{id:"validation.error.value-required",defaultMessage:"Value is required"},greaterThanOrEqual:{id:"validation.error.greater-than-or-equal",defaultMessage:"Value must be greater than or equal to {minValue}"},lessThanOrEqual:{id:"validation.error.less-than-or-equal",defaultMessage:"Value must be less than or equal to {maxValue}"},minMaxValueRequired:{id:"validation.error.minimum-maximum-value-required",defaultMessage:"Minimum and maximum values are required"},minValueRequired:{id:"validation.error.minimum-value-required",defaultMessage:"Minimum value is required"},maxValueRequired:{id:"validation.error.maximum-value-required",defaultMessage:"Maximum value is required"},minValueLessThanMaxValue:{id:"validation.error.minimum-value-less-than-maximum-value",defaultMessage:"Minimum value must be less than maximum value"},untilBefore:{id:"hr.time-off.until-before",defaultMessage:"until (before)"},days:{id:"hr.time-off.days",defaultMessage:"Day(s)"},whichDaysToConsiderAsLeaveDays:{id:"hr.time-off.which-days-to-consider-as-leave-days",defaultMessage:"Which days to consider as leave days?"},doNotConsiderCalendarDays:{id:"hr.time-off.do-not-consider-calendar-days",defaultMessage:"Do not consider public holidays as leave days"},requestOnJune:{id:"hr.time-off.request-on-june-example",defaultMessage:"An employee requests for a leave overlapping with a public holiday on 27 June."},calculatedDaysIsOne:{id:"hr.time-off.calculated-days-is-one",defaultMessage:"Leave days calculated = 1 calendar day"},changingFromCalendarDaysToExcludingCalendarDays:{id:"hr.time-off.changing-from-calendar-days-to-calendar-days-excluding",defaultMessage:"Changing number of days calculation from <b>Calendar days</b> to <b>Calendar days - excluding public holidays</b> may move some approved future leave requests back to the pending state."},changingFromExcludingCalendarDaysToCalendarDays:{id:"hr.time-off.changing-from-calendar-days-excluding-to-calendar-days",defaultMessage:"Changing number of days calculation from <b>Calendar days - excluding public holidays</b> to <b>Calendar days</b> may move some approved future leave requests back to the pending state."},changingFromWorkingDaysToExcludingCalendarDays:{id:"hr.time-off.changing-from-working-days-to-working-days",defaultMessage:"Changing number of days calculation from <b>Working days</b> to <b>Calendar days - excluding public holidays</b> may move some approved future leave requests back to the pending state."},changingFromWorkingDaysToCalendarDays:{id:"hr.time-off.changing-from-working-days-to-calendar-days",defaultMessage:"Changing number of days calculation from <b>Working days</b> to <b>Calendar days</b> may move some approved future leave requests back to the pending state."},changingFromCalendarDaysToWorkingDays:{id:"hr.time-off.changing-from-calendar-days-to-working-days",defaultMessage:"Changing number of days calculation from <b>Calendar days</b> to <b>Working days</b> may move some approved future leave requests back to the pending state."},learnMoreAboutThis:{id:"hr.time-off.learn-more-about-this",defaultMessage:"Learn more about this"}}),Po=()=>{const{classes:n}=nt(),O=ce(),{isLocaleAr:v}=hr(),{values:l,errors:o}=Se({subscription:{values:!0,errors:!0}}),{disabledFields:E}=Y.useContext(Pe),x=Y.useMemo(()=>!!(o!=null&&o.carryOverAllowance||o!=null&&o.numberOfDays||o!=null&&o.leaveAllowanceConditions),[o==null?void 0:o.carryOverAllowance,o==null?void 0:o.leaveAllowanceConditions,o==null?void 0:o.numberOfDays]);return m.jsx(Dt,{title:O.formatMessage(re.leaveAllowance),showNotCompleteLozenge:x,children:m.jsxs(J,{spacing:4,children:[m.jsxs("div",{children:[m.jsx(ut,{formControlClass:n.noMarginInput,name:"isAllowanceConditional","data-external-id":"allowance-conditional",disabled:E.includes("leaveAllowanceConditions"),"aria-checked":l==null?void 0:l.isAllowanceConditional,label:m.jsxs("div",{children:[m.jsxs(J,{direction:"row",alignItems:"center",gap:1,children:[m.jsx(ae,{children:O.formatMessage(re.allowanceConditional,{b:g=>m.jsx("strong",{children:g})})}),m.jsx(bn,{title:O.formatMessage(re.allowanceConditionalTooltip),children:m.jsx(Qt,{color:"action",fontSize:"x-small"})})]}),(l==null?void 0:l.isAllowanceConditional)&&m.jsx(ae,{variant:"body2",color:"textSecondary",children:O.formatMessage(re.allowanceConditionalDescription)})]})}),m.jsx(gn,{mt:1.5,ml:6.5,children:m.jsx(Ce,{variant:"outlined",color:"info",size:"small",target:"_blank",endIcon:m.jsx(pr,{fontSize:"x-small"}),href:v?"https://help.bayzat.com/ar/articles/2461632-%D9%83%D9%8A%D9%81%D9%8A%D8%A9-%D8%A5%D9%86%D8%B4%D8%A7%D8%A1-%D8%B3%D9%8A%D8%A7%D8%B3%D8%A7%D8%AA-%D8%A5%D8%AC%D8%A7%D8%B2%D8%A9-%D8%AC%D8%AF%D9%8A%D8%AF%D8%A9":"https://help.bayzat.com/en/articles/2461632-how-to-create-new-time-off-policies",children:O.formatMessage(re.learnMoreAboutThis)})})]}),m.jsx(Be,{}),l!=null&&l.isAllowanceConditional?m.jsxs(m.Fragment,{children:[m.jsx(Hn,{}),m.jsx(Be,{}),m.jsx($n,{}),m.jsx(Be,{}),m.jsx(Wn,{})]}):m.jsxs(m.Fragment,{children:[m.jsx(Wn,{}),m.jsx(Be,{}),m.jsx(Hn,{}),m.jsx(Be,{}),m.jsx($n,{}),(l==null?void 0:l.allowanceType)==="annual"&&(["paid","partially-paid"].includes(l==null?void 0:l.paid)||(l==null?void 0:l.isPayRateConditional))&&m.jsxs(m.Fragment,{children:[m.jsx(Be,{}),m.jsx(Ta,{numberOfDays:l==null?void 0:l.numberOfDays})]})]})]})})},Wn=()=>{var g,h;const n=ce(),{classes:O}=nt(),{mutators:v}=kt(),{values:l,errors:o,touched:E}=Se({subscription:{values:!0,errors:!0,touched:!0}}),{disabledFields:x}=Y.useContext(Pe);return m.jsxs(J,{spacing:1,children:[m.jsx(ke,{heading:n.formatMessage(re.leaveAllowanceForEmployees)}),!(l!=null&&l.isAllowanceConditional)&&m.jsx(m.Fragment,{children:m.jsxs("div",{"data-external-id":"non-conditional-leave-allowance-section",children:[m.jsx(J,{direction:"row",gap:1,children:m.jsx(lt,{className:O.unsetWidth,"data-external-id":"textfield-numberOfDays",disabled:x.includes("numberOfDays"),name:"numberOfDays",label:n.formatMessage(re.allowance),endAdornment:m.jsx(ae,{variant:"subtitle2",color:"textSecondary",className:O.endAdornment,children:n.formatMessage(re.days)}),placeholder:"0",decimalPlaces:2,isDecimal:!0})}),(E==null?void 0:E.numberOfDays)&&(o==null?void 0:o.numberOfDays)&&m.jsx(st,{error:!0,children:o==null?void 0:o.numberOfDays})]})}),(l==null?void 0:l.isAllowanceConditional)&&m.jsxs("div",{className:O.conditionalSection,children:[m.jsx(ma,{name:"leaveAllowanceConditions.conditions",children:({fields:b,meta:d})=>b.map((r,e)=>m.jsx(Do,{name:r,index:e,fields:b,meta:d},r))}),((h=(g=l==null?void 0:l.leaveAllowanceConditions)==null?void 0:g.conditions)==null?void 0:h.length)<10&&m.jsx("div",{className:O.addConditionButton,children:m.jsx(Ce,{disabled:x.includes("leaveAllowanceConditions"),"data-external-id":"add-another-condition-button",variant:"outlined",onClick:()=>v.push("leaveAllowanceConditions.conditions",Wa),startIcon:m.jsx(ia,{fontSize:"x-small"}),children:n.formatMessage(re.addAnotherCondition)})})]})]})},Do=({index:n,name:O,fields:v,meta:l})=>{var y,k,M,S,j,_,w;const o=ce(),{classes:E}=en(),{classes:x,cx:g}=nt(),{values:h,touched:b}=Se({subscription:{values:!0,touched:!0}}),{disabledFields:d}=Y.useContext(Pe),r=d.includes("leaveAllowanceConditions"),e=ee.get(h,O),a=ee.get(b,O+".values[0]"),f=ee.get(b,O+".values[1]"),c=ee.get(b,O+".output.values[0]"),i=Y.useMemo(()=>{var A;return(A=l==null?void 0:l.error)==null?void 0:A[n]},[n,l==null?void 0:l.error]),u=Ze(Ma),s=Ze(Co),p=(A,T,N)=>{var V;const R=(V=N==null?void 0:N.name)==null?void 0:V.replace(/\.values\[\d\]/i,""),{operator:I,values:F=[]}=ee.get(T,R??O)||{};return ee.isNil(F[0])&&I==="between"&&ee.isNil(F[1])?o.formatMessage(re.minMaxValueRequired):ee.isNil(F[0])&&I!=="between"?o.formatMessage(re.valueRequired):ee.isNil(F[0])&&I==="between"?o.formatMessage(re.minValueRequired):I==="between"&&ee.isNil(F[1])?o.formatMessage(re.maxValueRequired):F[0]<0||I==="between"&&F[1]<0?o.formatMessage(re.greaterThanOrEqual,{minValue:0}):I==="between"&&(F==null?void 0:F[0])>=(F==null?void 0:F[1])?o.formatMessage(re.minValueLessThanMaxValue):void 0},t=A=>ee.isNil(A)||ee.isNaN(A)?o.formatMessage(re.required):A<0?o.formatMessage(re.greaterThanOrEqual,{minValue:0}):A>365?o.formatMessage(re.lessThanOrEqual,{maxValue:365}):void 0;return m.jsxs(yt,{"data-external-id":"conditional-leave-allowance-accordion",elevation:0,className:x.noMargin,defaultExpanded:!0,children:[m.jsx(Mn,{className:x.accordionSummary,expandIcon:m.jsx(mt,{fontSize:"xx-small"}),children:m.jsxs(J,{width:"100%",direction:"row",alignItems:"baseline",justifyContent:"space-between",children:[m.jsx(ae,{variant:"h5",children:o.formatMessage(re.leaveAllowanceCondition,{count:n+1})}),n!==0&&m.jsx(xn,{"data-external-id":"delete-condition",disabled:r,onClick:()=>v.remove(n),size:"small",children:m.jsx(oa,{})})]})}),m.jsx(gt,{className:x.accordionDetails,children:m.jsxs("div",{className:x.accordionContent,children:[m.jsx(ae,{variant:"h6",children:o.formatMessage(re.employeeJobTenure)}),m.jsxs(J,{mt:1,mb:2,children:[m.jsxs(J,{direction:{xs:"column",md:"row"},gap:1,children:[m.jsxs(J,{direction:"row",gap:1,flexWrap:"wrap",children:[m.jsx(Et,{name:`${O}.operator`,options:["between","greater-than-or-equal","less-than"],renderOption:u,hiddenLabel:!0,disabled:r}),m.jsx(lt,{"data-external-id":`${O}.values[0]-number-field`,disabled:r,name:`${O}.values[0]`,placeholder:"0",validate:p,hiddenLabel:!0}),(e==null?void 0:e.operator)!=="between"&&m.jsx(Et,{disabled:r,name:`${O}.valueUnit`,options:["months","years"],renderOption:s,hiddenLabel:!0})]}),m.jsx(J,{direction:{xs:"column",md:"row"},alignItems:{md:"center"},display:"flex",gap:1,children:(e==null?void 0:e.operator)==="between"&&m.jsxs(m.Fragment,{children:[m.jsx(ae,{children:o.formatMessage(re.untilBefore)}),m.jsxs(J,{direction:"row",alignItems:"center",gap:1,children:[m.jsx(lt,{disabled:r,"data-external-id":`${O}.values[1]-number-field`,name:`${O}.values[1]`,placeholder:"0",validate:p,hiddenLabel:!0}),m.jsx(Et,{disabled:r,name:`${O}.valueUnit`,options:["months","years"],renderOption:s,hiddenLabel:!0})]})]})})]}),(a||f)&&((y=i==null?void 0:i.values)==null?void 0:y[0])&&m.jsx(st,{"data-external-id":"condition-field-helper-text",error:!0,children:(k=i==null?void 0:i.values)==null?void 0:k[0]})]}),m.jsx(ae,{"data-external-id":"conditional-allowance-label",variant:"h6",children:o.formatMessage(re.updateLeaveAllowanceTo)}),m.jsxs(J,{mt:1,mb:1,children:[m.jsx(J,{direction:"row",gap:1,children:m.jsx(lt,{className:x.unsetWidth,disabled:r,"data-external-id":`${O}.output.values[0]-number-field`,name:`${O}.output.values[0]`,placeholder:"0",validate:t,endAdornment:m.jsx(ae,{variant:"subtitle2",color:"textSecondary",className:g(x.endAdornment,x.noTopPadding),children:o.formatMessage(re.days)}),isDecimal:!0,decimalPlaces:2,hiddenLabel:!0})}),c&&((S=(M=i==null?void 0:i.output)==null?void 0:M.values)==null?void 0:S[0])&&m.jsx(st,{"data-external-id":"conditional-allowance-output-helper-text",error:!0,children:(_=(j=i==null?void 0:i.output)==null?void 0:j.values)==null?void 0:_[0]})]}),(h==null?void 0:h.allowanceType)==="annual"&&(["paid","partially-paid"].includes(h==null?void 0:h.paid)||(h==null?void 0:h.isPayRateConditional))&&m.jsxs(m.Fragment,{children:[m.jsx(Be,{className:E.dividerMargin}),m.jsx(Ta,{namePrefix:`${O}.output`,numberOfDays:(w=e==null?void 0:e.output)==null?void 0:w.values[0]})]})]})})]})},Ta=({namePrefix:n,numberOfDays:O})=>{const v=ce(),{classes:l}=nt(),{values:o}=Se({subscription:{values:!0}}),{isTimeOffV2Phase4FlowEnabled:E}=Y.useContext(Ne),{disabledFields:x}=Y.useContext(Pe),g=Y.useMemo(()=>ee.round((O??0)/12||0,2),[O]),[h,b]=Y.useMemo(()=>[ee.get(o,n?`${n}.accrualType`:"accrualType"),ee.get(o,n?`${n}.negativeBalanceSupport`:"negativeBalanceSupport")],[n,o]);return m.jsxs(J,{gap:2,"data-external-id":"accrue-allowance-section",children:[m.jsx(ke,{heading:v.formatMessage(re.allowanceAccrued)}),m.jsx(ut,{disabled:n?x.includes("leaveAllowanceConditions"):x.includes("accrualType"),name:n?`${n}.accrualType`:"accrualType",formControlClass:l.noMarginInput,label:m.jsxs(m.Fragment,{children:[m.jsx(ae,{children:v.formatMessage(re.accrueOnMonthlyBasis)}),h&&m.jsx(ae,{variant:"body2",color:"textSecondary",children:v.formatMessage(re.accrueOnMonthlyBasisOn,{count:!ee.isNil(O)&&!ee.isNaN(O)?g:"__",b:d=>m.jsx("b",{children:d})})})]})}),h&&m.jsxs(J,{ml:6,gap:4,children:[m.jsx(yn,{disabled:n?x.includes("leaveAllowanceConditions"):x.includes("negativeBalanceSupport"),name:n?`${n}.negativeBalanceSupport`:"negativeBalanceSupport",formControlClass:l.noMarginInput,label:m.jsx(ke,{heading:v.formatMessage(re.allowNegativeBalance),subtext:b?v.formatMessage(re.allowNegativeBalanceOn,{allowanceCount:!ee.isNil(O)&&!ee.isNaN(O)?g:"__",totalCount:!ee.isNil(O)&&!ee.isNaN(O)?O:"__"}):g>=.5?v.formatMessage(re.allowNegativeBalanceOff):v.formatMessage(re.allowNegativeBalanceNoRequest)})}),E&&m.jsx(To,{namePrefix:n})]})]})},Hn=()=>{const n=ce(),{classes:O}=en(),{values:v}=Se({subscription:{values:!0}}),l=Ze(_n),{isPolicyPublishedWithEmployeesAssigned:o,leavePolicy:E}=Y.useContext(Ne),{disabledFields:x}=Y.useContext(Pe),g=v.daysType==="calendar-days",h=v.daysType==="working-days",b=()=>{const c=(E==null?void 0:E.daysType)==="calendar-days",i=(E==null?void 0:E.daysType)==="working-days",u=E==null?void 0:E.publicHolidaysExcluded;let s;if(c&&h?s=re.changingFromCalendarDaysToWorkingDays:i&&g?v.publicHolidaysExcluded?s=re.changingFromWorkingDaysToExcludingCalendarDays:s=re.changingFromWorkingDaysToCalendarDays:g&&c&&(u?s=re.changingFromExcludingCalendarDaysToCalendarDays:v.publicHolidaysExcluded&&(s=re.changingFromCalendarDaysToExcludingCalendarDays)),s)return n.formatMessage(s,{b:p=>m.jsx("b",{children:p})})},d=E&&v.publicHolidaysExcluded!==(E==null?void 0:E.publicHolidaysExcluded),r=!!v.publicHolidaysExcluded,e=E&&v.daysType!==E.daysType,a=b(),f=(d||e)&&o&&!!a;return m.jsxs(J,{spacing:1,children:[m.jsx(Cn,{label:n.formatMessage(re.whichDaysToConsiderAsLeaveDays),name:"daysType",options:["calendar-days","working-days"],renderOption:l,helperText:n.formatMessage(g&&!r?re.leaveAllowanceCalendarDaysDescription:g&&r?re.leaveAllowanceCalendarDayDescriptionWithPublicHolidayToggle:re.leaveAllowanceWorkingDaysDescription),disabled:x.includes("daysType")}),g&&m.jsx(ut,{name:"publicHolidaysExcluded","aria-checked":v==null?void 0:v.publicHolidaysExcluded,"data-external-id":"holiday-excluded",label:m.jsxs(J,{direction:"row",spacing:1,alignItems:"center",children:[m.jsx(ae,{children:n.formatMessage(re.doNotConsiderCalendarDays)}),m.jsx(bn,{variant:yr.Light,minWidth:850,maxWidth:"100%",enterDelay:300,title:m.jsx(Ro,{}),children:m.jsx(Qt,{color:"action",fontSize:"x-small"})})]}),disabled:x.includes("publicHolidaysExcluded")}),f&&m.jsx(Xe,{className:O.daysTypeChangeAlert,variant:et.Warning,message:a,withIcon:!0,"data-external-id":"days-type-change-alert"})]})},Ro=()=>{const n=ce(),{classes:O}=en();return m.jsxs(J,{width:850,maxWidth:"100%",p:2,children:[m.jsx(ae,{variant:"h5",children:n.formatMessage(re.doNotConsiderCalendarDays)}),m.jsxs(J,{mt:4,direction:"row",spacing:3,children:[m.jsxs("div",{children:[m.jsx(ae,{children:n.formatMessage(re.requestOnJune)}),m.jsx(ae,{className:O.calculatedDaysExample,children:n.formatMessage(re.calculatedDaysIsOne)})]}),m.jsx("img",{className:O.calendarImage,src:Oo,alt:"June calendar"})]})]})},$n=()=>{const n=ce(),{classes:O}=nt(),{values:v}=Se({subscription:{values:!0}}),l=Y.useMemo(()=>(v==null?void 0:v.allowanceType)==="annual",[v==null?void 0:v.allowanceType]),{disabledFields:o}=Y.useContext(Pe),E=Ze(Ir);return m.jsxs(J,{spacing:1,children:[m.jsx(Cn,{name:"allowanceType",label:n.formatMessage(re.recurringPolicy),options:["annual","one-time"],renderOption:E,disabled:o.includes("allowanceType"),helperText:n.formatMessage(l?re.annuallyRecurringDescription:re.oneTimeDescription)}),l&&(["paid","partially-paid"].includes(v==null?void 0:v.paid)||(v==null?void 0:v.isPayRateConditional))&&m.jsxs("div",{"data-external-id":"carry-over-support-section",children:[m.jsx(ut,{disabled:o.includes("carryOverSupport"),name:"carryOverSupport",formControlClass:O.noMargin,label:n.formatMessage(re.carryOverPaidLeave)}),(v==null?void 0:v.carryOverSupport)&&m.jsxs(gn,{ml:6,children:[m.jsx(Yr,{disabled:o.includes("carryOverAllowance"),name:"carryOverAllowance",label:n.formatMessage(re.carryOverDays),className:O.noMargin}),m.jsx(ae,{variant:"body2",color:"textSecondary",mt:1,children:n.formatMessage(re.carryOverDaysHelperText)})]})]})]})},Nn=n=>{const{isPayRateConditional:O,paid:v,leavePayRateConditions:l}=n,o=["partially-paid","unpaid"];if(O){const{conditions:E,defaultOutput:x}=l,g=E==null?void 0:E.some(b=>o.includes(b.output.paid??"")),h=o.includes(x.paid??"");return g||h}else return o.includes(v)},Io=({formRef:n})=>{var v;const{errors:O}=((v=n==null?void 0:n.current)==null?void 0:v.getState())??{};if(O&&!ee.isEmpty(O)){const l=ka(O),o=Object.keys(l),E=o==null?void 0:o[0],x=document.getElementsByName(E),g=x==null?void 0:x[0];g==null||g.scrollIntoView({block:"center"})}},ka=(n,O)=>{let v={};return Object.entries(n).forEach(([l,o])=>{const E=O?`${O}${Lo(l)?`[${l}]`:`.${l}`}`:l;typeof o=="object"?v={...v,...ka(o,E)}:v[E]=o}),v},Lo=n=>/^[0-9]+$/.test(n),qo=(n,O)=>{switch(O){case"paid":return n.formatMessage({id:"hr.time-off.paid-leave",defaultMessage:"Paid leave"});case"partially-paid":return n.formatMessage({id:"hr.time-off.partially-paid",defaultMessage:"Partially paid leave"});case"unpaid":return n.formatMessage({id:"hr.time-off.unpaid-leave",defaultMessage:"Unpaid leave"})}},Fo=vn(qo),Bo=Ee()(n=>({disabledPayrollModule:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:n.spacing(2),border:`1px solid ${Ue.grey[200]}`,borderRadius:n.shape.borderRadius}})),pe=ve({leavePayRate:{id:"hr.time-off.leave-pay-rate",defaultMessage:"Leave pay rate"},payRateConditional:{id:"hr.time-off.pay-rate-conditional",defaultMessage:"Set conditional pay rate based on <b>employee's leave allowance used</b>"},payRateConditionalTooltip:{id:"hr.time-off.pay-rate-conditional-tooltip",defaultMessage:"Leave allowance is considered as used when employee's leave request is approved by all approvers"},payRateConditionalDescription:{id:"hr.time-off.pay-rate-conditional-description",defaultMessage:"Employee's leave request will have the default pay rate if they do not match any condition"},addAnotherCondition:{id:"hr.time-off.add-another-condition",defaultMessage:"Add another condition"},payRateCondition:{id:"hr.time-off.pay-rate-condition",defaultMessage:"Pay rate {count}"},employeeLeaveAllowance:{id:"hr.time-off.employee-leave-allowance",defaultMessage:"If employee's leave allowance used is"},setLeavePayRateTo:{id:"hr.time-off.set-leave-pay-rate-to",defaultMessage:"Then set the leave pay rate to"},payRateConditionalAlert:{id:"hr.time-off.pay-rate-conditional-alert",defaultMessage:"Leave allowance is considered as used when employee's leave request is approved by all approvers"},defaultPayRate:{id:"hr.time-off.default-pay-rate",defaultMessage:"What is the default leave pay rate for this policy?"},defaultPayRateDescription:{id:"hr.time-off.default-pay-rate-when-condition-not-met",defaultMessage:"Set a default rate for leaves when an employee does not match any pay rate condition"},percentagePaid:{id:"hr.time-off.percentage-paid",defaultMessage:"Percentage paid"},dailyWageCalculationForUnpaidLeaves:{id:"hr.time-off.daily-wage-calculation-for-unpaid-leaves",defaultMessage:"How should the daily wage be calculated for unpaid leaves?"},dailyWageCalculationForPartialPaidLeaves:{id:"hr.time-off.daily-wage-calculation-for-partially-paid-leaves",defaultMessage:"How should the daily wage be calculated for unpaid percentage of leaves?"},dailyWageCalculationForPartialOrUnpaidLeaves:{id:"hr.time-off.daily-wage-calculation-for-unpaid-or-partially-paid-leaves",defaultMessage:"How should the daily wage be calculated for unpaid or partially paid leaves?"},configuredInSettings:{id:"hr.time-off.configured-in-daily-wage-calculation-setting",defaultMessage:"Configured in <Link>daily wage calculation</Link> setting"},updatedInPayrollForUnpaidLeaves:{id:"hr.time-off.updated-in-payroll-for-unpaid-leaves",defaultMessage:"Based on the leave allowance used, deduction adjustment for unpaid leaves will be automatically added in payroll table"},updatedInPayrollForPartialPaidLeaves:{id:"hr.time-off.updated-in-payroll-for-partially-paid-leaves",defaultMessage:"Based on the leave allowance used, deduction adjustment for unpaid percentage will be automatically added in payroll table"},updatedInPayrollForPartialOrUnpaidLeaves:{id:"hr.time-off.updated-in-payroll-for-unpaid-or-partially-paid-leaves",defaultMessage:"Based on the leave allowance used, deduction adjustment for unpaid or partially paid leaves will be automatically updated in payroll"},required:{id:"validation.error.required",defaultMessage:"Required"},valueRequired:{id:"validation.error.value-required",defaultMessage:"Value is required"},greaterThan:{id:"validation.error.greater-than",defaultMessage:"Value must be greater than {minValue}"},greaterThanOrEqual:{id:"validation.error.greater-than-or-equal",defaultMessage:"Value must be greater than or equal to {minValue}"},lessThan:{id:"validation.error.less-than",defaultMessage:"Value must be less than {maxValue}"},minMaxValueRequired:{id:"validation.error.minimum-maximum-value-required",defaultMessage:"Minimum and maximum values are required"},minValueRequired:{id:"validation.error.minimum-value-required",defaultMessage:"Minimum value is required"},maxValueRequired:{id:"validation.error.maximum-value-required",defaultMessage:"Maximum value is required"},minValueLessThanMaxValue:{id:"validation.error.minimum-value-less-than-maximum-value",defaultMessage:"Minimum value must be less than maximum value"},untilBefore:{id:"hr.time-off.until-before",defaultMessage:"until (before)"},maxAllowanceValue:{id:"hr.time-off.max-allowance-value",defaultMessage:"Max allowance value {maxValue} days"},createDeductionOnPayroll:{id:"hr.time-off.create-deduction-on-payroll",defaultMessage:"Based on the number of leaves used, this value will be used to create a deduction on payroll"},payroll:{id:"hr.app.menu.payroll",defaultMessage:"Payroll"},automaticallyAdjustSalary:{id:"hr.time-off.automatically-adjust-salary-with-unpaid-leave-deductions",defaultMessage:"Automatically adjustment payable salary for employees with unpaid leave deductions"},learnMore:{id:"common.learn-more",defaultMessage:"Learn more"}}),Uo={[$t.Basic]:"basic",[$t.BasicAllowance]:"basic-allowance"},zo={[on.WorkingDays]:"working-days",[on.CalendarDays]:"calendar-days",[on.CustomDays]:"custom-days"},Wo=()=>{const n=ce(),O=ct(),{classes:v}=nt(),l=sa(mr),{disabledFields:o}=Y.useContext(Pe),{values:E,errors:x}=Se({subscription:{values:!0,errors:!0}}),g=kt(),h=Nn(E),{data:b,isSuccess:d}=ni({companyId:O},{enabled:l&&h}),r=b==null?void 0:b.dailyAmountConfiguration;Y.useEffect(()=>{d&&r!=null&&r.unpaidLeaveSalaryComponent&&r!=null&&r.unpaidLeaveCalculationType&&(g.change("dailyRateSalaryType",Uo[r==null?void 0:r.unpaidLeaveSalaryComponent]),g.change("dailyRateDayType",zo[r==null?void 0:r.unpaidLeaveCalculationType]),r!=null&&r.unpaidLeaveCustomDays&&g.change("dailyRateCustomDayCount",r==null?void 0:r.unpaidLeaveCustomDays))},[g,d,r==null?void 0:r.unpaidLeaveCalculationType,r==null?void 0:r.unpaidLeaveCustomDays,r==null?void 0:r.unpaidLeaveSalaryComponent]);const e=Y.useMemo(()=>!!(x!=null&&x.dailyRateCustomDayCount||x!=null&&x.leavePayRateConditions),[x==null?void 0:x.dailyRateCustomDayCount,x==null?void 0:x.leavePayRateConditions]),a=!!(r!=null&&r.unpaidLeaveSalaryComponent&&(r!=null&&r.unpaidLeaveCalculationType));return m.jsx(Dt,{title:n.formatMessage(pe.leavePayRate),showNotCompleteLozenge:e,"data-external-id":"leave-pay-rate-accordion",children:m.jsxs(J,{spacing:4,children:[m.jsx("div",{children:m.jsxs(J,{spacing:2,children:[m.jsx(ut,{formControlClass:v.noMarginInput,name:"isPayRateConditional","data-external-id":"pay-rate-conditional",disabled:o.includes("leavePayRateConditions"),"aria-checked":E==null?void 0:E.isPayRateConditional,label:m.jsxs("div",{children:[m.jsxs(J,{direction:"row",alignItems:"center",gap:1,children:[m.jsx(ae,{children:n.formatMessage(pe.payRateConditional,{b:f=>m.jsx("b",{children:f})})}),m.jsx(bn,{title:n.formatMessage(pe.payRateConditionalTooltip),children:m.jsx(Qt,{color:"action",fontSize:"x-small"})})]}),(E==null?void 0:E.isPayRateConditional)&&m.jsx(ae,{variant:"body2",color:"textSecondary",children:n.formatMessage(pe.payRateConditionalDescription)})]})}),(E==null?void 0:E.isPayRateConditional)&&m.jsx(Ho,{})]})}),!(E!=null&&E.isPayRateConditional)&&m.jsx("div",{"data-external-id":"non-conditional-leave-pay-rate-section",children:m.jsx(Pn,{})}),h&&m.jsxs(m.Fragment,{children:[m.jsx(Be,{}),m.jsxs(J,{spacing:2,"data-external-id":"daily-wage-calculation-section",children:[m.jsxs("div",{children:[m.jsx(ke,{heading:E!=null&&E.isPayRateConditional?n.formatMessage(pe.dailyWageCalculationForPartialOrUnpaidLeaves):(E==null?void 0:E.paid)==="partially-paid"?n.formatMessage(pe.dailyWageCalculationForPartialPaidLeaves):n.formatMessage(pe.dailyWageCalculationForUnpaidLeaves)}),m.jsx(ae,{variant:"body2",color:"textSecondary",children:n.formatMessage(pe.createDeductionOnPayroll)})]}),l?m.jsx(Vo,{isUnpaidLeaveConfigurationDisabled:a}):m.jsx(Ko,{})]})]})]})})},Ho=()=>{var E,x;const n=ce(),{classes:O}=nt(),{mutators:v}=kt(),{values:l}=Se({subscription:{values:!0,errors:!0}}),{disabledFields:o}=Y.useContext(Pe);return m.jsxs(J,{spacing:4,"data-external-id":"conditional-leave-pay-rate-section",children:[m.jsx("div",{children:m.jsxs(J,{spacing:2,ml:6,children:[m.jsx(Xe,{"data-external-id":"pay-rate-conditional-alert",variant:et.Info,message:n.formatMessage(pe.payRateConditionalAlert),withIcon:!0}),m.jsxs("div",{className:O.conditionalSection,children:[m.jsx(ma,{name:"leavePayRateConditions.conditions",children:({fields:g,meta:h})=>g.map((b,d)=>m.jsx($o,{name:b,index:d,fields:g,meta:h},b))}),((x=(E=l==null?void 0:l.leavePayRateConditions)==null?void 0:E.conditions)==null?void 0:x.length)<10&&m.jsx("div",{className:O.addConditionButton,children:m.jsx(Ce,{disabled:o.includes("leavePayRateConditions"),"data-external-id":"add-another-condition-button",variant:"outlined",onClick:()=>v.push("leavePayRateConditions.conditions",Ha),startIcon:m.jsx(ia,{fontSize:"x-small"}),children:n.formatMessage(pe.addAnotherCondition)})})]})]})}),m.jsxs(J,{spacing:1,"data-external-id":"conditional-pay-rate-default-policy-section",children:[m.jsx("div",{children:m.jsx(ke,{heading:n.formatMessage(pe.defaultPayRate),subtext:n.formatMessage(pe.defaultPayRateDescription)})}),m.jsx(Pn,{namePrefix:"leavePayRateConditions.defaultOutput"})]})]})},$o=({index:n,name:O,fields:v,meta:l})=>{var p,t;const o=ce(),{classes:E}=nt(),{values:x,touched:g}=Se({subscription:{values:!0,touched:!0}}),{disabledFields:h}=Y.useContext(Pe),b=h.includes("leavePayRateConditions"),d=ee.get(x,O),r=ee.get(g,O+".values[0]"),e=ee.get(g,O+".values[1]"),a=Y.useMemo(()=>{var y;return(y=l==null?void 0:l.error)==null?void 0:y[n]},[n,l==null?void 0:l.error]),f=y=>{var k;return y?y.isAllowanceConditional?Math.trunc(Math.max(...(k=y.leaveAllowanceConditions)==null?void 0:k.conditions.map(M=>M.output.values[0])))+1:ee.isNil(y.numberOfDays)?0:Math.trunc(y.numberOfDays)+1:0},c=Y.useMemo(()=>f(x),[x]),i=Ze(Ma),u=Ze(_n),s=(y,k,M)=>{var T;const S=f(k),j=(T=M==null?void 0:M.name)==null?void 0:T.replace(/\.values\[\d\]/i,""),{operator:_,values:w=[]}=ee.get(k,j??O)||{},A=N=>N==null||N===""||typeof N=="number"&&isNaN(N);return _==="between"&&A(w[0])&&A(w[1])?o.formatMessage(pe.minMaxValueRequired):_==="between"&&A(w[0])?o.formatMessage(pe.minValueRequired):_==="between"&&A(w[1])?o.formatMessage(pe.maxValueRequired):A(w[0])&&_!=="between"?o.formatMessage(pe.valueRequired):!A(w[0])&&w[0]<0||_==="between"&&!A(w[1])&&w[1]<0?o.formatMessage(pe.greaterThanOrEqual,{minValue:0}):_==="between"&&!A(w[0])&&!A(w[1])&&(w==null?void 0:w[0])>=(w==null?void 0:w[1])?o.formatMessage(pe.minValueLessThanMaxValue):S&&(!A(w[0])&&(w==null?void 0:w[0])>S||_==="between"&&!A(w[1])&&(w==null?void 0:w[1])>S)?o.formatMessage(pe.maxAllowanceValue,{maxValue:S}):void 0};return m.jsxs(yt,{"data-external-id":"conditional-leave-pay-rate-accordion",elevation:0,className:E.noMargin,defaultExpanded:!0,children:[m.jsx(Mn,{className:E.accordionSummary,expandIcon:m.jsx(mt,{fontSize:"xx-small"}),children:m.jsxs(J,{width:"100%",direction:"row",alignItems:"baseline",justifyContent:"space-between",children:[m.jsx(ae,{variant:"h5",children:o.formatMessage(pe.payRateCondition,{count:n+1})}),n!==0&&m.jsx(xn,{"data-external-id":"delete-condition",disabled:b,onClick:()=>v.remove(n),size:"small",children:m.jsx(oa,{})})]})}),m.jsx(gt,{className:E.accordionDetails,children:m.jsxs(J,{className:E.accordionContent,spacing:4,children:[m.jsxs(J,{spacing:1,children:[m.jsx(ae,{variant:"h6",children:o.formatMessage(pe.employeeLeaveAllowance)}),m.jsxs("div",{children:[m.jsxs(J,{direction:{xs:"column",md:"row"},gap:1,alignItems:{md:"center"},children:[m.jsxs(J,{direction:"row",gap:1,children:[m.jsx(Et,{name:`${O}.operator`,options:["between","greater-than-or-equal","less-than"],renderOption:i,disabled:b,hiddenLabel:!0}),m.jsx(lt,{"data-external-id":`${O}.values[0]-number-field`,disabled:b,name:`${O}.values[0]`,placeholder:"0",validate:s,hiddenLabel:!0,isDecimal:!0,decimalPlaces:2})]}),m.jsxs(J,{direction:{xs:"column",md:"row"},gap:1,alignItems:{md:"center"},children:[(d==null?void 0:d.operator)==="between"&&m.jsx(ae,{children:o.formatMessage(pe.untilBefore)}),m.jsxs(J,{direction:"row",gap:1,alignItems:"center",children:[(d==null?void 0:d.operator)==="between"&&m.jsx(lt,{disabled:b,"data-external-id":`${O}.values[1]-number-field`,name:`${O}.values[1]`,placeholder:"0",validate:s,hiddenLabel:!0,isDecimal:!0,decimalPlaces:2}),m.jsx(ae,{children:ee.lowerCase(u(x==null?void 0:x.daysType))})]})]})]}),(r||e)&&((p=a==null?void 0:a.values)!=null&&p[0])?m.jsx(st,{"data-external-id":"condition-field-helper-text",error:!0,children:(t=a==null?void 0:a.values)==null?void 0:t[0]}):c?m.jsx(ae,{variant:"body2",color:"textSecondary",mt:1,children:o.formatMessage(pe.maxAllowanceValue,{maxValue:c})}):m.jsx(m.Fragment,{})]})]}),m.jsxs(J,{spacing:1,children:[m.jsx(ke,{heading:o.formatMessage(pe.setLeavePayRateTo)}),m.jsx(Pn,{namePrefix:`${O}.output`})]})]})})]})},Pn=({namePrefix:n})=>{var e,a;const O=ce(),{classes:v}=nt(),l=Se({subscription:{values:!0,errors:!0,touched:!0}}),{disabledFields:o}=Y.useContext(Pe),E=Ze(Fo),x=n?`${n}.values[0]`:"leavePayRatePercentage",g=n?ee.get(l.values,n):l.values,h=n?ee.get(l.errors,n):l.errors,b=(e=l==null?void 0:l.touched)==null?void 0:e[x],d=n?(a=h==null?void 0:h.values)==null?void 0:a[0]:h==null?void 0:h.leavePayRatePercentage,r=f=>ee.isNil(f)?O.formatMessage(pe.required):f<=0?O.formatMessage(pe.greaterThan,{minValue:0}):f>=100?O.formatMessage(pe.lessThan,{maxValue:100}):void 0;return m.jsxs(J,{spacing:2,children:[m.jsx(Cn,{name:n?`${n}.paid`:"paid",disabled:n?o.includes("leavePayRateConditions"):o.includes("paid"),options:["paid","partially-paid","unpaid"],renderOption:E,validate:f=>ee.isNil(f)&&O.formatMessage(pe.required),onDone:()=>{var f,c;return!((f=l==null?void 0:l.values)!=null&&f.isPayRateConditional)&&((c=document.getElementById("leave-pay-rate-accordion"))==null?void 0:c.scrollIntoView(!0))}}),(g==null?void 0:g.paid)==="partially-paid"&&m.jsxs("div",{"data-external-id":"leave-pay-rate-percentage-section",children:[m.jsx(J,{direction:"row",gap:1,children:m.jsx(lt,{className:v.unsetWidth,"data-external-id":"textfield-leavePayRatePercentage",disabled:n?o.includes("leavePayRateConditions"):o.includes("leavePayRatePercentage"),name:x,label:O.formatMessage(pe.percentagePaid),endAdornment:m.jsx(ae,{variant:"subtitle2",color:"textSecondary",className:v.endAdornment,children:"%"}),placeholder:"0",decimalPlaces:2,isDecimal:!0,validate:r})}),b&&d&&m.jsx(st,{error:!0,"data-external-id":"leavePayRatePercentage-helper-text",children:d})]})]})},Vo=({isUnpaidLeaveConfigurationDisabled:n})=>{const O=ce(),{template:v,disabledFields:l}=Y.useContext(Pe),{values:o,errors:E,touched:x}=Se({subscription:{values:!0,errors:!0,touched:!0}}),g=(v==null?void 0:v.dailyRateGlobalConfigEnabled)??n,h=Ze(_n),b=Ze(Lr);return m.jsxs(J,{spacing:2,children:[m.jsxs("div",{children:[m.jsxs(J,{direction:"row",alignItems:"center",gap:1,children:[m.jsx(Et,{name:"dailyRateSalaryComponent",options:["basic","basic-allowance"],renderOption:b,disabled:g||l.includes("dailyRateSalaryComponent"),hiddenLabel:!0}),m.jsx("span",{children:"/"}),m.jsx(Et,{name:"dailyRateDayType",options:["calendar-days","custom-days","working-days"],renderOption:h,disabled:g||l.includes("dailyRateDayType"),hiddenLabel:!0}),(o==null?void 0:o.dailyRateDayType)==="custom-days"&&m.jsx(lt,{name:"dailyRateCustomDayCount",disabled:g||l.includes("dailyRateCustomDayCount"),hiddenLabel:!0,isDecimal:!0,decimalPlaces:2})]}),(x==null?void 0:x.dailyRateCustomDayCount)&&(E==null?void 0:E.dailyRateCustomDayCount)&&m.jsx(st,{error:!0,children:E==null?void 0:E.dailyRateCustomDayCount})]}),g&&m.jsxs(J,{direction:"row",alignItems:"center",spacing:1,children:[m.jsx(Qt,{color:"disabled",fontSize:"x-small"}),m.jsx(ae,{color:"textSecondary",children:O.formatMessage(pe.configuredInSettings,{Link:d=>m.jsx(aa,{target:"_blank",to:"/settings/payroll?#daily-wage",app:ua.APP_HRADMIN,children:d})})})]}),m.jsx(Xe,{variant:et.Info,withIcon:!0,message:o!=null&&o.isPayRateConditional?O.formatMessage(pe.updatedInPayrollForPartialOrUnpaidLeaves):(o==null?void 0:o.paid)==="partially-paid"?O.formatMessage(pe.updatedInPayrollForPartialPaidLeaves):O.formatMessage(pe.updatedInPayrollForUnpaidLeaves)})]})},Ko=()=>{const n=ce(),{classes:O}=Bo();return m.jsxs("div",{className:O.disabledPayrollModule,children:[m.jsxs(J,{spacing:1,children:[m.jsx(ae,{variant:"overline",color:"textSecondary",children:n.formatMessage(pe.payroll)}),m.jsx(ae,{variant:"subtitle1",children:n.formatMessage(pe.automaticallyAdjustSalary)}),m.jsx(J,{direction:"row",spacing:2,children:m.jsx(ca,{variant:"contained",to:"https://calendly.com/generic-bookings",external:!0,target:"_blank",children:n.formatMessage(pe.learnMore)})})]}),m.jsx(ai,{size:150})]})},Go=Ee()(()=>({noMargin:{margin:0,[`& .${Yt.root}`]:{marginTop:0,marginBottom:0}}})),Zo=()=>{const n=ce(),{classes:O}=Go(),{values:v}=Se({subscription:{values:!0}}),l=ri();return m.jsx(Dt,{title:n.formatMessage(dn.leaveSalarySettings),"data-external-id":"leave-salary-settings-accordion",children:m.jsx(J,{spacing:4,children:m.jsx(ut,{"aria-checked":v.enableLeaveSalary,name:"eligibleForLeaveSalary",formControlClass:O.noMargin,label:m.jsx(ke,{heading:n.formatMessage(dn.enableLeaveSalary),subtext:n.formatMessage(dn.enableLeaveSalarySubtext)}),onChange:o=>{l({event:"leave-salary-settings.switch_enable-leave-salary-switch",enabled:o})}})})})},dn=ve({leaveSalarySettings:{id:"hr.time-off.leave-salary-settings",defaultMessage:"Leave salary settings"},enableLeaveSalary:{id:"hr.time-off.enable-leave-salary",defaultMessage:"Enable leave salary"},enableLeaveSalarySubtext:{id:"hr.time-off.enable-leave-salary-subtext",defaultMessage:"Employees included in this leave policy will be eligible for leave salary"}}),Yo=gr({url:[({intl:n,value:O})=>{if(!/^(https?:\/\/)?([a-zA-Z0-9-]+\.?)+([a-zA-Z]{2,})+(\/[^\s]*)?$/i.test(O))return n.formatMessage(it.invalidUrl)}]}),Qo=Ee()(n=>({dialogContainer:{width:440,maxWidth:"100%"},lightText:{color:n.palette.text.disabled},textField:{marginTop:0}})),it=ve({title:{id:"common.rich-text-editor.edit-link",defaultMessage:"Edit link"},link:{id:"common.rich-text-editor.link",defaultMessage:"Link"},addLink:{id:"common.rich-text-editor.add-link",defaultMessage:"Add link"},displayText:{id:"common.rich-text-editor.optional-display-text",defaultMessage:"Display text <light>(optional)</light>"},addDisplayText:{id:"common.rich-text-editor.add-display-text",defaultMessage:"Add display text"},save:{id:"common.action.save",defaultMessage:"Save"},cancel:{id:"common.action.cancel",defaultMessage:"Cancel"},invalidUrl:{id:"common.rich-text-editor.invalid-url",defaultMessage:"Invalid URL"}}),Jo=({onClose:n,onSubmit:O,open:v,link:l})=>{const o=ce(),{classes:E}=Qo(),x=Yo();return m.jsx(jt,{open:v,onClose:n,showCloseButton:!0,cancelButton:{show:!1},confirmButton:{show:!1},classes:{paper:E.dialogContainer},title:o.formatMessage(it.title),content:m.jsx(da,{initialValues:l,onSubmit:O,validate:x,render:({handleSubmit:g})=>m.jsx("form",{onSubmit:g,children:m.jsxs(J,{children:[m.jsx(mn,{className:E.textField,name:"url",label:o.formatMessage(it.link),placeholder:o.formatMessage(it.addLink)}),m.jsx(mn,{className:E.textField,name:"text",label:o.formatMessage(it.displayText,{light:h=>m.jsx("span",{className:E.lightText,children:h})}),placeholder:o.formatMessage(it.addDisplayText)}),m.jsxs(J,{mt:1,justifyContent:"flex-end",direction:"row",spacing:1,children:[m.jsx(Ce,{onClick:n,children:o.formatMessage(it.cancel)}),m.jsx(Ce,{variant:"contained",type:"submit",children:o.formatMessage(it.save)})]})]})})})})},ja="interface-essential/italic-off",Xo=`${Nt}#${ja}`,Ca=Ct(m.jsx("use",{href:Xo}),"ItalicOff");Ca.id=ja;const Na="interface-essential/text-bold",el=`${Nt}#${Na}`,Pa=Ct(m.jsx("use",{href:el}),"TextBold");Pa.id=Na;const Da="interface-essential/text-italic",tl=`${Nt}#${Da}`,Ra=Ct(m.jsx("use",{href:tl}),"TextItalic");Ra.id=Da;const Ia="interface-essential/text-underline",nl=`${Nt}#${Ia}`,La=Ct(m.jsx("use",{href:nl}),"TextUnderline");La.id=Ia;const qa="messages-chat-smileys/smiley-smile-1-alternate-1",al=`${Nt}#${qa}`,Fa=Ct(m.jsx("use",{href:al}),"SmileySmile1Alternate1");Fa.id=qa;var rl=ui;function il(n,O){return rl(n,O)}var ol=il,Ba={exports:{}};/*!
 * Quill Editor v1.3.7
 * https://quilljs.com/
 * Copyright (c) 2014, Jason Chen
 * Copyright (c) 2013, salesforce.com
 */(function(n,O){(function(l,o){n.exports=o()})(typeof self<"u"?self:tt,function(){return function(v){var l={};function o(E){if(l[E])return l[E].exports;var x=l[E]={i:E,l:!1,exports:{}};return v[E].call(x.exports,x,x.exports,o),x.l=!0,x.exports}return o.m=v,o.c=l,o.d=function(E,x,g){o.o(E,x)||Object.defineProperty(E,x,{configurable:!1,enumerable:!0,get:g})},o.n=function(E){var x=E&&E.__esModule?function(){return E.default}:function(){return E};return o.d(x,"a",x),x},o.o=function(E,x){return Object.prototype.hasOwnProperty.call(E,x)},o.p="",o(o.s=109)}([function(v,l,o){Object.defineProperty(l,"__esModule",{value:!0});var E=o(17),x=o(18),g=o(19),h=o(45),b=o(46),d=o(47),r=o(48),e=o(49),a=o(12),f=o(32),c=o(33),i=o(31),u=o(1),s={Scope:u.Scope,create:u.create,find:u.find,query:u.query,register:u.register,Container:E.default,Format:x.default,Leaf:g.default,Embed:r.default,Scroll:h.default,Block:d.default,Inline:b.default,Text:e.default,Attributor:{Attribute:a.default,Class:f.default,Style:c.default,Store:i.default}};l.default=s},function(v,l,o){var E=this&&this.__extends||function(){var i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(u,s){u.__proto__=s}||function(u,s){for(var p in s)s.hasOwnProperty(p)&&(u[p]=s[p])};return function(u,s){i(u,s);function p(){this.constructor=u}u.prototype=s===null?Object.create(s):(p.prototype=s.prototype,new p)}}();Object.defineProperty(l,"__esModule",{value:!0});var x=function(i){E(u,i);function u(s){var p=this;return s="[Parchment] "+s,p=i.call(this,s)||this,p.message=s,p.name=p.constructor.name,p}return u}(Error);l.ParchmentError=x;var g={},h={},b={},d={};l.DATA_KEY="__blot";var r;(function(i){i[i.TYPE=3]="TYPE",i[i.LEVEL=12]="LEVEL",i[i.ATTRIBUTE=13]="ATTRIBUTE",i[i.BLOT=14]="BLOT",i[i.INLINE=7]="INLINE",i[i.BLOCK=11]="BLOCK",i[i.BLOCK_BLOT=10]="BLOCK_BLOT",i[i.INLINE_BLOT=6]="INLINE_BLOT",i[i.BLOCK_ATTRIBUTE=9]="BLOCK_ATTRIBUTE",i[i.INLINE_ATTRIBUTE=5]="INLINE_ATTRIBUTE",i[i.ANY=15]="ANY"})(r=l.Scope||(l.Scope={}));function e(i,u){var s=f(i);if(s==null)throw new x("Unable to create "+i+" blot");var p=s,t=i instanceof Node||i.nodeType===Node.TEXT_NODE?i:p.create(u);return new p(t,u)}l.create=e;function a(i,u){return u===void 0&&(u=!1),i==null?null:i[l.DATA_KEY]!=null?i[l.DATA_KEY].blot:u?a(i.parentNode,u):null}l.find=a;function f(i,u){u===void 0&&(u=r.ANY);var s;if(typeof i=="string")s=d[i]||g[i];else if(i instanceof Text||i.nodeType===Node.TEXT_NODE)s=d.text;else if(typeof i=="number")i&r.LEVEL&r.BLOCK?s=d.block:i&r.LEVEL&r.INLINE&&(s=d.inline);else if(i instanceof HTMLElement){var p=(i.getAttribute("class")||"").split(/\s+/);for(var t in p)if(s=h[p[t]],s)break;s=s||b[i.tagName]}return s==null?null:u&r.LEVEL&s.scope&&u&r.TYPE&s.scope?s:null}l.query=f;function c(){for(var i=[],u=0;u<arguments.length;u++)i[u]=arguments[u];if(i.length>1)return i.map(function(t){return c(t)});var s=i[0];if(typeof s.blotName!="string"&&typeof s.attrName!="string")throw new x("Invalid definition");if(s.blotName==="abstract")throw new x("Cannot register abstract class");if(d[s.blotName||s.attrName]=s,typeof s.keyName=="string")g[s.keyName]=s;else if(s.className!=null&&(h[s.className]=s),s.tagName!=null){Array.isArray(s.tagName)?s.tagName=s.tagName.map(function(t){return t.toUpperCase()}):s.tagName=s.tagName.toUpperCase();var p=Array.isArray(s.tagName)?s.tagName:[s.tagName];p.forEach(function(t){(b[t]==null||s.className==null)&&(b[t]=s)})}return s}l.register=c},function(v,l,o){var E=o(51),x=o(11),g=o(3),h=o(20),b="\0",d=function(r){Array.isArray(r)?this.ops=r:r!=null&&Array.isArray(r.ops)?this.ops=r.ops:this.ops=[]};d.prototype.insert=function(r,e){var a={};return r.length===0?this:(a.insert=r,e!=null&&typeof e=="object"&&Object.keys(e).length>0&&(a.attributes=e),this.push(a))},d.prototype.delete=function(r){return r<=0?this:this.push({delete:r})},d.prototype.retain=function(r,e){if(r<=0)return this;var a={retain:r};return e!=null&&typeof e=="object"&&Object.keys(e).length>0&&(a.attributes=e),this.push(a)},d.prototype.push=function(r){var e=this.ops.length,a=this.ops[e-1];if(r=g(!0,{},r),typeof a=="object"){if(typeof r.delete=="number"&&typeof a.delete=="number")return this.ops[e-1]={delete:a.delete+r.delete},this;if(typeof a.delete=="number"&&r.insert!=null&&(e-=1,a=this.ops[e-1],typeof a!="object"))return this.ops.unshift(r),this;if(x(r.attributes,a.attributes)){if(typeof r.insert=="string"&&typeof a.insert=="string")return this.ops[e-1]={insert:a.insert+r.insert},typeof r.attributes=="object"&&(this.ops[e-1].attributes=r.attributes),this;if(typeof r.retain=="number"&&typeof a.retain=="number")return this.ops[e-1]={retain:a.retain+r.retain},typeof r.attributes=="object"&&(this.ops[e-1].attributes=r.attributes),this}}return e===this.ops.length?this.ops.push(r):this.ops.splice(e,0,r),this},d.prototype.chop=function(){var r=this.ops[this.ops.length-1];return r&&r.retain&&!r.attributes&&this.ops.pop(),this},d.prototype.filter=function(r){return this.ops.filter(r)},d.prototype.forEach=function(r){this.ops.forEach(r)},d.prototype.map=function(r){return this.ops.map(r)},d.prototype.partition=function(r){var e=[],a=[];return this.forEach(function(f){var c=r(f)?e:a;c.push(f)}),[e,a]},d.prototype.reduce=function(r,e){return this.ops.reduce(r,e)},d.prototype.changeLength=function(){return this.reduce(function(r,e){return e.insert?r+h.length(e):e.delete?r-e.delete:r},0)},d.prototype.length=function(){return this.reduce(function(r,e){return r+h.length(e)},0)},d.prototype.slice=function(r,e){r=r||0,typeof e!="number"&&(e=1/0);for(var a=[],f=h.iterator(this.ops),c=0;c<e&&f.hasNext();){var i;c<r?i=f.next(r-c):(i=f.next(e-c),a.push(i)),c+=h.length(i)}return new d(a)},d.prototype.compose=function(r){var e=h.iterator(this.ops),a=h.iterator(r.ops),f=[],c=a.peek();if(c!=null&&typeof c.retain=="number"&&c.attributes==null){for(var i=c.retain;e.peekType()==="insert"&&e.peekLength()<=i;)i-=e.peekLength(),f.push(e.next());c.retain-i>0&&a.next(c.retain-i)}for(var u=new d(f);e.hasNext()||a.hasNext();)if(a.peekType()==="insert")u.push(a.next());else if(e.peekType()==="delete")u.push(e.next());else{var s=Math.min(e.peekLength(),a.peekLength()),p=e.next(s),t=a.next(s);if(typeof t.retain=="number"){var y={};typeof p.retain=="number"?y.retain=s:y.insert=p.insert;var k=h.attributes.compose(p.attributes,t.attributes,typeof p.retain=="number");if(k&&(y.attributes=k),u.push(y),!a.hasNext()&&x(u.ops[u.ops.length-1],y)){var M=new d(e.rest());return u.concat(M).chop()}}else typeof t.delete=="number"&&typeof p.retain=="number"&&u.push(t)}return u.chop()},d.prototype.concat=function(r){var e=new d(this.ops.slice());return r.ops.length>0&&(e.push(r.ops[0]),e.ops=e.ops.concat(r.ops.slice(1))),e},d.prototype.diff=function(r,e){if(this.ops===r.ops)return new d;var a=[this,r].map(function(s){return s.map(function(p){if(p.insert!=null)return typeof p.insert=="string"?p.insert:b;var t=s===r?"on":"with";throw new Error("diff() called "+t+" non-document")}).join("")}),f=new d,c=E(a[0],a[1],e),i=h.iterator(this.ops),u=h.iterator(r.ops);return c.forEach(function(s){for(var p=s[1].length;p>0;){var t=0;switch(s[0]){case E.INSERT:t=Math.min(u.peekLength(),p),f.push(u.next(t));break;case E.DELETE:t=Math.min(p,i.peekLength()),i.next(t),f.delete(t);break;case E.EQUAL:t=Math.min(i.peekLength(),u.peekLength(),p);var y=i.next(t),k=u.next(t);x(y.insert,k.insert)?f.retain(t,h.attributes.diff(y.attributes,k.attributes)):f.push(k).delete(t);break}p-=t}}),f.chop()},d.prototype.eachLine=function(r,e){e=e||`
`;for(var a=h.iterator(this.ops),f=new d,c=0;a.hasNext();){if(a.peekType()!=="insert")return;var i=a.peek(),u=h.length(i)-a.peekLength(),s=typeof i.insert=="string"?i.insert.indexOf(e,u)-u:-1;if(s<0)f.push(a.next());else if(s>0)f.push(a.next(s));else{if(r(f,a.next(1).attributes||{},c)===!1)return;c+=1,f=new d}}f.length()>0&&r(f,{},c)},d.prototype.transform=function(r,e){if(e=!!e,typeof r=="number")return this.transformPosition(r,e);for(var a=h.iterator(this.ops),f=h.iterator(r.ops),c=new d;a.hasNext()||f.hasNext();)if(a.peekType()==="insert"&&(e||f.peekType()!=="insert"))c.retain(h.length(a.next()));else if(f.peekType()==="insert")c.push(f.next());else{var i=Math.min(a.peekLength(),f.peekLength()),u=a.next(i),s=f.next(i);if(u.delete)continue;s.delete?c.push(s):c.retain(i,h.attributes.transform(u.attributes,s.attributes,e))}return c.chop()},d.prototype.transformPosition=function(r,e){e=!!e;for(var a=h.iterator(this.ops),f=0;a.hasNext()&&f<=r;){var c=a.peekLength(),i=a.peekType();if(a.next(),i==="delete"){r-=Math.min(c,r-f);continue}else i==="insert"&&(f<r||!e)&&(r+=c);f+=c}return r},v.exports=d},function(v,l){var o=Object.prototype.hasOwnProperty,E=Object.prototype.toString,x=Object.defineProperty,g=Object.getOwnPropertyDescriptor,h=function(a){return typeof Array.isArray=="function"?Array.isArray(a):E.call(a)==="[object Array]"},b=function(a){if(!a||E.call(a)!=="[object Object]")return!1;var f=o.call(a,"constructor"),c=a.constructor&&a.constructor.prototype&&o.call(a.constructor.prototype,"isPrototypeOf");if(a.constructor&&!f&&!c)return!1;var i;for(i in a);return typeof i>"u"||o.call(a,i)},d=function(a,f){x&&f.name==="__proto__"?x(a,f.name,{enumerable:!0,configurable:!0,value:f.newValue,writable:!0}):a[f.name]=f.newValue},r=function(a,f){if(f==="__proto__")if(o.call(a,f)){if(g)return g(a,f).value}else return;return a[f]};v.exports=function e(){var a,f,c,i,u,s,p=arguments[0],t=1,y=arguments.length,k=!1;for(typeof p=="boolean"&&(k=p,p=arguments[1]||{},t=2),(p==null||typeof p!="object"&&typeof p!="function")&&(p={});t<y;++t)if(a=arguments[t],a!=null)for(f in a)c=r(p,f),i=r(a,f),p!==i&&(k&&i&&(b(i)||(u=h(i)))?(u?(u=!1,s=c&&h(c)?c:[]):s=c&&b(c)?c:{},d(p,{name:f,newValue:e(k,s,i)})):typeof i<"u"&&d(p,{name:f,newValue:i}));return p}},function(v,l,o){Object.defineProperty(l,"__esModule",{value:!0}),l.default=l.BlockEmbed=l.bubbleFormats=void 0;var E=function(){function w(A,T){for(var N=0;N<T.length;N++){var R=T[N];R.enumerable=R.enumerable||!1,R.configurable=!0,"value"in R&&(R.writable=!0),Object.defineProperty(A,R.key,R)}}return function(A,T,N){return T&&w(A.prototype,T),N&&w(A,N),A}}(),x=function w(A,T,N){A===null&&(A=Function.prototype);var R=Object.getOwnPropertyDescriptor(A,T);if(R===void 0){var I=Object.getPrototypeOf(A);return I===null?void 0:w(I,T,N)}else{if("value"in R)return R.value;var F=R.get;return F===void 0?void 0:F.call(N)}},g=o(3),h=p(g),b=o(2),d=p(b),r=o(0),e=p(r),a=o(16),f=p(a),c=o(6),i=p(c),u=o(7),s=p(u);function p(w){return w&&w.__esModule?w:{default:w}}function t(w,A){if(!(w instanceof A))throw new TypeError("Cannot call a class as a function")}function y(w,A){if(!w)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return A&&(typeof A=="object"||typeof A=="function")?A:w}function k(w,A){if(typeof A!="function"&&A!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof A);w.prototype=Object.create(A&&A.prototype,{constructor:{value:w,enumerable:!1,writable:!0,configurable:!0}}),A&&(Object.setPrototypeOf?Object.setPrototypeOf(w,A):w.__proto__=A)}var M=1,S=function(w){k(A,w);function A(){return t(this,A),y(this,(A.__proto__||Object.getPrototypeOf(A)).apply(this,arguments))}return E(A,[{key:"attach",value:function(){x(A.prototype.__proto__||Object.getPrototypeOf(A.prototype),"attach",this).call(this),this.attributes=new e.default.Attributor.Store(this.domNode)}},{key:"delta",value:function(){return new d.default().insert(this.value(),(0,h.default)(this.formats(),this.attributes.values()))}},{key:"format",value:function(N,R){var I=e.default.query(N,e.default.Scope.BLOCK_ATTRIBUTE);I!=null&&this.attributes.attribute(I,R)}},{key:"formatAt",value:function(N,R,I,F){this.format(I,F)}},{key:"insertAt",value:function(N,R,I){if(typeof R=="string"&&R.endsWith(`
`)){var F=e.default.create(j.blotName);this.parent.insertBefore(F,N===0?this:this.next),F.insertAt(0,R.slice(0,-1))}else x(A.prototype.__proto__||Object.getPrototypeOf(A.prototype),"insertAt",this).call(this,N,R,I)}}]),A}(e.default.Embed);S.scope=e.default.Scope.BLOCK_BLOT;var j=function(w){k(A,w);function A(T){t(this,A);var N=y(this,(A.__proto__||Object.getPrototypeOf(A)).call(this,T));return N.cache={},N}return E(A,[{key:"delta",value:function(){return this.cache.delta==null&&(this.cache.delta=this.descendants(e.default.Leaf).reduce(function(N,R){return R.length()===0?N:N.insert(R.value(),_(R))},new d.default).insert(`
`,_(this))),this.cache.delta}},{key:"deleteAt",value:function(N,R){x(A.prototype.__proto__||Object.getPrototypeOf(A.prototype),"deleteAt",this).call(this,N,R),this.cache={}}},{key:"formatAt",value:function(N,R,I,F){R<=0||(e.default.query(I,e.default.Scope.BLOCK)?N+R===this.length()&&this.format(I,F):x(A.prototype.__proto__||Object.getPrototypeOf(A.prototype),"formatAt",this).call(this,N,Math.min(R,this.length()-N-1),I,F),this.cache={})}},{key:"insertAt",value:function(N,R,I){if(I!=null)return x(A.prototype.__proto__||Object.getPrototypeOf(A.prototype),"insertAt",this).call(this,N,R,I);if(R.length!==0){var F=R.split(`
`),V=F.shift();V.length>0&&(N<this.length()-1||this.children.tail==null?x(A.prototype.__proto__||Object.getPrototypeOf(A.prototype),"insertAt",this).call(this,Math.min(N,this.length()-1),V):this.children.tail.insertAt(this.children.tail.length(),V),this.cache={});var B=this;F.reduce(function(q,C){return B=B.split(q,!0),B.insertAt(0,C),C.length},N+V.length)}}},{key:"insertBefore",value:function(N,R){var I=this.children.head;x(A.prototype.__proto__||Object.getPrototypeOf(A.prototype),"insertBefore",this).call(this,N,R),I instanceof f.default&&I.remove(),this.cache={}}},{key:"length",value:function(){return this.cache.length==null&&(this.cache.length=x(A.prototype.__proto__||Object.getPrototypeOf(A.prototype),"length",this).call(this)+M),this.cache.length}},{key:"moveChildren",value:function(N,R){x(A.prototype.__proto__||Object.getPrototypeOf(A.prototype),"moveChildren",this).call(this,N,R),this.cache={}}},{key:"optimize",value:function(N){x(A.prototype.__proto__||Object.getPrototypeOf(A.prototype),"optimize",this).call(this,N),this.cache={}}},{key:"path",value:function(N){return x(A.prototype.__proto__||Object.getPrototypeOf(A.prototype),"path",this).call(this,N,!0)}},{key:"removeChild",value:function(N){x(A.prototype.__proto__||Object.getPrototypeOf(A.prototype),"removeChild",this).call(this,N),this.cache={}}},{key:"split",value:function(N){var R=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(R&&(N===0||N>=this.length()-M)){var I=this.clone();return N===0?(this.parent.insertBefore(I,this),this):(this.parent.insertBefore(I,this.next),I)}else{var F=x(A.prototype.__proto__||Object.getPrototypeOf(A.prototype),"split",this).call(this,N,R);return this.cache={},F}}}]),A}(e.default.Block);j.blotName="block",j.tagName="P",j.defaultChild="break",j.allowedChildren=[i.default,e.default.Embed,s.default];function _(w){var A=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return w==null||(typeof w.formats=="function"&&(A=(0,h.default)(A,w.formats())),w.parent==null||w.parent.blotName=="scroll"||w.parent.statics.scope!==w.statics.scope)?A:_(w.parent,A)}l.bubbleFormats=_,l.BlockEmbed=S,l.default=j},function(v,l,o){Object.defineProperty(l,"__esModule",{value:!0}),l.default=l.overload=l.expandConfig=void 0;var E=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(B){return typeof B}:function(B){return B&&typeof Symbol=="function"&&B.constructor===Symbol&&B!==Symbol.prototype?"symbol":typeof B},x=function(){function B(q,C){var P=[],L=!0,W=!1,z=void 0;try{for(var D=q[Symbol.iterator](),U;!(L=(U=D.next()).done)&&(P.push(U.value),!(C&&P.length===C));L=!0);}catch(H){W=!0,z=H}finally{try{!L&&D.return&&D.return()}finally{if(W)throw z}}return P}return function(q,C){if(Array.isArray(q))return q;if(Symbol.iterator in Object(q))return B(q,C);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),g=function(){function B(q,C){for(var P=0;P<C.length;P++){var L=C[P];L.enumerable=L.enumerable||!1,L.configurable=!0,"value"in L&&(L.writable=!0),Object.defineProperty(q,L.key,L)}}return function(q,C,P){return C&&B(q.prototype,C),P&&B(q,P),q}}();o(50);var h=o(2),b=_(h),d=o(14),r=_(d),e=o(8),a=_(e),f=o(9),c=_(f),i=o(0),u=_(i),s=o(15),p=_(s),t=o(3),y=_(t),k=o(10),M=_(k),S=o(34),j=_(S);function _(B){return B&&B.__esModule?B:{default:B}}function w(B,q,C){return q in B?Object.defineProperty(B,q,{value:C,enumerable:!0,configurable:!0,writable:!0}):B[q]=C,B}function A(B,q){if(!(B instanceof q))throw new TypeError("Cannot call a class as a function")}var T=(0,M.default)("quill"),N=function(){g(B,null,[{key:"debug",value:function(C){C===!0&&(C="log"),M.default.level(C)}},{key:"find",value:function(C){return C.__quill||u.default.find(C)}},{key:"import",value:function(C){return this.imports[C]==null&&T.error("Cannot import "+C+". Are you sure it was registered?"),this.imports[C]}},{key:"register",value:function(C,P){var L=this,W=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;if(typeof C!="string"){var z=C.attrName||C.blotName;typeof z=="string"?this.register("formats/"+z,C,P):Object.keys(C).forEach(function(D){L.register(D,C[D],P)})}else this.imports[C]!=null&&!W&&T.warn("Overwriting "+C+" with",P),this.imports[C]=P,(C.startsWith("blots/")||C.startsWith("formats/"))&&P.blotName!=="abstract"?u.default.register(P):C.startsWith("modules")&&typeof P.register=="function"&&P.register()}}]);function B(q){var C=this,P=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(A(this,B),this.options=R(q,P),this.container=this.options.container,this.container==null)return T.error("Invalid Quill container",q);this.options.debug&&B.debug(this.options.debug);var L=this.container.innerHTML.trim();this.container.classList.add("ql-container"),this.container.innerHTML="",this.container.__quill=this,this.root=this.addContainer("ql-editor"),this.root.classList.add("ql-blank"),this.root.setAttribute("data-gramm",!1),this.scrollingContainer=this.options.scrollingContainer||this.root,this.emitter=new a.default,this.scroll=u.default.create(this.root,{emitter:this.emitter,whitelist:this.options.formats}),this.editor=new r.default(this.scroll),this.selection=new p.default(this.scroll,this.emitter),this.theme=new this.options.theme(this,this.options),this.keyboard=this.theme.addModule("keyboard"),this.clipboard=this.theme.addModule("clipboard"),this.history=this.theme.addModule("history"),this.theme.init(),this.emitter.on(a.default.events.EDITOR_CHANGE,function(z){z===a.default.events.TEXT_CHANGE&&C.root.classList.toggle("ql-blank",C.editor.isBlank())}),this.emitter.on(a.default.events.SCROLL_UPDATE,function(z,D){var U=C.selection.lastRange,H=U&&U.length===0?U.index:void 0;I.call(C,function(){return C.editor.update(null,D,H)},z)});var W=this.clipboard.convert(`<div class='ql-editor' style="white-space: normal;">`+L+"<p><br></p></div>");this.setContents(W),this.history.clear(),this.options.placeholder&&this.root.setAttribute("data-placeholder",this.options.placeholder),this.options.readOnly&&this.disable()}return g(B,[{key:"addContainer",value:function(C){var P=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;if(typeof C=="string"){var L=C;C=document.createElement("div"),C.classList.add(L)}return this.container.insertBefore(C,P),C}},{key:"blur",value:function(){this.selection.setRange(null)}},{key:"deleteText",value:function(C,P,L){var W=this,z=F(C,P,L),D=x(z,4);return C=D[0],P=D[1],L=D[3],I.call(this,function(){return W.editor.deleteText(C,P)},L,C,-1*P)}},{key:"disable",value:function(){this.enable(!1)}},{key:"enable",value:function(){var C=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;this.scroll.enable(C),this.container.classList.toggle("ql-disabled",!C)}},{key:"focus",value:function(){var C=this.scrollingContainer.scrollTop;this.selection.focus(),this.scrollingContainer.scrollTop=C,this.scrollIntoView()}},{key:"format",value:function(C,P){var L=this,W=arguments.length>2&&arguments[2]!==void 0?arguments[2]:a.default.sources.API;return I.call(this,function(){var z=L.getSelection(!0),D=new b.default;if(z==null)return D;if(u.default.query(C,u.default.Scope.BLOCK))D=L.editor.formatLine(z.index,z.length,w({},C,P));else{if(z.length===0)return L.selection.format(C,P),D;D=L.editor.formatText(z.index,z.length,w({},C,P))}return L.setSelection(z,a.default.sources.SILENT),D},W)}},{key:"formatLine",value:function(C,P,L,W,z){var D=this,U=void 0,H=F(C,P,L,W,z),$=x(H,4);return C=$[0],P=$[1],U=$[2],z=$[3],I.call(this,function(){return D.editor.formatLine(C,P,U)},z,C,0)}},{key:"formatText",value:function(C,P,L,W,z){var D=this,U=void 0,H=F(C,P,L,W,z),$=x(H,4);return C=$[0],P=$[1],U=$[2],z=$[3],I.call(this,function(){return D.editor.formatText(C,P,U)},z,C,0)}},{key:"getBounds",value:function(C){var P=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,L=void 0;typeof C=="number"?L=this.selection.getBounds(C,P):L=this.selection.getBounds(C.index,C.length);var W=this.container.getBoundingClientRect();return{bottom:L.bottom-W.top,height:L.height,left:L.left-W.left,right:L.right-W.left,top:L.top-W.top,width:L.width}}},{key:"getContents",value:function(){var C=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,P=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.getLength()-C,L=F(C,P),W=x(L,2);return C=W[0],P=W[1],this.editor.getContents(C,P)}},{key:"getFormat",value:function(){var C=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.getSelection(!0),P=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return typeof C=="number"?this.editor.getFormat(C,P):this.editor.getFormat(C.index,C.length)}},{key:"getIndex",value:function(C){return C.offset(this.scroll)}},{key:"getLength",value:function(){return this.scroll.length()}},{key:"getLeaf",value:function(C){return this.scroll.leaf(C)}},{key:"getLine",value:function(C){return this.scroll.line(C)}},{key:"getLines",value:function(){var C=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,P=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Number.MAX_VALUE;return typeof C!="number"?this.scroll.lines(C.index,C.length):this.scroll.lines(C,P)}},{key:"getModule",value:function(C){return this.theme.modules[C]}},{key:"getSelection",value:function(){var C=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;return C&&this.focus(),this.update(),this.selection.getRange()[0]}},{key:"getText",value:function(){var C=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,P=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.getLength()-C,L=F(C,P),W=x(L,2);return C=W[0],P=W[1],this.editor.getText(C,P)}},{key:"hasFocus",value:function(){return this.selection.hasFocus()}},{key:"insertEmbed",value:function(C,P,L){var W=this,z=arguments.length>3&&arguments[3]!==void 0?arguments[3]:B.sources.API;return I.call(this,function(){return W.editor.insertEmbed(C,P,L)},z,C)}},{key:"insertText",value:function(C,P,L,W,z){var D=this,U=void 0,H=F(C,0,L,W,z),$=x(H,4);return C=$[0],U=$[2],z=$[3],I.call(this,function(){return D.editor.insertText(C,P,U)},z,C,P.length)}},{key:"isEnabled",value:function(){return!this.container.classList.contains("ql-disabled")}},{key:"off",value:function(){return this.emitter.off.apply(this.emitter,arguments)}},{key:"on",value:function(){return this.emitter.on.apply(this.emitter,arguments)}},{key:"once",value:function(){return this.emitter.once.apply(this.emitter,arguments)}},{key:"pasteHTML",value:function(C,P,L){this.clipboard.dangerouslyPasteHTML(C,P,L)}},{key:"removeFormat",value:function(C,P,L){var W=this,z=F(C,P,L),D=x(z,4);return C=D[0],P=D[1],L=D[3],I.call(this,function(){return W.editor.removeFormat(C,P)},L,C)}},{key:"scrollIntoView",value:function(){this.selection.scrollIntoView(this.scrollingContainer)}},{key:"setContents",value:function(C){var P=this,L=arguments.length>1&&arguments[1]!==void 0?arguments[1]:a.default.sources.API;return I.call(this,function(){C=new b.default(C);var W=P.getLength(),z=P.editor.deleteText(0,W),D=P.editor.applyDelta(C),U=D.ops[D.ops.length-1];U!=null&&typeof U.insert=="string"&&U.insert[U.insert.length-1]===`
`&&(P.editor.deleteText(P.getLength()-1,1),D.delete(1));var H=z.compose(D);return H},L)}},{key:"setSelection",value:function(C,P,L){if(C==null)this.selection.setRange(null,P||B.sources.API);else{var W=F(C,P,L),z=x(W,4);C=z[0],P=z[1],L=z[3],this.selection.setRange(new s.Range(C,P),L),L!==a.default.sources.SILENT&&this.selection.scrollIntoView(this.scrollingContainer)}}},{key:"setText",value:function(C){var P=arguments.length>1&&arguments[1]!==void 0?arguments[1]:a.default.sources.API,L=new b.default().insert(C);return this.setContents(L,P)}},{key:"update",value:function(){var C=arguments.length>0&&arguments[0]!==void 0?arguments[0]:a.default.sources.USER,P=this.scroll.update(C);return this.selection.update(C),P}},{key:"updateContents",value:function(C){var P=this,L=arguments.length>1&&arguments[1]!==void 0?arguments[1]:a.default.sources.API;return I.call(this,function(){return C=new b.default(C),P.editor.applyDelta(C,L)},L,!0)}}]),B}();N.DEFAULTS={bounds:null,formats:null,modules:{},placeholder:"",readOnly:!1,scrollingContainer:null,strict:!0,theme:"default"},N.events=a.default.events,N.sources=a.default.sources,N.version="1.3.7",N.imports={delta:b.default,parchment:u.default,"core/module":c.default,"core/theme":j.default};function R(B,q){if(q=(0,y.default)(!0,{container:B,modules:{clipboard:!0,keyboard:!0,history:!0}},q),!q.theme||q.theme===N.DEFAULTS.theme)q.theme=j.default;else if(q.theme=N.import("themes/"+q.theme),q.theme==null)throw new Error("Invalid theme "+q.theme+". Did you register it?");var C=(0,y.default)(!0,{},q.theme.DEFAULTS);[C,q].forEach(function(W){W.modules=W.modules||{},Object.keys(W.modules).forEach(function(z){W.modules[z]===!0&&(W.modules[z]={})})});var P=Object.keys(C.modules).concat(Object.keys(q.modules)),L=P.reduce(function(W,z){var D=N.import("modules/"+z);return D==null?T.error("Cannot load "+z+" module. Are you sure you registered it?"):W[z]=D.DEFAULTS||{},W},{});return q.modules!=null&&q.modules.toolbar&&q.modules.toolbar.constructor!==Object&&(q.modules.toolbar={container:q.modules.toolbar}),q=(0,y.default)(!0,{},N.DEFAULTS,{modules:L},C,q),["bounds","container","scrollingContainer"].forEach(function(W){typeof q[W]=="string"&&(q[W]=document.querySelector(q[W]))}),q.modules=Object.keys(q.modules).reduce(function(W,z){return q.modules[z]&&(W[z]=q.modules[z]),W},{}),q}function I(B,q,C,P){if(this.options.strict&&!this.isEnabled()&&q===a.default.sources.USER)return new b.default;var L=C==null?null:this.getSelection(),W=this.editor.delta,z=B();if(L!=null&&(C===!0&&(C=L.index),P==null?L=V(L,z,q):P!==0&&(L=V(L,C,P,q)),this.setSelection(L,a.default.sources.SILENT)),z.length()>0){var D,U=[a.default.events.TEXT_CHANGE,z,W,q];if((D=this.emitter).emit.apply(D,[a.default.events.EDITOR_CHANGE].concat(U)),q!==a.default.sources.SILENT){var H;(H=this.emitter).emit.apply(H,U)}}return z}function F(B,q,C,P,L){var W={};return typeof B.index=="number"&&typeof B.length=="number"?typeof q!="number"?(L=P,P=C,C=q,q=B.length,B=B.index):(q=B.length,B=B.index):typeof q!="number"&&(L=P,P=C,C=q,q=0),(typeof C>"u"?"undefined":E(C))==="object"?(W=C,L=P):typeof C=="string"&&(P!=null?W[C]=P:L=C),L=L||a.default.sources.API,[B,q,W,L]}function V(B,q,C,P){if(B==null)return null;var L=void 0,W=void 0;if(q instanceof b.default){var z=[B.index,B.index+B.length].map(function($){return q.transformPosition($,P!==a.default.sources.USER)}),D=x(z,2);L=D[0],W=D[1]}else{var U=[B.index,B.index+B.length].map(function($){return $<q||$===q&&P===a.default.sources.USER?$:C>=0?$+C:Math.max(q,$+C)}),H=x(U,2);L=H[0],W=H[1]}return new s.Range(L,W-L)}l.expandConfig=R,l.overload=F,l.default=N},function(v,l,o){Object.defineProperty(l,"__esModule",{value:!0});var E=function(){function i(u,s){for(var p=0;p<s.length;p++){var t=s[p];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(u,t.key,t)}}return function(u,s,p){return s&&i(u.prototype,s),p&&i(u,p),u}}(),x=function i(u,s,p){u===null&&(u=Function.prototype);var t=Object.getOwnPropertyDescriptor(u,s);if(t===void 0){var y=Object.getPrototypeOf(u);return y===null?void 0:i(y,s,p)}else{if("value"in t)return t.value;var k=t.get;return k===void 0?void 0:k.call(p)}},g=o(7),h=r(g),b=o(0),d=r(b);function r(i){return i&&i.__esModule?i:{default:i}}function e(i,u){if(!(i instanceof u))throw new TypeError("Cannot call a class as a function")}function a(i,u){if(!i)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return u&&(typeof u=="object"||typeof u=="function")?u:i}function f(i,u){if(typeof u!="function"&&u!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof u);i.prototype=Object.create(u&&u.prototype,{constructor:{value:i,enumerable:!1,writable:!0,configurable:!0}}),u&&(Object.setPrototypeOf?Object.setPrototypeOf(i,u):i.__proto__=u)}var c=function(i){f(u,i);function u(){return e(this,u),a(this,(u.__proto__||Object.getPrototypeOf(u)).apply(this,arguments))}return E(u,[{key:"formatAt",value:function(p,t,y,k){if(u.compare(this.statics.blotName,y)<0&&d.default.query(y,d.default.Scope.BLOT)){var M=this.isolate(p,t);k&&M.wrap(y,k)}else x(u.prototype.__proto__||Object.getPrototypeOf(u.prototype),"formatAt",this).call(this,p,t,y,k)}},{key:"optimize",value:function(p){if(x(u.prototype.__proto__||Object.getPrototypeOf(u.prototype),"optimize",this).call(this,p),this.parent instanceof u&&u.compare(this.statics.blotName,this.parent.statics.blotName)>0){var t=this.parent.isolate(this.offset(),this.length());this.moveChildren(t),t.wrap(this)}}}],[{key:"compare",value:function(p,t){var y=u.order.indexOf(p),k=u.order.indexOf(t);return y>=0||k>=0?y-k:p===t?0:p<t?-1:1}}]),u}(d.default.Inline);c.allowedChildren=[c,d.default.Embed,h.default],c.order=["cursor","inline","underline","strike","italic","bold","script","link","code"],l.default=c},function(v,l,o){Object.defineProperty(l,"__esModule",{value:!0});var E=o(0),x=g(E);function g(e){return e&&e.__esModule?e:{default:e}}function h(e,a){if(!(e instanceof a))throw new TypeError("Cannot call a class as a function")}function b(e,a){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return a&&(typeof a=="object"||typeof a=="function")?a:e}function d(e,a){if(typeof a!="function"&&a!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof a);e.prototype=Object.create(a&&a.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),a&&(Object.setPrototypeOf?Object.setPrototypeOf(e,a):e.__proto__=a)}var r=function(e){d(a,e);function a(){return h(this,a),b(this,(a.__proto__||Object.getPrototypeOf(a)).apply(this,arguments))}return a}(x.default.Text);l.default=r},function(v,l,o){Object.defineProperty(l,"__esModule",{value:!0});var E=function(){function s(p,t){for(var y=0;y<t.length;y++){var k=t[y];k.enumerable=k.enumerable||!1,k.configurable=!0,"value"in k&&(k.writable=!0),Object.defineProperty(p,k.key,k)}}return function(p,t,y){return t&&s(p.prototype,t),y&&s(p,y),p}}(),x=function s(p,t,y){p===null&&(p=Function.prototype);var k=Object.getOwnPropertyDescriptor(p,t);if(k===void 0){var M=Object.getPrototypeOf(p);return M===null?void 0:s(M,t,y)}else{if("value"in k)return k.value;var S=k.get;return S===void 0?void 0:S.call(y)}},g=o(54),h=r(g),b=o(10),d=r(b);function r(s){return s&&s.__esModule?s:{default:s}}function e(s,p){if(!(s instanceof p))throw new TypeError("Cannot call a class as a function")}function a(s,p){if(!s)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return p&&(typeof p=="object"||typeof p=="function")?p:s}function f(s,p){if(typeof p!="function"&&p!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof p);s.prototype=Object.create(p&&p.prototype,{constructor:{value:s,enumerable:!1,writable:!0,configurable:!0}}),p&&(Object.setPrototypeOf?Object.setPrototypeOf(s,p):s.__proto__=p)}var c=(0,d.default)("quill:events"),i=["selectionchange","mousedown","mouseup","click"];i.forEach(function(s){document.addEventListener(s,function(){for(var p=arguments.length,t=Array(p),y=0;y<p;y++)t[y]=arguments[y];[].slice.call(document.querySelectorAll(".ql-container")).forEach(function(k){if(k.__quill&&k.__quill.emitter){var M;(M=k.__quill.emitter).handleDOM.apply(M,t)}})})});var u=function(s){f(p,s);function p(){e(this,p);var t=a(this,(p.__proto__||Object.getPrototypeOf(p)).call(this));return t.listeners={},t.on("error",c.error),t}return E(p,[{key:"emit",value:function(){c.log.apply(c,arguments),x(p.prototype.__proto__||Object.getPrototypeOf(p.prototype),"emit",this).apply(this,arguments)}},{key:"handleDOM",value:function(y){for(var k=arguments.length,M=Array(k>1?k-1:0),S=1;S<k;S++)M[S-1]=arguments[S];(this.listeners[y.type]||[]).forEach(function(j){var _=j.node,w=j.handler;(y.target===_||_.contains(y.target))&&w.apply(void 0,[y].concat(M))})}},{key:"listenDOM",value:function(y,k,M){this.listeners[y]||(this.listeners[y]=[]),this.listeners[y].push({node:k,handler:M})}}]),p}(h.default);u.events={EDITOR_CHANGE:"editor-change",SCROLL_BEFORE_UPDATE:"scroll-before-update",SCROLL_OPTIMIZE:"scroll-optimize",SCROLL_UPDATE:"scroll-update",SELECTION_CHANGE:"selection-change",TEXT_CHANGE:"text-change"},u.sources={API:"api",SILENT:"silent",USER:"user"},l.default=u},function(v,l,o){Object.defineProperty(l,"__esModule",{value:!0});function E(g,h){if(!(g instanceof h))throw new TypeError("Cannot call a class as a function")}var x=function g(h){var b=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};E(this,g),this.quill=h,this.options=b};x.DEFAULTS={},l.default=x},function(v,l,o){Object.defineProperty(l,"__esModule",{value:!0});var E=["error","warn","log","info"],x="warn";function g(b){if(E.indexOf(b)<=E.indexOf(x)){for(var d,r=arguments.length,e=Array(r>1?r-1:0),a=1;a<r;a++)e[a-1]=arguments[a];(d=console)[b].apply(d,e)}}function h(b){return E.reduce(function(d,r){return d[r]=g.bind(console,r,b),d},{})}g.level=h.level=function(b){x=b},l.default=h},function(v,l,o){var E=Array.prototype.slice,x=o(52),g=o(53),h=v.exports=function(e,a,f){return f||(f={}),e===a?!0:e instanceof Date&&a instanceof Date?e.getTime()===a.getTime():!e||!a||typeof e!="object"&&typeof a!="object"?f.strict?e===a:e==a:r(e,a,f)};function b(e){return e==null}function d(e){return!(!e||typeof e!="object"||typeof e.length!="number"||typeof e.copy!="function"||typeof e.slice!="function"||e.length>0&&typeof e[0]!="number")}function r(e,a,f){var c,i;if(b(e)||b(a)||e.prototype!==a.prototype)return!1;if(g(e))return g(a)?(e=E.call(e),a=E.call(a),h(e,a,f)):!1;if(d(e)){if(!d(a)||e.length!==a.length)return!1;for(c=0;c<e.length;c++)if(e[c]!==a[c])return!1;return!0}try{var u=x(e),s=x(a)}catch{return!1}if(u.length!=s.length)return!1;for(u.sort(),s.sort(),c=u.length-1;c>=0;c--)if(u[c]!=s[c])return!1;for(c=u.length-1;c>=0;c--)if(i=u[c],!h(e[i],a[i],f))return!1;return typeof e==typeof a}},function(v,l,o){Object.defineProperty(l,"__esModule",{value:!0});var E=o(1),x=function(){function g(h,b,d){d===void 0&&(d={}),this.attrName=h,this.keyName=b;var r=E.Scope.TYPE&E.Scope.ATTRIBUTE;d.scope!=null?this.scope=d.scope&E.Scope.LEVEL|r:this.scope=E.Scope.ATTRIBUTE,d.whitelist!=null&&(this.whitelist=d.whitelist)}return g.keys=function(h){return[].map.call(h.attributes,function(b){return b.name})},g.prototype.add=function(h,b){return this.canAdd(h,b)?(h.setAttribute(this.keyName,b),!0):!1},g.prototype.canAdd=function(h,b){var d=E.query(h,E.Scope.BLOT&(this.scope|E.Scope.TYPE));return d==null?!1:this.whitelist==null?!0:typeof b=="string"?this.whitelist.indexOf(b.replace(/["']/g,""))>-1:this.whitelist.indexOf(b)>-1},g.prototype.remove=function(h){h.removeAttribute(this.keyName)},g.prototype.value=function(h){var b=h.getAttribute(this.keyName);return this.canAdd(h,b)&&b?b:""},g}();l.default=x},function(v,l,o){Object.defineProperty(l,"__esModule",{value:!0}),l.default=l.Code=void 0;var E=function(){function S(j,_){var w=[],A=!0,T=!1,N=void 0;try{for(var R=j[Symbol.iterator](),I;!(A=(I=R.next()).done)&&(w.push(I.value),!(_&&w.length===_));A=!0);}catch(F){T=!0,N=F}finally{try{!A&&R.return&&R.return()}finally{if(T)throw N}}return w}return function(j,_){if(Array.isArray(j))return j;if(Symbol.iterator in Object(j))return S(j,_);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),x=function(){function S(j,_){for(var w=0;w<_.length;w++){var A=_[w];A.enumerable=A.enumerable||!1,A.configurable=!0,"value"in A&&(A.writable=!0),Object.defineProperty(j,A.key,A)}}return function(j,_,w){return _&&S(j.prototype,_),w&&S(j,w),j}}(),g=function S(j,_,w){j===null&&(j=Function.prototype);var A=Object.getOwnPropertyDescriptor(j,_);if(A===void 0){var T=Object.getPrototypeOf(j);return T===null?void 0:S(T,_,w)}else{if("value"in A)return A.value;var N=A.get;return N===void 0?void 0:N.call(w)}},h=o(2),b=s(h),d=o(0),r=s(d),e=o(4),a=s(e),f=o(6),c=s(f),i=o(7),u=s(i);function s(S){return S&&S.__esModule?S:{default:S}}function p(S,j){if(!(S instanceof j))throw new TypeError("Cannot call a class as a function")}function t(S,j){if(!S)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return j&&(typeof j=="object"||typeof j=="function")?j:S}function y(S,j){if(typeof j!="function"&&j!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof j);S.prototype=Object.create(j&&j.prototype,{constructor:{value:S,enumerable:!1,writable:!0,configurable:!0}}),j&&(Object.setPrototypeOf?Object.setPrototypeOf(S,j):S.__proto__=j)}var k=function(S){y(j,S);function j(){return p(this,j),t(this,(j.__proto__||Object.getPrototypeOf(j)).apply(this,arguments))}return j}(c.default);k.blotName="code",k.tagName="CODE";var M=function(S){y(j,S);function j(){return p(this,j),t(this,(j.__proto__||Object.getPrototypeOf(j)).apply(this,arguments))}return x(j,[{key:"delta",value:function(){var w=this,A=this.domNode.textContent;return A.endsWith(`
`)&&(A=A.slice(0,-1)),A.split(`
`).reduce(function(T,N){return T.insert(N).insert(`
`,w.formats())},new b.default)}},{key:"format",value:function(w,A){if(!(w===this.statics.blotName&&A)){var T=this.descendant(u.default,this.length()-1),N=E(T,1),R=N[0];R!=null&&R.deleteAt(R.length()-1,1),g(j.prototype.__proto__||Object.getPrototypeOf(j.prototype),"format",this).call(this,w,A)}}},{key:"formatAt",value:function(w,A,T,N){if(A!==0&&!(r.default.query(T,r.default.Scope.BLOCK)==null||T===this.statics.blotName&&N===this.statics.formats(this.domNode))){var R=this.newlineIndex(w);if(!(R<0||R>=w+A)){var I=this.newlineIndex(w,!0)+1,F=R-I+1,V=this.isolate(I,F),B=V.next;V.format(T,N),B instanceof j&&B.formatAt(0,w-I+A-F,T,N)}}}},{key:"insertAt",value:function(w,A,T){if(T==null){var N=this.descendant(u.default,w),R=E(N,2),I=R[0],F=R[1];I.insertAt(F,A)}}},{key:"length",value:function(){var w=this.domNode.textContent.length;return this.domNode.textContent.endsWith(`
`)?w:w+1}},{key:"newlineIndex",value:function(w){var A=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(A)return this.domNode.textContent.slice(0,w).lastIndexOf(`
`);var T=this.domNode.textContent.slice(w).indexOf(`
`);return T>-1?w+T:-1}},{key:"optimize",value:function(w){this.domNode.textContent.endsWith(`
`)||this.appendChild(r.default.create("text",`
`)),g(j.prototype.__proto__||Object.getPrototypeOf(j.prototype),"optimize",this).call(this,w);var A=this.next;A!=null&&A.prev===this&&A.statics.blotName===this.statics.blotName&&this.statics.formats(this.domNode)===A.statics.formats(A.domNode)&&(A.optimize(w),A.moveChildren(this),A.remove())}},{key:"replace",value:function(w){g(j.prototype.__proto__||Object.getPrototypeOf(j.prototype),"replace",this).call(this,w),[].slice.call(this.domNode.querySelectorAll("*")).forEach(function(A){var T=r.default.find(A);T==null?A.parentNode.removeChild(A):T instanceof r.default.Embed?T.remove():T.unwrap()})}}],[{key:"create",value:function(w){var A=g(j.__proto__||Object.getPrototypeOf(j),"create",this).call(this,w);return A.setAttribute("spellcheck",!1),A}},{key:"formats",value:function(){return!0}}]),j}(a.default);M.blotName="code-block",M.tagName="PRE",M.TAB="  ",l.Code=k,l.default=M},function(v,l,o){Object.defineProperty(l,"__esModule",{value:!0});var E=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(B){return typeof B}:function(B){return B&&typeof Symbol=="function"&&B.constructor===Symbol&&B!==Symbol.prototype?"symbol":typeof B},x=function(){function B(q,C){var P=[],L=!0,W=!1,z=void 0;try{for(var D=q[Symbol.iterator](),U;!(L=(U=D.next()).done)&&(P.push(U.value),!(C&&P.length===C));L=!0);}catch(H){W=!0,z=H}finally{try{!L&&D.return&&D.return()}finally{if(W)throw z}}return P}return function(q,C){if(Array.isArray(q))return q;if(Symbol.iterator in Object(q))return B(q,C);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),g=function(){function B(q,C){for(var P=0;P<C.length;P++){var L=C[P];L.enumerable=L.enumerable||!1,L.configurable=!0,"value"in L&&(L.writable=!0),Object.defineProperty(q,L.key,L)}}return function(q,C,P){return C&&B(q.prototype,C),P&&B(q,P),q}}(),h=o(2),b=A(h),d=o(20),r=A(d),e=o(0),a=A(e),f=o(13),c=A(f),i=o(24),u=A(i),s=o(4),p=A(s),t=o(16),y=A(t),k=o(21),M=A(k),S=o(11),j=A(S),_=o(3),w=A(_);function A(B){return B&&B.__esModule?B:{default:B}}function T(B,q,C){return q in B?Object.defineProperty(B,q,{value:C,enumerable:!0,configurable:!0,writable:!0}):B[q]=C,B}function N(B,q){if(!(B instanceof q))throw new TypeError("Cannot call a class as a function")}var R=/^[ -~]*$/,I=function(){function B(q){N(this,B),this.scroll=q,this.delta=this.getDelta()}return g(B,[{key:"applyDelta",value:function(C){var P=this,L=!1;this.scroll.update();var W=this.scroll.length();return this.scroll.batchStart(),C=V(C),C.reduce(function(z,D){var U=D.retain||D.delete||D.insert.length||1,H=D.attributes||{};if(D.insert!=null){if(typeof D.insert=="string"){var $=D.insert;$.endsWith(`
`)&&L&&(L=!1,$=$.slice(0,-1)),z>=W&&!$.endsWith(`
`)&&(L=!0),P.scroll.insertAt(z,$);var K=P.scroll.line(z),ne=x(K,2),ie=ne[0],le=ne[1],de=(0,w.default)({},(0,s.bubbleFormats)(ie));if(ie instanceof p.default){var he=ie.descendant(a.default.Leaf,le),_e=x(he,1),we=_e[0];de=(0,w.default)(de,(0,s.bubbleFormats)(we))}H=r.default.attributes.diff(de,H)||{}}else if(E(D.insert)==="object"){var G=Object.keys(D.insert)[0];if(G==null)return z;P.scroll.insertAt(z,G,D.insert[G])}W+=U}return Object.keys(H).forEach(function(Z){P.scroll.formatAt(z,U,Z,H[Z])}),z+U},0),C.reduce(function(z,D){return typeof D.delete=="number"?(P.scroll.deleteAt(z,D.delete),z):z+(D.retain||D.insert.length||1)},0),this.scroll.batchEnd(),this.update(C)}},{key:"deleteText",value:function(C,P){return this.scroll.deleteAt(C,P),this.update(new b.default().retain(C).delete(P))}},{key:"formatLine",value:function(C,P){var L=this,W=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return this.scroll.update(),Object.keys(W).forEach(function(z){if(!(L.scroll.whitelist!=null&&!L.scroll.whitelist[z])){var D=L.scroll.lines(C,Math.max(P,1)),U=P;D.forEach(function(H){var $=H.length();if(!(H instanceof c.default))H.format(z,W[z]);else{var K=C-H.offset(L.scroll),ne=H.newlineIndex(K+U)-K+1;H.formatAt(K,ne,z,W[z])}U-=$})}}),this.scroll.optimize(),this.update(new b.default().retain(C).retain(P,(0,M.default)(W)))}},{key:"formatText",value:function(C,P){var L=this,W=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return Object.keys(W).forEach(function(z){L.scroll.formatAt(C,P,z,W[z])}),this.update(new b.default().retain(C).retain(P,(0,M.default)(W)))}},{key:"getContents",value:function(C,P){return this.delta.slice(C,C+P)}},{key:"getDelta",value:function(){return this.scroll.lines().reduce(function(C,P){return C.concat(P.delta())},new b.default)}},{key:"getFormat",value:function(C){var P=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,L=[],W=[];P===0?this.scroll.path(C).forEach(function(D){var U=x(D,1),H=U[0];H instanceof p.default?L.push(H):H instanceof a.default.Leaf&&W.push(H)}):(L=this.scroll.lines(C,P),W=this.scroll.descendants(a.default.Leaf,C,P));var z=[L,W].map(function(D){if(D.length===0)return{};for(var U=(0,s.bubbleFormats)(D.shift());Object.keys(U).length>0;){var H=D.shift();if(H==null)return U;U=F((0,s.bubbleFormats)(H),U)}return U});return w.default.apply(w.default,z)}},{key:"getText",value:function(C,P){return this.getContents(C,P).filter(function(L){return typeof L.insert=="string"}).map(function(L){return L.insert}).join("")}},{key:"insertEmbed",value:function(C,P,L){return this.scroll.insertAt(C,P,L),this.update(new b.default().retain(C).insert(T({},P,L)))}},{key:"insertText",value:function(C,P){var L=this,W=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return P=P.replace(/\r\n/g,`
`).replace(/\r/g,`
`),this.scroll.insertAt(C,P),Object.keys(W).forEach(function(z){L.scroll.formatAt(C,P.length,z,W[z])}),this.update(new b.default().retain(C).insert(P,(0,M.default)(W)))}},{key:"isBlank",value:function(){if(this.scroll.children.length==0)return!0;if(this.scroll.children.length>1)return!1;var C=this.scroll.children.head;return C.statics.blotName!==p.default.blotName||C.children.length>1?!1:C.children.head instanceof y.default}},{key:"removeFormat",value:function(C,P){var L=this.getText(C,P),W=this.scroll.line(C+P),z=x(W,2),D=z[0],U=z[1],H=0,$=new b.default;D!=null&&(D instanceof c.default?H=D.newlineIndex(U)-U+1:H=D.length()-U,$=D.delta().slice(U,U+H-1).insert(`
`));var K=this.getContents(C,P+H),ne=K.diff(new b.default().insert(L).concat($)),ie=new b.default().retain(C).concat(ne);return this.applyDelta(ie)}},{key:"update",value:function(C){var P=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],L=arguments.length>2&&arguments[2]!==void 0?arguments[2]:void 0,W=this.delta;if(P.length===1&&P[0].type==="characterData"&&P[0].target.data.match(R)&&a.default.find(P[0].target)){var z=a.default.find(P[0].target),D=(0,s.bubbleFormats)(z),U=z.offset(this.scroll),H=P[0].oldValue.replace(u.default.CONTENTS,""),$=new b.default().insert(H),K=new b.default().insert(z.value()),ne=new b.default().retain(U).concat($.diff(K,L));C=ne.reduce(function(ie,le){return le.insert?ie.insert(le.insert,D):ie.push(le)},new b.default),this.delta=W.compose(C)}else this.delta=this.getDelta(),(!C||!(0,j.default)(W.compose(C),this.delta))&&(C=W.diff(this.delta,L));return C}}]),B}();function F(B,q){return Object.keys(q).reduce(function(C,P){return B[P]==null||(q[P]===B[P]?C[P]=q[P]:Array.isArray(q[P])?q[P].indexOf(B[P])<0&&(C[P]=q[P].concat([B[P]])):C[P]=[q[P],B[P]]),C},{})}function V(B){return B.reduce(function(q,C){if(C.insert===1){var P=(0,M.default)(C.attributes);return delete P.image,q.insert({image:C.attributes.image},P)}if(C.attributes!=null&&(C.attributes.list===!0||C.attributes.bullet===!0)&&(C=(0,M.default)(C),C.attributes.list?C.attributes.list="ordered":(C.attributes.list="bullet",delete C.attributes.bullet)),typeof C.insert=="string"){var L=C.insert.replace(/\r\n/g,`
`).replace(/\r/g,`
`);return q.insert(L,C.attributes)}return q.push(C)},new b.default)}l.default=I},function(v,l,o){Object.defineProperty(l,"__esModule",{value:!0}),l.default=l.Range=void 0;var E=function(){function S(j,_){var w=[],A=!0,T=!1,N=void 0;try{for(var R=j[Symbol.iterator](),I;!(A=(I=R.next()).done)&&(w.push(I.value),!(_&&w.length===_));A=!0);}catch(F){T=!0,N=F}finally{try{!A&&R.return&&R.return()}finally{if(T)throw N}}return w}return function(j,_){if(Array.isArray(j))return j;if(Symbol.iterator in Object(j))return S(j,_);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),x=function(){function S(j,_){for(var w=0;w<_.length;w++){var A=_[w];A.enumerable=A.enumerable||!1,A.configurable=!0,"value"in A&&(A.writable=!0),Object.defineProperty(j,A.key,A)}}return function(j,_,w){return _&&S(j.prototype,_),w&&S(j,w),j}}(),g=o(0),h=u(g),b=o(21),d=u(b),r=o(11),e=u(r),a=o(8),f=u(a),c=o(10),i=u(c);function u(S){return S&&S.__esModule?S:{default:S}}function s(S){if(Array.isArray(S)){for(var j=0,_=Array(S.length);j<S.length;j++)_[j]=S[j];return _}else return Array.from(S)}function p(S,j){if(!(S instanceof j))throw new TypeError("Cannot call a class as a function")}var t=(0,i.default)("quill:selection"),y=function S(j){var _=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;p(this,S),this.index=j,this.length=_},k=function(){function S(j,_){var w=this;p(this,S),this.emitter=_,this.scroll=j,this.composing=!1,this.mouseDown=!1,this.root=this.scroll.domNode,this.cursor=h.default.create("cursor",this),this.lastRange=this.savedRange=new y(0,0),this.handleComposition(),this.handleDragging(),this.emitter.listenDOM("selectionchange",document,function(){w.mouseDown||setTimeout(w.update.bind(w,f.default.sources.USER),1)}),this.emitter.on(f.default.events.EDITOR_CHANGE,function(A,T){A===f.default.events.TEXT_CHANGE&&T.length()>0&&w.update(f.default.sources.SILENT)}),this.emitter.on(f.default.events.SCROLL_BEFORE_UPDATE,function(){if(w.hasFocus()){var A=w.getNativeRange();A!=null&&A.start.node!==w.cursor.textNode&&w.emitter.once(f.default.events.SCROLL_UPDATE,function(){try{w.setNativeRange(A.start.node,A.start.offset,A.end.node,A.end.offset)}catch{}})}}),this.emitter.on(f.default.events.SCROLL_OPTIMIZE,function(A,T){if(T.range){var N=T.range,R=N.startNode,I=N.startOffset,F=N.endNode,V=N.endOffset;w.setNativeRange(R,I,F,V)}}),this.update(f.default.sources.SILENT)}return x(S,[{key:"handleComposition",value:function(){var _=this;this.root.addEventListener("compositionstart",function(){_.composing=!0}),this.root.addEventListener("compositionend",function(){if(_.composing=!1,_.cursor.parent){var w=_.cursor.restore();if(!w)return;setTimeout(function(){_.setNativeRange(w.startNode,w.startOffset,w.endNode,w.endOffset)},1)}})}},{key:"handleDragging",value:function(){var _=this;this.emitter.listenDOM("mousedown",document.body,function(){_.mouseDown=!0}),this.emitter.listenDOM("mouseup",document.body,function(){_.mouseDown=!1,_.update(f.default.sources.USER)})}},{key:"focus",value:function(){this.hasFocus()||(this.root.focus(),this.setRange(this.savedRange))}},{key:"format",value:function(_,w){if(!(this.scroll.whitelist!=null&&!this.scroll.whitelist[_])){this.scroll.update();var A=this.getNativeRange();if(!(A==null||!A.native.collapsed||h.default.query(_,h.default.Scope.BLOCK))){if(A.start.node!==this.cursor.textNode){var T=h.default.find(A.start.node,!1);if(T==null)return;if(T instanceof h.default.Leaf){var N=T.split(A.start.offset);T.parent.insertBefore(this.cursor,N)}else T.insertBefore(this.cursor,A.start.node);this.cursor.attach()}this.cursor.format(_,w),this.scroll.optimize(),this.setNativeRange(this.cursor.textNode,this.cursor.textNode.data.length),this.update()}}}},{key:"getBounds",value:function(_){var w=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,A=this.scroll.length();_=Math.min(_,A-1),w=Math.min(_+w,A-1)-_;var T=void 0,N=this.scroll.leaf(_),R=E(N,2),I=R[0],F=R[1];if(I==null)return null;var V=I.position(F,!0),B=E(V,2);T=B[0],F=B[1];var q=document.createRange();if(w>0){q.setStart(T,F);var C=this.scroll.leaf(_+w),P=E(C,2);if(I=P[0],F=P[1],I==null)return null;var L=I.position(F,!0),W=E(L,2);return T=W[0],F=W[1],q.setEnd(T,F),q.getBoundingClientRect()}else{var z="left",D=void 0;return T instanceof Text?(F<T.data.length?(q.setStart(T,F),q.setEnd(T,F+1)):(q.setStart(T,F-1),q.setEnd(T,F),z="right"),D=q.getBoundingClientRect()):(D=I.domNode.getBoundingClientRect(),F>0&&(z="right")),{bottom:D.top+D.height,height:D.height,left:D[z],right:D[z],top:D.top,width:0}}}},{key:"getNativeRange",value:function(){var _=document.getSelection();if(_==null||_.rangeCount<=0)return null;var w=_.getRangeAt(0);if(w==null)return null;var A=this.normalizeNative(w);return t.info("getNativeRange",A),A}},{key:"getRange",value:function(){var _=this.getNativeRange();if(_==null)return[null,null];var w=this.normalizedToRange(_);return[w,_]}},{key:"hasFocus",value:function(){return document.activeElement===this.root}},{key:"normalizedToRange",value:function(_){var w=this,A=[[_.start.node,_.start.offset]];_.native.collapsed||A.push([_.end.node,_.end.offset]);var T=A.map(function(I){var F=E(I,2),V=F[0],B=F[1],q=h.default.find(V,!0),C=q.offset(w.scroll);return B===0?C:q instanceof h.default.Container?C+q.length():C+q.index(V,B)}),N=Math.min(Math.max.apply(Math,s(T)),this.scroll.length()-1),R=Math.min.apply(Math,[N].concat(s(T)));return new y(R,N-R)}},{key:"normalizeNative",value:function(_){if(!M(this.root,_.startContainer)||!_.collapsed&&!M(this.root,_.endContainer))return null;var w={start:{node:_.startContainer,offset:_.startOffset},end:{node:_.endContainer,offset:_.endOffset},native:_};return[w.start,w.end].forEach(function(A){for(var T=A.node,N=A.offset;!(T instanceof Text)&&T.childNodes.length>0;)if(T.childNodes.length>N)T=T.childNodes[N],N=0;else if(T.childNodes.length===N)T=T.lastChild,N=T instanceof Text?T.data.length:T.childNodes.length+1;else break;A.node=T,A.offset=N}),w}},{key:"rangeToNative",value:function(_){var w=this,A=_.collapsed?[_.index]:[_.index,_.index+_.length],T=[],N=this.scroll.length();return A.forEach(function(R,I){R=Math.min(N-1,R);var F=void 0,V=w.scroll.leaf(R),B=E(V,2),q=B[0],C=B[1],P=q.position(C,I!==0),L=E(P,2);F=L[0],C=L[1],T.push(F,C)}),T.length<2&&(T=T.concat(T)),T}},{key:"scrollIntoView",value:function(_){var w=this.lastRange;if(w!=null){var A=this.getBounds(w.index,w.length);if(A!=null){var T=this.scroll.length()-1,N=this.scroll.line(Math.min(w.index,T)),R=E(N,1),I=R[0],F=I;if(w.length>0){var V=this.scroll.line(Math.min(w.index+w.length,T)),B=E(V,1);F=B[0]}if(!(I==null||F==null)){var q=_.getBoundingClientRect();A.top<q.top?_.scrollTop-=q.top-A.top:A.bottom>q.bottom&&(_.scrollTop+=A.bottom-q.bottom)}}}}},{key:"setNativeRange",value:function(_,w){var A=arguments.length>2&&arguments[2]!==void 0?arguments[2]:_,T=arguments.length>3&&arguments[3]!==void 0?arguments[3]:w,N=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!1;if(t.info("setNativeRange",_,w,A,T),!(_!=null&&(this.root.parentNode==null||_.parentNode==null||A.parentNode==null))){var R=document.getSelection();if(R!=null)if(_!=null){this.hasFocus()||this.root.focus();var I=(this.getNativeRange()||{}).native;if(I==null||N||_!==I.startContainer||w!==I.startOffset||A!==I.endContainer||T!==I.endOffset){_.tagName=="BR"&&(w=[].indexOf.call(_.parentNode.childNodes,_),_=_.parentNode),A.tagName=="BR"&&(T=[].indexOf.call(A.parentNode.childNodes,A),A=A.parentNode);var F=document.createRange();F.setStart(_,w),F.setEnd(A,T),R.removeAllRanges(),R.addRange(F)}}else R.removeAllRanges(),this.root.blur(),document.body.focus()}}},{key:"setRange",value:function(_){var w=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,A=arguments.length>2&&arguments[2]!==void 0?arguments[2]:f.default.sources.API;if(typeof w=="string"&&(A=w,w=!1),t.info("setRange",_),_!=null){var T=this.rangeToNative(_);this.setNativeRange.apply(this,s(T).concat([w]))}else this.setNativeRange(null);this.update(A)}},{key:"update",value:function(){var _=arguments.length>0&&arguments[0]!==void 0?arguments[0]:f.default.sources.USER,w=this.lastRange,A=this.getRange(),T=E(A,2),N=T[0],R=T[1];if(this.lastRange=N,this.lastRange!=null&&(this.savedRange=this.lastRange),!(0,e.default)(w,this.lastRange)){var I;!this.composing&&R!=null&&R.native.collapsed&&R.start.node!==this.cursor.textNode&&this.cursor.restore();var F=[f.default.events.SELECTION_CHANGE,(0,d.default)(this.lastRange),(0,d.default)(w),_];if((I=this.emitter).emit.apply(I,[f.default.events.EDITOR_CHANGE].concat(F)),_!==f.default.sources.SILENT){var V;(V=this.emitter).emit.apply(V,F)}}}}]),S}();function M(S,j){try{j.parentNode}catch{return!1}return j instanceof Text&&(j=j.parentNode),S.contains(j)}l.Range=y,l.default=k},function(v,l,o){Object.defineProperty(l,"__esModule",{value:!0});var E=function(){function f(c,i){for(var u=0;u<i.length;u++){var s=i[u];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(c,s.key,s)}}return function(c,i,u){return i&&f(c.prototype,i),u&&f(c,u),c}}(),x=function f(c,i,u){c===null&&(c=Function.prototype);var s=Object.getOwnPropertyDescriptor(c,i);if(s===void 0){var p=Object.getPrototypeOf(c);return p===null?void 0:f(p,i,u)}else{if("value"in s)return s.value;var t=s.get;return t===void 0?void 0:t.call(u)}},g=o(0),h=b(g);function b(f){return f&&f.__esModule?f:{default:f}}function d(f,c){if(!(f instanceof c))throw new TypeError("Cannot call a class as a function")}function r(f,c){if(!f)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return c&&(typeof c=="object"||typeof c=="function")?c:f}function e(f,c){if(typeof c!="function"&&c!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof c);f.prototype=Object.create(c&&c.prototype,{constructor:{value:f,enumerable:!1,writable:!0,configurable:!0}}),c&&(Object.setPrototypeOf?Object.setPrototypeOf(f,c):f.__proto__=c)}var a=function(f){e(c,f);function c(){return d(this,c),r(this,(c.__proto__||Object.getPrototypeOf(c)).apply(this,arguments))}return E(c,[{key:"insertInto",value:function(u,s){u.children.length===0?x(c.prototype.__proto__||Object.getPrototypeOf(c.prototype),"insertInto",this).call(this,u,s):this.remove()}},{key:"length",value:function(){return 0}},{key:"value",value:function(){return""}}],[{key:"value",value:function(){}}]),c}(h.default.Embed);a.blotName="break",a.tagName="BR",l.default=a},function(v,l,o){var E=this&&this.__extends||function(){var r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,a){e.__proto__=a}||function(e,a){for(var f in a)a.hasOwnProperty(f)&&(e[f]=a[f])};return function(e,a){r(e,a);function f(){this.constructor=e}e.prototype=a===null?Object.create(a):(f.prototype=a.prototype,new f)}}();Object.defineProperty(l,"__esModule",{value:!0});var x=o(44),g=o(30),h=o(1),b=function(r){E(e,r);function e(a){var f=r.call(this,a)||this;return f.build(),f}return e.prototype.appendChild=function(a){this.insertBefore(a)},e.prototype.attach=function(){r.prototype.attach.call(this),this.children.forEach(function(a){a.attach()})},e.prototype.build=function(){var a=this;this.children=new x.default,[].slice.call(this.domNode.childNodes).reverse().forEach(function(f){try{var c=d(f);a.insertBefore(c,a.children.head||void 0)}catch(i){if(i instanceof h.ParchmentError)return;throw i}})},e.prototype.deleteAt=function(a,f){if(a===0&&f===this.length())return this.remove();this.children.forEachAt(a,f,function(c,i,u){c.deleteAt(i,u)})},e.prototype.descendant=function(a,f){var c=this.children.find(f),i=c[0],u=c[1];return a.blotName==null&&a(i)||a.blotName!=null&&i instanceof a?[i,u]:i instanceof e?i.descendant(a,u):[null,-1]},e.prototype.descendants=function(a,f,c){f===void 0&&(f=0),c===void 0&&(c=Number.MAX_VALUE);var i=[],u=c;return this.children.forEachAt(f,c,function(s,p,t){(a.blotName==null&&a(s)||a.blotName!=null&&s instanceof a)&&i.push(s),s instanceof e&&(i=i.concat(s.descendants(a,p,u))),u-=t}),i},e.prototype.detach=function(){this.children.forEach(function(a){a.detach()}),r.prototype.detach.call(this)},e.prototype.formatAt=function(a,f,c,i){this.children.forEachAt(a,f,function(u,s,p){u.formatAt(s,p,c,i)})},e.prototype.insertAt=function(a,f,c){var i=this.children.find(a),u=i[0],s=i[1];if(u)u.insertAt(s,f,c);else{var p=c==null?h.create("text",f):h.create(f,c);this.appendChild(p)}},e.prototype.insertBefore=function(a,f){if(this.statics.allowedChildren!=null&&!this.statics.allowedChildren.some(function(c){return a instanceof c}))throw new h.ParchmentError("Cannot insert "+a.statics.blotName+" into "+this.statics.blotName);a.insertInto(this,f)},e.prototype.length=function(){return this.children.reduce(function(a,f){return a+f.length()},0)},e.prototype.moveChildren=function(a,f){this.children.forEach(function(c){a.insertBefore(c,f)})},e.prototype.optimize=function(a){if(r.prototype.optimize.call(this,a),this.children.length===0)if(this.statics.defaultChild!=null){var f=h.create(this.statics.defaultChild);this.appendChild(f),f.optimize(a)}else this.remove()},e.prototype.path=function(a,f){f===void 0&&(f=!1);var c=this.children.find(a,f),i=c[0],u=c[1],s=[[this,a]];return i instanceof e?s.concat(i.path(u,f)):(i!=null&&s.push([i,u]),s)},e.prototype.removeChild=function(a){this.children.remove(a)},e.prototype.replace=function(a){a instanceof e&&a.moveChildren(this),r.prototype.replace.call(this,a)},e.prototype.split=function(a,f){if(f===void 0&&(f=!1),!f){if(a===0)return this;if(a===this.length())return this.next}var c=this.clone();return this.parent.insertBefore(c,this.next),this.children.forEachAt(a,this.length(),function(i,u,s){i=i.split(u,f),c.appendChild(i)}),c},e.prototype.unwrap=function(){this.moveChildren(this.parent,this.next),this.remove()},e.prototype.update=function(a,f){var c=this,i=[],u=[];a.forEach(function(s){s.target===c.domNode&&s.type==="childList"&&(i.push.apply(i,s.addedNodes),u.push.apply(u,s.removedNodes))}),u.forEach(function(s){if(!(s.parentNode!=null&&s.tagName!=="IFRAME"&&document.body.compareDocumentPosition(s)&Node.DOCUMENT_POSITION_CONTAINED_BY)){var p=h.find(s);p!=null&&(p.domNode.parentNode==null||p.domNode.parentNode===c.domNode)&&p.detach()}}),i.filter(function(s){return s.parentNode==c.domNode}).sort(function(s,p){return s===p?0:s.compareDocumentPosition(p)&Node.DOCUMENT_POSITION_FOLLOWING?1:-1}).forEach(function(s){var p=null;s.nextSibling!=null&&(p=h.find(s.nextSibling));var t=d(s);(t.next!=p||t.next==null)&&(t.parent!=null&&t.parent.removeChild(c),c.insertBefore(t,p||void 0))})},e}(g.default);function d(r){var e=h.find(r);if(e==null)try{e=h.create(r)}catch{e=h.create(h.Scope.INLINE),[].slice.call(r.childNodes).forEach(function(f){e.domNode.appendChild(f)}),r.parentNode&&r.parentNode.replaceChild(e.domNode,r),e.attach()}return e}l.default=b},function(v,l,o){var E=this&&this.__extends||function(){var r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,a){e.__proto__=a}||function(e,a){for(var f in a)a.hasOwnProperty(f)&&(e[f]=a[f])};return function(e,a){r(e,a);function f(){this.constructor=e}e.prototype=a===null?Object.create(a):(f.prototype=a.prototype,new f)}}();Object.defineProperty(l,"__esModule",{value:!0});var x=o(12),g=o(31),h=o(17),b=o(1),d=function(r){E(e,r);function e(a){var f=r.call(this,a)||this;return f.attributes=new g.default(f.domNode),f}return e.formats=function(a){if(typeof this.tagName=="string")return!0;if(Array.isArray(this.tagName))return a.tagName.toLowerCase()},e.prototype.format=function(a,f){var c=b.query(a);c instanceof x.default?this.attributes.attribute(c,f):f&&c!=null&&(a!==this.statics.blotName||this.formats()[a]!==f)&&this.replaceWith(a,f)},e.prototype.formats=function(){var a=this.attributes.values(),f=this.statics.formats(this.domNode);return f!=null&&(a[this.statics.blotName]=f),a},e.prototype.replaceWith=function(a,f){var c=r.prototype.replaceWith.call(this,a,f);return this.attributes.copy(c),c},e.prototype.update=function(a,f){var c=this;r.prototype.update.call(this,a,f),a.some(function(i){return i.target===c.domNode&&i.type==="attributes"})&&this.attributes.build()},e.prototype.wrap=function(a,f){var c=r.prototype.wrap.call(this,a,f);return c instanceof e&&c.statics.scope===this.statics.scope&&this.attributes.move(c),c},e}(h.default);l.default=d},function(v,l,o){var E=this&&this.__extends||function(){var b=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,r){d.__proto__=r}||function(d,r){for(var e in r)r.hasOwnProperty(e)&&(d[e]=r[e])};return function(d,r){b(d,r);function e(){this.constructor=d}d.prototype=r===null?Object.create(r):(e.prototype=r.prototype,new e)}}();Object.defineProperty(l,"__esModule",{value:!0});var x=o(30),g=o(1),h=function(b){E(d,b);function d(){return b!==null&&b.apply(this,arguments)||this}return d.value=function(r){return!0},d.prototype.index=function(r,e){return this.domNode===r||this.domNode.compareDocumentPosition(r)&Node.DOCUMENT_POSITION_CONTAINED_BY?Math.min(e,1):-1},d.prototype.position=function(r,e){var a=[].indexOf.call(this.parent.domNode.childNodes,this.domNode);return r>0&&(a+=1),[this.parent.domNode,a]},d.prototype.value=function(){var r;return r={},r[this.statics.blotName]=this.statics.value(this.domNode)||!0,r},d.scope=g.Scope.INLINE_BLOT,d}(x.default);l.default=h},function(v,l,o){var E=o(11),x=o(3),g={attributes:{compose:function(b,d,r){typeof b!="object"&&(b={}),typeof d!="object"&&(d={});var e=x(!0,{},d);r||(e=Object.keys(e).reduce(function(f,c){return e[c]!=null&&(f[c]=e[c]),f},{}));for(var a in b)b[a]!==void 0&&d[a]===void 0&&(e[a]=b[a]);return Object.keys(e).length>0?e:void 0},diff:function(b,d){typeof b!="object"&&(b={}),typeof d!="object"&&(d={});var r=Object.keys(b).concat(Object.keys(d)).reduce(function(e,a){return E(b[a],d[a])||(e[a]=d[a]===void 0?null:d[a]),e},{});return Object.keys(r).length>0?r:void 0},transform:function(b,d,r){if(typeof b!="object")return d;if(typeof d=="object"){if(!r)return d;var e=Object.keys(d).reduce(function(a,f){return b[f]===void 0&&(a[f]=d[f]),a},{});return Object.keys(e).length>0?e:void 0}}},iterator:function(b){return new h(b)},length:function(b){return typeof b.delete=="number"?b.delete:typeof b.retain=="number"?b.retain:typeof b.insert=="string"?b.insert.length:1}};function h(b){this.ops=b,this.index=0,this.offset=0}h.prototype.hasNext=function(){return this.peekLength()<1/0},h.prototype.next=function(b){b||(b=1/0);var d=this.ops[this.index];if(d){var r=this.offset,e=g.length(d);if(b>=e-r?(b=e-r,this.index+=1,this.offset=0):this.offset+=b,typeof d.delete=="number")return{delete:b};var a={};return d.attributes&&(a.attributes=d.attributes),typeof d.retain=="number"?a.retain=b:typeof d.insert=="string"?a.insert=d.insert.substr(r,b):a.insert=d.insert,a}else return{retain:1/0}},h.prototype.peek=function(){return this.ops[this.index]},h.prototype.peekLength=function(){return this.ops[this.index]?g.length(this.ops[this.index])-this.offset:1/0},h.prototype.peekType=function(){return this.ops[this.index]?typeof this.ops[this.index].delete=="number"?"delete":typeof this.ops[this.index].retain=="number"?"retain":"insert":"retain"},h.prototype.rest=function(){if(this.hasNext()){if(this.offset===0)return this.ops.slice(this.index);var b=this.offset,d=this.index,r=this.next(),e=this.ops.slice(this.index);return this.offset=b,this.index=d,[r].concat(e)}else return[]},v.exports=g},function(v,l){var o=function(){function E(c,i){return i!=null&&c instanceof i}var x;try{x=Map}catch{x=function(){}}var g;try{g=Set}catch{g=function(){}}var h;try{h=Promise}catch{h=function(){}}function b(c,i,u,s,p){typeof i=="object"&&(u=i.depth,s=i.prototype,p=i.includeNonEnumerable,i=i.circular);var t=[],y=[],k=typeof Buffer<"u";typeof i>"u"&&(i=!0),typeof u>"u"&&(u=1/0);function M(S,j){if(S===null)return null;if(j===0)return S;var _,w;if(typeof S!="object")return S;if(E(S,x))_=new x;else if(E(S,g))_=new g;else if(E(S,h))_=new h(function(q,C){S.then(function(P){q(M(P,j-1))},function(P){C(M(P,j-1))})});else if(b.__isArray(S))_=[];else if(b.__isRegExp(S))_=new RegExp(S.source,f(S)),S.lastIndex&&(_.lastIndex=S.lastIndex);else if(b.__isDate(S))_=new Date(S.getTime());else{if(k&&Buffer.isBuffer(S))return Buffer.allocUnsafe?_=Buffer.allocUnsafe(S.length):_=new Buffer(S.length),S.copy(_),_;E(S,Error)?_=Object.create(S):typeof s>"u"?(w=Object.getPrototypeOf(S),_=Object.create(w)):(_=Object.create(s),w=s)}if(i){var A=t.indexOf(S);if(A!=-1)return y[A];t.push(S),y.push(_)}E(S,x)&&S.forEach(function(q,C){var P=M(C,j-1),L=M(q,j-1);_.set(P,L)}),E(S,g)&&S.forEach(function(q){var C=M(q,j-1);_.add(C)});for(var T in S){var N;w&&(N=Object.getOwnPropertyDescriptor(w,T)),!(N&&N.set==null)&&(_[T]=M(S[T],j-1))}if(Object.getOwnPropertySymbols)for(var R=Object.getOwnPropertySymbols(S),T=0;T<R.length;T++){var I=R[T],F=Object.getOwnPropertyDescriptor(S,I);F&&!F.enumerable&&!p||(_[I]=M(S[I],j-1),F.enumerable||Object.defineProperty(_,I,{enumerable:!1}))}if(p)for(var V=Object.getOwnPropertyNames(S),T=0;T<V.length;T++){var B=V[T],F=Object.getOwnPropertyDescriptor(S,B);F&&F.enumerable||(_[B]=M(S[B],j-1),Object.defineProperty(_,B,{enumerable:!1}))}return _}return M(c,u)}b.clonePrototype=function(i){if(i===null)return null;var u=function(){};return u.prototype=i,new u};function d(c){return Object.prototype.toString.call(c)}b.__objToStr=d;function r(c){return typeof c=="object"&&d(c)==="[object Date]"}b.__isDate=r;function e(c){return typeof c=="object"&&d(c)==="[object Array]"}b.__isArray=e;function a(c){return typeof c=="object"&&d(c)==="[object RegExp]"}b.__isRegExp=a;function f(c){var i="";return c.global&&(i+="g"),c.ignoreCase&&(i+="i"),c.multiline&&(i+="m"),i}return b.__getRegExpFlags=f,b}();typeof v=="object"&&v.exports&&(v.exports=o)},function(v,l,o){Object.defineProperty(l,"__esModule",{value:!0});var E=function(){function _(w,A){var T=[],N=!0,R=!1,I=void 0;try{for(var F=w[Symbol.iterator](),V;!(N=(V=F.next()).done)&&(T.push(V.value),!(A&&T.length===A));N=!0);}catch(B){R=!0,I=B}finally{try{!N&&F.return&&F.return()}finally{if(R)throw I}}return T}return function(w,A){if(Array.isArray(w))return w;if(Symbol.iterator in Object(w))return _(w,A);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),x=function(){function _(w,A){for(var T=0;T<A.length;T++){var N=A[T];N.enumerable=N.enumerable||!1,N.configurable=!0,"value"in N&&(N.writable=!0),Object.defineProperty(w,N.key,N)}}return function(w,A,T){return A&&_(w.prototype,A),T&&_(w,T),w}}(),g=function _(w,A,T){w===null&&(w=Function.prototype);var N=Object.getOwnPropertyDescriptor(w,A);if(N===void 0){var R=Object.getPrototypeOf(w);return R===null?void 0:_(R,A,T)}else{if("value"in N)return N.value;var I=N.get;return I===void 0?void 0:I.call(T)}},h=o(0),b=t(h),d=o(8),r=t(d),e=o(4),a=t(e),f=o(16),c=t(f),i=o(13),u=t(i),s=o(25),p=t(s);function t(_){return _&&_.__esModule?_:{default:_}}function y(_,w){if(!(_ instanceof w))throw new TypeError("Cannot call a class as a function")}function k(_,w){if(!_)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return w&&(typeof w=="object"||typeof w=="function")?w:_}function M(_,w){if(typeof w!="function"&&w!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof w);_.prototype=Object.create(w&&w.prototype,{constructor:{value:_,enumerable:!1,writable:!0,configurable:!0}}),w&&(Object.setPrototypeOf?Object.setPrototypeOf(_,w):_.__proto__=w)}function S(_){return _ instanceof a.default||_ instanceof e.BlockEmbed}var j=function(_){M(w,_);function w(A,T){y(this,w);var N=k(this,(w.__proto__||Object.getPrototypeOf(w)).call(this,A));return N.emitter=T.emitter,Array.isArray(T.whitelist)&&(N.whitelist=T.whitelist.reduce(function(R,I){return R[I]=!0,R},{})),N.domNode.addEventListener("DOMNodeInserted",function(){}),N.optimize(),N.enable(),N}return x(w,[{key:"batchStart",value:function(){this.batch=!0}},{key:"batchEnd",value:function(){this.batch=!1,this.optimize()}},{key:"deleteAt",value:function(T,N){var R=this.line(T),I=E(R,2),F=I[0],V=I[1],B=this.line(T+N),q=E(B,1),C=q[0];if(g(w.prototype.__proto__||Object.getPrototypeOf(w.prototype),"deleteAt",this).call(this,T,N),C!=null&&F!==C&&V>0){if(F instanceof e.BlockEmbed||C instanceof e.BlockEmbed){this.optimize();return}if(F instanceof u.default){var P=F.newlineIndex(F.length(),!0);if(P>-1&&(F=F.split(P+1),F===C)){this.optimize();return}}else if(C instanceof u.default){var L=C.newlineIndex(0);L>-1&&C.split(L+1)}var W=C.children.head instanceof c.default?null:C.children.head;F.moveChildren(C,W),F.remove()}this.optimize()}},{key:"enable",value:function(){var T=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;this.domNode.setAttribute("contenteditable",T)}},{key:"formatAt",value:function(T,N,R,I){this.whitelist!=null&&!this.whitelist[R]||(g(w.prototype.__proto__||Object.getPrototypeOf(w.prototype),"formatAt",this).call(this,T,N,R,I),this.optimize())}},{key:"insertAt",value:function(T,N,R){if(!(R!=null&&this.whitelist!=null&&!this.whitelist[N])){if(T>=this.length())if(R==null||b.default.query(N,b.default.Scope.BLOCK)==null){var I=b.default.create(this.statics.defaultChild);this.appendChild(I),R==null&&N.endsWith(`
`)&&(N=N.slice(0,-1)),I.insertAt(0,N,R)}else{var F=b.default.create(N,R);this.appendChild(F)}else g(w.prototype.__proto__||Object.getPrototypeOf(w.prototype),"insertAt",this).call(this,T,N,R);this.optimize()}}},{key:"insertBefore",value:function(T,N){if(T.statics.scope===b.default.Scope.INLINE_BLOT){var R=b.default.create(this.statics.defaultChild);R.appendChild(T),T=R}g(w.prototype.__proto__||Object.getPrototypeOf(w.prototype),"insertBefore",this).call(this,T,N)}},{key:"leaf",value:function(T){return this.path(T).pop()||[null,-1]}},{key:"line",value:function(T){return T===this.length()?this.line(T-1):this.descendant(S,T)}},{key:"lines",value:function(){var T=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,N=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Number.MAX_VALUE,R=function I(F,V,B){var q=[],C=B;return F.children.forEachAt(V,B,function(P,L,W){S(P)?q.push(P):P instanceof b.default.Container&&(q=q.concat(I(P,L,C))),C-=W}),q};return R(this,T,N)}},{key:"optimize",value:function(){var T=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],N=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.batch!==!0&&(g(w.prototype.__proto__||Object.getPrototypeOf(w.prototype),"optimize",this).call(this,T,N),T.length>0&&this.emitter.emit(r.default.events.SCROLL_OPTIMIZE,T,N))}},{key:"path",value:function(T){return g(w.prototype.__proto__||Object.getPrototypeOf(w.prototype),"path",this).call(this,T).slice(1)}},{key:"update",value:function(T){if(this.batch!==!0){var N=r.default.sources.USER;typeof T=="string"&&(N=T),Array.isArray(T)||(T=this.observer.takeRecords()),T.length>0&&this.emitter.emit(r.default.events.SCROLL_BEFORE_UPDATE,N,T),g(w.prototype.__proto__||Object.getPrototypeOf(w.prototype),"update",this).call(this,T.concat([])),T.length>0&&this.emitter.emit(r.default.events.SCROLL_UPDATE,N,T)}}}]),w}(b.default.Scroll);j.blotName="scroll",j.className="ql-editor",j.tagName="DIV",j.defaultChild="block",j.allowedChildren=[a.default,e.BlockEmbed,p.default],l.default=j},function(v,l,o){Object.defineProperty(l,"__esModule",{value:!0}),l.SHORTKEY=l.default=void 0;var E=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(D){return typeof D}:function(D){return D&&typeof Symbol=="function"&&D.constructor===Symbol&&D!==Symbol.prototype?"symbol":typeof D},x=function(){function D(U,H){var $=[],K=!0,ne=!1,ie=void 0;try{for(var le=U[Symbol.iterator](),de;!(K=(de=le.next()).done)&&($.push(de.value),!(H&&$.length===H));K=!0);}catch(he){ne=!0,ie=he}finally{try{!K&&le.return&&le.return()}finally{if(ne)throw ie}}return $}return function(U,H){if(Array.isArray(U))return U;if(Symbol.iterator in Object(U))return D(U,H);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),g=function(){function D(U,H){for(var $=0;$<H.length;$++){var K=H[$];K.enumerable=K.enumerable||!1,K.configurable=!0,"value"in K&&(K.writable=!0),Object.defineProperty(U,K.key,K)}}return function(U,H,$){return H&&D(U.prototype,H),$&&D(U,$),U}}(),h=o(21),b=_(h),d=o(11),r=_(d),e=o(3),a=_(e),f=o(2),c=_(f),i=o(20),u=_(i),s=o(0),p=_(s),t=o(5),y=_(t),k=o(10),M=_(k),S=o(9),j=_(S);function _(D){return D&&D.__esModule?D:{default:D}}function w(D,U,H){return U in D?Object.defineProperty(D,U,{value:H,enumerable:!0,configurable:!0,writable:!0}):D[U]=H,D}function A(D,U){if(!(D instanceof U))throw new TypeError("Cannot call a class as a function")}function T(D,U){if(!D)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return U&&(typeof U=="object"||typeof U=="function")?U:D}function N(D,U){if(typeof U!="function"&&U!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof U);D.prototype=Object.create(U&&U.prototype,{constructor:{value:D,enumerable:!1,writable:!0,configurable:!0}}),U&&(Object.setPrototypeOf?Object.setPrototypeOf(D,U):D.__proto__=U)}var R=(0,M.default)("quill:keyboard"),I=/Mac/i.test(navigator.platform)?"metaKey":"ctrlKey",F=function(D){N(U,D),g(U,null,[{key:"match",value:function($,K){return K=z(K),["altKey","ctrlKey","metaKey","shiftKey"].some(function(ne){return!!K[ne]!==$[ne]&&K[ne]!==null})?!1:K.key===($.which||$.keyCode)}}]);function U(H,$){A(this,U);var K=T(this,(U.__proto__||Object.getPrototypeOf(U)).call(this,H,$));return K.bindings={},Object.keys(K.options.bindings).forEach(function(ne){ne==="list autofill"&&H.scroll.whitelist!=null&&!H.scroll.whitelist.list||K.options.bindings[ne]&&K.addBinding(K.options.bindings[ne])}),K.addBinding({key:U.keys.ENTER,shiftKey:null},P),K.addBinding({key:U.keys.ENTER,metaKey:null,ctrlKey:null,altKey:null},function(){}),/Firefox/i.test(navigator.userAgent)?(K.addBinding({key:U.keys.BACKSPACE},{collapsed:!0},B),K.addBinding({key:U.keys.DELETE},{collapsed:!0},q)):(K.addBinding({key:U.keys.BACKSPACE},{collapsed:!0,prefix:/^.?$/},B),K.addBinding({key:U.keys.DELETE},{collapsed:!0,suffix:/^.?$/},q)),K.addBinding({key:U.keys.BACKSPACE},{collapsed:!1},C),K.addBinding({key:U.keys.DELETE},{collapsed:!1},C),K.addBinding({key:U.keys.BACKSPACE,altKey:null,ctrlKey:null,metaKey:null,shiftKey:null},{collapsed:!0,offset:0},B),K.listen(),K}return g(U,[{key:"addBinding",value:function($){var K=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},ne=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},ie=z($);if(ie==null||ie.key==null)return R.warn("Attempted to add invalid keyboard binding",ie);typeof K=="function"&&(K={handler:K}),typeof ne=="function"&&(ne={handler:ne}),ie=(0,a.default)(ie,K,ne),this.bindings[ie.key]=this.bindings[ie.key]||[],this.bindings[ie.key].push(ie)}},{key:"listen",value:function(){var $=this;this.quill.root.addEventListener("keydown",function(K){if(!K.defaultPrevented){var ne=K.which||K.keyCode,ie=($.bindings[ne]||[]).filter(function(xe){return U.match(K,xe)});if(ie.length!==0){var le=$.quill.getSelection();if(!(le==null||!$.quill.hasFocus())){var de=$.quill.getLine(le.index),he=x(de,2),_e=he[0],we=he[1],G=$.quill.getLeaf(le.index),Z=x(G,2),X=Z[0],te=Z[1],Q=le.length===0?[X,te]:$.quill.getLeaf(le.index+le.length),se=x(Q,2),ue=se[0],fe=se[1],Me=X instanceof p.default.Text?X.value().slice(0,te):"",qe=ue instanceof p.default.Text?ue.value().slice(fe):"",me={collapsed:le.length===0,empty:le.length===0&&_e.length()<=1,format:$.quill.getFormat(le),offset:we,prefix:Me,suffix:qe},an=ie.some(function(xe){if(xe.collapsed!=null&&xe.collapsed!==me.collapsed||xe.empty!=null&&xe.empty!==me.empty||xe.offset!=null&&xe.offset!==me.offset)return!1;if(Array.isArray(xe.format)){if(xe.format.every(function(ze){return me.format[ze]==null}))return!1}else if(E(xe.format)==="object"&&!Object.keys(xe.format).every(function(ze){return xe.format[ze]===!0?me.format[ze]!=null:xe.format[ze]===!1?me.format[ze]==null:(0,r.default)(xe.format[ze],me.format[ze])}))return!1;return xe.prefix!=null&&!xe.prefix.test(me.prefix)||xe.suffix!=null&&!xe.suffix.test(me.suffix)?!1:xe.handler.call($,le,me)!==!0});an&&K.preventDefault()}}}})}}]),U}(j.default);F.keys={BACKSPACE:8,TAB:9,ENTER:13,ESCAPE:27,LEFT:37,UP:38,RIGHT:39,DOWN:40,DELETE:46},F.DEFAULTS={bindings:{bold:W("bold"),italic:W("italic"),underline:W("underline"),indent:{key:F.keys.TAB,format:["blockquote","indent","list"],handler:function(U,H){if(H.collapsed&&H.offset!==0)return!0;this.quill.format("indent","+1",y.default.sources.USER)}},outdent:{key:F.keys.TAB,shiftKey:!0,format:["blockquote","indent","list"],handler:function(U,H){if(H.collapsed&&H.offset!==0)return!0;this.quill.format("indent","-1",y.default.sources.USER)}},"outdent backspace":{key:F.keys.BACKSPACE,collapsed:!0,shiftKey:null,metaKey:null,ctrlKey:null,altKey:null,format:["indent","list"],offset:0,handler:function(U,H){H.format.indent!=null?this.quill.format("indent","-1",y.default.sources.USER):H.format.list!=null&&this.quill.format("list",!1,y.default.sources.USER)}},"indent code-block":L(!0),"outdent code-block":L(!1),"remove tab":{key:F.keys.TAB,shiftKey:!0,collapsed:!0,prefix:/\t$/,handler:function(U){this.quill.deleteText(U.index-1,1,y.default.sources.USER)}},tab:{key:F.keys.TAB,handler:function(U){this.quill.history.cutoff();var H=new c.default().retain(U.index).delete(U.length).insert("	");this.quill.updateContents(H,y.default.sources.USER),this.quill.history.cutoff(),this.quill.setSelection(U.index+1,y.default.sources.SILENT)}},"list empty enter":{key:F.keys.ENTER,collapsed:!0,format:["list"],empty:!0,handler:function(U,H){this.quill.format("list",!1,y.default.sources.USER),H.format.indent&&this.quill.format("indent",!1,y.default.sources.USER)}},"checklist enter":{key:F.keys.ENTER,collapsed:!0,format:{list:"checked"},handler:function(U){var H=this.quill.getLine(U.index),$=x(H,2),K=$[0],ne=$[1],ie=(0,a.default)({},K.formats(),{list:"checked"}),le=new c.default().retain(U.index).insert(`
`,ie).retain(K.length()-ne-1).retain(1,{list:"unchecked"});this.quill.updateContents(le,y.default.sources.USER),this.quill.setSelection(U.index+1,y.default.sources.SILENT),this.quill.scrollIntoView()}},"header enter":{key:F.keys.ENTER,collapsed:!0,format:["header"],suffix:/^$/,handler:function(U,H){var $=this.quill.getLine(U.index),K=x($,2),ne=K[0],ie=K[1],le=new c.default().retain(U.index).insert(`
`,H.format).retain(ne.length()-ie-1).retain(1,{header:null});this.quill.updateContents(le,y.default.sources.USER),this.quill.setSelection(U.index+1,y.default.sources.SILENT),this.quill.scrollIntoView()}},"list autofill":{key:" ",collapsed:!0,format:{list:!1},prefix:/^\s*?(\d+\.|-|\*|\[ ?\]|\[x\])$/,handler:function(U,H){var $=H.prefix.length,K=this.quill.getLine(U.index),ne=x(K,2),ie=ne[0],le=ne[1];if(le>$)return!0;var de=void 0;switch(H.prefix.trim()){case"[]":case"[ ]":de="unchecked";break;case"[x]":de="checked";break;case"-":case"*":de="bullet";break;default:de="ordered"}this.quill.insertText(U.index," ",y.default.sources.USER),this.quill.history.cutoff();var he=new c.default().retain(U.index-le).delete($+1).retain(ie.length()-2-le).retain(1,{list:de});this.quill.updateContents(he,y.default.sources.USER),this.quill.history.cutoff(),this.quill.setSelection(U.index-$,y.default.sources.SILENT)}},"code exit":{key:F.keys.ENTER,collapsed:!0,format:["code-block"],prefix:/\n\n$/,suffix:/^\s+$/,handler:function(U){var H=this.quill.getLine(U.index),$=x(H,2),K=$[0],ne=$[1],ie=new c.default().retain(U.index+K.length()-ne-2).retain(1,{"code-block":null}).delete(1);this.quill.updateContents(ie,y.default.sources.USER)}},"embed left":V(F.keys.LEFT,!1),"embed left shift":V(F.keys.LEFT,!0),"embed right":V(F.keys.RIGHT,!1),"embed right shift":V(F.keys.RIGHT,!0)}};function V(D,U){var H,$=D===F.keys.LEFT?"prefix":"suffix";return H={key:D,shiftKey:U,altKey:null},w(H,$,/^$/),w(H,"handler",function(ne){var ie=ne.index;D===F.keys.RIGHT&&(ie+=ne.length+1);var le=this.quill.getLeaf(ie),de=x(le,1),he=de[0];return he instanceof p.default.Embed?(D===F.keys.LEFT?U?this.quill.setSelection(ne.index-1,ne.length+1,y.default.sources.USER):this.quill.setSelection(ne.index-1,y.default.sources.USER):U?this.quill.setSelection(ne.index,ne.length+1,y.default.sources.USER):this.quill.setSelection(ne.index+ne.length+1,y.default.sources.USER),!1):!0}),H}function B(D,U){if(!(D.index===0||this.quill.getLength()<=1)){var H=this.quill.getLine(D.index),$=x(H,1),K=$[0],ne={};if(U.offset===0){var ie=this.quill.getLine(D.index-1),le=x(ie,1),de=le[0];if(de!=null&&de.length()>1){var he=K.formats(),_e=this.quill.getFormat(D.index-1,1);ne=u.default.attributes.diff(he,_e)||{}}}var we=/[\uD800-\uDBFF][\uDC00-\uDFFF]$/.test(U.prefix)?2:1;this.quill.deleteText(D.index-we,we,y.default.sources.USER),Object.keys(ne).length>0&&this.quill.formatLine(D.index-we,we,ne,y.default.sources.USER),this.quill.focus()}}function q(D,U){var H=/^[\uD800-\uDBFF][\uDC00-\uDFFF]/.test(U.suffix)?2:1;if(!(D.index>=this.quill.getLength()-H)){var $={},K=0,ne=this.quill.getLine(D.index),ie=x(ne,1),le=ie[0];if(U.offset>=le.length()-1){var de=this.quill.getLine(D.index+1),he=x(de,1),_e=he[0];if(_e){var we=le.formats(),G=this.quill.getFormat(D.index,1);$=u.default.attributes.diff(we,G)||{},K=_e.length()}}this.quill.deleteText(D.index,H,y.default.sources.USER),Object.keys($).length>0&&this.quill.formatLine(D.index+K-1,H,$,y.default.sources.USER)}}function C(D){var U=this.quill.getLines(D),H={};if(U.length>1){var $=U[0].formats(),K=U[U.length-1].formats();H=u.default.attributes.diff(K,$)||{}}this.quill.deleteText(D,y.default.sources.USER),Object.keys(H).length>0&&this.quill.formatLine(D.index,1,H,y.default.sources.USER),this.quill.setSelection(D.index,y.default.sources.SILENT),this.quill.focus()}function P(D,U){var H=this;D.length>0&&this.quill.scroll.deleteAt(D.index,D.length);var $=Object.keys(U.format).reduce(function(K,ne){return p.default.query(ne,p.default.Scope.BLOCK)&&!Array.isArray(U.format[ne])&&(K[ne]=U.format[ne]),K},{});this.quill.insertText(D.index,`
`,$,y.default.sources.USER),this.quill.setSelection(D.index+1,y.default.sources.SILENT),this.quill.focus(),Object.keys(U.format).forEach(function(K){$[K]==null&&(Array.isArray(U.format[K])||K!=="link"&&H.quill.format(K,U.format[K],y.default.sources.USER))})}function L(D){return{key:F.keys.TAB,shiftKey:!D,format:{"code-block":!0},handler:function(H){var $=p.default.query("code-block"),K=H.index,ne=H.length,ie=this.quill.scroll.descendant($,K),le=x(ie,2),de=le[0],he=le[1];if(de!=null){var _e=this.quill.getIndex(de),we=de.newlineIndex(he,!0)+1,G=de.newlineIndex(_e+he+ne),Z=de.domNode.textContent.slice(we,G).split(`
`);he=0,Z.forEach(function(X,te){D?(de.insertAt(we+he,$.TAB),he+=$.TAB.length,te===0?K+=$.TAB.length:ne+=$.TAB.length):X.startsWith($.TAB)&&(de.deleteAt(we+he,$.TAB.length),he-=$.TAB.length,te===0?K-=$.TAB.length:ne-=$.TAB.length),he+=X.length+1}),this.quill.update(y.default.sources.USER),this.quill.setSelection(K,ne,y.default.sources.SILENT)}}}}function W(D){return{key:D[0].toUpperCase(),shortKey:!0,handler:function(H,$){this.quill.format(D,!$.format[D],y.default.sources.USER)}}}function z(D){if(typeof D=="string"||typeof D=="number")return z({key:D});if((typeof D>"u"?"undefined":E(D))==="object"&&(D=(0,b.default)(D,!1)),typeof D.key=="string")if(F.keys[D.key.toUpperCase()]!=null)D.key=F.keys[D.key.toUpperCase()];else if(D.key.length===1)D.key=D.key.toUpperCase().charCodeAt(0);else return null;return D.shortKey&&(D[I]=D.shortKey,delete D.shortKey),D}l.default=F,l.SHORTKEY=I},function(v,l,o){Object.defineProperty(l,"__esModule",{value:!0});var E=function(){function u(s,p){var t=[],y=!0,k=!1,M=void 0;try{for(var S=s[Symbol.iterator](),j;!(y=(j=S.next()).done)&&(t.push(j.value),!(p&&t.length===p));y=!0);}catch(_){k=!0,M=_}finally{try{!y&&S.return&&S.return()}finally{if(k)throw M}}return t}return function(s,p){if(Array.isArray(s))return s;if(Symbol.iterator in Object(s))return u(s,p);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),x=function u(s,p,t){s===null&&(s=Function.prototype);var y=Object.getOwnPropertyDescriptor(s,p);if(y===void 0){var k=Object.getPrototypeOf(s);return k===null?void 0:u(k,p,t)}else{if("value"in y)return y.value;var M=y.get;return M===void 0?void 0:M.call(t)}},g=function(){function u(s,p){for(var t=0;t<p.length;t++){var y=p[t];y.enumerable=y.enumerable||!1,y.configurable=!0,"value"in y&&(y.writable=!0),Object.defineProperty(s,y.key,y)}}return function(s,p,t){return p&&u(s.prototype,p),t&&u(s,t),s}}(),h=o(0),b=e(h),d=o(7),r=e(d);function e(u){return u&&u.__esModule?u:{default:u}}function a(u,s){if(!(u instanceof s))throw new TypeError("Cannot call a class as a function")}function f(u,s){if(!u)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return s&&(typeof s=="object"||typeof s=="function")?s:u}function c(u,s){if(typeof s!="function"&&s!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof s);u.prototype=Object.create(s&&s.prototype,{constructor:{value:u,enumerable:!1,writable:!0,configurable:!0}}),s&&(Object.setPrototypeOf?Object.setPrototypeOf(u,s):u.__proto__=s)}var i=function(u){c(s,u),g(s,null,[{key:"value",value:function(){}}]);function s(p,t){a(this,s);var y=f(this,(s.__proto__||Object.getPrototypeOf(s)).call(this,p));return y.selection=t,y.textNode=document.createTextNode(s.CONTENTS),y.domNode.appendChild(y.textNode),y._length=0,y}return g(s,[{key:"detach",value:function(){this.parent!=null&&this.parent.removeChild(this)}},{key:"format",value:function(t,y){if(this._length!==0)return x(s.prototype.__proto__||Object.getPrototypeOf(s.prototype),"format",this).call(this,t,y);for(var k=this,M=0;k!=null&&k.statics.scope!==b.default.Scope.BLOCK_BLOT;)M+=k.offset(k.parent),k=k.parent;k!=null&&(this._length=s.CONTENTS.length,k.optimize(),k.formatAt(M,s.CONTENTS.length,t,y),this._length=0)}},{key:"index",value:function(t,y){return t===this.textNode?0:x(s.prototype.__proto__||Object.getPrototypeOf(s.prototype),"index",this).call(this,t,y)}},{key:"length",value:function(){return this._length}},{key:"position",value:function(){return[this.textNode,this.textNode.data.length]}},{key:"remove",value:function(){x(s.prototype.__proto__||Object.getPrototypeOf(s.prototype),"remove",this).call(this),this.parent=null}},{key:"restore",value:function(){if(!(this.selection.composing||this.parent==null)){var t=this.textNode,y=this.selection.getNativeRange(),k=void 0,M=void 0,S=void 0;if(y!=null&&y.start.node===t&&y.end.node===t){var j=[t,y.start.offset,y.end.offset];k=j[0],M=j[1],S=j[2]}for(;this.domNode.lastChild!=null&&this.domNode.lastChild!==this.textNode;)this.domNode.parentNode.insertBefore(this.domNode.lastChild,this.domNode);if(this.textNode.data!==s.CONTENTS){var _=this.textNode.data.split(s.CONTENTS).join("");this.next instanceof r.default?(k=this.next.domNode,this.next.insertAt(0,_),this.textNode.data=s.CONTENTS):(this.textNode.data=_,this.parent.insertBefore(b.default.create(this.textNode),this),this.textNode=document.createTextNode(s.CONTENTS),this.domNode.appendChild(this.textNode))}if(this.remove(),M!=null){var w=[M,S].map(function(T){return Math.max(0,Math.min(k.data.length,T-1))}),A=E(w,2);return M=A[0],S=A[1],{startNode:k,startOffset:M,endNode:k,endOffset:S}}}}},{key:"update",value:function(t,y){var k=this;if(t.some(function(S){return S.type==="characterData"&&S.target===k.textNode})){var M=this.restore();M&&(y.range=M)}}},{key:"value",value:function(){return""}}]),s}(b.default.Embed);i.blotName="cursor",i.className="ql-cursor",i.tagName="span",i.CONTENTS="\uFEFF",l.default=i},function(v,l,o){Object.defineProperty(l,"__esModule",{value:!0});var E=o(0),x=b(E),g=o(4),h=b(g);function b(f){return f&&f.__esModule?f:{default:f}}function d(f,c){if(!(f instanceof c))throw new TypeError("Cannot call a class as a function")}function r(f,c){if(!f)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return c&&(typeof c=="object"||typeof c=="function")?c:f}function e(f,c){if(typeof c!="function"&&c!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof c);f.prototype=Object.create(c&&c.prototype,{constructor:{value:f,enumerable:!1,writable:!0,configurable:!0}}),c&&(Object.setPrototypeOf?Object.setPrototypeOf(f,c):f.__proto__=c)}var a=function(f){e(c,f);function c(){return d(this,c),r(this,(c.__proto__||Object.getPrototypeOf(c)).apply(this,arguments))}return c}(x.default.Container);a.allowedChildren=[h.default,g.BlockEmbed,a],l.default=a},function(v,l,o){Object.defineProperty(l,"__esModule",{value:!0}),l.ColorStyle=l.ColorClass=l.ColorAttributor=void 0;var E=function(){function i(u,s){for(var p=0;p<s.length;p++){var t=s[p];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(u,t.key,t)}}return function(u,s,p){return s&&i(u.prototype,s),p&&i(u,p),u}}(),x=function i(u,s,p){u===null&&(u=Function.prototype);var t=Object.getOwnPropertyDescriptor(u,s);if(t===void 0){var y=Object.getPrototypeOf(u);return y===null?void 0:i(y,s,p)}else{if("value"in t)return t.value;var k=t.get;return k===void 0?void 0:k.call(p)}},g=o(0),h=b(g);function b(i){return i&&i.__esModule?i:{default:i}}function d(i,u){if(!(i instanceof u))throw new TypeError("Cannot call a class as a function")}function r(i,u){if(!i)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return u&&(typeof u=="object"||typeof u=="function")?u:i}function e(i,u){if(typeof u!="function"&&u!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof u);i.prototype=Object.create(u&&u.prototype,{constructor:{value:i,enumerable:!1,writable:!0,configurable:!0}}),u&&(Object.setPrototypeOf?Object.setPrototypeOf(i,u):i.__proto__=u)}var a=function(i){e(u,i);function u(){return d(this,u),r(this,(u.__proto__||Object.getPrototypeOf(u)).apply(this,arguments))}return E(u,[{key:"value",value:function(p){var t=x(u.prototype.__proto__||Object.getPrototypeOf(u.prototype),"value",this).call(this,p);return t.startsWith("rgb(")?(t=t.replace(/^[^\d]+/,"").replace(/[^\d]+$/,""),"#"+t.split(",").map(function(y){return("00"+parseInt(y).toString(16)).slice(-2)}).join("")):t}}]),u}(h.default.Attributor.Style),f=new h.default.Attributor.Class("color","ql-color",{scope:h.default.Scope.INLINE}),c=new a("color","color",{scope:h.default.Scope.INLINE});l.ColorAttributor=a,l.ColorClass=f,l.ColorStyle=c},function(v,l,o){Object.defineProperty(l,"__esModule",{value:!0}),l.sanitize=l.default=void 0;var E=function(){function c(i,u){for(var s=0;s<u.length;s++){var p=u[s];p.enumerable=p.enumerable||!1,p.configurable=!0,"value"in p&&(p.writable=!0),Object.defineProperty(i,p.key,p)}}return function(i,u,s){return u&&c(i.prototype,u),s&&c(i,s),i}}(),x=function c(i,u,s){i===null&&(i=Function.prototype);var p=Object.getOwnPropertyDescriptor(i,u);if(p===void 0){var t=Object.getPrototypeOf(i);return t===null?void 0:c(t,u,s)}else{if("value"in p)return p.value;var y=p.get;return y===void 0?void 0:y.call(s)}},g=o(6),h=b(g);function b(c){return c&&c.__esModule?c:{default:c}}function d(c,i){if(!(c instanceof i))throw new TypeError("Cannot call a class as a function")}function r(c,i){if(!c)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return i&&(typeof i=="object"||typeof i=="function")?i:c}function e(c,i){if(typeof i!="function"&&i!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof i);c.prototype=Object.create(i&&i.prototype,{constructor:{value:c,enumerable:!1,writable:!0,configurable:!0}}),i&&(Object.setPrototypeOf?Object.setPrototypeOf(c,i):c.__proto__=i)}var a=function(c){e(i,c);function i(){return d(this,i),r(this,(i.__proto__||Object.getPrototypeOf(i)).apply(this,arguments))}return E(i,[{key:"format",value:function(s,p){if(s!==this.statics.blotName||!p)return x(i.prototype.__proto__||Object.getPrototypeOf(i.prototype),"format",this).call(this,s,p);p=this.constructor.sanitize(p),this.domNode.setAttribute("href",p)}}],[{key:"create",value:function(s){var p=x(i.__proto__||Object.getPrototypeOf(i),"create",this).call(this,s);return s=this.sanitize(s),p.setAttribute("href",s),p.setAttribute("rel","noopener noreferrer"),p.setAttribute("target","_blank"),p}},{key:"formats",value:function(s){return s.getAttribute("href")}},{key:"sanitize",value:function(s){return f(s,this.PROTOCOL_WHITELIST)?s:this.SANITIZED_URL}}]),i}(h.default);a.blotName="link",a.tagName="A",a.SANITIZED_URL="about:blank",a.PROTOCOL_WHITELIST=["http","https","mailto","tel"];function f(c,i){var u=document.createElement("a");u.href=c;var s=u.href.slice(0,u.href.indexOf(":"));return i.indexOf(s)>-1}l.default=a,l.sanitize=f},function(v,l,o){Object.defineProperty(l,"__esModule",{value:!0});var E=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(i){return typeof i}:function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},x=function(){function i(u,s){for(var p=0;p<s.length;p++){var t=s[p];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(u,t.key,t)}}return function(u,s,p){return s&&i(u.prototype,s),p&&i(u,p),u}}(),g=o(23),h=r(g),b=o(107),d=r(b);function r(i){return i&&i.__esModule?i:{default:i}}function e(i,u){if(!(i instanceof u))throw new TypeError("Cannot call a class as a function")}var a=0;function f(i,u){i.setAttribute(u,i.getAttribute(u)!=="true")}var c=function(){function i(u){var s=this;e(this,i),this.select=u,this.container=document.createElement("span"),this.buildPicker(),this.select.style.display="none",this.select.parentNode.insertBefore(this.container,this.select),this.label.addEventListener("mousedown",function(){s.togglePicker()}),this.label.addEventListener("keydown",function(p){switch(p.keyCode){case h.default.keys.ENTER:s.togglePicker();break;case h.default.keys.ESCAPE:s.escape(),p.preventDefault();break}}),this.select.addEventListener("change",this.update.bind(this))}return x(i,[{key:"togglePicker",value:function(){this.container.classList.toggle("ql-expanded"),f(this.label,"aria-expanded"),f(this.options,"aria-hidden")}},{key:"buildItem",value:function(s){var p=this,t=document.createElement("span");return t.tabIndex="0",t.setAttribute("role","button"),t.classList.add("ql-picker-item"),s.hasAttribute("value")&&t.setAttribute("data-value",s.getAttribute("value")),s.textContent&&t.setAttribute("data-label",s.textContent),t.addEventListener("click",function(){p.selectItem(t,!0)}),t.addEventListener("keydown",function(y){switch(y.keyCode){case h.default.keys.ENTER:p.selectItem(t,!0),y.preventDefault();break;case h.default.keys.ESCAPE:p.escape(),y.preventDefault();break}}),t}},{key:"buildLabel",value:function(){var s=document.createElement("span");return s.classList.add("ql-picker-label"),s.innerHTML=d.default,s.tabIndex="0",s.setAttribute("role","button"),s.setAttribute("aria-expanded","false"),this.container.appendChild(s),s}},{key:"buildOptions",value:function(){var s=this,p=document.createElement("span");p.classList.add("ql-picker-options"),p.setAttribute("aria-hidden","true"),p.tabIndex="-1",p.id="ql-picker-options-"+a,a+=1,this.label.setAttribute("aria-controls",p.id),this.options=p,[].slice.call(this.select.options).forEach(function(t){var y=s.buildItem(t);p.appendChild(y),t.selected===!0&&s.selectItem(y)}),this.container.appendChild(p)}},{key:"buildPicker",value:function(){var s=this;[].slice.call(this.select.attributes).forEach(function(p){s.container.setAttribute(p.name,p.value)}),this.container.classList.add("ql-picker"),this.label=this.buildLabel(),this.buildOptions()}},{key:"escape",value:function(){var s=this;this.close(),setTimeout(function(){return s.label.focus()},1)}},{key:"close",value:function(){this.container.classList.remove("ql-expanded"),this.label.setAttribute("aria-expanded","false"),this.options.setAttribute("aria-hidden","true")}},{key:"selectItem",value:function(s){var p=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,t=this.container.querySelector(".ql-selected");if(s!==t&&(t!=null&&t.classList.remove("ql-selected"),s!=null&&(s.classList.add("ql-selected"),this.select.selectedIndex=[].indexOf.call(s.parentNode.children,s),s.hasAttribute("data-value")?this.label.setAttribute("data-value",s.getAttribute("data-value")):this.label.removeAttribute("data-value"),s.hasAttribute("data-label")?this.label.setAttribute("data-label",s.getAttribute("data-label")):this.label.removeAttribute("data-label"),p))){if(typeof Event=="function")this.select.dispatchEvent(new Event("change"));else if((typeof Event>"u"?"undefined":E(Event))==="object"){var y=document.createEvent("Event");y.initEvent("change",!0,!0),this.select.dispatchEvent(y)}this.close()}}},{key:"update",value:function(){var s=void 0;if(this.select.selectedIndex>-1){var p=this.container.querySelector(".ql-picker-options").children[this.select.selectedIndex];s=this.select.options[this.select.selectedIndex],this.selectItem(p)}else this.selectItem(null);var t=s!=null&&s!==this.select.querySelector("option[selected]");this.label.classList.toggle("ql-active",t)}}]),i}();l.default=c},function(v,l,o){Object.defineProperty(l,"__esModule",{value:!0});var E=o(0),x=R(E),g=o(5),h=R(g),b=o(4),d=R(b),r=o(16),e=R(r),a=o(25),f=R(a),c=o(24),i=R(c),u=o(35),s=R(u),p=o(6),t=R(p),y=o(22),k=R(y),M=o(7),S=R(M),j=o(55),_=R(j),w=o(42),A=R(w),T=o(23),N=R(T);function R(I){return I&&I.__esModule?I:{default:I}}h.default.register({"blots/block":d.default,"blots/block/embed":b.BlockEmbed,"blots/break":e.default,"blots/container":f.default,"blots/cursor":i.default,"blots/embed":s.default,"blots/inline":t.default,"blots/scroll":k.default,"blots/text":S.default,"modules/clipboard":_.default,"modules/history":A.default,"modules/keyboard":N.default}),x.default.register(d.default,e.default,i.default,t.default,k.default,S.default),l.default=h.default},function(v,l,o){Object.defineProperty(l,"__esModule",{value:!0});var E=o(1),x=function(){function g(h){this.domNode=h,this.domNode[E.DATA_KEY]={blot:this}}return Object.defineProperty(g.prototype,"statics",{get:function(){return this.constructor},enumerable:!0,configurable:!0}),g.create=function(h){if(this.tagName==null)throw new E.ParchmentError("Blot definition missing tagName");var b;return Array.isArray(this.tagName)?(typeof h=="string"&&(h=h.toUpperCase(),parseInt(h).toString()===h&&(h=parseInt(h))),typeof h=="number"?b=document.createElement(this.tagName[h-1]):this.tagName.indexOf(h)>-1?b=document.createElement(h):b=document.createElement(this.tagName[0])):b=document.createElement(this.tagName),this.className&&b.classList.add(this.className),b},g.prototype.attach=function(){this.parent!=null&&(this.scroll=this.parent.scroll)},g.prototype.clone=function(){var h=this.domNode.cloneNode(!1);return E.create(h)},g.prototype.detach=function(){this.parent!=null&&this.parent.removeChild(this),delete this.domNode[E.DATA_KEY]},g.prototype.deleteAt=function(h,b){var d=this.isolate(h,b);d.remove()},g.prototype.formatAt=function(h,b,d,r){var e=this.isolate(h,b);if(E.query(d,E.Scope.BLOT)!=null&&r)e.wrap(d,r);else if(E.query(d,E.Scope.ATTRIBUTE)!=null){var a=E.create(this.statics.scope);e.wrap(a),a.format(d,r)}},g.prototype.insertAt=function(h,b,d){var r=d==null?E.create("text",b):E.create(b,d),e=this.split(h);this.parent.insertBefore(r,e)},g.prototype.insertInto=function(h,b){b===void 0&&(b=null),this.parent!=null&&this.parent.children.remove(this);var d=null;h.children.insertBefore(this,b),b!=null&&(d=b.domNode),(this.domNode.parentNode!=h.domNode||this.domNode.nextSibling!=d)&&h.domNode.insertBefore(this.domNode,d),this.parent=h,this.attach()},g.prototype.isolate=function(h,b){var d=this.split(h);return d.split(b),d},g.prototype.length=function(){return 1},g.prototype.offset=function(h){return h===void 0&&(h=this.parent),this.parent==null||this==h?0:this.parent.children.offset(this)+this.parent.offset(h)},g.prototype.optimize=function(h){this.domNode[E.DATA_KEY]!=null&&delete this.domNode[E.DATA_KEY].mutations},g.prototype.remove=function(){this.domNode.parentNode!=null&&this.domNode.parentNode.removeChild(this.domNode),this.detach()},g.prototype.replace=function(h){h.parent!=null&&(h.parent.insertBefore(this,h.next),h.remove())},g.prototype.replaceWith=function(h,b){var d=typeof h=="string"?E.create(h,b):h;return d.replace(this),d},g.prototype.split=function(h,b){return h===0?this:this.next},g.prototype.update=function(h,b){},g.prototype.wrap=function(h,b){var d=typeof h=="string"?E.create(h,b):h;return this.parent!=null&&this.parent.insertBefore(d,this.next),d.appendChild(this),d},g.blotName="abstract",g}();l.default=x},function(v,l,o){Object.defineProperty(l,"__esModule",{value:!0});var E=o(12),x=o(32),g=o(33),h=o(1),b=function(){function d(r){this.attributes={},this.domNode=r,this.build()}return d.prototype.attribute=function(r,e){e?r.add(this.domNode,e)&&(r.value(this.domNode)!=null?this.attributes[r.attrName]=r:delete this.attributes[r.attrName]):(r.remove(this.domNode),delete this.attributes[r.attrName])},d.prototype.build=function(){var r=this;this.attributes={};var e=E.default.keys(this.domNode),a=x.default.keys(this.domNode),f=g.default.keys(this.domNode);e.concat(a).concat(f).forEach(function(c){var i=h.query(c,h.Scope.ATTRIBUTE);i instanceof E.default&&(r.attributes[i.attrName]=i)})},d.prototype.copy=function(r){var e=this;Object.keys(this.attributes).forEach(function(a){var f=e.attributes[a].value(e.domNode);r.format(a,f)})},d.prototype.move=function(r){var e=this;this.copy(r),Object.keys(this.attributes).forEach(function(a){e.attributes[a].remove(e.domNode)}),this.attributes={}},d.prototype.values=function(){var r=this;return Object.keys(this.attributes).reduce(function(e,a){return e[a]=r.attributes[a].value(r.domNode),e},{})},d}();l.default=b},function(v,l,o){var E=this&&this.__extends||function(){var b=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,r){d.__proto__=r}||function(d,r){for(var e in r)r.hasOwnProperty(e)&&(d[e]=r[e])};return function(d,r){b(d,r);function e(){this.constructor=d}d.prototype=r===null?Object.create(r):(e.prototype=r.prototype,new e)}}();Object.defineProperty(l,"__esModule",{value:!0});var x=o(12);function g(b,d){var r=b.getAttribute("class")||"";return r.split(/\s+/).filter(function(e){return e.indexOf(d+"-")===0})}var h=function(b){E(d,b);function d(){return b!==null&&b.apply(this,arguments)||this}return d.keys=function(r){return(r.getAttribute("class")||"").split(/\s+/).map(function(e){return e.split("-").slice(0,-1).join("-")})},d.prototype.add=function(r,e){return this.canAdd(r,e)?(this.remove(r),r.classList.add(this.keyName+"-"+e),!0):!1},d.prototype.remove=function(r){var e=g(r,this.keyName);e.forEach(function(a){r.classList.remove(a)}),r.classList.length===0&&r.removeAttribute("class")},d.prototype.value=function(r){var e=g(r,this.keyName)[0]||"",a=e.slice(this.keyName.length+1);return this.canAdd(r,a)?a:""},d}(x.default);l.default=h},function(v,l,o){var E=this&&this.__extends||function(){var b=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,r){d.__proto__=r}||function(d,r){for(var e in r)r.hasOwnProperty(e)&&(d[e]=r[e])};return function(d,r){b(d,r);function e(){this.constructor=d}d.prototype=r===null?Object.create(r):(e.prototype=r.prototype,new e)}}();Object.defineProperty(l,"__esModule",{value:!0});var x=o(12);function g(b){var d=b.split("-"),r=d.slice(1).map(function(e){return e[0].toUpperCase()+e.slice(1)}).join("");return d[0]+r}var h=function(b){E(d,b);function d(){return b!==null&&b.apply(this,arguments)||this}return d.keys=function(r){return(r.getAttribute("style")||"").split(";").map(function(e){var a=e.split(":");return a[0].trim()})},d.prototype.add=function(r,e){return this.canAdd(r,e)?(r.style[g(this.keyName)]=e,!0):!1},d.prototype.remove=function(r){r.style[g(this.keyName)]="",r.getAttribute("style")||r.removeAttribute("style")},d.prototype.value=function(r){var e=r.style[g(this.keyName)];return this.canAdd(r,e)?e:""},d}(x.default);l.default=h},function(v,l,o){Object.defineProperty(l,"__esModule",{value:!0});var E=function(){function h(b,d){for(var r=0;r<d.length;r++){var e=d[r];e.enumerable=e.enumerable||!1,e.configurable=!0,"value"in e&&(e.writable=!0),Object.defineProperty(b,e.key,e)}}return function(b,d,r){return d&&h(b.prototype,d),r&&h(b,r),b}}();function x(h,b){if(!(h instanceof b))throw new TypeError("Cannot call a class as a function")}var g=function(){function h(b,d){x(this,h),this.quill=b,this.options=d,this.modules={}}return E(h,[{key:"init",value:function(){var d=this;Object.keys(this.options.modules).forEach(function(r){d.modules[r]==null&&d.addModule(r)})}},{key:"addModule",value:function(d){var r=this.quill.constructor.import("modules/"+d);return this.modules[d]=new r(this.quill,this.options.modules[d]||{}),this.modules[d]}}]),h}();g.DEFAULTS={modules:{}},g.themes={default:g},l.default=g},function(v,l,o){Object.defineProperty(l,"__esModule",{value:!0});var E=function(){function u(s,p){for(var t=0;t<p.length;t++){var y=p[t];y.enumerable=y.enumerable||!1,y.configurable=!0,"value"in y&&(y.writable=!0),Object.defineProperty(s,y.key,y)}}return function(s,p,t){return p&&u(s.prototype,p),t&&u(s,t),s}}(),x=function u(s,p,t){s===null&&(s=Function.prototype);var y=Object.getOwnPropertyDescriptor(s,p);if(y===void 0){var k=Object.getPrototypeOf(s);return k===null?void 0:u(k,p,t)}else{if("value"in y)return y.value;var M=y.get;return M===void 0?void 0:M.call(t)}},g=o(0),h=r(g),b=o(7),d=r(b);function r(u){return u&&u.__esModule?u:{default:u}}function e(u,s){if(!(u instanceof s))throw new TypeError("Cannot call a class as a function")}function a(u,s){if(!u)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return s&&(typeof s=="object"||typeof s=="function")?s:u}function f(u,s){if(typeof s!="function"&&s!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof s);u.prototype=Object.create(s&&s.prototype,{constructor:{value:u,enumerable:!1,writable:!0,configurable:!0}}),s&&(Object.setPrototypeOf?Object.setPrototypeOf(u,s):u.__proto__=s)}var c="\uFEFF",i=function(u){f(s,u);function s(p){e(this,s);var t=a(this,(s.__proto__||Object.getPrototypeOf(s)).call(this,p));return t.contentNode=document.createElement("span"),t.contentNode.setAttribute("contenteditable",!1),[].slice.call(t.domNode.childNodes).forEach(function(y){t.contentNode.appendChild(y)}),t.leftGuard=document.createTextNode(c),t.rightGuard=document.createTextNode(c),t.domNode.appendChild(t.leftGuard),t.domNode.appendChild(t.contentNode),t.domNode.appendChild(t.rightGuard),t}return E(s,[{key:"index",value:function(t,y){return t===this.leftGuard?0:t===this.rightGuard?1:x(s.prototype.__proto__||Object.getPrototypeOf(s.prototype),"index",this).call(this,t,y)}},{key:"restore",value:function(t){var y=void 0,k=void 0,M=t.data.split(c).join("");if(t===this.leftGuard)if(this.prev instanceof d.default){var S=this.prev.length();this.prev.insertAt(S,M),y={startNode:this.prev.domNode,startOffset:S+M.length}}else k=document.createTextNode(M),this.parent.insertBefore(h.default.create(k),this),y={startNode:k,startOffset:M.length};else t===this.rightGuard&&(this.next instanceof d.default?(this.next.insertAt(0,M),y={startNode:this.next.domNode,startOffset:M.length}):(k=document.createTextNode(M),this.parent.insertBefore(h.default.create(k),this.next),y={startNode:k,startOffset:M.length}));return t.data=c,y}},{key:"update",value:function(t,y){var k=this;t.forEach(function(M){if(M.type==="characterData"&&(M.target===k.leftGuard||M.target===k.rightGuard)){var S=k.restore(M.target);S&&(y.range=S)}})}}]),s}(h.default.Embed);l.default=i},function(v,l,o){Object.defineProperty(l,"__esModule",{value:!0}),l.AlignStyle=l.AlignClass=l.AlignAttribute=void 0;var E=o(0),x=g(E);function g(e){return e&&e.__esModule?e:{default:e}}var h={scope:x.default.Scope.BLOCK,whitelist:["right","center","justify"]},b=new x.default.Attributor.Attribute("align","align",h),d=new x.default.Attributor.Class("align","ql-align",h),r=new x.default.Attributor.Style("align","text-align",h);l.AlignAttribute=b,l.AlignClass=d,l.AlignStyle=r},function(v,l,o){Object.defineProperty(l,"__esModule",{value:!0}),l.BackgroundStyle=l.BackgroundClass=void 0;var E=o(0),x=h(E),g=o(26);function h(r){return r&&r.__esModule?r:{default:r}}var b=new x.default.Attributor.Class("background","ql-bg",{scope:x.default.Scope.INLINE}),d=new g.ColorAttributor("background","background-color",{scope:x.default.Scope.INLINE});l.BackgroundClass=b,l.BackgroundStyle=d},function(v,l,o){Object.defineProperty(l,"__esModule",{value:!0}),l.DirectionStyle=l.DirectionClass=l.DirectionAttribute=void 0;var E=o(0),x=g(E);function g(e){return e&&e.__esModule?e:{default:e}}var h={scope:x.default.Scope.BLOCK,whitelist:["rtl"]},b=new x.default.Attributor.Attribute("direction","dir",h),d=new x.default.Attributor.Class("direction","ql-direction",h),r=new x.default.Attributor.Style("direction","direction",h);l.DirectionAttribute=b,l.DirectionClass=d,l.DirectionStyle=r},function(v,l,o){Object.defineProperty(l,"__esModule",{value:!0}),l.FontClass=l.FontStyle=void 0;var E=function(){function u(s,p){for(var t=0;t<p.length;t++){var y=p[t];y.enumerable=y.enumerable||!1,y.configurable=!0,"value"in y&&(y.writable=!0),Object.defineProperty(s,y.key,y)}}return function(s,p,t){return p&&u(s.prototype,p),t&&u(s,t),s}}(),x=function u(s,p,t){s===null&&(s=Function.prototype);var y=Object.getOwnPropertyDescriptor(s,p);if(y===void 0){var k=Object.getPrototypeOf(s);return k===null?void 0:u(k,p,t)}else{if("value"in y)return y.value;var M=y.get;return M===void 0?void 0:M.call(t)}},g=o(0),h=b(g);function b(u){return u&&u.__esModule?u:{default:u}}function d(u,s){if(!(u instanceof s))throw new TypeError("Cannot call a class as a function")}function r(u,s){if(!u)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return s&&(typeof s=="object"||typeof s=="function")?s:u}function e(u,s){if(typeof s!="function"&&s!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof s);u.prototype=Object.create(s&&s.prototype,{constructor:{value:u,enumerable:!1,writable:!0,configurable:!0}}),s&&(Object.setPrototypeOf?Object.setPrototypeOf(u,s):u.__proto__=s)}var a={scope:h.default.Scope.INLINE,whitelist:["serif","monospace"]},f=new h.default.Attributor.Class("font","ql-font",a),c=function(u){e(s,u);function s(){return d(this,s),r(this,(s.__proto__||Object.getPrototypeOf(s)).apply(this,arguments))}return E(s,[{key:"value",value:function(t){return x(s.prototype.__proto__||Object.getPrototypeOf(s.prototype),"value",this).call(this,t).replace(/["']/g,"")}}]),s}(h.default.Attributor.Style),i=new c("font","font-family",a);l.FontStyle=i,l.FontClass=f},function(v,l,o){Object.defineProperty(l,"__esModule",{value:!0}),l.SizeStyle=l.SizeClass=void 0;var E=o(0),x=g(E);function g(d){return d&&d.__esModule?d:{default:d}}var h=new x.default.Attributor.Class("size","ql-size",{scope:x.default.Scope.INLINE,whitelist:["small","large","huge"]}),b=new x.default.Attributor.Style("size","font-size",{scope:x.default.Scope.INLINE,whitelist:["10px","18px","32px"]});l.SizeClass=h,l.SizeStyle=b},function(v,l,o){v.exports={align:{"":o(76),center:o(77),right:o(78),justify:o(79)},background:o(80),blockquote:o(81),bold:o(82),clean:o(83),code:o(58),"code-block":o(58),color:o(84),direction:{"":o(85),rtl:o(86)},float:{center:o(87),full:o(88),left:o(89),right:o(90)},formula:o(91),header:{1:o(92),2:o(93)},italic:o(94),image:o(95),indent:{"+1":o(96),"-1":o(97)},link:o(98),list:{ordered:o(99),bullet:o(100),check:o(101)},script:{sub:o(102),super:o(103)},strike:o(104),underline:o(105),video:o(106)}},function(v,l,o){Object.defineProperty(l,"__esModule",{value:!0}),l.getLastChangeIndex=l.default=void 0;var E=function(){function p(t,y){for(var k=0;k<y.length;k++){var M=y[k];M.enumerable=M.enumerable||!1,M.configurable=!0,"value"in M&&(M.writable=!0),Object.defineProperty(t,M.key,M)}}return function(t,y,k){return y&&p(t.prototype,y),k&&p(t,k),t}}(),x=o(0),g=e(x),h=o(5),b=e(h),d=o(9),r=e(d);function e(p){return p&&p.__esModule?p:{default:p}}function a(p,t){if(!(p instanceof t))throw new TypeError("Cannot call a class as a function")}function f(p,t){if(!p)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&(typeof t=="object"||typeof t=="function")?t:p}function c(p,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof t);p.prototype=Object.create(t&&t.prototype,{constructor:{value:p,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(p,t):p.__proto__=t)}var i=function(p){c(t,p);function t(y,k){a(this,t);var M=f(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,y,k));return M.lastRecorded=0,M.ignoreChange=!1,M.clear(),M.quill.on(b.default.events.EDITOR_CHANGE,function(S,j,_,w){S!==b.default.events.TEXT_CHANGE||M.ignoreChange||(!M.options.userOnly||w===b.default.sources.USER?M.record(j,_):M.transform(j))}),M.quill.keyboard.addBinding({key:"Z",shortKey:!0},M.undo.bind(M)),M.quill.keyboard.addBinding({key:"Z",shortKey:!0,shiftKey:!0},M.redo.bind(M)),/Win/i.test(navigator.platform)&&M.quill.keyboard.addBinding({key:"Y",shortKey:!0},M.redo.bind(M)),M}return E(t,[{key:"change",value:function(k,M){if(this.stack[k].length!==0){var S=this.stack[k].pop();this.stack[M].push(S),this.lastRecorded=0,this.ignoreChange=!0,this.quill.updateContents(S[k],b.default.sources.USER),this.ignoreChange=!1;var j=s(S[k]);this.quill.setSelection(j)}}},{key:"clear",value:function(){this.stack={undo:[],redo:[]}}},{key:"cutoff",value:function(){this.lastRecorded=0}},{key:"record",value:function(k,M){if(k.ops.length!==0){this.stack.redo=[];var S=this.quill.getContents().diff(M),j=Date.now();if(this.lastRecorded+this.options.delay>j&&this.stack.undo.length>0){var _=this.stack.undo.pop();S=S.compose(_.undo),k=_.redo.compose(k)}else this.lastRecorded=j;this.stack.undo.push({redo:k,undo:S}),this.stack.undo.length>this.options.maxStack&&this.stack.undo.shift()}}},{key:"redo",value:function(){this.change("redo","undo")}},{key:"transform",value:function(k){this.stack.undo.forEach(function(M){M.undo=k.transform(M.undo,!0),M.redo=k.transform(M.redo,!0)}),this.stack.redo.forEach(function(M){M.undo=k.transform(M.undo,!0),M.redo=k.transform(M.redo,!0)})}},{key:"undo",value:function(){this.change("undo","redo")}}]),t}(r.default);i.DEFAULTS={delay:1e3,maxStack:100,userOnly:!1};function u(p){var t=p.ops[p.ops.length-1];return t==null?!1:t.insert!=null?typeof t.insert=="string"&&t.insert.endsWith(`
`):t.attributes!=null?Object.keys(t.attributes).some(function(y){return g.default.query(y,g.default.Scope.BLOCK)!=null}):!1}function s(p){var t=p.reduce(function(k,M){return k+=M.delete||0,k},0),y=p.length()-t;return u(p)&&(y-=1),y}l.default=i,l.getLastChangeIndex=s},function(v,l,o){Object.defineProperty(l,"__esModule",{value:!0}),l.default=l.BaseTooltip=void 0;var E=function(){function P(L,W){for(var z=0;z<W.length;z++){var D=W[z];D.enumerable=D.enumerable||!1,D.configurable=!0,"value"in D&&(D.writable=!0),Object.defineProperty(L,D.key,D)}}return function(L,W,z){return W&&P(L.prototype,W),z&&P(L,z),L}}(),x=function P(L,W,z){L===null&&(L=Function.prototype);var D=Object.getOwnPropertyDescriptor(L,W);if(D===void 0){var U=Object.getPrototypeOf(L);return U===null?void 0:P(U,W,z)}else{if("value"in D)return D.value;var H=D.get;return H===void 0?void 0:H.call(z)}},g=o(3),h=j(g),b=o(2),d=j(b),r=o(8),e=j(r),a=o(23),f=j(a),c=o(34),i=j(c),u=o(59),s=j(u),p=o(60),t=j(p),y=o(28),k=j(y),M=o(61),S=j(M);function j(P){return P&&P.__esModule?P:{default:P}}function _(P,L){if(!(P instanceof L))throw new TypeError("Cannot call a class as a function")}function w(P,L){if(!P)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return L&&(typeof L=="object"||typeof L=="function")?L:P}function A(P,L){if(typeof L!="function"&&L!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof L);P.prototype=Object.create(L&&L.prototype,{constructor:{value:P,enumerable:!1,writable:!0,configurable:!0}}),L&&(Object.setPrototypeOf?Object.setPrototypeOf(P,L):P.__proto__=L)}var T=[!1,"center","right","justify"],N=["#000000","#e60000","#ff9900","#ffff00","#008a00","#0066cc","#9933ff","#ffffff","#facccc","#ffebcc","#ffffcc","#cce8cc","#cce0f5","#ebd6ff","#bbbbbb","#f06666","#ffc266","#ffff66","#66b966","#66a3e0","#c285ff","#888888","#a10000","#b26b00","#b2b200","#006100","#0047b2","#6b24b2","#444444","#5c0000","#663d00","#666600","#003700","#002966","#3d1466"],R=[!1,"serif","monospace"],I=["1","2","3",!1],F=["small",!1,"large","huge"],V=function(P){A(L,P);function L(W,z){_(this,L);var D=w(this,(L.__proto__||Object.getPrototypeOf(L)).call(this,W,z)),U=function H($){if(!document.body.contains(W.root))return document.body.removeEventListener("click",H);D.tooltip!=null&&!D.tooltip.root.contains($.target)&&document.activeElement!==D.tooltip.textbox&&!D.quill.hasFocus()&&D.tooltip.hide(),D.pickers!=null&&D.pickers.forEach(function(K){K.container.contains($.target)||K.close()})};return W.emitter.listenDOM("click",document.body,U),D}return E(L,[{key:"addModule",value:function(z){var D=x(L.prototype.__proto__||Object.getPrototypeOf(L.prototype),"addModule",this).call(this,z);return z==="toolbar"&&this.extendToolbar(D),D}},{key:"buildButtons",value:function(z,D){z.forEach(function(U){var H=U.getAttribute("class")||"";H.split(/\s+/).forEach(function($){if($.startsWith("ql-")&&($=$.slice(3),D[$]!=null))if($==="direction")U.innerHTML=D[$][""]+D[$].rtl;else if(typeof D[$]=="string")U.innerHTML=D[$];else{var K=U.value||"";K!=null&&D[$][K]&&(U.innerHTML=D[$][K])}})})}},{key:"buildPickers",value:function(z,D){var U=this;this.pickers=z.map(function($){if($.classList.contains("ql-align"))return $.querySelector("option")==null&&C($,T),new t.default($,D.align);if($.classList.contains("ql-background")||$.classList.contains("ql-color")){var K=$.classList.contains("ql-background")?"background":"color";return $.querySelector("option")==null&&C($,N,K==="background"?"#ffffff":"#000000"),new s.default($,D[K])}else return $.querySelector("option")==null&&($.classList.contains("ql-font")?C($,R):$.classList.contains("ql-header")?C($,I):$.classList.contains("ql-size")&&C($,F)),new k.default($)});var H=function(){U.pickers.forEach(function(K){K.update()})};this.quill.on(e.default.events.EDITOR_CHANGE,H)}}]),L}(i.default);V.DEFAULTS=(0,h.default)(!0,{},i.default.DEFAULTS,{modules:{toolbar:{handlers:{formula:function(){this.quill.theme.tooltip.edit("formula")},image:function(){var L=this,W=this.container.querySelector("input.ql-image[type=file]");W==null&&(W=document.createElement("input"),W.setAttribute("type","file"),W.setAttribute("accept","image/png, image/gif, image/jpeg, image/bmp, image/x-icon"),W.classList.add("ql-image"),W.addEventListener("change",function(){if(W.files!=null&&W.files[0]!=null){var z=new FileReader;z.onload=function(D){var U=L.quill.getSelection(!0);L.quill.updateContents(new d.default().retain(U.index).delete(U.length).insert({image:D.target.result}),e.default.sources.USER),L.quill.setSelection(U.index+1,e.default.sources.SILENT),W.value=""},z.readAsDataURL(W.files[0])}}),this.container.appendChild(W)),W.click()},video:function(){this.quill.theme.tooltip.edit("video")}}}}});var B=function(P){A(L,P);function L(W,z){_(this,L);var D=w(this,(L.__proto__||Object.getPrototypeOf(L)).call(this,W,z));return D.textbox=D.root.querySelector('input[type="text"]'),D.listen(),D}return E(L,[{key:"listen",value:function(){var z=this;this.textbox.addEventListener("keydown",function(D){f.default.match(D,"enter")?(z.save(),D.preventDefault()):f.default.match(D,"escape")&&(z.cancel(),D.preventDefault())})}},{key:"cancel",value:function(){this.hide()}},{key:"edit",value:function(){var z=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"link",D=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;this.root.classList.remove("ql-hidden"),this.root.classList.add("ql-editing"),D!=null?this.textbox.value=D:z!==this.root.getAttribute("data-mode")&&(this.textbox.value=""),this.position(this.quill.getBounds(this.quill.selection.savedRange)),this.textbox.select(),this.textbox.setAttribute("placeholder",this.textbox.getAttribute("data-"+z)||""),this.root.setAttribute("data-mode",z)}},{key:"restoreFocus",value:function(){var z=this.quill.scrollingContainer.scrollTop;this.quill.focus(),this.quill.scrollingContainer.scrollTop=z}},{key:"save",value:function(){var z=this.textbox.value;switch(this.root.getAttribute("data-mode")){case"link":{var D=this.quill.root.scrollTop;this.linkRange?(this.quill.formatText(this.linkRange,"link",z,e.default.sources.USER),delete this.linkRange):(this.restoreFocus(),this.quill.format("link",z,e.default.sources.USER)),this.quill.root.scrollTop=D;break}case"video":z=q(z);case"formula":{if(!z)break;var U=this.quill.getSelection(!0);if(U!=null){var H=U.index+U.length;this.quill.insertEmbed(H,this.root.getAttribute("data-mode"),z,e.default.sources.USER),this.root.getAttribute("data-mode")==="formula"&&this.quill.insertText(H+1," ",e.default.sources.USER),this.quill.setSelection(H+2,e.default.sources.USER)}break}}this.textbox.value="",this.hide()}}]),L}(S.default);function q(P){var L=P.match(/^(?:(https?):\/\/)?(?:(?:www|m)\.)?youtube\.com\/watch.*v=([a-zA-Z0-9_-]+)/)||P.match(/^(?:(https?):\/\/)?(?:(?:www|m)\.)?youtu\.be\/([a-zA-Z0-9_-]+)/);return L?(L[1]||"https")+"://www.youtube.com/embed/"+L[2]+"?showinfo=0":(L=P.match(/^(?:(https?):\/\/)?(?:www\.)?vimeo\.com\/(\d+)/))?(L[1]||"https")+"://player.vimeo.com/video/"+L[2]+"/":P}function C(P,L){var W=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;L.forEach(function(z){var D=document.createElement("option");z===W?D.setAttribute("selected","selected"):D.setAttribute("value",z),P.appendChild(D)})}l.BaseTooltip=B,l.default=V},function(v,l,o){Object.defineProperty(l,"__esModule",{value:!0});var E=function(){function x(){this.head=this.tail=null,this.length=0}return x.prototype.append=function(){for(var g=[],h=0;h<arguments.length;h++)g[h]=arguments[h];this.insertBefore(g[0],null),g.length>1&&this.append.apply(this,g.slice(1))},x.prototype.contains=function(g){for(var h,b=this.iterator();h=b();)if(h===g)return!0;return!1},x.prototype.insertBefore=function(g,h){g&&(g.next=h,h!=null?(g.prev=h.prev,h.prev!=null&&(h.prev.next=g),h.prev=g,h===this.head&&(this.head=g)):this.tail!=null?(this.tail.next=g,g.prev=this.tail,this.tail=g):(g.prev=null,this.head=this.tail=g),this.length+=1)},x.prototype.offset=function(g){for(var h=0,b=this.head;b!=null;){if(b===g)return h;h+=b.length(),b=b.next}return-1},x.prototype.remove=function(g){this.contains(g)&&(g.prev!=null&&(g.prev.next=g.next),g.next!=null&&(g.next.prev=g.prev),g===this.head&&(this.head=g.next),g===this.tail&&(this.tail=g.prev),this.length-=1)},x.prototype.iterator=function(g){return g===void 0&&(g=this.head),function(){var h=g;return g!=null&&(g=g.next),h}},x.prototype.find=function(g,h){h===void 0&&(h=!1);for(var b,d=this.iterator();b=d();){var r=b.length();if(g<r||h&&g===r&&(b.next==null||b.next.length()!==0))return[b,g];g-=r}return[null,0]},x.prototype.forEach=function(g){for(var h,b=this.iterator();h=b();)g(h)},x.prototype.forEachAt=function(g,h,b){if(!(h<=0))for(var d=this.find(g),r=d[0],e=d[1],a,f=g-e,c=this.iterator(r);(a=c())&&f<g+h;){var i=a.length();g>f?b(a,g-f,Math.min(h,f+i-g)):b(a,0,Math.min(i,g+h-f)),f+=i}},x.prototype.map=function(g){return this.reduce(function(h,b){return h.push(g(b)),h},[])},x.prototype.reduce=function(g,h){for(var b,d=this.iterator();b=d();)h=g(h,b);return h},x}();l.default=E},function(v,l,o){var E=this&&this.__extends||function(){var r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,a){e.__proto__=a}||function(e,a){for(var f in a)a.hasOwnProperty(f)&&(e[f]=a[f])};return function(e,a){r(e,a);function f(){this.constructor=e}e.prototype=a===null?Object.create(a):(f.prototype=a.prototype,new f)}}();Object.defineProperty(l,"__esModule",{value:!0});var x=o(17),g=o(1),h={attributes:!0,characterData:!0,characterDataOldValue:!0,childList:!0,subtree:!0},b=100,d=function(r){E(e,r);function e(a){var f=r.call(this,a)||this;return f.scroll=f,f.observer=new MutationObserver(function(c){f.update(c)}),f.observer.observe(f.domNode,h),f.attach(),f}return e.prototype.detach=function(){r.prototype.detach.call(this),this.observer.disconnect()},e.prototype.deleteAt=function(a,f){this.update(),a===0&&f===this.length()?this.children.forEach(function(c){c.remove()}):r.prototype.deleteAt.call(this,a,f)},e.prototype.formatAt=function(a,f,c,i){this.update(),r.prototype.formatAt.call(this,a,f,c,i)},e.prototype.insertAt=function(a,f,c){this.update(),r.prototype.insertAt.call(this,a,f,c)},e.prototype.optimize=function(a,f){var c=this;a===void 0&&(a=[]),f===void 0&&(f={}),r.prototype.optimize.call(this,f);for(var i=[].slice.call(this.observer.takeRecords());i.length>0;)a.push(i.pop());for(var u=function(y,k){k===void 0&&(k=!0),!(y==null||y===c)&&y.domNode.parentNode!=null&&(y.domNode[g.DATA_KEY].mutations==null&&(y.domNode[g.DATA_KEY].mutations=[]),k&&u(y.parent))},s=function(y){y.domNode[g.DATA_KEY]==null||y.domNode[g.DATA_KEY].mutations==null||(y instanceof x.default&&y.children.forEach(s),y.optimize(f))},p=a,t=0;p.length>0;t+=1){if(t>=b)throw new Error("[Parchment] Maximum optimize iterations reached");for(p.forEach(function(y){var k=g.find(y.target,!0);k!=null&&(k.domNode===y.target&&(y.type==="childList"?(u(g.find(y.previousSibling,!1)),[].forEach.call(y.addedNodes,function(M){var S=g.find(M,!1);u(S,!1),S instanceof x.default&&S.children.forEach(function(j){u(j,!1)})})):y.type==="attributes"&&u(k.prev)),u(k))}),this.children.forEach(s),p=[].slice.call(this.observer.takeRecords()),i=p.slice();i.length>0;)a.push(i.pop())}},e.prototype.update=function(a,f){var c=this;f===void 0&&(f={}),a=a||this.observer.takeRecords(),a.map(function(i){var u=g.find(i.target,!0);return u==null?null:u.domNode[g.DATA_KEY].mutations==null?(u.domNode[g.DATA_KEY].mutations=[i],u):(u.domNode[g.DATA_KEY].mutations.push(i),null)}).forEach(function(i){i==null||i===c||i.domNode[g.DATA_KEY]==null||i.update(i.domNode[g.DATA_KEY].mutations||[],f)}),this.domNode[g.DATA_KEY].mutations!=null&&r.prototype.update.call(this,this.domNode[g.DATA_KEY].mutations,f),this.optimize(a,f)},e.blotName="scroll",e.defaultChild="block",e.scope=g.Scope.BLOCK_BLOT,e.tagName="DIV",e}(x.default);l.default=d},function(v,l,o){var E=this&&this.__extends||function(){var d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,e){r.__proto__=e}||function(r,e){for(var a in e)e.hasOwnProperty(a)&&(r[a]=e[a])};return function(r,e){d(r,e);function a(){this.constructor=r}r.prototype=e===null?Object.create(e):(a.prototype=e.prototype,new a)}}();Object.defineProperty(l,"__esModule",{value:!0});var x=o(18),g=o(1);function h(d,r){if(Object.keys(d).length!==Object.keys(r).length)return!1;for(var e in d)if(d[e]!==r[e])return!1;return!0}var b=function(d){E(r,d);function r(){return d!==null&&d.apply(this,arguments)||this}return r.formats=function(e){if(e.tagName!==r.tagName)return d.formats.call(this,e)},r.prototype.format=function(e,a){var f=this;e===this.statics.blotName&&!a?(this.children.forEach(function(c){c instanceof x.default||(c=c.wrap(r.blotName,!0)),f.attributes.copy(c)}),this.unwrap()):d.prototype.format.call(this,e,a)},r.prototype.formatAt=function(e,a,f,c){if(this.formats()[f]!=null||g.query(f,g.Scope.ATTRIBUTE)){var i=this.isolate(e,a);i.format(f,c)}else d.prototype.formatAt.call(this,e,a,f,c)},r.prototype.optimize=function(e){d.prototype.optimize.call(this,e);var a=this.formats();if(Object.keys(a).length===0)return this.unwrap();var f=this.next;f instanceof r&&f.prev===this&&h(a,f.formats())&&(f.moveChildren(this),f.remove())},r.blotName="inline",r.scope=g.Scope.INLINE_BLOT,r.tagName="SPAN",r}(x.default);l.default=b},function(v,l,o){var E=this&&this.__extends||function(){var b=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,r){d.__proto__=r}||function(d,r){for(var e in r)r.hasOwnProperty(e)&&(d[e]=r[e])};return function(d,r){b(d,r);function e(){this.constructor=d}d.prototype=r===null?Object.create(r):(e.prototype=r.prototype,new e)}}();Object.defineProperty(l,"__esModule",{value:!0});var x=o(18),g=o(1),h=function(b){E(d,b);function d(){return b!==null&&b.apply(this,arguments)||this}return d.formats=function(r){var e=g.query(d.blotName).tagName;if(r.tagName!==e)return b.formats.call(this,r)},d.prototype.format=function(r,e){g.query(r,g.Scope.BLOCK)!=null&&(r===this.statics.blotName&&!e?this.replaceWith(d.blotName):b.prototype.format.call(this,r,e))},d.prototype.formatAt=function(r,e,a,f){g.query(a,g.Scope.BLOCK)!=null?this.format(a,f):b.prototype.formatAt.call(this,r,e,a,f)},d.prototype.insertAt=function(r,e,a){if(a==null||g.query(e,g.Scope.INLINE)!=null)b.prototype.insertAt.call(this,r,e,a);else{var f=this.split(r),c=g.create(e,a);f.parent.insertBefore(c,f)}},d.prototype.update=function(r,e){navigator.userAgent.match(/Trident/)?this.build():b.prototype.update.call(this,r,e)},d.blotName="block",d.scope=g.Scope.BLOCK_BLOT,d.tagName="P",d}(x.default);l.default=h},function(v,l,o){var E=this&&this.__extends||function(){var h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(b,d){b.__proto__=d}||function(b,d){for(var r in d)d.hasOwnProperty(r)&&(b[r]=d[r])};return function(b,d){h(b,d);function r(){this.constructor=b}b.prototype=d===null?Object.create(d):(r.prototype=d.prototype,new r)}}();Object.defineProperty(l,"__esModule",{value:!0});var x=o(19),g=function(h){E(b,h);function b(){return h!==null&&h.apply(this,arguments)||this}return b.formats=function(d){},b.prototype.format=function(d,r){h.prototype.formatAt.call(this,0,this.length(),d,r)},b.prototype.formatAt=function(d,r,e,a){d===0&&r===this.length()?this.format(e,a):h.prototype.formatAt.call(this,d,r,e,a)},b.prototype.formats=function(){return this.statics.formats(this.domNode)},b}(x.default);l.default=g},function(v,l,o){var E=this&&this.__extends||function(){var b=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,r){d.__proto__=r}||function(d,r){for(var e in r)r.hasOwnProperty(e)&&(d[e]=r[e])};return function(d,r){b(d,r);function e(){this.constructor=d}d.prototype=r===null?Object.create(r):(e.prototype=r.prototype,new e)}}();Object.defineProperty(l,"__esModule",{value:!0});var x=o(19),g=o(1),h=function(b){E(d,b);function d(r){var e=b.call(this,r)||this;return e.text=e.statics.value(e.domNode),e}return d.create=function(r){return document.createTextNode(r)},d.value=function(r){var e=r.data;return e.normalize&&(e=e.normalize()),e},d.prototype.deleteAt=function(r,e){this.domNode.data=this.text=this.text.slice(0,r)+this.text.slice(r+e)},d.prototype.index=function(r,e){return this.domNode===r?e:-1},d.prototype.insertAt=function(r,e,a){a==null?(this.text=this.text.slice(0,r)+e+this.text.slice(r),this.domNode.data=this.text):b.prototype.insertAt.call(this,r,e,a)},d.prototype.length=function(){return this.text.length},d.prototype.optimize=function(r){b.prototype.optimize.call(this,r),this.text=this.statics.value(this.domNode),this.text.length===0?this.remove():this.next instanceof d&&this.next.prev===this&&(this.insertAt(this.length(),this.next.value()),this.next.remove())},d.prototype.position=function(r,e){return[this.domNode,r]},d.prototype.split=function(r,e){if(e===void 0&&(e=!1),!e){if(r===0)return this;if(r===this.length())return this.next}var a=g.create(this.domNode.splitText(r));return this.parent.insertBefore(a,this.next),this.text=this.statics.value(this.domNode),a},d.prototype.update=function(r,e){var a=this;r.some(function(f){return f.type==="characterData"&&f.target===a.domNode})&&(this.text=this.statics.value(this.domNode))},d.prototype.value=function(){return this.text},d.blotName="text",d.scope=g.Scope.INLINE_BLOT,d}(x.default);l.default=h},function(v,l,o){var E=document.createElement("div");if(E.classList.toggle("test-class",!1),E.classList.contains("test-class")){var x=DOMTokenList.prototype.toggle;DOMTokenList.prototype.toggle=function(g,h){return arguments.length>1&&!this.contains(g)==!h?h:x.call(this,g)}}String.prototype.startsWith||(String.prototype.startsWith=function(g,h){return h=h||0,this.substr(h,g.length)===g}),String.prototype.endsWith||(String.prototype.endsWith=function(g,h){var b=this.toString();(typeof h!="number"||!isFinite(h)||Math.floor(h)!==h||h>b.length)&&(h=b.length),h-=g.length;var d=b.indexOf(g,h);return d!==-1&&d===h}),Array.prototype.find||Object.defineProperty(Array.prototype,"find",{value:function(h){if(this===null)throw new TypeError("Array.prototype.find called on null or undefined");if(typeof h!="function")throw new TypeError("predicate must be a function");for(var b=Object(this),d=b.length>>>0,r=arguments[1],e,a=0;a<d;a++)if(e=b[a],h.call(r,e,a,b))return e}}),document.addEventListener("DOMContentLoaded",function(){document.execCommand("enableObjectResizing",!1,!1),document.execCommand("autoUrlDetect",!1,!1)})},function(v,l){var o=-1,E=1,x=0;function g(t,y,k){if(t==y)return t?[[x,t]]:[];(k<0||t.length<k)&&(k=null);var M=r(t,y),S=t.substring(0,M);t=t.substring(M),y=y.substring(M),M=e(t,y);var j=t.substring(t.length-M);t=t.substring(0,t.length-M),y=y.substring(0,y.length-M);var _=h(t,y);return S&&_.unshift([x,S]),j&&_.push([x,j]),f(_),k!=null&&(_=u(_,k)),_=s(_),_}function h(t,y){var k;if(!t)return[[E,y]];if(!y)return[[o,t]];var M=t.length>y.length?t:y,S=t.length>y.length?y:t,j=M.indexOf(S);if(j!=-1)return k=[[E,M.substring(0,j)],[x,S],[E,M.substring(j+S.length)]],t.length>y.length&&(k[0][0]=k[2][0]=o),k;if(S.length==1)return[[o,t],[E,y]];var _=a(t,y);if(_){var w=_[0],A=_[1],T=_[2],N=_[3],R=_[4],I=g(w,T),F=g(A,N);return I.concat([[x,R]],F)}return b(t,y)}function b(t,y){for(var k=t.length,M=y.length,S=Math.ceil((k+M)/2),j=S,_=2*S,w=new Array(_),A=new Array(_),T=0;T<_;T++)w[T]=-1,A[T]=-1;w[j+1]=0,A[j+1]=0;for(var N=k-M,R=N%2!=0,I=0,F=0,V=0,B=0,q=0;q<S;q++){for(var C=-q+I;C<=q-F;C+=2){var P=j+C,L;C==-q||C!=q&&w[P-1]<w[P+1]?L=w[P+1]:L=w[P-1]+1;for(var W=L-C;L<k&&W<M&&t.charAt(L)==y.charAt(W);)L++,W++;if(w[P]=L,L>k)F+=2;else if(W>M)I+=2;else if(R){var z=j+N-C;if(z>=0&&z<_&&A[z]!=-1){var D=k-A[z];if(L>=D)return d(t,y,L,W)}}}for(var U=-q+V;U<=q-B;U+=2){var z=j+U,D;U==-q||U!=q&&A[z-1]<A[z+1]?D=A[z+1]:D=A[z-1]+1;for(var H=D-U;D<k&&H<M&&t.charAt(k-D-1)==y.charAt(M-H-1);)D++,H++;if(A[z]=D,D>k)B+=2;else if(H>M)V+=2;else if(!R){var P=j+N-U;if(P>=0&&P<_&&w[P]!=-1){var L=w[P],W=j+L-P;if(D=k-D,L>=D)return d(t,y,L,W)}}}}return[[o,t],[E,y]]}function d(t,y,k,M){var S=t.substring(0,k),j=y.substring(0,M),_=t.substring(k),w=y.substring(M),A=g(S,j),T=g(_,w);return A.concat(T)}function r(t,y){if(!t||!y||t.charAt(0)!=y.charAt(0))return 0;for(var k=0,M=Math.min(t.length,y.length),S=M,j=0;k<S;)t.substring(j,S)==y.substring(j,S)?(k=S,j=k):M=S,S=Math.floor((M-k)/2+k);return S}function e(t,y){if(!t||!y||t.charAt(t.length-1)!=y.charAt(y.length-1))return 0;for(var k=0,M=Math.min(t.length,y.length),S=M,j=0;k<S;)t.substring(t.length-S,t.length-j)==y.substring(y.length-S,y.length-j)?(k=S,j=k):M=S,S=Math.floor((M-k)/2+k);return S}function a(t,y){var k=t.length>y.length?t:y,M=t.length>y.length?y:t;if(k.length<4||M.length*2<k.length)return null;function S(F,V,B){for(var q=F.substring(B,B+Math.floor(F.length/4)),C=-1,P="",L,W,z,D;(C=V.indexOf(q,C+1))!=-1;){var U=r(F.substring(B),V.substring(C)),H=e(F.substring(0,B),V.substring(0,C));P.length<H+U&&(P=V.substring(C-H,C)+V.substring(C,C+U),L=F.substring(0,B-H),W=F.substring(B+U),z=V.substring(0,C-H),D=V.substring(C+U))}return P.length*2>=F.length?[L,W,z,D,P]:null}var j=S(k,M,Math.ceil(k.length/4)),_=S(k,M,Math.ceil(k.length/2)),w;if(!j&&!_)return null;_?j?w=j[4].length>_[4].length?j:_:w=_:w=j;var A,T,N,R;t.length>y.length?(A=w[0],T=w[1],N=w[2],R=w[3]):(N=w[0],R=w[1],A=w[2],T=w[3]);var I=w[4];return[A,T,N,R,I]}function f(t){t.push([x,""]);for(var y=0,k=0,M=0,S="",j="",_;y<t.length;)switch(t[y][0]){case E:M++,j+=t[y][1],y++;break;case o:k++,S+=t[y][1],y++;break;case x:k+M>1?(k!==0&&M!==0&&(_=r(j,S),_!==0&&(y-k-M>0&&t[y-k-M-1][0]==x?t[y-k-M-1][1]+=j.substring(0,_):(t.splice(0,0,[x,j.substring(0,_)]),y++),j=j.substring(_),S=S.substring(_)),_=e(j,S),_!==0&&(t[y][1]=j.substring(j.length-_)+t[y][1],j=j.substring(0,j.length-_),S=S.substring(0,S.length-_))),k===0?t.splice(y-M,k+M,[E,j]):M===0?t.splice(y-k,k+M,[o,S]):t.splice(y-k-M,k+M,[o,S],[E,j]),y=y-k-M+(k?1:0)+(M?1:0)+1):y!==0&&t[y-1][0]==x?(t[y-1][1]+=t[y][1],t.splice(y,1)):y++,M=0,k=0,S="",j="";break}t[t.length-1][1]===""&&t.pop();var w=!1;for(y=1;y<t.length-1;)t[y-1][0]==x&&t[y+1][0]==x&&(t[y][1].substring(t[y][1].length-t[y-1][1].length)==t[y-1][1]?(t[y][1]=t[y-1][1]+t[y][1].substring(0,t[y][1].length-t[y-1][1].length),t[y+1][1]=t[y-1][1]+t[y+1][1],t.splice(y-1,1),w=!0):t[y][1].substring(0,t[y+1][1].length)==t[y+1][1]&&(t[y-1][1]+=t[y+1][1],t[y][1]=t[y][1].substring(t[y+1][1].length)+t[y+1][1],t.splice(y+1,1),w=!0)),y++;w&&f(t)}var c=g;c.INSERT=E,c.DELETE=o,c.EQUAL=x,v.exports=c;function i(t,y){if(y===0)return[x,t];for(var k=0,M=0;M<t.length;M++){var S=t[M];if(S[0]===o||S[0]===x){var j=k+S[1].length;if(y===j)return[M+1,t];if(y<j){t=t.slice();var _=y-k,w=[S[0],S[1].slice(0,_)],A=[S[0],S[1].slice(_)];return t.splice(M,1,w,A),[M+1,t]}else k=j}}throw new Error("cursor_pos is out of bounds!")}function u(t,y){var k=i(t,y),M=k[1],S=k[0],j=M[S],_=M[S+1];if(j==null)return t;if(j[0]!==x)return t;if(_!=null&&j[1]+_[1]===_[1]+j[1])return M.splice(S,2,_,j),p(M,S,2);if(_!=null&&_[1].indexOf(j[1])===0){M.splice(S,2,[_[0],j[1]],[0,j[1]]);var w=_[1].slice(j[1].length);return w.length>0&&M.splice(S+2,0,[_[0],w]),p(M,S,3)}else return t}function s(t){for(var y=!1,k=function(_){return _.charCodeAt(0)>=56320&&_.charCodeAt(0)<=57343},M=function(_){return _.charCodeAt(_.length-1)>=55296&&_.charCodeAt(_.length-1)<=56319},S=2;S<t.length;S+=1)t[S-2][0]===x&&M(t[S-2][1])&&t[S-1][0]===o&&k(t[S-1][1])&&t[S][0]===E&&k(t[S][1])&&(y=!0,t[S-1][1]=t[S-2][1].slice(-1)+t[S-1][1],t[S][1]=t[S-2][1].slice(-1)+t[S][1],t[S-2][1]=t[S-2][1].slice(0,-1));if(!y)return t;for(var j=[],S=0;S<t.length;S+=1)t[S][1].length>0&&j.push(t[S]);return j}function p(t,y,k){for(var M=y+k-1;M>=0&&M>=y-1;M--)if(M+1<t.length){var S=t[M],j=t[M+1];S[0]===j[1]&&t.splice(M,2,[S[0],S[1]+j[1]])}return t}},function(v,l){l=v.exports=typeof Object.keys=="function"?Object.keys:o,l.shim=o;function o(E){var x=[];for(var g in E)x.push(g);return x}},function(v,l){var o=function(){return Object.prototype.toString.call(arguments)}()=="[object Arguments]";l=v.exports=o?E:x,l.supported=E;function E(g){return Object.prototype.toString.call(g)=="[object Arguments]"}l.unsupported=x;function x(g){return g&&typeof g=="object"&&typeof g.length=="number"&&Object.prototype.hasOwnProperty.call(g,"callee")&&!Object.prototype.propertyIsEnumerable.call(g,"callee")||!1}},function(v,l){var o=Object.prototype.hasOwnProperty,E="~";function x(){}Object.create&&(x.prototype=Object.create(null),new x().__proto__||(E=!1));function g(b,d,r){this.fn=b,this.context=d,this.once=r||!1}function h(){this._events=new x,this._eventsCount=0}h.prototype.eventNames=function(){var d=[],r,e;if(this._eventsCount===0)return d;for(e in r=this._events)o.call(r,e)&&d.push(E?e.slice(1):e);return Object.getOwnPropertySymbols?d.concat(Object.getOwnPropertySymbols(r)):d},h.prototype.listeners=function(d,r){var e=E?E+d:d,a=this._events[e];if(r)return!!a;if(!a)return[];if(a.fn)return[a.fn];for(var f=0,c=a.length,i=new Array(c);f<c;f++)i[f]=a[f].fn;return i},h.prototype.emit=function(d,r,e,a,f,c){var i=E?E+d:d;if(!this._events[i])return!1;var u=this._events[i],s=arguments.length,p,t;if(u.fn){switch(u.once&&this.removeListener(d,u.fn,void 0,!0),s){case 1:return u.fn.call(u.context),!0;case 2:return u.fn.call(u.context,r),!0;case 3:return u.fn.call(u.context,r,e),!0;case 4:return u.fn.call(u.context,r,e,a),!0;case 5:return u.fn.call(u.context,r,e,a,f),!0;case 6:return u.fn.call(u.context,r,e,a,f,c),!0}for(t=1,p=new Array(s-1);t<s;t++)p[t-1]=arguments[t];u.fn.apply(u.context,p)}else{var y=u.length,k;for(t=0;t<y;t++)switch(u[t].once&&this.removeListener(d,u[t].fn,void 0,!0),s){case 1:u[t].fn.call(u[t].context);break;case 2:u[t].fn.call(u[t].context,r);break;case 3:u[t].fn.call(u[t].context,r,e);break;case 4:u[t].fn.call(u[t].context,r,e,a);break;default:if(!p)for(k=1,p=new Array(s-1);k<s;k++)p[k-1]=arguments[k];u[t].fn.apply(u[t].context,p)}}return!0},h.prototype.on=function(d,r,e){var a=new g(r,e||this),f=E?E+d:d;return this._events[f]?this._events[f].fn?this._events[f]=[this._events[f],a]:this._events[f].push(a):(this._events[f]=a,this._eventsCount++),this},h.prototype.once=function(d,r,e){var a=new g(r,e||this,!0),f=E?E+d:d;return this._events[f]?this._events[f].fn?this._events[f]=[this._events[f],a]:this._events[f].push(a):(this._events[f]=a,this._eventsCount++),this},h.prototype.removeListener=function(d,r,e,a){var f=E?E+d:d;if(!this._events[f])return this;if(!r)return--this._eventsCount===0?this._events=new x:delete this._events[f],this;var c=this._events[f];if(c.fn)c.fn===r&&(!a||c.once)&&(!e||c.context===e)&&(--this._eventsCount===0?this._events=new x:delete this._events[f]);else{for(var i=0,u=[],s=c.length;i<s;i++)(c[i].fn!==r||a&&!c[i].once||e&&c[i].context!==e)&&u.push(c[i]);u.length?this._events[f]=u.length===1?u[0]:u:--this._eventsCount===0?this._events=new x:delete this._events[f]}return this},h.prototype.removeAllListeners=function(d){var r;return d?(r=E?E+d:d,this._events[r]&&(--this._eventsCount===0?this._events=new x:delete this._events[r])):(this._events=new x,this._eventsCount=0),this},h.prototype.off=h.prototype.removeListener,h.prototype.addListener=h.prototype.on,h.prototype.setMaxListeners=function(){return this},h.prefixed=E,h.EventEmitter=h,typeof v<"u"&&(v.exports=h)},function(v,l,o){Object.defineProperty(l,"__esModule",{value:!0}),l.matchText=l.matchSpacing=l.matchNewline=l.matchBlot=l.matchAttributor=l.default=void 0;var E=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(G){return typeof G}:function(G){return G&&typeof Symbol=="function"&&G.constructor===Symbol&&G!==Symbol.prototype?"symbol":typeof G},x=function(){function G(Z,X){var te=[],Q=!0,se=!1,ue=void 0;try{for(var fe=Z[Symbol.iterator](),Me;!(Q=(Me=fe.next()).done)&&(te.push(Me.value),!(X&&te.length===X));Q=!0);}catch(qe){se=!0,ue=qe}finally{try{!Q&&fe.return&&fe.return()}finally{if(se)throw ue}}return te}return function(Z,X){if(Array.isArray(Z))return Z;if(Symbol.iterator in Object(Z))return G(Z,X);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),g=function(){function G(Z,X){for(var te=0;te<X.length;te++){var Q=X[te];Q.enumerable=Q.enumerable||!1,Q.configurable=!0,"value"in Q&&(Q.writable=!0),Object.defineProperty(Z,Q.key,Q)}}return function(Z,X,te){return X&&G(Z.prototype,X),te&&G(Z,te),Z}}(),h=o(3),b=A(h),d=o(2),r=A(d),e=o(0),a=A(e),f=o(5),c=A(f),i=o(10),u=A(i),s=o(9),p=A(s),t=o(36),y=o(37),k=o(13),M=A(k),S=o(26),j=o(38),_=o(39),w=o(40);function A(G){return G&&G.__esModule?G:{default:G}}function T(G,Z,X){return Z in G?Object.defineProperty(G,Z,{value:X,enumerable:!0,configurable:!0,writable:!0}):G[Z]=X,G}function N(G,Z){if(!(G instanceof Z))throw new TypeError("Cannot call a class as a function")}function R(G,Z){if(!G)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return Z&&(typeof Z=="object"||typeof Z=="function")?Z:G}function I(G,Z){if(typeof Z!="function"&&Z!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof Z);G.prototype=Object.create(Z&&Z.prototype,{constructor:{value:G,enumerable:!1,writable:!0,configurable:!0}}),Z&&(Object.setPrototypeOf?Object.setPrototypeOf(G,Z):G.__proto__=Z)}var F=(0,u.default)("quill:clipboard"),V="__ql-matcher",B=[[Node.TEXT_NODE,we],[Node.TEXT_NODE,de],["br",ne],[Node.ELEMENT_NODE,de],[Node.ELEMENT_NODE,K],[Node.ELEMENT_NODE,he],[Node.ELEMENT_NODE,$],[Node.ELEMENT_NODE,_e],["li",le],["b",H.bind(H,"bold")],["i",H.bind(H,"italic")],["style",ie]],q=[t.AlignAttribute,j.DirectionAttribute].reduce(function(G,Z){return G[Z.keyName]=Z,G},{}),C=[t.AlignStyle,y.BackgroundStyle,S.ColorStyle,j.DirectionStyle,_.FontStyle,w.SizeStyle].reduce(function(G,Z){return G[Z.keyName]=Z,G},{}),P=function(G){I(Z,G);function Z(X,te){N(this,Z);var Q=R(this,(Z.__proto__||Object.getPrototypeOf(Z)).call(this,X,te));return Q.quill.root.addEventListener("paste",Q.onPaste.bind(Q)),Q.container=Q.quill.addContainer("ql-clipboard"),Q.container.setAttribute("contenteditable",!0),Q.container.setAttribute("tabindex",-1),Q.matchers=[],B.concat(Q.options.matchers).forEach(function(se){var ue=x(se,2),fe=ue[0],Me=ue[1];!te.matchVisual&&Me===he||Q.addMatcher(fe,Me)}),Q}return g(Z,[{key:"addMatcher",value:function(te,Q){this.matchers.push([te,Q])}},{key:"convert",value:function(te){if(typeof te=="string")return this.container.innerHTML=te.replace(/\>\r?\n +\</g,"><"),this.convert();var Q=this.quill.getFormat(this.quill.selection.savedRange.index);if(Q[M.default.blotName]){var se=this.container.innerText;return this.container.innerHTML="",new r.default().insert(se,T({},M.default.blotName,Q[M.default.blotName]))}var ue=this.prepareMatching(),fe=x(ue,2),Me=fe[0],qe=fe[1],me=U(this.container,Me,qe);return z(me,`
`)&&me.ops[me.ops.length-1].attributes==null&&(me=me.compose(new r.default().retain(me.length()-1).delete(1))),F.log("convert",this.container.innerHTML,me),this.container.innerHTML="",me}},{key:"dangerouslyPasteHTML",value:function(te,Q){var se=arguments.length>2&&arguments[2]!==void 0?arguments[2]:c.default.sources.API;if(typeof te=="string")this.quill.setContents(this.convert(te),Q),this.quill.setSelection(0,c.default.sources.SILENT);else{var ue=this.convert(Q);this.quill.updateContents(new r.default().retain(te).concat(ue),se),this.quill.setSelection(te+ue.length(),c.default.sources.SILENT)}}},{key:"onPaste",value:function(te){var Q=this;if(!(te.defaultPrevented||!this.quill.isEnabled())){var se=this.quill.getSelection(),ue=new r.default().retain(se.index),fe=this.quill.scrollingContainer.scrollTop;this.container.focus(),this.quill.selection.update(c.default.sources.SILENT),setTimeout(function(){ue=ue.concat(Q.convert()).delete(se.length),Q.quill.updateContents(ue,c.default.sources.USER),Q.quill.setSelection(ue.length()-se.length,c.default.sources.SILENT),Q.quill.scrollingContainer.scrollTop=fe,Q.quill.focus()},1)}}},{key:"prepareMatching",value:function(){var te=this,Q=[],se=[];return this.matchers.forEach(function(ue){var fe=x(ue,2),Me=fe[0],qe=fe[1];switch(Me){case Node.TEXT_NODE:se.push(qe);break;case Node.ELEMENT_NODE:Q.push(qe);break;default:[].forEach.call(te.container.querySelectorAll(Me),function(me){me[V]=me[V]||[],me[V].push(qe)});break}}),[Q,se]}}]),Z}(p.default);P.DEFAULTS={matchers:[],matchVisual:!0};function L(G,Z,X){return(typeof Z>"u"?"undefined":E(Z))==="object"?Object.keys(Z).reduce(function(te,Q){return L(te,Q,Z[Q])},G):G.reduce(function(te,Q){return Q.attributes&&Q.attributes[Z]?te.push(Q):te.insert(Q.insert,(0,b.default)({},T({},Z,X),Q.attributes))},new r.default)}function W(G){if(G.nodeType!==Node.ELEMENT_NODE)return{};var Z="__ql-computed-style";return G[Z]||(G[Z]=window.getComputedStyle(G))}function z(G,Z){for(var X="",te=G.ops.length-1;te>=0&&X.length<Z.length;--te){var Q=G.ops[te];if(typeof Q.insert!="string")break;X=Q.insert+X}return X.slice(-1*Z.length)===Z}function D(G){if(G.childNodes.length===0)return!1;var Z=W(G);return["block","list-item"].indexOf(Z.display)>-1}function U(G,Z,X){return G.nodeType===G.TEXT_NODE?X.reduce(function(te,Q){return Q(G,te)},new r.default):G.nodeType===G.ELEMENT_NODE?[].reduce.call(G.childNodes||[],function(te,Q){var se=U(Q,Z,X);return Q.nodeType===G.ELEMENT_NODE&&(se=Z.reduce(function(ue,fe){return fe(Q,ue)},se),se=(Q[V]||[]).reduce(function(ue,fe){return fe(Q,ue)},se)),te.concat(se)},new r.default):new r.default}function H(G,Z,X){return L(X,G,!0)}function $(G,Z){var X=a.default.Attributor.Attribute.keys(G),te=a.default.Attributor.Class.keys(G),Q=a.default.Attributor.Style.keys(G),se={};return X.concat(te).concat(Q).forEach(function(ue){var fe=a.default.query(ue,a.default.Scope.ATTRIBUTE);fe!=null&&(se[fe.attrName]=fe.value(G),se[fe.attrName])||(fe=q[ue],fe!=null&&(fe.attrName===ue||fe.keyName===ue)&&(se[fe.attrName]=fe.value(G)||void 0),fe=C[ue],fe!=null&&(fe.attrName===ue||fe.keyName===ue)&&(fe=C[ue],se[fe.attrName]=fe.value(G)||void 0))}),Object.keys(se).length>0&&(Z=L(Z,se)),Z}function K(G,Z){var X=a.default.query(G);if(X==null)return Z;if(X.prototype instanceof a.default.Embed){var te={},Q=X.value(G);Q!=null&&(te[X.blotName]=Q,Z=new r.default().insert(te,X.formats(G)))}else typeof X.formats=="function"&&(Z=L(Z,X.blotName,X.formats(G)));return Z}function ne(G,Z){return z(Z,`
`)||Z.insert(`
`),Z}function ie(){return new r.default}function le(G,Z){var X=a.default.query(G);if(X==null||X.blotName!=="list-item"||!z(Z,`
`))return Z;for(var te=-1,Q=G.parentNode;!Q.classList.contains("ql-clipboard");)(a.default.query(Q)||{}).blotName==="list"&&(te+=1),Q=Q.parentNode;return te<=0?Z:Z.compose(new r.default().retain(Z.length()-1).retain(1,{indent:te}))}function de(G,Z){return z(Z,`
`)||(D(G)||Z.length()>0&&G.nextSibling&&D(G.nextSibling))&&Z.insert(`
`),Z}function he(G,Z){if(D(G)&&G.nextElementSibling!=null&&!z(Z,`

`)){var X=G.offsetHeight+parseFloat(W(G).marginTop)+parseFloat(W(G).marginBottom);G.nextElementSibling.offsetTop>G.offsetTop+X*1.5&&Z.insert(`
`)}return Z}function _e(G,Z){var X={},te=G.style||{};return te.fontStyle&&W(G).fontStyle==="italic"&&(X.italic=!0),te.fontWeight&&(W(G).fontWeight.startsWith("bold")||parseInt(W(G).fontWeight)>=700)&&(X.bold=!0),Object.keys(X).length>0&&(Z=L(Z,X)),parseFloat(te.textIndent||0)>0&&(Z=new r.default().insert("	").concat(Z)),Z}function we(G,Z){var X=G.data;if(G.parentNode.tagName==="O:P")return Z.insert(X.trim());if(X.trim().length===0&&G.parentNode.classList.contains("ql-clipboard"))return Z;if(!W(G.parentNode).whiteSpace.startsWith("pre")){var te=function(se,ue){return ue=ue.replace(/[^\u00a0]/g,""),ue.length<1&&se?" ":ue};X=X.replace(/\r\n/g," ").replace(/\n/g," "),X=X.replace(/\s\s+/g,te.bind(te,!0)),(G.previousSibling==null&&D(G.parentNode)||G.previousSibling!=null&&D(G.previousSibling))&&(X=X.replace(/^\s+/,te.bind(te,!1))),(G.nextSibling==null&&D(G.parentNode)||G.nextSibling!=null&&D(G.nextSibling))&&(X=X.replace(/\s+$/,te.bind(te,!1)))}return Z.insert(X)}l.default=P,l.matchAttributor=$,l.matchBlot=K,l.matchNewline=de,l.matchSpacing=he,l.matchText=we},function(v,l,o){Object.defineProperty(l,"__esModule",{value:!0});var E=function(){function f(c,i){for(var u=0;u<i.length;u++){var s=i[u];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(c,s.key,s)}}return function(c,i,u){return i&&f(c.prototype,i),u&&f(c,u),c}}(),x=function f(c,i,u){c===null&&(c=Function.prototype);var s=Object.getOwnPropertyDescriptor(c,i);if(s===void 0){var p=Object.getPrototypeOf(c);return p===null?void 0:f(p,i,u)}else{if("value"in s)return s.value;var t=s.get;return t===void 0?void 0:t.call(u)}},g=o(6),h=b(g);function b(f){return f&&f.__esModule?f:{default:f}}function d(f,c){if(!(f instanceof c))throw new TypeError("Cannot call a class as a function")}function r(f,c){if(!f)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return c&&(typeof c=="object"||typeof c=="function")?c:f}function e(f,c){if(typeof c!="function"&&c!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof c);f.prototype=Object.create(c&&c.prototype,{constructor:{value:f,enumerable:!1,writable:!0,configurable:!0}}),c&&(Object.setPrototypeOf?Object.setPrototypeOf(f,c):f.__proto__=c)}var a=function(f){e(c,f);function c(){return d(this,c),r(this,(c.__proto__||Object.getPrototypeOf(c)).apply(this,arguments))}return E(c,[{key:"optimize",value:function(u){x(c.prototype.__proto__||Object.getPrototypeOf(c.prototype),"optimize",this).call(this,u),this.domNode.tagName!==this.statics.tagName[0]&&this.replaceWith(this.statics.blotName)}}],[{key:"create",value:function(){return x(c.__proto__||Object.getPrototypeOf(c),"create",this).call(this)}},{key:"formats",value:function(){return!0}}]),c}(h.default);a.blotName="bold",a.tagName=["STRONG","B"],l.default=a},function(v,l,o){Object.defineProperty(l,"__esModule",{value:!0}),l.addControls=l.default=void 0;var E=function(){function w(A,T){var N=[],R=!0,I=!1,F=void 0;try{for(var V=A[Symbol.iterator](),B;!(R=(B=V.next()).done)&&(N.push(B.value),!(T&&N.length===T));R=!0);}catch(q){I=!0,F=q}finally{try{!R&&V.return&&V.return()}finally{if(I)throw F}}return N}return function(A,T){if(Array.isArray(A))return A;if(Symbol.iterator in Object(A))return w(A,T);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),x=function(){function w(A,T){for(var N=0;N<T.length;N++){var R=T[N];R.enumerable=R.enumerable||!1,R.configurable=!0,"value"in R&&(R.writable=!0),Object.defineProperty(A,R.key,R)}}return function(A,T,N){return T&&w(A.prototype,T),N&&w(A,N),A}}(),g=o(2),h=u(g),b=o(0),d=u(b),r=o(5),e=u(r),a=o(10),f=u(a),c=o(9),i=u(c);function u(w){return w&&w.__esModule?w:{default:w}}function s(w,A,T){return A in w?Object.defineProperty(w,A,{value:T,enumerable:!0,configurable:!0,writable:!0}):w[A]=T,w}function p(w,A){if(!(w instanceof A))throw new TypeError("Cannot call a class as a function")}function t(w,A){if(!w)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return A&&(typeof A=="object"||typeof A=="function")?A:w}function y(w,A){if(typeof A!="function"&&A!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof A);w.prototype=Object.create(A&&A.prototype,{constructor:{value:w,enumerable:!1,writable:!0,configurable:!0}}),A&&(Object.setPrototypeOf?Object.setPrototypeOf(w,A):w.__proto__=A)}var k=(0,f.default)("quill:toolbar"),M=function(w){y(A,w);function A(T,N){p(this,A);var R=t(this,(A.__proto__||Object.getPrototypeOf(A)).call(this,T,N));if(Array.isArray(R.options.container)){var I=document.createElement("div");j(I,R.options.container),T.container.parentNode.insertBefore(I,T.container),R.container=I}else typeof R.options.container=="string"?R.container=document.querySelector(R.options.container):R.container=R.options.container;if(!(R.container instanceof HTMLElement)){var F;return F=k.error("Container required for toolbar",R.options),t(R,F)}return R.container.classList.add("ql-toolbar"),R.controls=[],R.handlers={},Object.keys(R.options.handlers).forEach(function(V){R.addHandler(V,R.options.handlers[V])}),[].forEach.call(R.container.querySelectorAll("button, select"),function(V){R.attach(V)}),R.quill.on(e.default.events.EDITOR_CHANGE,function(V,B){V===e.default.events.SELECTION_CHANGE&&R.update(B)}),R.quill.on(e.default.events.SCROLL_OPTIMIZE,function(){var V=R.quill.selection.getRange(),B=E(V,1),q=B[0];R.update(q)}),R}return x(A,[{key:"addHandler",value:function(N,R){this.handlers[N]=R}},{key:"attach",value:function(N){var R=this,I=[].find.call(N.classList,function(V){return V.indexOf("ql-")===0});if(I){if(I=I.slice(3),N.tagName==="BUTTON"&&N.setAttribute("type","button"),this.handlers[I]==null){if(this.quill.scroll.whitelist!=null&&this.quill.scroll.whitelist[I]==null){k.warn("ignoring attaching to disabled format",I,N);return}if(d.default.query(I)==null){k.warn("ignoring attaching to nonexistent format",I,N);return}}var F=N.tagName==="SELECT"?"change":"click";N.addEventListener(F,function(V){var B=void 0;if(N.tagName==="SELECT"){if(N.selectedIndex<0)return;var q=N.options[N.selectedIndex];q.hasAttribute("selected")?B=!1:B=q.value||!1}else N.classList.contains("ql-active")?B=!1:B=N.value||!N.hasAttribute("value"),V.preventDefault();R.quill.focus();var C=R.quill.selection.getRange(),P=E(C,1),L=P[0];if(R.handlers[I]!=null)R.handlers[I].call(R,B);else if(d.default.query(I).prototype instanceof d.default.Embed){if(B=prompt("Enter "+I),!B)return;R.quill.updateContents(new h.default().retain(L.index).delete(L.length).insert(s({},I,B)),e.default.sources.USER)}else R.quill.format(I,B,e.default.sources.USER);R.update(L)}),this.controls.push([I,N])}}},{key:"update",value:function(N){var R=N==null?{}:this.quill.getFormat(N);this.controls.forEach(function(I){var F=E(I,2),V=F[0],B=F[1];if(B.tagName==="SELECT"){var q=void 0;if(N==null)q=null;else if(R[V]==null)q=B.querySelector("option[selected]");else if(!Array.isArray(R[V])){var C=R[V];typeof C=="string"&&(C=C.replace(/\"/g,'\\"')),q=B.querySelector('option[value="'+C+'"]')}q==null?(B.value="",B.selectedIndex=-1):q.selected=!0}else if(N==null)B.classList.remove("ql-active");else if(B.hasAttribute("value")){var P=R[V]===B.getAttribute("value")||R[V]!=null&&R[V].toString()===B.getAttribute("value")||R[V]==null&&!B.getAttribute("value");B.classList.toggle("ql-active",P)}else B.classList.toggle("ql-active",R[V]!=null)})}}]),A}(i.default);M.DEFAULTS={};function S(w,A,T){var N=document.createElement("button");N.setAttribute("type","button"),N.classList.add("ql-"+A),T!=null&&(N.value=T),w.appendChild(N)}function j(w,A){Array.isArray(A[0])||(A=[A]),A.forEach(function(T){var N=document.createElement("span");N.classList.add("ql-formats"),T.forEach(function(R){if(typeof R=="string")S(N,R);else{var I=Object.keys(R)[0],F=R[I];Array.isArray(F)?_(N,I,F):S(N,I,F)}}),w.appendChild(N)})}function _(w,A,T){var N=document.createElement("select");N.classList.add("ql-"+A),T.forEach(function(R){var I=document.createElement("option");R!==!1?I.setAttribute("value",R):I.setAttribute("selected","selected"),N.appendChild(I)}),w.appendChild(N)}M.DEFAULTS={container:null,handlers:{clean:function(){var A=this,T=this.quill.getSelection();if(T!=null)if(T.length==0){var N=this.quill.getFormat();Object.keys(N).forEach(function(R){d.default.query(R,d.default.Scope.INLINE)!=null&&A.quill.format(R,!1)})}else this.quill.removeFormat(T,e.default.sources.USER)},direction:function(A){var T=this.quill.getFormat().align;A==="rtl"&&T==null?this.quill.format("align","right",e.default.sources.USER):!A&&T==="right"&&this.quill.format("align",!1,e.default.sources.USER),this.quill.format("direction",A,e.default.sources.USER)},indent:function(A){var T=this.quill.getSelection(),N=this.quill.getFormat(T),R=parseInt(N.indent||0);if(A==="+1"||A==="-1"){var I=A==="+1"?1:-1;N.direction==="rtl"&&(I*=-1),this.quill.format("indent",R+I,e.default.sources.USER)}},link:function(A){A===!0&&(A=prompt("Enter link URL:")),this.quill.format("link",A,e.default.sources.USER)},list:function(A){var T=this.quill.getSelection(),N=this.quill.getFormat(T);A==="check"?N.list==="checked"||N.list==="unchecked"?this.quill.format("list",!1,e.default.sources.USER):this.quill.format("list","unchecked",e.default.sources.USER):this.quill.format("list",A,e.default.sources.USER)}}},l.default=M,l.addControls=j},function(v,l){v.exports='<svg viewbox="0 0 18 18"> <polyline class="ql-even ql-stroke" points="5 7 3 9 5 11"></polyline> <polyline class="ql-even ql-stroke" points="13 7 15 9 13 11"></polyline> <line class=ql-stroke x1=10 x2=8 y1=5 y2=13></line> </svg>'},function(v,l,o){Object.defineProperty(l,"__esModule",{value:!0});var E=function(){function f(c,i){for(var u=0;u<i.length;u++){var s=i[u];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(c,s.key,s)}}return function(c,i,u){return i&&f(c.prototype,i),u&&f(c,u),c}}(),x=function f(c,i,u){c===null&&(c=Function.prototype);var s=Object.getOwnPropertyDescriptor(c,i);if(s===void 0){var p=Object.getPrototypeOf(c);return p===null?void 0:f(p,i,u)}else{if("value"in s)return s.value;var t=s.get;return t===void 0?void 0:t.call(u)}},g=o(28),h=b(g);function b(f){return f&&f.__esModule?f:{default:f}}function d(f,c){if(!(f instanceof c))throw new TypeError("Cannot call a class as a function")}function r(f,c){if(!f)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return c&&(typeof c=="object"||typeof c=="function")?c:f}function e(f,c){if(typeof c!="function"&&c!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof c);f.prototype=Object.create(c&&c.prototype,{constructor:{value:f,enumerable:!1,writable:!0,configurable:!0}}),c&&(Object.setPrototypeOf?Object.setPrototypeOf(f,c):f.__proto__=c)}var a=function(f){e(c,f);function c(i,u){d(this,c);var s=r(this,(c.__proto__||Object.getPrototypeOf(c)).call(this,i));return s.label.innerHTML=u,s.container.classList.add("ql-color-picker"),[].slice.call(s.container.querySelectorAll(".ql-picker-item"),0,7).forEach(function(p){p.classList.add("ql-primary")}),s}return E(c,[{key:"buildItem",value:function(u){var s=x(c.prototype.__proto__||Object.getPrototypeOf(c.prototype),"buildItem",this).call(this,u);return s.style.backgroundColor=u.getAttribute("value")||"",s}},{key:"selectItem",value:function(u,s){x(c.prototype.__proto__||Object.getPrototypeOf(c.prototype),"selectItem",this).call(this,u,s);var p=this.label.querySelector(".ql-color-label"),t=u&&u.getAttribute("data-value")||"";p&&(p.tagName==="line"?p.style.stroke=t:p.style.fill=t)}}]),c}(h.default);l.default=a},function(v,l,o){Object.defineProperty(l,"__esModule",{value:!0});var E=function(){function f(c,i){for(var u=0;u<i.length;u++){var s=i[u];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(c,s.key,s)}}return function(c,i,u){return i&&f(c.prototype,i),u&&f(c,u),c}}(),x=function f(c,i,u){c===null&&(c=Function.prototype);var s=Object.getOwnPropertyDescriptor(c,i);if(s===void 0){var p=Object.getPrototypeOf(c);return p===null?void 0:f(p,i,u)}else{if("value"in s)return s.value;var t=s.get;return t===void 0?void 0:t.call(u)}},g=o(28),h=b(g);function b(f){return f&&f.__esModule?f:{default:f}}function d(f,c){if(!(f instanceof c))throw new TypeError("Cannot call a class as a function")}function r(f,c){if(!f)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return c&&(typeof c=="object"||typeof c=="function")?c:f}function e(f,c){if(typeof c!="function"&&c!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof c);f.prototype=Object.create(c&&c.prototype,{constructor:{value:f,enumerable:!1,writable:!0,configurable:!0}}),c&&(Object.setPrototypeOf?Object.setPrototypeOf(f,c):f.__proto__=c)}var a=function(f){e(c,f);function c(i,u){d(this,c);var s=r(this,(c.__proto__||Object.getPrototypeOf(c)).call(this,i));return s.container.classList.add("ql-icon-picker"),[].forEach.call(s.container.querySelectorAll(".ql-picker-item"),function(p){p.innerHTML=u[p.getAttribute("data-value")||""]}),s.defaultItem=s.container.querySelector(".ql-selected"),s.selectItem(s.defaultItem),s}return E(c,[{key:"selectItem",value:function(u,s){x(c.prototype.__proto__||Object.getPrototypeOf(c.prototype),"selectItem",this).call(this,u,s),u=u||this.defaultItem,this.label.innerHTML=u.innerHTML}}]),c}(h.default);l.default=a},function(v,l,o){Object.defineProperty(l,"__esModule",{value:!0});var E=function(){function h(b,d){for(var r=0;r<d.length;r++){var e=d[r];e.enumerable=e.enumerable||!1,e.configurable=!0,"value"in e&&(e.writable=!0),Object.defineProperty(b,e.key,e)}}return function(b,d,r){return d&&h(b.prototype,d),r&&h(b,r),b}}();function x(h,b){if(!(h instanceof b))throw new TypeError("Cannot call a class as a function")}var g=function(){function h(b,d){var r=this;x(this,h),this.quill=b,this.boundsContainer=d||document.body,this.root=b.addContainer("ql-tooltip"),this.root.innerHTML=this.constructor.TEMPLATE,this.quill.root===this.quill.scrollingContainer&&this.quill.root.addEventListener("scroll",function(){r.root.style.marginTop=-1*r.quill.root.scrollTop+"px"}),this.hide()}return E(h,[{key:"hide",value:function(){this.root.classList.add("ql-hidden")}},{key:"position",value:function(d){var r=d.left+d.width/2-this.root.offsetWidth/2,e=d.bottom+this.quill.root.scrollTop;this.root.style.left=r+"px",this.root.style.top=e+"px",this.root.classList.remove("ql-flip");var a=this.boundsContainer.getBoundingClientRect(),f=this.root.getBoundingClientRect(),c=0;if(f.right>a.right&&(c=a.right-f.right,this.root.style.left=r+c+"px"),f.left<a.left&&(c=a.left-f.left,this.root.style.left=r+c+"px"),f.bottom>a.bottom){var i=f.bottom-f.top,u=d.bottom-d.top+i;this.root.style.top=e-u+"px",this.root.classList.add("ql-flip")}return c}},{key:"show",value:function(){this.root.classList.remove("ql-editing"),this.root.classList.remove("ql-hidden")}}]),h}();l.default=g},function(v,l,o){Object.defineProperty(l,"__esModule",{value:!0});var E=function(){function _(w,A){var T=[],N=!0,R=!1,I=void 0;try{for(var F=w[Symbol.iterator](),V;!(N=(V=F.next()).done)&&(T.push(V.value),!(A&&T.length===A));N=!0);}catch(B){R=!0,I=B}finally{try{!N&&F.return&&F.return()}finally{if(R)throw I}}return T}return function(w,A){if(Array.isArray(w))return w;if(Symbol.iterator in Object(w))return _(w,A);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),x=function _(w,A,T){w===null&&(w=Function.prototype);var N=Object.getOwnPropertyDescriptor(w,A);if(N===void 0){var R=Object.getPrototypeOf(w);return R===null?void 0:_(R,A,T)}else{if("value"in N)return N.value;var I=N.get;return I===void 0?void 0:I.call(T)}},g=function(){function _(w,A){for(var T=0;T<A.length;T++){var N=A[T];N.enumerable=N.enumerable||!1,N.configurable=!0,"value"in N&&(N.writable=!0),Object.defineProperty(w,N.key,N)}}return function(w,A,T){return A&&_(w.prototype,A),T&&_(w,T),w}}(),h=o(3),b=p(h),d=o(8),r=p(d),e=o(43),a=p(e),f=o(27),c=p(f),i=o(15),u=o(41),s=p(u);function p(_){return _&&_.__esModule?_:{default:_}}function t(_,w){if(!(_ instanceof w))throw new TypeError("Cannot call a class as a function")}function y(_,w){if(!_)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return w&&(typeof w=="object"||typeof w=="function")?w:_}function k(_,w){if(typeof w!="function"&&w!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof w);_.prototype=Object.create(w&&w.prototype,{constructor:{value:_,enumerable:!1,writable:!0,configurable:!0}}),w&&(Object.setPrototypeOf?Object.setPrototypeOf(_,w):_.__proto__=w)}var M=[[{header:["1","2","3",!1]}],["bold","italic","underline","link"],[{list:"ordered"},{list:"bullet"}],["clean"]],S=function(_){k(w,_);function w(A,T){t(this,w),T.modules.toolbar!=null&&T.modules.toolbar.container==null&&(T.modules.toolbar.container=M);var N=y(this,(w.__proto__||Object.getPrototypeOf(w)).call(this,A,T));return N.quill.container.classList.add("ql-snow"),N}return g(w,[{key:"extendToolbar",value:function(T){T.container.classList.add("ql-snow"),this.buildButtons([].slice.call(T.container.querySelectorAll("button")),s.default),this.buildPickers([].slice.call(T.container.querySelectorAll("select")),s.default),this.tooltip=new j(this.quill,this.options.bounds),T.container.querySelector(".ql-link")&&this.quill.keyboard.addBinding({key:"K",shortKey:!0},function(N,R){T.handlers.link.call(T,!R.format.link)})}}]),w}(a.default);S.DEFAULTS=(0,b.default)(!0,{},a.default.DEFAULTS,{modules:{toolbar:{handlers:{link:function(w){if(w){var A=this.quill.getSelection();if(A==null||A.length==0)return;var T=this.quill.getText(A);/^\S+@\S+\.\S+$/.test(T)&&T.indexOf("mailto:")!==0&&(T="mailto:"+T);var N=this.quill.theme.tooltip;N.edit("link",T)}else this.quill.format("link",!1)}}}}});var j=function(_){k(w,_);function w(A,T){t(this,w);var N=y(this,(w.__proto__||Object.getPrototypeOf(w)).call(this,A,T));return N.preview=N.root.querySelector("a.ql-preview"),N}return g(w,[{key:"listen",value:function(){var T=this;x(w.prototype.__proto__||Object.getPrototypeOf(w.prototype),"listen",this).call(this),this.root.querySelector("a.ql-action").addEventListener("click",function(N){T.root.classList.contains("ql-editing")?T.save():T.edit("link",T.preview.textContent),N.preventDefault()}),this.root.querySelector("a.ql-remove").addEventListener("click",function(N){if(T.linkRange!=null){var R=T.linkRange;T.restoreFocus(),T.quill.formatText(R,"link",!1,r.default.sources.USER),delete T.linkRange}N.preventDefault(),T.hide()}),this.quill.on(r.default.events.SELECTION_CHANGE,function(N,R,I){if(N!=null){if(N.length===0&&I===r.default.sources.USER){var F=T.quill.scroll.descendant(c.default,N.index),V=E(F,2),B=V[0],q=V[1];if(B!=null){T.linkRange=new i.Range(N.index-q,B.length());var C=c.default.formats(B.domNode);T.preview.textContent=C,T.preview.setAttribute("href",C),T.show(),T.position(T.quill.getBounds(T.linkRange));return}}else delete T.linkRange;T.hide()}})}},{key:"show",value:function(){x(w.prototype.__proto__||Object.getPrototypeOf(w.prototype),"show",this).call(this),this.root.removeAttribute("data-mode")}}]),w}(e.BaseTooltip);j.TEMPLATE=['<a class="ql-preview" rel="noopener noreferrer" target="_blank" href="about:blank"></a>','<input type="text" data-formula="e=mc^2" data-link="https://quilljs.com" data-video="Embed URL">','<a class="ql-action"></a>','<a class="ql-remove"></a>'].join(""),l.default=S},function(v,l,o){Object.defineProperty(l,"__esModule",{value:!0});var E=o(29),x=Q(E),g=o(36),h=o(38),b=o(64),d=o(65),r=Q(d),e=o(66),a=Q(e),f=o(67),c=Q(f),i=o(37),u=o(26),s=o(39),p=o(40),t=o(56),y=Q(t),k=o(68),M=Q(k),S=o(27),j=Q(S),_=o(69),w=Q(_),A=o(70),T=Q(A),N=o(71),R=Q(N),I=o(72),F=Q(I),V=o(73),B=Q(V),q=o(13),C=Q(q),P=o(74),L=Q(P),W=o(75),z=Q(W),D=o(57),U=Q(D),H=o(41),$=Q(H),K=o(28),ne=Q(K),ie=o(59),le=Q(ie),de=o(60),he=Q(de),_e=o(61),we=Q(_e),G=o(108),Z=Q(G),X=o(62),te=Q(X);function Q(se){return se&&se.__esModule?se:{default:se}}x.default.register({"attributors/attribute/direction":h.DirectionAttribute,"attributors/class/align":g.AlignClass,"attributors/class/background":i.BackgroundClass,"attributors/class/color":u.ColorClass,"attributors/class/direction":h.DirectionClass,"attributors/class/font":s.FontClass,"attributors/class/size":p.SizeClass,"attributors/style/align":g.AlignStyle,"attributors/style/background":i.BackgroundStyle,"attributors/style/color":u.ColorStyle,"attributors/style/direction":h.DirectionStyle,"attributors/style/font":s.FontStyle,"attributors/style/size":p.SizeStyle},!0),x.default.register({"formats/align":g.AlignClass,"formats/direction":h.DirectionClass,"formats/indent":b.IndentClass,"formats/background":i.BackgroundStyle,"formats/color":u.ColorStyle,"formats/font":s.FontClass,"formats/size":p.SizeClass,"formats/blockquote":r.default,"formats/code-block":C.default,"formats/header":a.default,"formats/list":c.default,"formats/bold":y.default,"formats/code":q.Code,"formats/italic":M.default,"formats/link":j.default,"formats/script":w.default,"formats/strike":T.default,"formats/underline":R.default,"formats/image":F.default,"formats/video":B.default,"formats/list/item":f.ListItem,"modules/formula":L.default,"modules/syntax":z.default,"modules/toolbar":U.default,"themes/bubble":Z.default,"themes/snow":te.default,"ui/icons":$.default,"ui/picker":ne.default,"ui/icon-picker":he.default,"ui/color-picker":le.default,"ui/tooltip":we.default},!0),l.default=x.default},function(v,l,o){Object.defineProperty(l,"__esModule",{value:!0}),l.IndentClass=void 0;var E=function(){function c(i,u){for(var s=0;s<u.length;s++){var p=u[s];p.enumerable=p.enumerable||!1,p.configurable=!0,"value"in p&&(p.writable=!0),Object.defineProperty(i,p.key,p)}}return function(i,u,s){return u&&c(i.prototype,u),s&&c(i,s),i}}(),x=function c(i,u,s){i===null&&(i=Function.prototype);var p=Object.getOwnPropertyDescriptor(i,u);if(p===void 0){var t=Object.getPrototypeOf(i);return t===null?void 0:c(t,u,s)}else{if("value"in p)return p.value;var y=p.get;return y===void 0?void 0:y.call(s)}},g=o(0),h=b(g);function b(c){return c&&c.__esModule?c:{default:c}}function d(c,i){if(!(c instanceof i))throw new TypeError("Cannot call a class as a function")}function r(c,i){if(!c)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return i&&(typeof i=="object"||typeof i=="function")?i:c}function e(c,i){if(typeof i!="function"&&i!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof i);c.prototype=Object.create(i&&i.prototype,{constructor:{value:c,enumerable:!1,writable:!0,configurable:!0}}),i&&(Object.setPrototypeOf?Object.setPrototypeOf(c,i):c.__proto__=i)}var a=function(c){e(i,c);function i(){return d(this,i),r(this,(i.__proto__||Object.getPrototypeOf(i)).apply(this,arguments))}return E(i,[{key:"add",value:function(s,p){if(p==="+1"||p==="-1"){var t=this.value(s)||0;p=p==="+1"?t+1:t-1}return p===0?(this.remove(s),!0):x(i.prototype.__proto__||Object.getPrototypeOf(i.prototype),"add",this).call(this,s,p)}},{key:"canAdd",value:function(s,p){return x(i.prototype.__proto__||Object.getPrototypeOf(i.prototype),"canAdd",this).call(this,s,p)||x(i.prototype.__proto__||Object.getPrototypeOf(i.prototype),"canAdd",this).call(this,s,parseInt(p))}},{key:"value",value:function(s){return parseInt(x(i.prototype.__proto__||Object.getPrototypeOf(i.prototype),"value",this).call(this,s))||void 0}}]),i}(h.default.Attributor.Class),f=new a("indent","ql-indent",{scope:h.default.Scope.BLOCK,whitelist:[1,2,3,4,5,6,7,8]});l.IndentClass=f},function(v,l,o){Object.defineProperty(l,"__esModule",{value:!0});var E=o(4),x=g(E);function g(e){return e&&e.__esModule?e:{default:e}}function h(e,a){if(!(e instanceof a))throw new TypeError("Cannot call a class as a function")}function b(e,a){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return a&&(typeof a=="object"||typeof a=="function")?a:e}function d(e,a){if(typeof a!="function"&&a!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof a);e.prototype=Object.create(a&&a.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),a&&(Object.setPrototypeOf?Object.setPrototypeOf(e,a):e.__proto__=a)}var r=function(e){d(a,e);function a(){return h(this,a),b(this,(a.__proto__||Object.getPrototypeOf(a)).apply(this,arguments))}return a}(x.default);r.blotName="blockquote",r.tagName="blockquote",l.default=r},function(v,l,o){Object.defineProperty(l,"__esModule",{value:!0});var E=function(){function a(f,c){for(var i=0;i<c.length;i++){var u=c[i];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(f,u.key,u)}}return function(f,c,i){return c&&a(f.prototype,c),i&&a(f,i),f}}(),x=o(4),g=h(x);function h(a){return a&&a.__esModule?a:{default:a}}function b(a,f){if(!(a instanceof f))throw new TypeError("Cannot call a class as a function")}function d(a,f){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return f&&(typeof f=="object"||typeof f=="function")?f:a}function r(a,f){if(typeof f!="function"&&f!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof f);a.prototype=Object.create(f&&f.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),f&&(Object.setPrototypeOf?Object.setPrototypeOf(a,f):a.__proto__=f)}var e=function(a){r(f,a);function f(){return b(this,f),d(this,(f.__proto__||Object.getPrototypeOf(f)).apply(this,arguments))}return E(f,null,[{key:"formats",value:function(i){return this.tagName.indexOf(i.tagName)+1}}]),f}(g.default);e.blotName="header",e.tagName=["H1","H2","H3","H4","H5","H6"],l.default=e},function(v,l,o){Object.defineProperty(l,"__esModule",{value:!0}),l.default=l.ListItem=void 0;var E=function(){function t(y,k){for(var M=0;M<k.length;M++){var S=k[M];S.enumerable=S.enumerable||!1,S.configurable=!0,"value"in S&&(S.writable=!0),Object.defineProperty(y,S.key,S)}}return function(y,k,M){return k&&t(y.prototype,k),M&&t(y,M),y}}(),x=function t(y,k,M){y===null&&(y=Function.prototype);var S=Object.getOwnPropertyDescriptor(y,k);if(S===void 0){var j=Object.getPrototypeOf(y);return j===null?void 0:t(j,k,M)}else{if("value"in S)return S.value;var _=S.get;return _===void 0?void 0:_.call(M)}},g=o(0),h=a(g),b=o(4),d=a(b),r=o(25),e=a(r);function a(t){return t&&t.__esModule?t:{default:t}}function f(t,y,k){return y in t?Object.defineProperty(t,y,{value:k,enumerable:!0,configurable:!0,writable:!0}):t[y]=k,t}function c(t,y){if(!(t instanceof y))throw new TypeError("Cannot call a class as a function")}function i(t,y){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return y&&(typeof y=="object"||typeof y=="function")?y:t}function u(t,y){if(typeof y!="function"&&y!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof y);t.prototype=Object.create(y&&y.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),y&&(Object.setPrototypeOf?Object.setPrototypeOf(t,y):t.__proto__=y)}var s=function(t){u(y,t);function y(){return c(this,y),i(this,(y.__proto__||Object.getPrototypeOf(y)).apply(this,arguments))}return E(y,[{key:"format",value:function(M,S){M===p.blotName&&!S?this.replaceWith(h.default.create(this.statics.scope)):x(y.prototype.__proto__||Object.getPrototypeOf(y.prototype),"format",this).call(this,M,S)}},{key:"remove",value:function(){this.prev==null&&this.next==null?this.parent.remove():x(y.prototype.__proto__||Object.getPrototypeOf(y.prototype),"remove",this).call(this)}},{key:"replaceWith",value:function(M,S){return this.parent.isolate(this.offset(this.parent),this.length()),M===this.parent.statics.blotName?(this.parent.replaceWith(M,S),this):(this.parent.unwrap(),x(y.prototype.__proto__||Object.getPrototypeOf(y.prototype),"replaceWith",this).call(this,M,S))}}],[{key:"formats",value:function(M){return M.tagName===this.tagName?void 0:x(y.__proto__||Object.getPrototypeOf(y),"formats",this).call(this,M)}}]),y}(d.default);s.blotName="list-item",s.tagName="LI";var p=function(t){u(y,t),E(y,null,[{key:"create",value:function(M){var S=M==="ordered"?"OL":"UL",j=x(y.__proto__||Object.getPrototypeOf(y),"create",this).call(this,S);return(M==="checked"||M==="unchecked")&&j.setAttribute("data-checked",M==="checked"),j}},{key:"formats",value:function(M){if(M.tagName==="OL")return"ordered";if(M.tagName==="UL")return M.hasAttribute("data-checked")?M.getAttribute("data-checked")==="true"?"checked":"unchecked":"bullet"}}]);function y(k){c(this,y);var M=i(this,(y.__proto__||Object.getPrototypeOf(y)).call(this,k)),S=function(_){if(_.target.parentNode===k){var w=M.statics.formats(k),A=h.default.find(_.target);w==="checked"?A.format("list","unchecked"):w==="unchecked"&&A.format("list","checked")}};return k.addEventListener("touchstart",S),k.addEventListener("mousedown",S),M}return E(y,[{key:"format",value:function(M,S){this.children.length>0&&this.children.tail.format(M,S)}},{key:"formats",value:function(){return f({},this.statics.blotName,this.statics.formats(this.domNode))}},{key:"insertBefore",value:function(M,S){if(M instanceof s)x(y.prototype.__proto__||Object.getPrototypeOf(y.prototype),"insertBefore",this).call(this,M,S);else{var j=S==null?this.length():S.offset(this),_=this.split(j);_.parent.insertBefore(M,_)}}},{key:"optimize",value:function(M){x(y.prototype.__proto__||Object.getPrototypeOf(y.prototype),"optimize",this).call(this,M);var S=this.next;S!=null&&S.prev===this&&S.statics.blotName===this.statics.blotName&&S.domNode.tagName===this.domNode.tagName&&S.domNode.getAttribute("data-checked")===this.domNode.getAttribute("data-checked")&&(S.moveChildren(this),S.remove())}},{key:"replace",value:function(M){if(M.statics.blotName!==this.statics.blotName){var S=h.default.create(this.statics.defaultChild);M.moveChildren(S),this.appendChild(S)}x(y.prototype.__proto__||Object.getPrototypeOf(y.prototype),"replace",this).call(this,M)}}]),y}(e.default);p.blotName="list",p.scope=h.default.Scope.BLOCK_BLOT,p.tagName=["OL","UL"],p.defaultChild="list-item",p.allowedChildren=[s],l.ListItem=s,l.default=p},function(v,l,o){Object.defineProperty(l,"__esModule",{value:!0});var E=o(56),x=g(E);function g(e){return e&&e.__esModule?e:{default:e}}function h(e,a){if(!(e instanceof a))throw new TypeError("Cannot call a class as a function")}function b(e,a){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return a&&(typeof a=="object"||typeof a=="function")?a:e}function d(e,a){if(typeof a!="function"&&a!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof a);e.prototype=Object.create(a&&a.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),a&&(Object.setPrototypeOf?Object.setPrototypeOf(e,a):e.__proto__=a)}var r=function(e){d(a,e);function a(){return h(this,a),b(this,(a.__proto__||Object.getPrototypeOf(a)).apply(this,arguments))}return a}(x.default);r.blotName="italic",r.tagName=["EM","I"],l.default=r},function(v,l,o){Object.defineProperty(l,"__esModule",{value:!0});var E=function(){function f(c,i){for(var u=0;u<i.length;u++){var s=i[u];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(c,s.key,s)}}return function(c,i,u){return i&&f(c.prototype,i),u&&f(c,u),c}}(),x=function f(c,i,u){c===null&&(c=Function.prototype);var s=Object.getOwnPropertyDescriptor(c,i);if(s===void 0){var p=Object.getPrototypeOf(c);return p===null?void 0:f(p,i,u)}else{if("value"in s)return s.value;var t=s.get;return t===void 0?void 0:t.call(u)}},g=o(6),h=b(g);function b(f){return f&&f.__esModule?f:{default:f}}function d(f,c){if(!(f instanceof c))throw new TypeError("Cannot call a class as a function")}function r(f,c){if(!f)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return c&&(typeof c=="object"||typeof c=="function")?c:f}function e(f,c){if(typeof c!="function"&&c!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof c);f.prototype=Object.create(c&&c.prototype,{constructor:{value:f,enumerable:!1,writable:!0,configurable:!0}}),c&&(Object.setPrototypeOf?Object.setPrototypeOf(f,c):f.__proto__=c)}var a=function(f){e(c,f);function c(){return d(this,c),r(this,(c.__proto__||Object.getPrototypeOf(c)).apply(this,arguments))}return E(c,null,[{key:"create",value:function(u){return u==="super"?document.createElement("sup"):u==="sub"?document.createElement("sub"):x(c.__proto__||Object.getPrototypeOf(c),"create",this).call(this,u)}},{key:"formats",value:function(u){if(u.tagName==="SUB")return"sub";if(u.tagName==="SUP")return"super"}}]),c}(h.default);a.blotName="script",a.tagName=["SUB","SUP"],l.default=a},function(v,l,o){Object.defineProperty(l,"__esModule",{value:!0});var E=o(6),x=g(E);function g(e){return e&&e.__esModule?e:{default:e}}function h(e,a){if(!(e instanceof a))throw new TypeError("Cannot call a class as a function")}function b(e,a){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return a&&(typeof a=="object"||typeof a=="function")?a:e}function d(e,a){if(typeof a!="function"&&a!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof a);e.prototype=Object.create(a&&a.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),a&&(Object.setPrototypeOf?Object.setPrototypeOf(e,a):e.__proto__=a)}var r=function(e){d(a,e);function a(){return h(this,a),b(this,(a.__proto__||Object.getPrototypeOf(a)).apply(this,arguments))}return a}(x.default);r.blotName="strike",r.tagName="S",l.default=r},function(v,l,o){Object.defineProperty(l,"__esModule",{value:!0});var E=o(6),x=g(E);function g(e){return e&&e.__esModule?e:{default:e}}function h(e,a){if(!(e instanceof a))throw new TypeError("Cannot call a class as a function")}function b(e,a){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return a&&(typeof a=="object"||typeof a=="function")?a:e}function d(e,a){if(typeof a!="function"&&a!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof a);e.prototype=Object.create(a&&a.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),a&&(Object.setPrototypeOf?Object.setPrototypeOf(e,a):e.__proto__=a)}var r=function(e){d(a,e);function a(){return h(this,a),b(this,(a.__proto__||Object.getPrototypeOf(a)).apply(this,arguments))}return a}(x.default);r.blotName="underline",r.tagName="U",l.default=r},function(v,l,o){Object.defineProperty(l,"__esModule",{value:!0});var E=function(){function i(u,s){for(var p=0;p<s.length;p++){var t=s[p];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(u,t.key,t)}}return function(u,s,p){return s&&i(u.prototype,s),p&&i(u,p),u}}(),x=function i(u,s,p){u===null&&(u=Function.prototype);var t=Object.getOwnPropertyDescriptor(u,s);if(t===void 0){var y=Object.getPrototypeOf(u);return y===null?void 0:i(y,s,p)}else{if("value"in t)return t.value;var k=t.get;return k===void 0?void 0:k.call(p)}},g=o(0),h=d(g),b=o(27);function d(i){return i&&i.__esModule?i:{default:i}}function r(i,u){if(!(i instanceof u))throw new TypeError("Cannot call a class as a function")}function e(i,u){if(!i)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return u&&(typeof u=="object"||typeof u=="function")?u:i}function a(i,u){if(typeof u!="function"&&u!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof u);i.prototype=Object.create(u&&u.prototype,{constructor:{value:i,enumerable:!1,writable:!0,configurable:!0}}),u&&(Object.setPrototypeOf?Object.setPrototypeOf(i,u):i.__proto__=u)}var f=["alt","height","width"],c=function(i){a(u,i);function u(){return r(this,u),e(this,(u.__proto__||Object.getPrototypeOf(u)).apply(this,arguments))}return E(u,[{key:"format",value:function(p,t){f.indexOf(p)>-1?t?this.domNode.setAttribute(p,t):this.domNode.removeAttribute(p):x(u.prototype.__proto__||Object.getPrototypeOf(u.prototype),"format",this).call(this,p,t)}}],[{key:"create",value:function(p){var t=x(u.__proto__||Object.getPrototypeOf(u),"create",this).call(this,p);return typeof p=="string"&&t.setAttribute("src",this.sanitize(p)),t}},{key:"formats",value:function(p){return f.reduce(function(t,y){return p.hasAttribute(y)&&(t[y]=p.getAttribute(y)),t},{})}},{key:"match",value:function(p){return/\.(jpe?g|gif|png)$/.test(p)||/^data:image\/.+;base64/.test(p)}},{key:"sanitize",value:function(p){return(0,b.sanitize)(p,["http","https","data"])?p:"//:0"}},{key:"value",value:function(p){return p.getAttribute("src")}}]),u}(h.default.Embed);c.blotName="image",c.tagName="IMG",l.default=c},function(v,l,o){Object.defineProperty(l,"__esModule",{value:!0});var E=function(){function i(u,s){for(var p=0;p<s.length;p++){var t=s[p];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(u,t.key,t)}}return function(u,s,p){return s&&i(u.prototype,s),p&&i(u,p),u}}(),x=function i(u,s,p){u===null&&(u=Function.prototype);var t=Object.getOwnPropertyDescriptor(u,s);if(t===void 0){var y=Object.getPrototypeOf(u);return y===null?void 0:i(y,s,p)}else{if("value"in t)return t.value;var k=t.get;return k===void 0?void 0:k.call(p)}},g=o(4),h=o(27),b=d(h);function d(i){return i&&i.__esModule?i:{default:i}}function r(i,u){if(!(i instanceof u))throw new TypeError("Cannot call a class as a function")}function e(i,u){if(!i)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return u&&(typeof u=="object"||typeof u=="function")?u:i}function a(i,u){if(typeof u!="function"&&u!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof u);i.prototype=Object.create(u&&u.prototype,{constructor:{value:i,enumerable:!1,writable:!0,configurable:!0}}),u&&(Object.setPrototypeOf?Object.setPrototypeOf(i,u):i.__proto__=u)}var f=["height","width"],c=function(i){a(u,i);function u(){return r(this,u),e(this,(u.__proto__||Object.getPrototypeOf(u)).apply(this,arguments))}return E(u,[{key:"format",value:function(p,t){f.indexOf(p)>-1?t?this.domNode.setAttribute(p,t):this.domNode.removeAttribute(p):x(u.prototype.__proto__||Object.getPrototypeOf(u.prototype),"format",this).call(this,p,t)}}],[{key:"create",value:function(p){var t=x(u.__proto__||Object.getPrototypeOf(u),"create",this).call(this,p);return t.setAttribute("frameborder","0"),t.setAttribute("allowfullscreen",!0),t.setAttribute("src",this.sanitize(p)),t}},{key:"formats",value:function(p){return f.reduce(function(t,y){return p.hasAttribute(y)&&(t[y]=p.getAttribute(y)),t},{})}},{key:"sanitize",value:function(p){return b.default.sanitize(p)}},{key:"value",value:function(p){return p.getAttribute("src")}}]),u}(g.BlockEmbed);c.blotName="video",c.className="ql-video",c.tagName="IFRAME",l.default=c},function(v,l,o){Object.defineProperty(l,"__esModule",{value:!0}),l.default=l.FormulaBlot=void 0;var E=function(){function p(t,y){for(var k=0;k<y.length;k++){var M=y[k];M.enumerable=M.enumerable||!1,M.configurable=!0,"value"in M&&(M.writable=!0),Object.defineProperty(t,M.key,M)}}return function(t,y,k){return y&&p(t.prototype,y),k&&p(t,k),t}}(),x=function p(t,y,k){t===null&&(t=Function.prototype);var M=Object.getOwnPropertyDescriptor(t,y);if(M===void 0){var S=Object.getPrototypeOf(t);return S===null?void 0:p(S,y,k)}else{if("value"in M)return M.value;var j=M.get;return j===void 0?void 0:j.call(k)}},g=o(35),h=a(g),b=o(5),d=a(b),r=o(9),e=a(r);function a(p){return p&&p.__esModule?p:{default:p}}function f(p,t){if(!(p instanceof t))throw new TypeError("Cannot call a class as a function")}function c(p,t){if(!p)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&(typeof t=="object"||typeof t=="function")?t:p}function i(p,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof t);p.prototype=Object.create(t&&t.prototype,{constructor:{value:p,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(p,t):p.__proto__=t)}var u=function(p){i(t,p);function t(){return f(this,t),c(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return E(t,null,[{key:"create",value:function(k){var M=x(t.__proto__||Object.getPrototypeOf(t),"create",this).call(this,k);return typeof k=="string"&&(window.katex.render(k,M,{throwOnError:!1,errorColor:"#f00"}),M.setAttribute("data-value",k)),M}},{key:"value",value:function(k){return k.getAttribute("data-value")}}]),t}(h.default);u.blotName="formula",u.className="ql-formula",u.tagName="SPAN";var s=function(p){i(t,p),E(t,null,[{key:"register",value:function(){d.default.register(u,!0)}}]);function t(){f(this,t);var y=c(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));if(window.katex==null)throw new Error("Formula module requires KaTeX.");return y}return t}(e.default);l.FormulaBlot=u,l.default=s},function(v,l,o){Object.defineProperty(l,"__esModule",{value:!0}),l.default=l.CodeToken=l.CodeBlock=void 0;var E=function(){function k(M,S){for(var j=0;j<S.length;j++){var _=S[j];_.enumerable=_.enumerable||!1,_.configurable=!0,"value"in _&&(_.writable=!0),Object.defineProperty(M,_.key,_)}}return function(M,S,j){return S&&k(M.prototype,S),j&&k(M,j),M}}(),x=function k(M,S,j){M===null&&(M=Function.prototype);var _=Object.getOwnPropertyDescriptor(M,S);if(_===void 0){var w=Object.getPrototypeOf(M);return w===null?void 0:k(w,S,j)}else{if("value"in _)return _.value;var A=_.get;return A===void 0?void 0:A.call(j)}},g=o(0),h=c(g),b=o(5),d=c(b),r=o(9),e=c(r),a=o(13),f=c(a);function c(k){return k&&k.__esModule?k:{default:k}}function i(k,M){if(!(k instanceof M))throw new TypeError("Cannot call a class as a function")}function u(k,M){if(!k)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return M&&(typeof M=="object"||typeof M=="function")?M:k}function s(k,M){if(typeof M!="function"&&M!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof M);k.prototype=Object.create(M&&M.prototype,{constructor:{value:k,enumerable:!1,writable:!0,configurable:!0}}),M&&(Object.setPrototypeOf?Object.setPrototypeOf(k,M):k.__proto__=M)}var p=function(k){s(M,k);function M(){return i(this,M),u(this,(M.__proto__||Object.getPrototypeOf(M)).apply(this,arguments))}return E(M,[{key:"replaceWith",value:function(j){this.domNode.textContent=this.domNode.textContent,this.attach(),x(M.prototype.__proto__||Object.getPrototypeOf(M.prototype),"replaceWith",this).call(this,j)}},{key:"highlight",value:function(j){var _=this.domNode.textContent;this.cachedText!==_&&((_.trim().length>0||this.cachedText==null)&&(this.domNode.innerHTML=j(_),this.domNode.normalize(),this.attach()),this.cachedText=_)}}]),M}(f.default);p.className="ql-syntax";var t=new h.default.Attributor.Class("token","hljs",{scope:h.default.Scope.INLINE}),y=function(k){s(M,k),E(M,null,[{key:"register",value:function(){d.default.register(t,!0),d.default.register(p,!0)}}]);function M(S,j){i(this,M);var _=u(this,(M.__proto__||Object.getPrototypeOf(M)).call(this,S,j));if(typeof _.options.highlight!="function")throw new Error("Syntax module requires highlight.js. Please include the library on the page before Quill.");var w=null;return _.quill.on(d.default.events.SCROLL_OPTIMIZE,function(){clearTimeout(w),w=setTimeout(function(){_.highlight(),w=null},_.options.interval)}),_.highlight(),_}return E(M,[{key:"highlight",value:function(){var j=this;if(!this.quill.selection.composing){this.quill.update(d.default.sources.USER);var _=this.quill.getSelection();this.quill.scroll.descendants(p).forEach(function(w){w.highlight(j.options.highlight)}),this.quill.update(d.default.sources.SILENT),_!=null&&this.quill.setSelection(_,d.default.sources.SILENT)}}}]),M}(e.default);y.DEFAULTS={highlight:function(){return window.hljs==null?null:function(k){var M=window.hljs.highlightAuto(k);return M.value}}(),interval:1e3},l.CodeBlock=p,l.CodeToken=t,l.default=y},function(v,l){v.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=3 x2=15 y1=9 y2=9></line> <line class=ql-stroke x1=3 x2=13 y1=14 y2=14></line> <line class=ql-stroke x1=3 x2=9 y1=4 y2=4></line> </svg>'},function(v,l){v.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=15 x2=3 y1=9 y2=9></line> <line class=ql-stroke x1=14 x2=4 y1=14 y2=14></line> <line class=ql-stroke x1=12 x2=6 y1=4 y2=4></line> </svg>'},function(v,l){v.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=15 x2=3 y1=9 y2=9></line> <line class=ql-stroke x1=15 x2=5 y1=14 y2=14></line> <line class=ql-stroke x1=15 x2=9 y1=4 y2=4></line> </svg>'},function(v,l){v.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=15 x2=3 y1=9 y2=9></line> <line class=ql-stroke x1=15 x2=3 y1=14 y2=14></line> <line class=ql-stroke x1=15 x2=3 y1=4 y2=4></line> </svg>'},function(v,l){v.exports='<svg viewbox="0 0 18 18"> <g class="ql-fill ql-color-label"> <polygon points="6 6.868 6 6 5 6 5 7 5.942 7 6 6.868"></polygon> <rect height=1 width=1 x=4 y=4></rect> <polygon points="6.817 5 6 5 6 6 6.38 6 6.817 5"></polygon> <rect height=1 width=1 x=2 y=6></rect> <rect height=1 width=1 x=3 y=5></rect> <rect height=1 width=1 x=4 y=7></rect> <polygon points="4 11.439 4 11 3 11 3 12 3.755 12 4 11.439"></polygon> <rect height=1 width=1 x=2 y=12></rect> <rect height=1 width=1 x=2 y=9></rect> <rect height=1 width=1 x=2 y=15></rect> <polygon points="4.63 10 4 10 4 11 4.192 11 4.63 10"></polygon> <rect height=1 width=1 x=3 y=8></rect> <path d=M10.832,4.2L11,4.582V4H10.708A1.948,1.948,0,0,1,10.832,4.2Z></path> <path d=M7,4.582L7.168,4.2A1.929,1.929,0,0,1,7.292,4H7V4.582Z></path> <path d=M8,13H7.683l-0.351.8a1.933,1.933,0,0,1-.124.2H8V13Z></path> <rect height=1 width=1 x=12 y=2></rect> <rect height=1 width=1 x=11 y=3></rect> <path d=M9,3H8V3.282A1.985,1.985,0,0,1,9,3Z></path> <rect height=1 width=1 x=2 y=3></rect> <rect height=1 width=1 x=6 y=2></rect> <rect height=1 width=1 x=3 y=2></rect> <rect height=1 width=1 x=5 y=3></rect> <rect height=1 width=1 x=9 y=2></rect> <rect height=1 width=1 x=15 y=14></rect> <polygon points="13.447 10.174 13.469 10.225 13.472 10.232 13.808 11 14 11 14 10 13.37 10 13.447 10.174"></polygon> <rect height=1 width=1 x=13 y=7></rect> <rect height=1 width=1 x=15 y=5></rect> <rect height=1 width=1 x=14 y=6></rect> <rect height=1 width=1 x=15 y=8></rect> <rect height=1 width=1 x=14 y=9></rect> <path d=M3.775,14H3v1H4V14.314A1.97,1.97,0,0,1,3.775,14Z></path> <rect height=1 width=1 x=14 y=3></rect> <polygon points="12 6.868 12 6 11.62 6 12 6.868"></polygon> <rect height=1 width=1 x=15 y=2></rect> <rect height=1 width=1 x=12 y=5></rect> <rect height=1 width=1 x=13 y=4></rect> <polygon points="12.933 9 13 9 13 8 12.495 8 12.933 9"></polygon> <rect height=1 width=1 x=9 y=14></rect> <rect height=1 width=1 x=8 y=15></rect> <path d=M6,14.926V15H7V14.316A1.993,1.993,0,0,1,6,14.926Z></path> <rect height=1 width=1 x=5 y=15></rect> <path d=M10.668,13.8L10.317,13H10v1h0.792A1.947,1.947,0,0,1,10.668,13.8Z></path> <rect height=1 width=1 x=11 y=15></rect> <path d=M14.332,12.2a1.99,1.99,0,0,1,.166.8H15V12H14.245Z></path> <rect height=1 width=1 x=14 y=15></rect> <rect height=1 width=1 x=15 y=11></rect> </g> <polyline class=ql-stroke points="5.5 13 9 5 12.5 13"></polyline> <line class=ql-stroke x1=11.63 x2=6.38 y1=11 y2=11></line> </svg>'},function(v,l){v.exports='<svg viewbox="0 0 18 18"> <rect class="ql-fill ql-stroke" height=3 width=3 x=4 y=5></rect> <rect class="ql-fill ql-stroke" height=3 width=3 x=11 y=5></rect> <path class="ql-even ql-fill ql-stroke" d=M7,8c0,4.031-3,5-3,5></path> <path class="ql-even ql-fill ql-stroke" d=M14,8c0,4.031-3,5-3,5></path> </svg>'},function(v,l){v.exports='<svg viewbox="0 0 18 18"> <path class=ql-stroke d=M5,4H9.5A2.5,2.5,0,0,1,12,6.5v0A2.5,2.5,0,0,1,9.5,9H5A0,0,0,0,1,5,9V4A0,0,0,0,1,5,4Z></path> <path class=ql-stroke d=M5,9h5.5A2.5,2.5,0,0,1,13,11.5v0A2.5,2.5,0,0,1,10.5,14H5a0,0,0,0,1,0,0V9A0,0,0,0,1,5,9Z></path> </svg>'},function(v,l){v.exports='<svg class="" viewbox="0 0 18 18"> <line class=ql-stroke x1=5 x2=13 y1=3 y2=3></line> <line class=ql-stroke x1=6 x2=9.35 y1=12 y2=3></line> <line class=ql-stroke x1=11 x2=15 y1=11 y2=15></line> <line class=ql-stroke x1=15 x2=11 y1=11 y2=15></line> <rect class=ql-fill height=1 rx=0.5 ry=0.5 width=7 x=2 y=14></rect> </svg>'},function(v,l){v.exports='<svg viewbox="0 0 18 18"> <line class="ql-color-label ql-stroke ql-transparent" x1=3 x2=15 y1=15 y2=15></line> <polyline class=ql-stroke points="5.5 11 9 3 12.5 11"></polyline> <line class=ql-stroke x1=11.63 x2=6.38 y1=9 y2=9></line> </svg>'},function(v,l){v.exports='<svg viewbox="0 0 18 18"> <polygon class="ql-stroke ql-fill" points="3 11 5 9 3 7 3 11"></polygon> <line class="ql-stroke ql-fill" x1=15 x2=11 y1=4 y2=4></line> <path class=ql-fill d=M11,3a3,3,0,0,0,0,6h1V3H11Z></path> <rect class=ql-fill height=11 width=1 x=11 y=4></rect> <rect class=ql-fill height=11 width=1 x=13 y=4></rect> </svg>'},function(v,l){v.exports='<svg viewbox="0 0 18 18"> <polygon class="ql-stroke ql-fill" points="15 12 13 10 15 8 15 12"></polygon> <line class="ql-stroke ql-fill" x1=9 x2=5 y1=4 y2=4></line> <path class=ql-fill d=M5,3A3,3,0,0,0,5,9H6V3H5Z></path> <rect class=ql-fill height=11 width=1 x=5 y=4></rect> <rect class=ql-fill height=11 width=1 x=7 y=4></rect> </svg>'},function(v,l){v.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M14,16H4a1,1,0,0,1,0-2H14A1,1,0,0,1,14,16Z /> <path class=ql-fill d=M14,4H4A1,1,0,0,1,4,2H14A1,1,0,0,1,14,4Z /> <rect class=ql-fill x=3 y=6 width=12 height=6 rx=1 ry=1 /> </svg>'},function(v,l){v.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M13,16H5a1,1,0,0,1,0-2h8A1,1,0,0,1,13,16Z /> <path class=ql-fill d=M13,4H5A1,1,0,0,1,5,2h8A1,1,0,0,1,13,4Z /> <rect class=ql-fill x=2 y=6 width=14 height=6 rx=1 ry=1 /> </svg>'},function(v,l){v.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M15,8H13a1,1,0,0,1,0-2h2A1,1,0,0,1,15,8Z /> <path class=ql-fill d=M15,12H13a1,1,0,0,1,0-2h2A1,1,0,0,1,15,12Z /> <path class=ql-fill d=M15,16H5a1,1,0,0,1,0-2H15A1,1,0,0,1,15,16Z /> <path class=ql-fill d=M15,4H5A1,1,0,0,1,5,2H15A1,1,0,0,1,15,4Z /> <rect class=ql-fill x=2 y=6 width=8 height=6 rx=1 ry=1 /> </svg>'},function(v,l){v.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M5,8H3A1,1,0,0,1,3,6H5A1,1,0,0,1,5,8Z /> <path class=ql-fill d=M5,12H3a1,1,0,0,1,0-2H5A1,1,0,0,1,5,12Z /> <path class=ql-fill d=M13,16H3a1,1,0,0,1,0-2H13A1,1,0,0,1,13,16Z /> <path class=ql-fill d=M13,4H3A1,1,0,0,1,3,2H13A1,1,0,0,1,13,4Z /> <rect class=ql-fill x=8 y=6 width=8 height=6 rx=1 ry=1 transform="translate(24 18) rotate(-180)"/> </svg>'},function(v,l){v.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M11.759,2.482a2.561,2.561,0,0,0-3.53.607A7.656,7.656,0,0,0,6.8,6.2C6.109,9.188,5.275,14.677,4.15,14.927a1.545,1.545,0,0,0-1.3-.933A0.922,0.922,0,0,0,2,15.036S1.954,16,4.119,16s3.091-2.691,3.7-5.553c0.177-.826.36-1.726,0.554-2.6L8.775,6.2c0.381-1.421.807-2.521,1.306-2.676a1.014,1.014,0,0,0,1.02.56A0.966,0.966,0,0,0,11.759,2.482Z></path> <rect class=ql-fill height=1.6 rx=0.8 ry=0.8 width=5 x=5.15 y=6.2></rect> <path class=ql-fill d=M13.663,12.027a1.662,1.662,0,0,1,.266-0.276q0.193,0.069.456,0.138a2.1,2.1,0,0,0,.535.069,1.075,1.075,0,0,0,.767-0.3,1.044,1.044,0,0,0,.314-0.8,0.84,0.84,0,0,0-.238-0.619,0.8,0.8,0,0,0-.594-0.239,1.154,1.154,0,0,0-.781.3,4.607,4.607,0,0,0-.781,1q-0.091.15-.218,0.346l-0.246.38c-0.068-.288-0.137-0.582-0.212-0.885-0.459-1.847-2.494-.984-2.941-0.8-0.482.2-.353,0.647-0.094,0.529a0.869,0.869,0,0,1,1.281.585c0.217,0.751.377,1.436,0.527,2.038a5.688,5.688,0,0,1-.362.467,2.69,2.69,0,0,1-.264.271q-0.221-.08-0.471-0.147a2.029,2.029,0,0,0-.522-0.066,1.079,1.079,0,0,0-.768.3A1.058,1.058,0,0,0,9,15.131a0.82,0.82,0,0,0,.832.852,1.134,1.134,0,0,0,.787-0.3,5.11,5.11,0,0,0,.776-0.993q0.141-.219.215-0.34c0.046-.076.122-0.194,0.223-0.346a2.786,2.786,0,0,0,.918,1.726,2.582,2.582,0,0,0,2.376-.185c0.317-.181.212-0.565,0-0.494A0.807,0.807,0,0,1,14.176,15a5.159,5.159,0,0,1-.913-2.446l0,0Q13.487,12.24,13.663,12.027Z></path> </svg>'},function(v,l){v.exports='<svg viewBox="0 0 18 18"> <path class=ql-fill d=M10,4V14a1,1,0,0,1-2,0V10H3v4a1,1,0,0,1-2,0V4A1,1,0,0,1,3,4V8H8V4a1,1,0,0,1,2,0Zm6.06787,9.209H14.98975V7.59863a.54085.54085,0,0,0-.605-.60547h-.62744a1.01119,1.01119,0,0,0-.748.29688L11.645,8.56641a.5435.5435,0,0,0-.022.8584l.28613.30762a.53861.53861,0,0,0,.84717.0332l.09912-.08789a1.2137,1.2137,0,0,0,.2417-.35254h.02246s-.01123.30859-.01123.60547V13.209H12.041a.54085.54085,0,0,0-.605.60547v.43945a.54085.54085,0,0,0,.605.60547h4.02686a.54085.54085,0,0,0,.605-.60547v-.43945A.54085.54085,0,0,0,16.06787,13.209Z /> </svg>'},function(v,l){v.exports='<svg viewBox="0 0 18 18"> <path class=ql-fill d=M16.73975,13.81445v.43945a.54085.54085,0,0,1-.605.60547H11.855a.58392.58392,0,0,1-.64893-.60547V14.0127c0-2.90527,3.39941-3.42187,3.39941-4.55469a.77675.77675,0,0,0-.84717-.78125,1.17684,1.17684,0,0,0-.83594.38477c-.2749.26367-.561.374-.85791.13184l-.4292-.34082c-.30811-.24219-.38525-.51758-.1543-.81445a2.97155,2.97155,0,0,1,2.45361-1.17676,2.45393,2.45393,0,0,1,2.68408,2.40918c0,2.45312-3.1792,2.92676-3.27832,3.93848h2.79443A.54085.54085,0,0,1,16.73975,13.81445ZM9,3A.99974.99974,0,0,0,8,4V8H3V4A1,1,0,0,0,1,4V14a1,1,0,0,0,2,0V10H8v4a1,1,0,0,0,2,0V4A.99974.99974,0,0,0,9,3Z /> </svg>'},function(v,l){v.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=7 x2=13 y1=4 y2=4></line> <line class=ql-stroke x1=5 x2=11 y1=14 y2=14></line> <line class=ql-stroke x1=8 x2=10 y1=14 y2=4></line> </svg>'},function(v,l){v.exports='<svg viewbox="0 0 18 18"> <rect class=ql-stroke height=10 width=12 x=3 y=4></rect> <circle class=ql-fill cx=6 cy=7 r=1></circle> <polyline class="ql-even ql-fill" points="5 12 5 11 7 9 8 10 11 7 13 9 13 12 5 12"></polyline> </svg>'},function(v,l){v.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=3 x2=15 y1=14 y2=14></line> <line class=ql-stroke x1=3 x2=15 y1=4 y2=4></line> <line class=ql-stroke x1=9 x2=15 y1=9 y2=9></line> <polyline class="ql-fill ql-stroke" points="3 7 3 11 5 9 3 7"></polyline> </svg>'},function(v,l){v.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=3 x2=15 y1=14 y2=14></line> <line class=ql-stroke x1=3 x2=15 y1=4 y2=4></line> <line class=ql-stroke x1=9 x2=15 y1=9 y2=9></line> <polyline class=ql-stroke points="5 7 5 11 3 9 5 7"></polyline> </svg>'},function(v,l){v.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=7 x2=11 y1=7 y2=11></line> <path class="ql-even ql-stroke" d=M8.9,4.577a3.476,3.476,0,0,1,.36,4.679A3.476,3.476,0,0,1,4.577,8.9C3.185,7.5,2.035,6.4,4.217,4.217S7.5,3.185,8.9,4.577Z></path> <path class="ql-even ql-stroke" d=M13.423,9.1a3.476,3.476,0,0,0-4.679-.36,3.476,3.476,0,0,0,.36,4.679c1.392,1.392,2.5,2.542,4.679.36S14.815,10.5,13.423,9.1Z></path> </svg>'},function(v,l){v.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=7 x2=15 y1=4 y2=4></line> <line class=ql-stroke x1=7 x2=15 y1=9 y2=9></line> <line class=ql-stroke x1=7 x2=15 y1=14 y2=14></line> <line class="ql-stroke ql-thin" x1=2.5 x2=4.5 y1=5.5 y2=5.5></line> <path class=ql-fill d=M3.5,6A0.5,0.5,0,0,1,3,5.5V3.085l-0.276.138A0.5,0.5,0,0,1,2.053,3c-0.124-.247-0.023-0.324.224-0.447l1-.5A0.5,0.5,0,0,1,4,2.5v3A0.5,0.5,0,0,1,3.5,6Z></path> <path class="ql-stroke ql-thin" d=M4.5,10.5h-2c0-.234,1.85-1.076,1.85-2.234A0.959,0.959,0,0,0,2.5,8.156></path> <path class="ql-stroke ql-thin" d=M2.5,14.846a0.959,0.959,0,0,0,1.85-.109A0.7,0.7,0,0,0,3.75,14a0.688,0.688,0,0,0,.6-0.736,0.959,0.959,0,0,0-1.85-.109></path> </svg>'},function(v,l){v.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=6 x2=15 y1=4 y2=4></line> <line class=ql-stroke x1=6 x2=15 y1=9 y2=9></line> <line class=ql-stroke x1=6 x2=15 y1=14 y2=14></line> <line class=ql-stroke x1=3 x2=3 y1=4 y2=4></line> <line class=ql-stroke x1=3 x2=3 y1=9 y2=9></line> <line class=ql-stroke x1=3 x2=3 y1=14 y2=14></line> </svg>'},function(v,l){v.exports='<svg class="" viewbox="0 0 18 18"> <line class=ql-stroke x1=9 x2=15 y1=4 y2=4></line> <polyline class=ql-stroke points="3 4 4 5 6 3"></polyline> <line class=ql-stroke x1=9 x2=15 y1=14 y2=14></line> <polyline class=ql-stroke points="3 14 4 15 6 13"></polyline> <line class=ql-stroke x1=9 x2=15 y1=9 y2=9></line> <polyline class=ql-stroke points="3 9 4 10 6 8"></polyline> </svg>'},function(v,l){v.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M15.5,15H13.861a3.858,3.858,0,0,0,1.914-2.975,1.8,1.8,0,0,0-1.6-1.751A1.921,1.921,0,0,0,12.021,11.7a0.50013,0.50013,0,1,0,.957.291h0a0.914,0.914,0,0,1,1.053-.725,0.81,0.81,0,0,1,.744.762c0,1.076-1.16971,1.86982-1.93971,2.43082A1.45639,1.45639,0,0,0,12,15.5a0.5,0.5,0,0,0,.5.5h3A0.5,0.5,0,0,0,15.5,15Z /> <path class=ql-fill d=M9.65,5.241a1,1,0,0,0-1.409.108L6,7.964,3.759,5.349A1,1,0,0,0,2.192,6.59178Q2.21541,6.6213,2.241,6.649L4.684,9.5,2.241,12.35A1,1,0,0,0,3.71,13.70722q0.02557-.02768.049-0.05722L6,11.036,8.241,13.65a1,1,0,1,0,1.567-1.24277Q9.78459,12.3777,9.759,12.35L7.316,9.5,9.759,6.651A1,1,0,0,0,9.65,5.241Z /> </svg>'},function(v,l){v.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M15.5,7H13.861a4.015,4.015,0,0,0,1.914-2.975,1.8,1.8,0,0,0-1.6-1.751A1.922,1.922,0,0,0,12.021,3.7a0.5,0.5,0,1,0,.957.291,0.917,0.917,0,0,1,1.053-.725,0.81,0.81,0,0,1,.744.762c0,1.077-1.164,1.925-1.934,2.486A1.423,1.423,0,0,0,12,7.5a0.5,0.5,0,0,0,.5.5h3A0.5,0.5,0,0,0,15.5,7Z /> <path class=ql-fill d=M9.651,5.241a1,1,0,0,0-1.41.108L6,7.964,3.759,5.349a1,1,0,1,0-1.519,1.3L4.683,9.5,2.241,12.35a1,1,0,1,0,1.519,1.3L6,11.036,8.241,13.65a1,1,0,0,0,1.519-1.3L7.317,9.5,9.759,6.651A1,1,0,0,0,9.651,5.241Z /> </svg>'},function(v,l){v.exports='<svg viewbox="0 0 18 18"> <line class="ql-stroke ql-thin" x1=15.5 x2=2.5 y1=8.5 y2=9.5></line> <path class=ql-fill d=M9.007,8C6.542,7.791,6,7.519,6,6.5,6,5.792,7.283,5,9,5c1.571,0,2.765.679,2.969,1.309a1,1,0,0,0,1.9-.617C13.356,4.106,11.354,3,9,3,6.2,3,4,4.538,4,6.5a3.2,3.2,0,0,0,.5,1.843Z></path> <path class=ql-fill d=M8.984,10C11.457,10.208,12,10.479,12,11.5c0,0.708-1.283,1.5-3,1.5-1.571,0-2.765-.679-2.969-1.309a1,1,0,1,0-1.9.617C4.644,13.894,6.646,15,9,15c2.8,0,5-1.538,5-3.5a3.2,3.2,0,0,0-.5-1.843Z></path> </svg>'},function(v,l){v.exports='<svg viewbox="0 0 18 18"> <path class=ql-stroke d=M5,3V9a4.012,4.012,0,0,0,4,4H9a4.012,4.012,0,0,0,4-4V3></path> <rect class=ql-fill height=1 rx=0.5 ry=0.5 width=12 x=3 y=15></rect> </svg>'},function(v,l){v.exports='<svg viewbox="0 0 18 18"> <rect class=ql-stroke height=12 width=12 x=3 y=3></rect> <rect class=ql-fill height=12 width=1 x=5 y=3></rect> <rect class=ql-fill height=12 width=1 x=12 y=3></rect> <rect class=ql-fill height=2 width=8 x=5 y=8></rect> <rect class=ql-fill height=1 width=3 x=3 y=5></rect> <rect class=ql-fill height=1 width=3 x=3 y=7></rect> <rect class=ql-fill height=1 width=3 x=3 y=10></rect> <rect class=ql-fill height=1 width=3 x=3 y=12></rect> <rect class=ql-fill height=1 width=3 x=12 y=5></rect> <rect class=ql-fill height=1 width=3 x=12 y=7></rect> <rect class=ql-fill height=1 width=3 x=12 y=10></rect> <rect class=ql-fill height=1 width=3 x=12 y=12></rect> </svg>'},function(v,l){v.exports='<svg viewbox="0 0 18 18"> <polygon class=ql-stroke points="7 11 9 13 11 11 7 11"></polygon> <polygon class=ql-stroke points="7 7 9 5 11 7 7 7"></polygon> </svg>'},function(v,l,o){Object.defineProperty(l,"__esModule",{value:!0}),l.default=l.BubbleTooltip=void 0;var E=function M(S,j,_){S===null&&(S=Function.prototype);var w=Object.getOwnPropertyDescriptor(S,j);if(w===void 0){var A=Object.getPrototypeOf(S);return A===null?void 0:M(A,j,_)}else{if("value"in w)return w.value;var T=w.get;return T===void 0?void 0:T.call(_)}},x=function(){function M(S,j){for(var _=0;_<j.length;_++){var w=j[_];w.enumerable=w.enumerable||!1,w.configurable=!0,"value"in w&&(w.writable=!0),Object.defineProperty(S,w.key,w)}}return function(S,j,_){return j&&M(S.prototype,j),_&&M(S,_),S}}(),g=o(3),h=i(g),b=o(8),d=i(b),r=o(43),e=i(r),a=o(15),f=o(41),c=i(f);function i(M){return M&&M.__esModule?M:{default:M}}function u(M,S){if(!(M instanceof S))throw new TypeError("Cannot call a class as a function")}function s(M,S){if(!M)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return S&&(typeof S=="object"||typeof S=="function")?S:M}function p(M,S){if(typeof S!="function"&&S!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof S);M.prototype=Object.create(S&&S.prototype,{constructor:{value:M,enumerable:!1,writable:!0,configurable:!0}}),S&&(Object.setPrototypeOf?Object.setPrototypeOf(M,S):M.__proto__=S)}var t=[["bold","italic","link"],[{header:1},{header:2},"blockquote"]],y=function(M){p(S,M);function S(j,_){u(this,S),_.modules.toolbar!=null&&_.modules.toolbar.container==null&&(_.modules.toolbar.container=t);var w=s(this,(S.__proto__||Object.getPrototypeOf(S)).call(this,j,_));return w.quill.container.classList.add("ql-bubble"),w}return x(S,[{key:"extendToolbar",value:function(_){this.tooltip=new k(this.quill,this.options.bounds),this.tooltip.root.appendChild(_.container),this.buildButtons([].slice.call(_.container.querySelectorAll("button")),c.default),this.buildPickers([].slice.call(_.container.querySelectorAll("select")),c.default)}}]),S}(e.default);y.DEFAULTS=(0,h.default)(!0,{},e.default.DEFAULTS,{modules:{toolbar:{handlers:{link:function(S){S?this.quill.theme.tooltip.edit():this.quill.format("link",!1)}}}}});var k=function(M){p(S,M);function S(j,_){u(this,S);var w=s(this,(S.__proto__||Object.getPrototypeOf(S)).call(this,j,_));return w.quill.on(d.default.events.EDITOR_CHANGE,function(A,T,N,R){if(A===d.default.events.SELECTION_CHANGE)if(T!=null&&T.length>0&&R===d.default.sources.USER){w.show(),w.root.style.left="0px",w.root.style.width="",w.root.style.width=w.root.offsetWidth+"px";var I=w.quill.getLines(T.index,T.length);if(I.length===1)w.position(w.quill.getBounds(T));else{var F=I[I.length-1],V=w.quill.getIndex(F),B=Math.min(F.length()-1,T.index+T.length-V),q=w.quill.getBounds(new a.Range(V,B));w.position(q)}}else document.activeElement!==w.textbox&&w.quill.hasFocus()&&w.hide()}),w}return x(S,[{key:"listen",value:function(){var _=this;E(S.prototype.__proto__||Object.getPrototypeOf(S.prototype),"listen",this).call(this),this.root.querySelector(".ql-close").addEventListener("click",function(){_.root.classList.remove("ql-editing")}),this.quill.on(d.default.events.SCROLL_OPTIMIZE,function(){setTimeout(function(){if(!_.root.classList.contains("ql-hidden")){var w=_.quill.getSelection();w!=null&&_.position(_.quill.getBounds(w))}},1)})}},{key:"cancel",value:function(){this.show()}},{key:"position",value:function(_){var w=E(S.prototype.__proto__||Object.getPrototypeOf(S.prototype),"position",this).call(this,_),A=this.root.querySelector(".ql-tooltip-arrow");if(A.style.marginLeft="",w===0)return w;A.style.marginLeft=-1*w-A.offsetWidth/2+"px"}}]),S}(r.BaseTooltip);k.TEMPLATE=['<span class="ql-tooltip-arrow"></span>','<div class="ql-tooltip-editor">','<input type="text" data-formula="e=mc^2" data-link="https://quilljs.com" data-video="Embed URL">','<a class="ql-close"></a>',"</div>"].join(""),l.BubbleTooltip=k,l.default=y},function(v,l,o){v.exports=o(63)}]).default})})(Ba);var ll=Ba.exports,sl=tt&&tt.__extends||function(){var n=function(O,v){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,o){l.__proto__=o}||function(l,o){for(var E in o)o.hasOwnProperty(E)&&(l[E]=o[E])},n(O,v)};return function(O,v){n(O,v);function l(){this.constructor=O}O.prototype=v===null?Object.create(v):(l.prototype=v.prototype,new l)}}(),Vt=tt&&tt.__assign||function(){return Vt=Object.assign||function(n){for(var O,v=1,l=arguments.length;v<l;v++){O=arguments[v];for(var o in O)Object.prototype.hasOwnProperty.call(O,o)&&(n[o]=O[o])}return n},Vt.apply(this,arguments)},ul=tt&&tt.__spreadArrays||function(){for(var n=0,O=0,v=arguments.length;O<v;O++)n+=arguments[O].length;for(var l=Array(n),o=0,O=0;O<v;O++)for(var E=arguments[O],x=0,g=E.length;x<g;x++,o++)l[o]=E[x];return l},tn=tt&&tt.__importDefault||function(n){return n&&n.__esModule?n:{default:n}},$e=tn(Y),cl=tn(vr),Ot=tn(ol),Vn=tn(ll),dl=function(n){sl(O,n);function O(v){var l=n.call(this,v)||this;l.dirtyProps=["modules","formats","bounds","theme","children"],l.cleanProps=["id","className","style","placeholder","tabIndex","onChange","onChangeSelection","onFocus","onBlur","onKeyPress","onKeyDown","onKeyUp"],l.state={generation:0},l.selection=null,l.onEditorChange=function(E,x,g,h){var b,d,r,e;E==="text-change"?(d=(b=l).onEditorChangeText)===null||d===void 0||d.call(b,l.editor.root.innerHTML,x,h,l.unprivilegedEditor):E==="selection-change"&&((e=(r=l).onEditorChangeSelection)===null||e===void 0||e.call(r,x,h,l.unprivilegedEditor))};var o=l.isControlled()?v.value:v.defaultValue;return l.value=o??"",l}return O.prototype.validateProps=function(v){var l;if($e.default.Children.count(v.children)>1)throw new Error("The Quill editing area can only be composed of a single React element.");if($e.default.Children.count(v.children)){var o=$e.default.Children.only(v.children);if(((l=o)===null||l===void 0?void 0:l.type)==="textarea")throw new Error("Quill does not support editing on a <textarea>. Use a <div> instead.")}if(this.lastDeltaChangeSet&&v.value===this.lastDeltaChangeSet)throw new Error("You are passing the `delta` object from the `onChange` event back as `value`. You most probably want `editor.getContents()` instead. See: https://github.com/zenoamaro/react-quill#using-deltas")},O.prototype.shouldComponentUpdate=function(v,l){var o=this,E;if(this.validateProps(v),!this.editor||this.state.generation!==l.generation)return!0;if("value"in v){var x=this.getEditorContents(),g=(E=v.value,E??"");this.isEqualValue(g,x)||this.setEditorContents(this.editor,g)}return v.readOnly!==this.props.readOnly&&this.setEditorReadOnly(this.editor,v.readOnly),ul(this.cleanProps,this.dirtyProps).some(function(h){return!Ot.default(v[h],o.props[h])})},O.prototype.shouldComponentRegenerate=function(v){var l=this;return this.dirtyProps.some(function(o){return!Ot.default(v[o],l.props[o])})},O.prototype.componentDidMount=function(){this.instantiateEditor(),this.setEditorContents(this.editor,this.getEditorContents())},O.prototype.componentWillUnmount=function(){this.destroyEditor()},O.prototype.componentDidUpdate=function(v,l){var o=this;if(this.editor&&this.shouldComponentRegenerate(v)){var E=this.editor.getContents(),x=this.editor.getSelection();this.regenerationSnapshot={delta:E,selection:x},this.setState({generation:this.state.generation+1}),this.destroyEditor()}if(this.state.generation!==l.generation){var g=this.regenerationSnapshot,E=g.delta,h=g.selection;delete this.regenerationSnapshot,this.instantiateEditor();var b=this.editor;b.setContents(E),Kn(function(){return o.setEditorSelection(b,h)})}},O.prototype.instantiateEditor=function(){this.editor?this.hookEditor(this.editor):this.editor=this.createEditor(this.getEditingArea(),this.getEditorConfig())},O.prototype.destroyEditor=function(){this.editor&&this.unhookEditor(this.editor)},O.prototype.isControlled=function(){return"value"in this.props},O.prototype.getEditorConfig=function(){return{bounds:this.props.bounds,formats:this.props.formats,modules:this.props.modules,placeholder:this.props.placeholder,readOnly:this.props.readOnly,scrollingContainer:this.props.scrollingContainer,tabIndex:this.props.tabIndex,theme:this.props.theme}},O.prototype.getEditor=function(){if(!this.editor)throw new Error("Accessing non-instantiated editor");return this.editor},O.prototype.createEditor=function(v,l){var o=new Vn.default(v,l);return l.tabIndex!=null&&this.setEditorTabIndex(o,l.tabIndex),this.hookEditor(o),o},O.prototype.hookEditor=function(v){this.unprivilegedEditor=this.makeUnprivilegedEditor(v),v.on("editor-change",this.onEditorChange)},O.prototype.unhookEditor=function(v){v.off("editor-change",this.onEditorChange)},O.prototype.getEditorContents=function(){return this.value},O.prototype.getEditorSelection=function(){return this.selection},O.prototype.isDelta=function(v){return v&&v.ops},O.prototype.isEqualValue=function(v,l){return this.isDelta(v)&&this.isDelta(l)?Ot.default(v.ops,l.ops):Ot.default(v,l)},O.prototype.setEditorContents=function(v,l){var o=this;this.value=l;var E=this.getEditorSelection();typeof l=="string"?v.setContents(v.clipboard.convert(l)):v.setContents(l),Kn(function(){return o.setEditorSelection(v,E)})},O.prototype.setEditorSelection=function(v,l){if(this.selection=l,l){var o=v.getLength();l.index=Math.max(0,Math.min(l.index,o-1)),l.length=Math.max(0,Math.min(l.length,o-1-l.index)),v.setSelection(l)}},O.prototype.setEditorTabIndex=function(v,l){var o,E;!((E=(o=v)===null||o===void 0?void 0:o.scroll)===null||E===void 0)&&E.domNode&&(v.scroll.domNode.tabIndex=l)},O.prototype.setEditorReadOnly=function(v,l){l?v.disable():v.enable()},O.prototype.makeUnprivilegedEditor=function(v){var l=v;return{getHTML:function(){return l.root.innerHTML},getLength:l.getLength.bind(l),getText:l.getText.bind(l),getContents:l.getContents.bind(l),getSelection:l.getSelection.bind(l),getBounds:l.getBounds.bind(l)}},O.prototype.getEditingArea=function(){if(!this.editingArea)throw new Error("Instantiating on missing editing area");var v=cl.default.findDOMNode(this.editingArea);if(!v)throw new Error("Cannot find element for editing area");if(v.nodeType===3)throw new Error("Editing area cannot be a text node");return v},O.prototype.renderEditingArea=function(){var v=this,l=this.props,o=l.children,E=l.preserveWhitespace,x=this.state.generation,g={key:x,ref:function(h){v.editingArea=h}};return $e.default.Children.count(o)?$e.default.cloneElement($e.default.Children.only(o),g):E?$e.default.createElement("pre",Vt({},g)):$e.default.createElement("div",Vt({},g))},O.prototype.render=function(){var v;return $e.default.createElement("div",{id:this.props.id,style:this.props.style,key:this.state.generation,className:"quill "+(v=this.props.className,v??""),onKeyPress:this.props.onKeyPress,onKeyDown:this.props.onKeyDown,onKeyUp:this.props.onKeyUp},this.renderEditingArea())},O.prototype.onEditorChangeText=function(v,l,o,E){var x,g;if(this.editor){var h=this.isDelta(this.value)?E.getContents():E.getHTML();h!==this.getEditorContents()&&(this.lastDeltaChangeSet=l,this.value=h,(g=(x=this.props).onChange)===null||g===void 0||g.call(x,v,l,o,E))}},O.prototype.onEditorChangeSelection=function(v,l,o){var E,x,g,h,b,d;if(this.editor){var r=this.getEditorSelection(),e=!r&&v,a=r&&!v;Ot.default(v,r)||(this.selection=v,(x=(E=this.props).onChangeSelection)===null||x===void 0||x.call(E,v,l,o),e?(h=(g=this.props).onFocus)===null||h===void 0||h.call(g,v,l,o):a&&((d=(b=this.props).onBlur)===null||d===void 0||d.call(b,r,l,o)))}},O.prototype.focus=function(){this.editor&&this.editor.focus()},O.prototype.blur=function(){this.editor&&(this.selection=null,this.editor.blur())},O.displayName="React Quill",O.Quill=Vn.default,O.defaultProps={theme:"snow",modules:{},readOnly:!1},O}($e.default.Component);function Kn(n){Promise.resolve().then(n)}var fl=dl;const hl=br(fl),Ua="toolbar",Lt=({isError:n,isInputFocused:O},v)=>n?Rn.error.main:O?Rn.primary.main:v,fn=Ue.grey[300],za=Ee()((n,O)=>({root:{maxHeight:"100%",overflow:"auto",position:"relative","&:hover":{[`& .ql-container, .${Ua}`]:{borderColor:`${Lt(O,O.isDisabled?fn:n.palette.text.secondary)} !important`}}},editor:{borderRadius:n.shape.borderRadius,"& .ql-container":{borderBottomLeftRadius:n.shape.borderRadius,borderBottomRightRadius:n.shape.borderRadius,borderTop:"none !important",border:`1px solid ${Lt(O,fn)}`},"& .ql-editor":{padding:n.spacing(1,1.5),paddingTop:0,"&.ql-blank::before":{color:n.palette.text.disabled,fontStyle:"normal",fontFamily:n.typography.body1.fontFamily,fontSize:n.typography.body1.fontSize,left:n.spacing(1.5)}},"& .ql-action, .ql-preview, .ql-remove":{color:n.palette.primary.main,fontFamily:n.typography.body1.fontFamily},"& .ql-action, .ql-remove":{fontWeight:n.typography.fontWeightMedium,fontSize:n.typography.body2.fontSize},"& .ql-editor.ql-blank::before":{fontSize:O.size==="small"?n.typography.body2.fontSize:n.typography.body1.fontSize}},disabled:{touchAction:"none",cursor:"default",background:Ue.grey[100]},disabledEditorOverlay:{position:"absolute",width:"100%",height:"100%",opacity:.2,zIndex:n.zIndex.drawer+1,background:"transparent"},toolbar:{borderBottom:"none !important",padding:`${n.spacing(.5,1,O.isLabelPresent?.5:1,1)} !important`,borderTopLeftRadius:n.shape.borderRadius,borderTopRightRadius:n.shape.borderRadius,border:`1px solid ${Lt(O,fn)}`},toolbarTopContent:{display:"flex",gap:n.spacing(1)},label:{color:Lt(O,n.palette.text.secondary),marginTop:n.spacing(1),marginLeft:n.spacing(.5)},emojiPopper:{zIndex:n.zIndex.modal+1}})),at=ve({bold:{id:"common.rich-text-editor.bold",defaultMessage:"Bold"},italic:{id:"common.rich-text-editor.italic",defaultMessage:"Italic"},underline:{id:"common.rich-text-editor.underline",defaultMessage:"Underline"},unorderedList:{id:"common.rich-text-editor.unordered-list",defaultMessage:"Unordered list"},orderedList:{id:"common.rich-text-editor.ordered-list",defaultMessage:"Ordered list"},link:{id:"common.rich-text-editor.link",defaultMessage:"Link"},emojis:{id:"common.rich-text-editor.emojis",defaultMessage:"Emojis"},removeFormatting:{id:"common.rich-text-editor.remove-formatting",defaultMessage:"Remove formatting"}}),pl={clipboard:{matchVisual:!1},toolbar:{container:"#toolbar"}},yl=({disabled:n,helperText:O,error:v,fullWidth:l,name:o,onFocus:E,onBlur:x,label:g,size:h="medium","data-external-id":b,...d})=>{const r=Y.useId(),[e,a]=Y.useState(!1),[f,c]=Y.useState(void 0),[i,u]=Y.useState(void 0),[s,p]=Y.useState({isBoldActive:!1,isItalicActive:!1,isUnderlineActive:!1,isUnorderedListActive:!1,isOrderedListActive:!1,isLinkActive:!1}),t={isInputFocused:e,isError:!!v,isLabelPresent:!!g,size:h,isDisabled:!!n},{classes:y,cx:k}=za(t),M=Y.useCallback(()=>{const I=document.querySelector(".ql-tooltip"),F=(I==null?void 0:I.classList.contains("ql-editing"))&&!(I!=null&&I.classList.contains("ql-hidden"));if(i&&!F){const V=i.getSelection()||void 0,B=i.getFormat(V);p({isBoldActive:!!B.bold,isItalicActive:!!B.italic,isUnderlineActive:!!B.underline,isUnorderedListActive:B.list==="bullet",isOrderedListActive:B.list==="ordered",isLinkActive:!!B.link})}},[i]),S=(...I)=>{a(!0),M(),E==null||E(...I)},j=(...I)=>{a(!1),x==null||x(...I)},_=I=>{if(i){const F=i.getSelection()||void 0,V=i.getFormat(F),B=V==null?void 0:V[I];i.format(I,!B),M()}},w=I=>{if(i){const F=i.getSelection()||void 0,V=i.getFormat(F),B=(V==null?void 0:V.list)===I;i.format("list",B?!1:I),M()}},A=()=>{if(i){const I=i.getSelection()||void 0,F=i.getFormat(I),V=F==null?void 0:F.link,B=i.getText((I==null?void 0:I.index)||0,(I==null?void 0:I.length)||0);c({url:V??"",text:B,selection:I})}},T=()=>{if(i){const I=i.getSelection()||void 0,F=(I==null?void 0:I.index)||0,V=(I==null?void 0:I.length)||0;i.removeFormat(F,V),M()}},N=I=>{if(i){const F=I.selection;i.deleteText((F==null?void 0:F.index)||0,(F==null?void 0:F.length)||0),i.insertText((F==null?void 0:F.index)||0,I.text||I.url,"link",I.url),M()}c(void 0)},R=I=>{var F;if(i){const V="native"in I?I.native:void 0;V&&i.insertText(((F=i.getSelection())==null?void 0:F.index)||0,V)}};return Y.useEffect(()=>{var F;const I=(F=document.getElementById(r))==null?void 0:F.querySelector(".ql-remove");return I==null||I.addEventListener("click",M),()=>{I==null||I.removeEventListener("click",M)}},[r,M]),m.jsxs(ta,{id:r,"data-external-id":b,error:v,className:y.root,fullWidth:l,children:[m.jsx(ml,{label:g,styleControls:t,state:s,toggleFontStyleFormat:_,toggleListFormat:w,toggleLink:A,onClearFormatting:T,onEmojiSelect:R,size:h,disabled:n}),m.jsx(hl,{ref:I=>I&&u(I.getEditor()),className:k(y.editor,{[y.disabled]:n}),modules:pl,onFocus:S,onBlur:j,onKeyDown:M,...d}),m.jsx(fa,{className:y.disabledEditorOverlay,open:!!n}),m.jsx(st,{"data-external-id":`${o}-helper-text`,children:O}),m.jsx(Jo,{open:!!f,onClose:()=>c(void 0),onSubmit:N,link:f})]})},ml=({styleControls:n,label:O,toggleFontStyleFormat:v,state:l,toggleListFormat:o,onClearFormatting:E,toggleLink:x,onEmojiSelect:g,size:h,disabled:b})=>{const{classes:d,cx:r}=za(n),[e,a]=Y.useState(null),f=ce(),c="small",i=p=>{a(p.currentTarget)},u=()=>{a(null)},s=p=>{a(null),g(p)};return m.jsxs("div",{className:r(d.toolbar,Ua,{[d.disabled]:b}),children:[m.jsx("div",{id:"toolbar",style:{display:"none"}}),m.jsxs("div",{className:d.toolbarTopContent,children:[m.jsx(Ke,{disabled:b,tooltipPlacement:"top",title:f.formatMessage(at.bold),onClick:()=>v("bold"),size:c,children:m.jsx(Pa,{color:l.isBoldActive?"primary":"action"})}),m.jsx(Ke,{disabled:b,tooltipPlacement:"top",title:f.formatMessage(at.italic),onClick:()=>v("italic"),size:c,children:m.jsx(Ra,{color:l.isItalicActive?"primary":"action"})}),m.jsx(Ke,{disabled:b,tooltipPlacement:"top",title:f.formatMessage(at.underline),size:c,onClick:()=>v("underline"),children:m.jsx(La,{color:l.isUnderlineActive?"primary":"action"})}),m.jsx(Be,{orientation:"vertical",flexItem:!0}),m.jsx(Ke,{disabled:b,tooltipPlacement:"top",title:f.formatMessage(at.unorderedList),size:c,onClick:()=>o("bullet"),children:m.jsx(oi,{color:l.isUnorderedListActive?"primary":"action"})}),m.jsx(Ke,{disabled:b,tooltipPlacement:"top",title:f.formatMessage(at.orderedList),size:c,onClick:()=>o("ordered"),children:m.jsx(li,{color:l.isOrderedListActive?"primary":"action"})}),m.jsx(Be,{orientation:"vertical",flexItem:!0}),m.jsx(Ke,{disabled:b,tooltipPlacement:"top",title:f.formatMessage(at.link),size:c,onClick:x,children:m.jsx(ii,{color:l.isLinkActive?"primary":"action"})}),m.jsx(Ke,{disabled:b,tooltipPlacement:"top",title:f.formatMessage(at.removeFormatting),size:c,onClick:E,children:m.jsx(Ca,{})}),m.jsx(Be,{orientation:"vertical",flexItem:!0}),m.jsx(Ke,{disabled:b,tooltipPlacement:"top",title:f.formatMessage(at.emojis),size:c,onClick:i,children:m.jsx(Fa,{})})]}),O&&m.jsx(ae,{className:d.label,variant:"caption",display:"block",children:O}),e&&m.jsx(ra,{open:!0,anchorEl:e,className:d.emojiPopper,onClose:u,children:m.jsx(si,{emojiTooltip:!1,showPreview:!1,showSkinTones:!1,onSelect:s})})]})},gl=({validate:n,...O})=>m.jsx(la,{name:O.name,validate:n,render:({input:v,meta:l})=>{const{onChange:o,onBlur:E,onFocus:x,value:g}=v,h=b=>{const r=!!ci(b);return o(r?b:void 0)};return m.jsx(yl,{"data-external-id":`rich-text-field-${O.name}`,onChange:h,value:g,onFocus:()=>x(),onBlur:()=>E(),error:!!l.error&&l.touched,helperText:l.error&&l.touched?l.error:O.helperText,...O})}}),vl=Ee()(()=>({noMargin:{margin:0}})),St=ve({policyDetails:{id:"hr.time-off.policy-setup.policy-details",defaultMessage:"Policy details"},policyName:{id:"hr.time-off.name-your-policy",defaultMessage:"Name your policy"},policyNamePlaceholder:{id:"hr.time-off.policy-name-placeholder",defaultMessage:"Policy name"},addDescription:{id:"hr.time-off.add-a-description",defaultMessage:"Add a description"},description:{id:"common.description",defaultMessage:"Description"}}),bl=()=>{const n=ce(),{classes:O}=vl(),{errors:v}=Se({subscription:{errors:!0}}),{disabledFields:l}=Y.useContext(Pe);return m.jsx(Dt,{"data-external-id":"policy-details",title:n.formatMessage(St.policyDetails),showNotCompleteLozenge:v==null?void 0:v.name,children:m.jsxs(J,{spacing:4,children:[m.jsx(mn,{label:n.formatMessage(St.policyName),className:O.noMargin,placeholder:n.formatMessage(St.policyNamePlaceholder),disabled:l.includes("name"),name:"name",fullWidth:!0}),m.jsx(gl,{label:n.formatMessage(St.description),placeholder:n.formatMessage(St.addDescription),name:"description",disabled:l.includes("description")})]})})},xl=Ee()(()=>({noMargin:{margin:0,[`& .${Yt.root}`]:{marginTop:0,marginBottom:0}}})),ft=ve({policyRestrictions:{id:"hr.time-off.policy-restrictions",defaultMessage:"Policy restrictions"},restrictLeaveDaysModification:{id:"hr.time-off.restrict-edit-leave-days",defaultMessage:"Restrict editing of leave days"},restrictLeaveDaysModificationOff:{id:"hr.time-off.restrict-edit-leave-days-off",defaultMessage:"OFF: Leave days calculated at the time of leave request can be changed by the employee and the approvers (only if request is in pending state)"},restrictLeaveDaysModificationOn:{id:"hr.time-off.restrict-edit-leave-days-on",defaultMessage:"ON: Leave days calculated at the time of leave request cannot be changed by the employee and approvers. However, half day requests can be made."},restrictDuringProbation:{id:"hr.time-off.restrict-request-during-probation",defaultMessage:"Restrict during probation"},restrictDuringProbationOff:{id:"hr.time-off.restrict-request-during-probation-off",defaultMessage:"OFF: Employees can create leave request during their probation period as usual, but the approvers are warned"},restrictDuringProbationOn:{id:"hr.time-off.restrict-request-during-probation-on",defaultMessage:"ON: Employees are not able to create leave request during their probation period"}}),wl=()=>{const n=ce(),{classes:O}=xl(),{disabledFields:v}=Y.useContext(Pe),{values:l}=Se({subscription:{values:!0}}),{restrictLeaveDaysModification:o,restrictDuringProbation:E}=l;return m.jsx(Dt,{"data-external-id":"policy-restriction",title:n.formatMessage(ft.policyRestrictions),children:m.jsxs(J,{gap:4,children:[m.jsx(ut,{"aria-checked":l.restrictLeaveDaysModification,name:"restrictLeaveDaysModification",formControlClass:O.noMargin,label:m.jsx(ke,{heading:n.formatMessage(ft.restrictLeaveDaysModification),subtext:n.formatMessage(o?ft.restrictLeaveDaysModificationOn:ft.restrictLeaveDaysModificationOff)}),disabled:v.includes("restrictLeaveDaysModification")}),m.jsx(ut,{"aria-checked":l.restrictDuringProbation,name:"restrictDuringProbation",formControlClass:O.noMargin,label:m.jsx(ke,{heading:n.formatMessage(ft.restrictDuringProbation),subtext:n.formatMessage(E?ft.restrictDuringProbationOn:ft.restrictDuringProbationOff)}),disabled:v.includes("restrictDuringProbation")})]})})},El=({template:n})=>{const{values:O}=Se(),{isFormDataDifferentThanTemplate:v,setIsFormDataDifferentThanTemplate:l,pageMode:o}=Y.useContext(Ne),x=n?(()=>{if(!n)return!0;const g=$a(n,o);return!ee.isEqual({...O,name:null,description:null},{...g,name:null,description:null})})():!0;return Y.useEffect(()=>{v!==x&&l(x)},[v,x,l]),null},Kt=ve({draftCreated:{id:"hr.time-off.draft-created",defaultMessage:"A draft has been created for this policy"},changesSaved:{id:"hr.time-off.policy-saved",defaultMessage:"Policy saved successfully"},required:{id:"validation.error.required",defaultMessage:"Required"},youCannotChangeAllSettings:{id:"hr.time-off.you-cannot-change-all-settings-because-employees-are-already-assigned-to-this-leave-policy",defaultMessage:"You cannot change all settings because employees are already assigned to this leave policy."}}),Wa={operator:"between",values:[],valueUnit:"years",output:{values:[],accrualType:!1,negativeBalanceSupport:!1,pauseAccrualSetting:{pauseAccrualPolicyIds:[],minimumRequiredDays:0}}},Ha={operator:"between",values:[],valueUnit:"days",output:{values:[],unit:"percentage"}},Al=hi(({pageMode:n})=>({name:[wr,yi(2),pi(32)],minimumRequiredDays:[It(365),In(0)],numberOfDays:[({intl:O,value:v})=>ee.isNaN(v)?O.formatMessage(Kt.required):void 0,rn({isEnabled:({isAllowanceConditional:O,numberOfDays:v})=>!(O||v)}),O=>O.value?It(365)(O):void 0,O=>O.value?In(0)(O):void 0],carryOverAllowance:[rn({isEnabled:({paid:O,allowanceType:v,carryOverSupport:l,carryOverAllowance:o,isPayRateConditional:E})=>!!((["paid","partially-paid"].includes(O)||E)&&v==="annual"&&l&&!o&&n===Oe.Create)}),O=>O.value?It(365)(O):void 0],dailyRateCustomDayCount:[rn({isEnabled:O=>{const{dailyRateDayType:v,dailyRateCustomDayCount:l}=O;return Nn(O)&&v==="custom-days"&&!l}}),fi({minValue:0}),It(365)]})),$a=(n,O)=>{var b,d,r,e,a,f,c;const v=n&&"negativeBalanceSupport"in n?n.negativeBalanceSupport:!1,l=n?n.dailyRateCustomDayCount:30,o=n&&"publicHolidaysExcluded"in n?n.publicHolidaysExcluded:!1,E=!n||n!=null&&n.isPayRateConditional||n!=null&&n.paid?"paid":n!=null&&n.leavePayRatePercentage?"partially-paid":"unpaid",x=(r=(d=(b=n==null?void 0:n.leavePayRateConditions)==null?void 0:b.defaultOutput)==null?void 0:d.values)==null?void 0:r.map(Number),g=!x||(x==null?void 0:x[0])===100?"paid":(x==null?void 0:x[0])===0?"unpaid":"partially-paid",h=n&&"pauseAccrualSetting"in n?n.pauseAccrualSetting:void 0;return{name:(n==null?void 0:n.name)??"",description:(n==null?void 0:n.description)??"",numberOfDays:n==null?void 0:n.numberOfDays,daysType:(n==null?void 0:n.daysType)??"calendar-days",isAllowanceConditional:(n==null?void 0:n.isAllowanceConditional)??!1,leaveAllowanceConditions:{type:"job-tenure",conditions:((a=(e=n==null?void 0:n.leaveAllowanceConditions)==null?void 0:e.conditions)==null?void 0:a.map(i=>{var u,s,p,t,y,k,M,S,j,_,w,A,T;return{operator:i==null?void 0:i.operator,values:(u=i==null?void 0:i.values)==null?void 0:u.map(N=>ee.isNaN(Number(N))?0:Number(N)),valueUnit:(i==null?void 0:i.valueUnit)==="months"||(i==null?void 0:i.valueUnit)==="years"?i==null?void 0:i.valueUnit:"months",output:{values:(p=(s=i==null?void 0:i.output)==null?void 0:s.values)==null?void 0:p.map(N=>ee.isNaN(Number(N))?0:Number(N)),accrualType:((t=i==null?void 0:i.output)==null?void 0:t.accrualType)==="monthly",negativeBalanceSupport:(y=i==null?void 0:i.output)==null?void 0:y.negativeBalanceSupport,pauseAccrualSetting:{pauseAccrualPolicyIds:((M=(k=i==null?void 0:i.output)==null?void 0:k.pauseAccrualSetting)==null?void 0:M.pauseAccrualPolicyIds)||[],minimumRequiredDays:((j=(S=i==null?void 0:i.output)==null?void 0:S.pauseAccrualSetting)==null?void 0:j.minimumRequiredDays)||0,minimumRequiredDaysCheckbox:!!((w=(_=i==null?void 0:i.output)==null?void 0:_.pauseAccrualSetting)!=null&&w.minimumRequiredDays)||!1,reduceAccrualDays:!ee.isEmpty((T=(A=i==null?void 0:i.output)==null?void 0:A.pauseAccrualSetting)==null?void 0:T.pauseAccrualPolicyIds)}}}}))||[Wa]},allowanceType:(n==null?void 0:n.allowanceType)??"annual",carryOverSupport:(n==null?void 0:n.carryOverSupport)??!1,carryOverAllowance:ee.isNil(n==null?void 0:n.carryOverAllowance)?O===Oe.Create?0:void 0:n==null?void 0:n.carryOverAllowance,accrualType:(n==null?void 0:n.accrualType)==="monthly",negativeBalanceSupport:v,pauseAccrualPolicyIds:(h==null?void 0:h.pauseAccrualPolicyIds)||[],minimumRequiredDays:(h==null?void 0:h.minimumRequiredDays)||0,minimumRequiredDaysCheckbox:!!(h!=null&&h.minimumRequiredDays)||!1,reduceAccrualDays:!ee.isEmpty(h==null?void 0:h.pauseAccrualPolicyIds),paid:E,leavePayRatePercentage:E==="partially-paid"?n==null?void 0:n.leavePayRatePercentage:void 0,isPayRateConditional:(n==null?void 0:n.isPayRateConditional)??!1,leavePayRateConditions:{type:"leaves-taken",conditions:((c=(f=n==null?void 0:n.leavePayRateConditions)==null?void 0:f.conditions)==null?void 0:c.map(i=>{var p,t,y;const u=(t=(p=i==null?void 0:i.output)==null?void 0:p.values)==null?void 0:t.map(Number),s=!u||u[0]===100?"paid":u[0]===0?"unpaid":"partially-paid";return{operator:i==null?void 0:i.operator,values:(y=i==null?void 0:i.values)==null?void 0:y.map(k=>ee.isNaN(Number(k))?0:Number(k)),valueUnit:"days",output:{paid:s,values:s==="partially-paid"?u:[],unit:"percentage"}}}))||[Ha],defaultOutput:{paid:g,values:g==="partially-paid"&&x?x:[],unit:"percentage"}},dailyRateSalaryComponent:(n==null?void 0:n.dailyRateSalaryComponent)??"basic",dailyRateDayType:(n==null?void 0:n.dailyRateDayType)??"custom-days",dailyRateCustomDayCount:l??30,restrictLeaveDaysModification:(n==null?void 0:n.restrictLeaveDaysModification)??!1,restrictDuringProbation:(n==null?void 0:n.restrictDuringProbation)??!1,publicHolidaysExcluded:o,eligibleForLeaveSalary:(n==null?void 0:n.eligibleForLeaveSalary)??!1}},Ol=({template:n})=>{const O=ct(),v=Jt(),l=ce(),o=ya("time-off"),{handleRequestExceptionAlert:E}=wn(),{pageMode:x,leavePolicy:g,setLeavePolicy:h,isPolicyPublishedWithEmployeesAssigned:b,setIsPolicyUpdated:d,isTimeOffV2Phase4FlowEnabled:r}=Y.useContext(Ne),{mutateAsync:e}=Ea(),{mutateAsync:a}=Aa(),{mutateAsync:f}=Sa(),{data:c,isFetching:i}=Oa({companyId:O,leaveTypeId:(g==null?void 0:g.id)??""},{enabled:x===Oe.Edit&&!!(g!=null&&g.id),select:wt}),u=Al({pageMode:x}),s=Y.useMemo(()=>$a(g??n??void 0,x),[g,n,x]),p=Y.useCallback(async t=>{var F,V,B,q,C;const{isAllowanceConditional:y,isPayRateConditional:k}=t,M=(t==null?void 0:t.allowanceType)==="annual",S=!k&&(t==null?void 0:t.paid)==="unpaid",j=Nn(t),_=!S&&M&&(t==null?void 0:t.carryOverSupport),w=!y&&!S&&M&&(t==null?void 0:t.accrualType),A=y?(V=(F=t==null?void 0:t.leaveAllowanceConditions)==null?void 0:F.conditions)==null?void 0:V.map(({operator:P,values:L,valueUnit:W,output:z})=>{const{values:D,negativeBalanceSupport:U,pauseAccrualSetting:H}=z,$=!S&&M&&(z==null?void 0:z.accrualType),K=H&&H.reduceAccrualDays&&H.pauseAccrualPolicyIds.length>0?{pauseAccrualPolicyIds:H.pauseAccrualPolicyIds,minimumRequiredDays:H.minimumRequiredDays}:void 0;return{operator:P,valueUnit:W,values:P==="between"?L.map(String):[String(L[0])],output:{values:D.map(String),accrualType:$?"monthly":"no-accrual",negativeBalanceSupport:$?U:!1,pauseAccrualSetting:$?K:void 0}}}):void 0,T=k?(q=(B=t==null?void 0:t.leavePayRateConditions)==null?void 0:B.conditions)==null?void 0:q.map(({operator:P,values:L,valueUnit:W,output:z})=>({operator:P,valueUnit:W,values:P==="between"?L.map(String):[String(L[0])],output:{values:Gn(z),unit:"percentage"}})):void 0,N=t&&t.leaveAllowanceConditions&&t.leaveAllowanceConditions.conditions?t.leaveAllowanceConditions.conditions.some(P=>{var L,W,z,D,U;return((W=(L=P==null?void 0:P.output)==null?void 0:L.pauseAccrualSetting)==null?void 0:W.pauseAccrualPolicyIds)&&((U=(D=(z=P==null?void 0:P.output)==null?void 0:z.pauseAccrualSetting)==null?void 0:D.pauseAccrualPolicyIds)==null?void 0:U.length)>0}):!1,R=t&&t.leaveAllowanceConditions&&t.leaveAllowanceConditions.conditions?t.leaveAllowanceConditions.conditions.some(P=>{var L,W;return(W=(L=P==null?void 0:P.output)==null?void 0:L.pauseAccrualSetting)==null?void 0:W.reduceAccrualDays}):!1,I={templateId:(g==null?void 0:g.templateId)??(n==null?void 0:n.id),leavePolicyType:(g==null?void 0:g.leavePolicyType)??(n==null?void 0:n.leavePolicyType),name:t.name,description:t.description,allowanceType:t.allowanceType,carryOverSupport:_,carryOverAllowance:_?t.carryOverAllowance:void 0,isDraft:(g==null?void 0:g.isDraft)??!0,leaveAllowanceConditions:A?{type:"job-tenure",conditions:A}:void 0,numberOfDays:y?void 0:t.numberOfDays,daysType:t.daysType,accrualType:w?"monthly":"no-accrual",negativeBalanceSupport:w?t.negativeBalanceSupport:!1,paid:!j,leavePayRatePercentage:t!=null&&t.isPayRateConditional?void 0:_l(t),leavePayRateConditions:T?{type:"leaves-taken",conditions:T,defaultOutput:{values:Gn(t.leavePayRateConditions.defaultOutput),unit:"percentage"}}:void 0,dailyRateSalaryComponent:j?t.dailyRateSalaryComponent:void 0,dailyRateDayType:j?t.dailyRateDayType:void 0,dailyRateCustomDayCount:j&&t.dailyRateDayType==="custom-days"?t.dailyRateCustomDayCount:void 0,restrictDuringProbation:S?!1:t.restrictDuringProbation,restrictLeaveDaysModification:S?!0:t.restrictLeaveDaysModification,publicHolidaysExcluded:t.daysType==="calendar-days"?t.publicHolidaysExcluded:void 0,eligibleForLeaveSalary:t.eligibleForLeaveSalary??!1,pauseAccrualSetting:!y&&r&&t.pauseAccrualPolicyIds.length>0&&t.reduceAccrualDays?{pauseAccrualPolicyIds:t.pauseAccrualPolicyIds,minimumRequiredDays:t.minimumRequiredDays}:y&&N&&R?{pauseAccrualPolicyIds:[],minimumRequiredDays:0}:void 0};try{if(b&&g){await f({companyId:O,leaveTypeId:g.id,...I});const P={...g,...I,isAllowanceConditional:y,isPayRateConditional:k},L=(C=P.leaveAllowanceConditions)!=null&&C.conditions?P.leaveAllowanceConditions.conditions.map(D=>({...D,output:ee.omitBy(D.output,ee.isNil)})):void 0,W=L?{...P,leaveAllowanceConditions:{...P.leaveAllowanceConditions,conditions:L}}:ee.omitBy(P,ee.isNil),z=ee.isEqual(g,ee.omitBy(W,ee.isNil));h(P),d(!z)}else if(x===Oe.Edit&&(g!=null&&g.isDraft||(g==null?void 0:g.numberOfSetupEmployees)===0)||x===Oe.Create&&g){const P=await a({companyId:O,leaveTypeId:g.id,...I}),L=wt(P),W=ee.isEqual(g,L);h(L),d(!W),v.success({message:l.formatMessage(Kt.changesSaved)}),x===Oe.Edit&&o({event:"policy-edited"})}else{const P=await e({companyId:O,...I}),L=wt(P);h(L),v.success({message:l.formatMessage(Kt.draftCreated)})}}catch(P){E(P)}},[n==null?void 0:n.id,n==null?void 0:n.leavePolicyType,g,b,x,f,O,h,a,e,v,l,E,o,d,r]);return m.jsx(na,{loading:i,children:m.jsx(da,{onSubmit:p,initialValues:s,validate:u,mutators:{...di},render:t=>m.jsx(Sl,{...t,template:n,disabledFields:c==null?void 0:c.disabledFields})})})},Sl=({form:n,values:O,template:v,disabledFields:l=[]})=>{const{setupFormRef:o}=Y.useContext(Ne);El({template:v});const E=["paid","partially-paid"].includes(O==null?void 0:O.paid)||(O==null?void 0:O.isPayRateConditional),x=ce(),{isPolicyPublishedWithEmployeesAssigned:g}=Y.useContext(Ne),h=sa(xr);return o&&(o.current=n),m.jsx(Mo,{value:{template:v,disabledFields:l},children:m.jsxs(J,{spacing:2,children:[g&&m.jsx(Xe,{variant:et.Warning,message:x.formatMessage(Kt.youCannotChangeAllSettings),withIcon:!0}),m.jsx(bl,{}),m.jsx(Po,{}),m.jsx(Wo,{}),O.paid==="paid"&&!O.isPayRateConditional&&h&&m.jsx(Zo,{}),E&&m.jsx(wl,{})]})})},_l=({paid:n,leavePayRatePercentage:O})=>n==="partially-paid"?O:n==="paid"?100:0,Gn=({paid:n,values:O})=>n==="partially-paid"?O==null?void 0:O.map(String):n==="paid"?["100"]:["0"],Ml=Ee()(n=>({capitalizedText:{textTransform:"capitalize"},horizontalStepper:{paddingTop:0},pageContent:{paddingTop:n.spacing(3)}})),je=ve({newLeavePolicy:{id:"hr.time-off.new-leave-policy",defaultMessage:"New leave policy"},editLeavePolicy:{id:"hr.time-off.edit-leave-policy",defaultMessage:"Edit leave policy"},companyLeaveCycle:{id:"hr.time-off.company-leave-cycle",defaultMessage:"Company leave cycle runs from <b>{startDate} - {endDate}</b>"},employeeLeaveCycle:{id:"hr.app.page.configuration.time-off.leave-cycle.hire-date-text",defaultMessage:"Each employee's leave cycle will start on their work anniversary."},leaves:{id:"hr.time-off.leaves",defaultMessage:"Leaves"},leavePolicy:{id:"hr.time-off.leave-policy",defaultMessage:"Leave policy"},cancel:{id:"common.action.cancel",defaultMessage:"Cancel"},next:{id:"common.action.next",defaultMessage:"Next"},saveChanges:{id:"common.action.save-changes",defaultMessage:"Save changes"},back:{id:"common.action.back",defaultMessage:"Back"},activatePolicy:{id:"hr.time-off.activate-policy",defaultMessage:"Activate policy"},saveAsDraftAndClose:{id:"hr.time-off.save-as-draft-and-close",defaultMessage:"Save as draft & close"},done:{id:"common.action.done",defaultMessage:"Done"},templateUsed:{id:"hr.time-off.template-used",defaultMessage:"Template used: {templateName}"},customized:{id:"hr.time-off.customized",defaultMessage:"Customized"}}),Tl=({wizardActionProps:n,steps:O})=>{const v=ce(),l=ct(),{classes:o}=Ml(),{templateId:E}=En(),x=Ze(mi),{pageMode:g,leavePolicy:h,includedEmployees:b,excludedEmployees:d,isFormDataDifferentThanTemplate:r,manuallyAdjustedEmployeeDetailsCount:e,setIsSheetsShowingManuallyAdjustedEmployees:a,setIsEmployeeDetailsSheetOpen:f,onLastStepFrom:c}=Y.useContext(Ne),i=g===Oe.Edit,u=h&&!(h!=null&&h.isDraft),{activeStepIndex:s,handleDecrementActiveStep:p,handleIncrementActiveStep:t,setActiveStepIndex:y,isNextButtonDisabled:k,isNextButtonLoading:M,handleFinalizePolicyCreation:S,isEmployeeListFetched:j,isGettingPolicyEmployees:_,handleSaveAsDraftAndClose:w,handleGoBackToCertainStep:A}=n,T=g===Oe.Create||(h==null?void 0:h.isDraft),N=s===be.Setup?[]:[...Array(s).keys()],R=s===be.ReviewAndSave?[]:[...Array(4-s).keys()].map(B=>s+B),{data:I}=xa({companyId:l,templateId:E??(h==null?void 0:h.templateId)??""},{enabled:!!(E??(h==null?void 0:h.templateId)),select:wt}),F=s===0?null:m.jsx(Ce,{"data-external-id":"back-button",variant:"outlined",onClick:()=>{s===be.ReviewAndSave&&c==="sheet"&&(a(e>0),f(!0)),p()},children:v.formatMessage(je.back)}),V=I&&s===be.Setup;return m.jsxs(Ai,{bodyProps:{className:o.pageContent},header:m.jsx(Ei,{title:m.jsx("span",{className:o.capitalizedText,children:v.formatMessage(i?je.editLeavePolicy:je.newLeavePolicy)}),subtitle:m.jsx(kl,{}),breadcrumbs:{paths:[{title:v.formatMessage(je.leaves),to:"/settings/time-off"},{title:v.formatMessage(je.leavePolicy)}]}}),children:[m.jsx(wi,{nonLinear:!0,className:o.horizontalStepper,onStepClick:A,activeStepIndex:s,steps:O,completedSteps:N,disabledSteps:R}),m.jsxs(m.Fragment,{children:[s===be.Setup&&m.jsx(Ol,{template:g===Oe.Create?I:void 0}),s===be.AddEmployees&&m.jsxs(m.Fragment,{children:[_&&m.jsx(Er,{size:32}),j&&(b.length>0||d.length>0)&&m.jsx(uo,{})]}),s===be.EmployeeDetails&&m.jsx(yo,{onAddEmployees:()=>{p()},includedEmployees:ho.assignedEmployees}),s===be.ReviewAndSave&&m.jsx(mo,{onNavigateToStep:y})]}),m.jsx(bi,{leftSide:m.jsxs(J,{alignItems:"center",direction:"row",spacing:1,children:[!(!(h!=null&&h.isDraft)&&s===O.length-1)&&m.jsx(ca,{"data-external-id":"cancel-button",to:"/settings/time-off",children:v.formatMessage(je.cancel)}),V&&m.jsxs(J,{direction:"row",spacing:1,alignItems:"center",children:[m.jsxs(ae,{"data-external-id":"template-used-text",variant:"body2",color:"textSecondary",children:[v.formatMessage(je.templateUsed,{templateName:I.name})," (",x(I.country),")"]}),r&&m.jsx(Ge,{"data-external-id":"template-customized-lozenge",label:v.formatMessage(je.customized),variant:"neutral"})]})]}),rightSide:m.jsx(xi,{variant:"right",children:m.jsxs(J,{direction:"row",spacing:1,children:[!T&&F,T&&m.jsx(Ce,{"data-external-id":"save-as-draft-button",loading:M,disabled:k||M||s===be.AddEmployees,variant:"outlined",onClick:w,children:v.formatMessage(je.saveAsDraftAndClose)}),s<O.length-1&&m.jsx(Ce,{loading:M,disabled:k||M,variant:"contained",onClick:t,"data-external-id":"next-button",children:u&&s===be.EmployeeDetails?v.formatMessage(je.saveChanges):v.formatMessage(je.next)}),s===O.length-1&&m.jsx(Ce,{loading:M,disabled:k||M,onClick:S,"data-external-id":"save-policy-button",variant:"contained",children:v.formatMessage(u?je.done:je.activatePolicy)})]})})})]})},kl=()=>{const n=ce(),O=ct(),[v,l]=Y.useState(),{data:o,isSuccess:E}=Pr({companyId:O});return Y.useEffect(()=>{if(E)if(o.leaveCycleType!=="hire-date"){const x=gi({startingDay:o.startingDay,startingMonth:o.startingMonth}),g=vi(x),h=x?m.jsx(Ln,{date:x,dateFormat:"no-year"}):"",b=g?m.jsx(Ln,{date:g,dateFormat:"no-year"}):"";l({leaveCycleType:o.leaveCycleType,startDate:h,endDate:b})}else l({leaveCycleType:o.leaveCycleType})},[o==null?void 0:o.leaveCycleType,o==null?void 0:o.startingDay,o==null?void 0:o.startingMonth,E]),m.jsx("span",{children:(v==null?void 0:v.leaveCycleType)==="hire-date"?n.formatMessage(je.employeeLeaveCycle):n.formatMessage(je.companyLeaveCycle,{startDate:v==null?void 0:v.startDate,endDate:v==null?void 0:v.endDate,b:x=>m.jsx("b",{children:x})})})},jl=Ee()(n=>({resetAllowanceButton:{marginRight:n.spacing(1)}})),_t=ve({filterRowsWith:{id:"hr.time-off.filter-rows-with",defaultMessage:"Filter rows with:"},resetManualAllowanceChange:{id:"hr.time-off.reset-manual-allowance-change",defaultMessage:"Reset manually adjusted allowance ({count})"},newlyAddedEmployees:{id:"hr.time-off.newly-added-employees",defaultMessage:"Newly added employees ({count})"},manuallyAdjustedAllowance:{id:"hr.time-off.manually-adjusted-allowance-with-count",defaultMessage:"Manually adjusted allowance ({count})"},negativeAvailableDays:{id:"hr.time-off.negative-available-days",defaultMessage:"Negative available days ({count})"}}),Cl=({availableFilters:n,isAllowanceChangeFiltered:O,isNegativeAvailableDaysFiltered:v,isNewlyAddedEmployeesFiltered:l,onAllowanceChangeFilterToggle:o,onNegativeAvailableDaysFilterToggle:E,onNewlyAddedEmployeesFilterToggle:x,onResetAllowanceChange:g,onErrorFilterToggle:h})=>{const b=ce(),{classes:d}=jl(),r=Object.keys(n||{}).filter(f=>f!=="changedDaysUsedBeforeSetup"),e=n&&r.some(f=>n[f]>0),a=n&&n.allowanceChangeFilter>0;return e?m.jsxs(J,{width:"100%",justifyContent:"space-between",flexDirection:"row",alignItems:"center",flexWrap:"wrap",children:[m.jsxs(J,{flexDirection:"row",gap:1,alignItems:"center",flexWrap:"wrap",children:[m.jsx(ae,{mr:1,variant:"subtitle1",children:b.formatMessage(_t.filterRowsWith)}),!!(n!=null&&n.newEmployeesFilter)&&m.jsx(xt,{variant:"outlined",color:l?"primary":"default",icon:l?m.jsx(Bt,{fontSize:"small"}):void 0,label:b.formatMessage(_t.newlyAddedEmployees,{count:n.newEmployeesFilter}),onClick:x,"data-external-id":"newly-assigned-employees-chip","aria-selected":l}),!!(n!=null&&n.negativeAvailableDaysFilter)&&m.jsx(xt,{variant:"outlined",color:v?"primary":"default",icon:v?m.jsx(Bt,{fontSize:"small"}):void 0,label:b.formatMessage(_t.negativeAvailableDays,{count:n.negativeAvailableDaysFilter}),onClick:E,"data-external-id":"negative-available-days-chip","aria-selected":v}),a&&m.jsx(xt,{variant:"outlined",color:O?"primary":"default",icon:O?m.jsx(Bt,{fontSize:"small"}):void 0,label:b.formatMessage(_t.manuallyAdjustedAllowance,{count:n.allowanceChangeFilter}),onClick:o,"data-external-id":"manually-adjusted-allowance-chip","aria-selected":O}),m.jsx(Si,{onActionClick:h})]}),a&&m.jsx(Ce,{"data-external-id":"reset-manual-allowance-change-button",onClick:g,className:d.resetAllowanceButton,children:b.formatMessage(_t.resetManualAllowanceChange,{count:n.allowanceChangeFilter})})]}):m.jsx("div",{})},nn=(n,O)=>{const v=O.columns.findIndex(o=>o.key==="eie")??-1,l=n.cells[v];return(l==null?void 0:l.displayValue)==="true"},Va=(n,O)=>{const{columns:v}=O,{allowanceCell:l,correspondingDefaultAllowanceCell:o,correspondingDefaultProRatedDaysCell:E,proRatedDaysCell:x}=v.reduce((g,h,b)=>{switch(h.key){case"ea":g.allowanceCell=n.cells[b];break;case"eabp":g.correspondingDefaultAllowanceCell=n.cells[b];break;case"epd":g.proRatedDaysCell=n.cells[b];break;case"epdbp":g.correspondingDefaultProRatedDaysCell=n.cells[b];break}return g},{});return!!(nn(n,O)&&(l&&l.content!==(o==null?void 0:o.content)||x&&x.content!==(E==null?void 0:E.content)))},Nl=(n,O)=>{const v=(O==null?void 0:O.columns.findIndex(o=>o.key==="edu"))??-1,l=n.cells[v];return nn(n,O)&&ee.isNumber(l==null?void 0:l.content)&&l.content>0},ot={key:"allowanceChanges",function:(n,O,v)=>Va(n,v)},vt={key:"newlyAddedEmployees",function:(n,O,v)=>{const l=v.columns.findIndex(o=>o.key==="eina");return l>-1&&n.cells.length>l&&n.cells[l]?!!n.cells[l].content:!1}},bt={key:"negativeAvailableDays",function:(n,O,v)=>{const l=v.columns.findIndex(o=>o.key==="ebat");if(l>-1&&n.cells.length>l&&n.cells[l]){const o=n.cells[l].content;if(ee.isNumber(o))return o<0}return!1}},Pl=[ot.key,kn.key,vt.key,bt.key],Dl=({configuration:n,filterValues:O,pageMode:v,rows:l})=>{const o={allowanceChangeFilter:0,errorFilter:0,newEmployeesFilter:0,negativeAvailableDaysFilter:0,changedDaysUsedBeforeSetup:0};for(const E of l)ot.function(E,O,n)&&(o.allowanceChangeFilter+=1),kn.function(E,O,n)&&(o.errorFilter+=1),Nl(E,n)&&(o.changedDaysUsedBeforeSetup+=1),vt.function(E,O,n)&&v===Oe.Edit&&(o.newEmployeesFilter+=1),bt.function(E,O,n)&&(o.negativeAvailableDaysFilter+=1);return o},Rl=Ee()(n=>({daysUsedAlert:{marginTop:n.spacing(1),marginBottom:n.spacing(3)}})),ht=ve({title:{id:"hr.time-off.employee-details-and-allowance-setting",defaultMessage:"Employee details and allowance setting"},saveChanges:{id:"common.action.save-changes",defaultMessage:"Save changes"},back:{id:"common.action.back",defaultMessage:"Back"},download:{id:"common.action.download",defaultMessage:"Download"},upload:{id:"common.action.upload",defaultMessage:"Upload"},conditionalPayRate:{id:"hr.time-off.conditional-pay-rate",defaultMessage:"Conditional pay rate"},daysUsedBeforeSetupWillBeConsidered:{id:"hr.time-off.days-used-before-setup-will-be-considered",defaultMessage:'<b>"Days used before setup"</b> will be considered first when calculating conditional pay rate for leave allowance used'}}),Il=({onDownload:n,onSave:O,onUpload:v})=>{var _,w,A;const l=ce(),{classes:o}=Rl(),{pageMode:E,isSheetsShowingManuallyAdjustedEmployees:x,setIsSheetsShowingManuallyAdjustedEmployees:g,setIsEmployeeDetailsSheetOpen:h,leavePolicy:b}=Y.useContext(Ne),{state:d,changeSheetsFilterValue:r,updateRows:e,addSheetsFilter:a}=Pt(),f=Y.useMemo(()=>d.filterValues&&d.configuration?Dl({rows:d.rows,filterValues:d.filterValues,configuration:d.configuration,pageMode:E}):void 0,[d.rows,d.filterValues,d.configuration,E]),c=!!((_=d.filterValues)!=null&&_[ot.key]),i=!!((w=d.filterValues)!=null&&w[vt.key]),u=!!((A=d.filterValues)!=null&&A[bt.key]),s=f&&f.changedDaysUsedBeforeSetup>0&&(b==null?void 0:b.isPayRateConditional),p=()=>{h(!1)},t=Y.useCallback((T,N)=>{Pl.forEach(R=>{var I;!N&&R!==T&&((I=d.filterValues)!=null&&I[R])&&r(R,void 0)})},[r,d.filterValues]),y=Y.useCallback(()=>{r(ot.key,c?void 0:!0),t(ot.key,c)},[r,t,c]),k=Y.useCallback(()=>{r(vt.key,i?void 0:!0),t(vt.key,i)},[r,t,i]),M=Y.useCallback(()=>{r(bt.key,u?void 0:!0),t(bt.key,u)},[r,t,u]),S=Y.useCallback(T=>{t(kn.key,T)},[t]),j=()=>{var V,B,q,C;const T=(V=d.configuration)==null?void 0:V.columns.findIndex(P=>P.key==="ea"),N=(B=d.configuration)==null?void 0:B.columns.findIndex(P=>P.key==="eabp"),R=(q=d.configuration)==null?void 0:q.columns.findIndex(P=>P.key==="epd"),I=(C=d.configuration)==null?void 0:C.columns.findIndex(P=>P.key==="epdbp"),F=d.rows.map((P,L)=>{const W=[...P.cells];return P.cells.forEach((z,D)=>{var $,K;const U=!ee.isNil(N)&&N>-1?($=d==null?void 0:d.rows[L])==null?void 0:$.cells[N]:void 0,H=!ee.isNil(I)&&I>-1?(K=d==null?void 0:d.rows[L])==null?void 0:K.cells[I]:void 0;D===T&&U&&(W[D]={...z,content:U.content,displayValue:U.displayValue}),D===R&&H&&(W[D]={...z,content:H.content,displayValue:H.displayValue})}),{...P,cells:W}});e(F),r(ot.key,void 0)};return Y.useEffect(()=>{a(ot),a(vt),a(bt)},[a]),Y.useEffect(()=>{d.filters&&d.filters.find(T=>T.key===ot.key)&&!c&&x&&(g(!1),y())},[r,c,x,g,d.filterValues,d.filters,y]),m.jsxs(Ti,{sheetName:l.formatMessage(ht.title),actions:[m.jsx(Ce,{variant:"outlined",onClick:p,children:l.formatMessage(ht.back)},"back"),m.jsx(Ce,{variant:"contained","data-external-id":"policy-sheets-save-button",onClick:O,children:l.formatMessage(ht.saveChanges)},"save")],children:[m.jsxs(J,{my:2,flexDirection:"row",alignItems:"center",justifyContent:"space-between",children:[m.jsx(Cl,{isAllowanceChangeFiltered:c,isNegativeAvailableDaysFiltered:u,isNewlyAddedEmployeesFiltered:i,onAllowanceChangeFilterToggle:y,onErrorFilterToggle:S,onNegativeAvailableDaysFilterToggle:M,onNewlyAddedEmployeesFilterToggle:k,onResetAllowanceChange:j,availableFilters:f}),m.jsxs(J,{flexDirection:"row",gap:1,children:[m.jsx(Ke,{title:l.formatMessage(ht.download),onClick:n,children:m.jsx(_i,{})}),m.jsx(Ke,{title:l.formatMessage(ht.upload),onClick:v,children:m.jsx(Mi,{})})]})]}),s&&m.jsx(Xe,{withIcon:!0,className:o.daysUsedAlert,title:l.formatMessage(ht.conditionalPayRate),variant:et.Warning,message:l.formatMessage(ht.daysUsedBeforeSetupWillBeConsidered,{b:T=>m.jsx(ae,{component:"span",fontWeight:"medium",children:T})})})]})},Je=ve({loadingExcelFile:{id:"sheets.loading-excel-file",defaultMessage:"Loading Excel file..."},noDataFoundToSave:{id:"sheets.error.no-data-found-to-save",defaultMessage:"No data found to save. Please fill some cells before saving"},excelFileInvalid:{id:"sheets.error.excel-file-invalid",defaultMessage:"Selected excel file is invalid. Expecting a file representing '{sheetName}' data."},fileWasNotUploaded:{id:"hr.time-off.file-was-not-uploaded",defaultMessage:"File was not uploaded due to conflicting data"},notUploadedDescription:{id:"hr.time-off.not-uploaded-description",defaultMessage:"It seems that some data was not added correctly. Have a look at the error report in order to fix any faulty entries"},employeeWasNotIncluded:{id:"hr.time-off.employee-was-not-included",defaultMessage:"Employee {employeeName} was not included in the policy initially. Please go back to the policy configuration and add them."},employeeWasRemoved:{id:"hr.time-off.employee-was-removed",defaultMessage:"Employee {employeeName} was removed from the excel file. Please add them back."},downloadErrorReport:{id:"hr.upload-excel.download-error-report",defaultMessage:"Download Error Report"},close:{id:"common.action.close",defaultMessage:"Close"}}),Ll=Y.forwardRef(({employees:n},O)=>{const v=ce(),l=ki(),o=Jt(),[E,x]=Y.useState(!1),[g,h]=Y.useState(),{state:{configuration:b,rows:d},importSheetsRowsFromExcel:r}=Pt(),e=Y.useMemo(()=>n.includedEmployees.map(i=>i.id),[n.includedEmployees]),a=i=>{var p,t;const u=[],s={};for(let y=0;y<i.length;y++){const k=(p=i[y])==null?void 0:p.cells[0],M=(t=i[y])==null?void 0:t.cells[2];if(k&&M){const S=k.content,j=M.displayValue;ee.isString(S)&&ee.isString(j)&&(s[S]=j,e.includes(S)||u.push(v.formatMessage(Je.employeeWasNotIncluded,{employeeName:j})))}}for(const y of n.includedEmployees){const k=y.id;s[k]||u.push(v.formatMessage(Je.employeeWasRemoved,{employeeName:Ht(y)}))}return u},f=()=>{g&&Ui("error-report.txt",g)},c=async i=>{Ar(b,"Sheets configuration must be defined");const{columns:u,sheetName:s,keyColumnIds:p}=b;x(!0),await Or(10);const t=i.target.files;if(t&&t.length===1){const y=t[0],k=ji(await y.arrayBuffer(),{type:"buffer"});if(!zi(k,u)){o.error({message:v.formatMessage(Je.excelFileInvalid,{sheetName:s})}),i.target.value="",x(!1);return}const M=k.Sheets[k.SheetNames[0]],S=Ci({intl:v,excelWorksheet:M,columns:u,keyColumnIds:p,initialRows:d});if(!l(S)){x(!1),i.target.value="";return}const _=a(S);if(_.length>0){const T=_.join(`

`);i.target.value="",x(!1),h(T);return}r(S);const w=S.some(T=>T.validityStatus==="has-error"),A=S.some(T=>T.validityStatus==="valid");w&&!A&&o.error({message:v.formatMessage(Je.noDataFoundToSave)})}return i.target.value="",x(!1),!1};return m.jsxs(m.Fragment,{children:[m.jsx("input",{ref:O,onChange:c,type:"file",name:"fileUpload",style:{display:"none"},accept:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"}),m.jsx(fa,{open:E,children:m.jsx(ae,{align:"center",variant:"h6",children:v.formatMessage(Je.loadingExcelFile)})}),m.jsx(jt,{open:!!g,onClose:()=>h(void 0),title:v.formatMessage(Je.fileWasNotUploaded),content:v.formatMessage(Je.notUploadedDescription),confirmButton:{text:v.formatMessage(Je.downloadErrorReport),onClick:f},cancelButton:{show:!0,text:v.formatMessage(Je.close)}})]})}),hn=ve({title:{id:"common.form.unsaved-changes-confirm",defaultMessage:"Do you wish to abandon unsaved changes?"},content:{id:"common.form.you-leave-page-without-saving",defaultMessage:"You are about to leave the page without saving your latest changes. All unsaved changes will be lost."},abandon:{id:"common.action.abandon",defaultMessage:"Abandon"}}),Ka=({activeStep:n,bayzatSheetRowsWithErrors:O,isTimeOffEmployeesUpdated:v,setUpFormApi:l})=>{const o=Xt(),E=ce(),x=d=>d.includes("/time-off/policy/create")||d.includes("/time-off/policy/edit"),g=d=>d.includes("saved=true"),h=Y.useCallback(d=>{const r=l==null?void 0:l.getState().dirty,{pathname:e,search:a}=d;return r||n===1&&v||n===2&&(O>0||v)?!g(a)&&!x(e):!1},[n,O,v,l]),b=Y.useCallback((d,r,e)=>{h(e)?o.confirm({title:E.formatMessage(hn.title),content:E.formatMessage(hn.content),maxWidth:"sm",fullWidth:!0,confirmButton:{onClick:()=>{d()},text:E.formatMessage(hn.abandon)},cancelButton:{onClick:r,show:!0}}):d()},[h,o,E]);Wi(b)};var zt=(n=>(n.CalendarDays="CalendarDays",n.WorkingDays="WorkingDays",n.CustomDays="CustomDays",n))(zt||{});const Ga=[["CalendarDays",{id:"calendar-days",name:"CalendarDays"}],["WorkingDays",{id:"working-days",name:"WorkingDays"}],["CustomDays",{id:"custom-days",name:"CustomDays"}]],ql=new Map(Ga);new Map(Ga.map(([n,O])=>[O.id,n]));function Fl(n){return ql.get(n).id}function Dn(n){const O={};return O.name=n.name,O.allowance_type=Hi(n.allowanceType),O.accrual_type=$i(n.accrualType),O.days_type=Vi(n.daysType),O.number_of_days=n.numberOfDays,O.negative_balance_support=n.negativeBalanceSupport,O.restrict_during_probation=n.restrictDuringProbation,O.restrict_leave_days_modification=n.restrictLeaveDaysModification,O.description=n.description,n.leavePolicyType&&(O.leave_policy_type=Ki(n.leavePolicyType)),n.leavePayRateConditions&&(O.leave_pay_rate_conditions=Gi(n.leavePayRateConditions)),n.leaveAllowanceConditions&&(O.leave_allowance_conditions=Zi(n.leaveAllowanceConditions)),O.template_id=n.templateId,n.dailyRateDayType&&(O.daily_rate_day_type=Fl(n.dailyRateDayType)),n.dailyRateSalaryComponent&&(O.daily_rate_salary_component=ti(n.dailyRateSalaryComponent)),O.daily_rate_custom_day_count=n.dailyRateCustomDayCount,O.daily_rate_global_config_enabled=n.dailyRateGlobalConfigEnabled,O.public_holidays_excluded=n.publicHolidaysExcluded,O.leave_pay_rate_percentage=n.leavePayRatePercentage,n.pauseAccrualSetting&&(O.pause_accrual_setting=Yi(n.pauseAccrualSetting)),O.carry_over_allowance=n.carryOverAllowance,O.carry_over_support=n.carryOverSupport,O.paid=n.paid,O.eligible_for_leave_salary=n.eligibleForLeaveSalary,O}function Bl(n){const O={};return O.excel_payload=n.excelPayload,n.leaveTypeAddUpdateRequestPayload&&(O.leave_type_add_update_request_payload=Dn(n.leaveTypeAddUpdateRequestPayload)),O}function Ul(n){const O={};return O.excel_payload_with_row_update=n.excelPayloadWithRowUpdate,n.leaveTypeAddUpdateRequestPayload&&(O.leave_type_add_update_request_payload=Dn(n.leaveTypeAddUpdateRequestPayload)),O}function zl(n){const O={};return O.employee_ids=n.employeeIds,n.leaveTypeAddUpdateRequestPayload&&(O.leave_type_add_update_request_payload=Dn(n.leaveTypeAddUpdateRequestPayload)),O}const Wl=({companyId:n,leaveTypeId:O})=>`/companies/${n}/time-off/leave-cycle/settings/bulk/${O}`,Hl=({companyId:n,leaveTypeId:O})=>`/companies/${n}/time-off/leave-cycle/settings/bulk/${O}/upload`,$l=({companyId:n,leaveTypeId:O})=>`/companies/${n}/time-off/leave-cycle/settings/bulk/${O}/row-update`,Za=()=>An({toURLFunction:Wl,mapResponseFunction:On(n=>ga(n)),mapRequestFunction:Sn(zl),options:{showGlobalProgress:!0}}),Ya=()=>An({toURLFunction:Hl,mapResponseFunction:On(n=>n),mapRequestFunction:Sn(Bl),options:{showGlobalProgress:!0}}),Vl=()=>An({toURLFunction:$l,mapResponseFunction:On(n=>ga(n)),mapRequestFunction:Sn(Ul),options:{showGlobalProgress:!0}}),Qa=n=>{switch(n){case"monthly":return qn.Monthly;case"no-accrual":return qn.NoAccrual}},Kl=n=>{switch(n){case"annual":return Fn.Annual;case"one-time":return Fn.OneTime}},Gl=n=>{switch(n){case"calendar-days":return zt.CalendarDays;case"working-days":return zt.WorkingDays;case"custom-days":return zt.CustomDays;default:return}},Zl=n=>{switch(n){case"basic":return $t.Basic;case"basic-allowance":return $t.BasicAllowance;default:return}},Yl=n=>{switch(n){case"calendar-days":return Bn.CalendarDays;case"working-days":return Bn.WorkingDays}},Ql=n=>{switch(n){case"compassionate":return De.Compassionate;case"custom":return De.Custom;case"hajj":return De.Hajj;case"maternity":return De.Maternity;case"iddah":return De.Iddah;case"paternity":return De.Paternity;case"sick":return De.Sick;case"study":return De.Study;case"marriage":return De.Marriage;case"parental":return De.Parental;case"sabbatical":return De.Sabbatical;case"vacation":return De.Vacation;default:return}},Ja=n=>{switch(n){case"less-than":return ln.LessThan;case"between":return ln.Between;case"greater-than-or-equal":return ln.GreaterThanOrEqual}},Jl=n=>{switch(n){case"job-tenure":return Qi.JobTenure}},Xa=n=>{switch(n){case"days":return sn.Days;case"months":return sn.Months;case"years":return sn.Years}},Xl=n=>{if(n)return{type:Jl(n.type),conditions:n==null?void 0:n.conditions.map(O=>({operator:Ja(O.operator),values:O.values,output:{accrualType:Qa(O.output.accrualType),negativeBalanceSupport:O.output.negativeBalanceSupport,values:O.output.values,pauseAccrualSetting:O.output.pauseAccrualSetting?{minimumRequiredDays:O.output.pauseAccrualSetting.minimumRequiredDays,pauseAccrualPolicyIds:O.output.pauseAccrualSetting.pauseAccrualPolicyIds}:void 0},valueUnit:Xa(O.valueUnit)}))}},es=n=>{switch(n){case"job-tenure":return Un.JobTenure;case"leaves-taken":return Un.LeavesTaken}},Zn=n=>{switch(n){case"percentage":return Ji.Percentage}},ts=n=>{if(n)return{type:es(n.type),conditions:n==null?void 0:n.conditions.map(O=>({operator:Ja(O.operator),values:O.values,output:{values:O.output.values,unit:Zn(O.output.unit)},valueUnit:Xa(O.valueUnit)})),defaultOutput:{values:n.defaultOutput.values,unit:Zn(n.defaultOutput.unit)}}},Tt=n=>({accrualType:Qa(n.accrualType),allowanceType:Kl(n.allowanceType),carryOverAllowance:n.carryOverAllowance,carryOverSupport:n.carryOverSupport,daysType:Yl(n.daysType),name:n.name,negativeBalanceSupport:n.negativeBalanceSupport,paid:n.paid,leavePayRatePercentage:n.leavePayRatePercentage,restrictDuringProbation:n.restrictDuringProbation,restrictLeaveDaysModification:n.restrictLeaveDaysModification,description:n.description,leaveAllowanceConditions:Xl(n.leaveAllowanceConditions),leavePayRateConditions:ts(n.leavePayRateConditions),leavePolicyType:Ql(n.leavePolicyType),numberOfDays:n.numberOfDays,dailyRateGlobalConfigEnabled:n.dailyRateGlobalConfigEnabled,dailyRateCustomDayCount:n.dailyRateCustomDayCount,dailyRateDayType:Gl(n.dailyRateDayType),dailyRateSalaryComponent:Zl(n.dailyRateSalaryComponent),publicHolidaysExcluded:n.publicHolidaysExcluded,templateId:n.templateId,pauseAccrualSetting:n.pauseAccrualSetting,eligibleForLeaveSalary:n.eligibleForLeaveSalary}),ns=({leavePolicyId:n})=>{const O=ct(),{state:v,initializeSheetsData:l,updateRows:o}=Pt(),{includedEmployees:E,leavePolicy:x,pageMode:g}=Y.useContext(Ne),[h,b]=Y.useState(void 0),[d,r]=Y.useState(),[e,a]=Y.useState(!1),{mutateAsync:f}=Za(),{mutateAsync:c,isPending:i}=Ya(),{mutateAsync:u}=Vl(),s=Y.useMemo(()=>E.map(S=>S.id),[E]),p=jn({pageMode:g,draft:x==null?void 0:x.isDraft,numberOfSetupEmployees:x==null?void 0:x.numberOfSetupEmployees}),t=async({data:S,queryParams:j})=>c({urlParams:{companyId:O,leaveTypeId:n??""},data:S?{excelPayload:S,leaveTypeAddUpdateRequestPayload:p&&x?Tt(x):void 0}:void 0,queryParams:j}),y=Y.useCallback(async()=>{if(n){const S=await f({urlParams:{companyId:O,leaveTypeId:n},data:{employeeIds:s,leaveTypeAddUpdateRequestPayload:p&&x?Tt(x):void 0}}),j=S.columns.findIndex(T=>T.key==="ehd"),_=S.columns.findIndex(T=>T.key==="ea"),w=S.columns.findIndex(T=>T.key==="epd"),A=S.columns.findIndex(T=>T.key==="edu");r({hireDateCellIndex:j,allowanceCellIndex:_,proRatedCellIndex:w,daysUsedBeforeCellIndex:A}),b(S),l(S)}},[O,f,s,l,p,x,n]),k=Y.useCallback(()=>{const S=h==null?void 0:h.rows,j=[],_=new Map,w=d==null?void 0:d.hireDateCellIndex,A=d==null?void 0:d.allowanceCellIndex,T=d==null?void 0:d.proRatedCellIndex,N=d==null?void 0:d.daysUsedBeforeCellIndex;if(S&&v.rows){for(let R=0;R<v.rows.length;R++){const I=v.rows[R],F=S.find(V=>V.cells[0].content===I.cells[0].content);if(I&&F){if(w){const V=I.cells[w].content,B=F.cells[w].content;(!B&&V||V instanceof Date&&B instanceof Date&&!Sr(V,B))&&(j.push({row:I,rowIndex:R}),_.set(R,!0))}if(A&&!_.get(R)){const V=I.cells[A].content,B=F.cells[A].content;V!==B&&(j.push({row:I,rowIndex:R}),_.set(R,!0))}if(T&&!_.get(R)){const V=I.cells[T].content,B=F.cells[T].content;V!==B&&(j.push({row:I,rowIndex:R}),_.set(R,!0))}if(N&&!_.get(R)){const V=I.cells[N].content,B=F.cells[N].content;V!==B&&(j.push({row:I,rowIndex:R}),_.set(R,!0))}}}return j}return[]},[h==null?void 0:h.rows,d,v.rows]),M=Y.useCallback(async()=>{var w;a(!0);const S=k(),j=S.map(A=>A.row),_=[...v.rows];if(h&&j.length>0){const A=Tn(j,h==null?void 0:h.columns),T=await u({urlParams:{companyId:O,leaveTypeId:n??""},data:{excelPayloadWithRowUpdate:A,leaveTypeAddUpdateRequestPayload:p&&x?Tt(x):void 0}});for(let N=0;N<T.rows.length;N++){const R=T.rows[N],I=(w=S[N])==null?void 0:w.rowIndex;I!==void 0&&(_[I]=R)}b({...h,rows:_}),o(_)}a(!1)},[O,h,k,u,p,x,n,v.rows,o]);return Y.useEffect(()=>{!h&&!v.configuration&&y()},[h,y,l,v.configuration]),Y.useEffect(()=>{e||M()},[v.rows,M,e]),{configuration:h,postData:t,isFetchingNewHireDateRow:e,isPostDataLoading:i}},qt=ve({confirmSavingChanges:{id:"hr.time-off.confirm-saving-changes-to-policy",defaultMessage:"Confirm saving changes to policy"},changesAppliedToCurrentAndFuture:{id:"hr.time-off.changes-saved-will-be-applied-to-current-and-future-leave-cycles",defaultMessage:"Changes saved will be updated immediately for all employees added in this policy and only apply to current and future leave cycles"},saveAndUpdatePolicy:{id:"hr.time-off.save-and-update-policy",defaultMessage:"Save & update policy"},backToEditing:{id:"hr.time-off.back-to-editing",defaultMessage:"Back to editing"}}),er=()=>{const n=ce(),O=Xt();return{confirmSavingChanges:({isLoading:l,handleConfirm:o})=>O.confirm({title:n.formatMessage(qt.confirmSavingChanges),content:n.formatMessage(qt.changesAppliedToCurrentAndFuture),showCloseButton:!0,isPending:l,confirmButton:{onClick:o,text:n.formatMessage(qt.saveAndUpdatePolicy)},cancelButton:{show:!0,variant:"text",text:n.formatMessage(qt.backToEditing)}})}},pt=ve({fixInvalidRowsToTryAgain:{id:"sheets.error.fix-invalid-rows-to-try-again",defaultMessage:"Some rows are invalid. Please fix all rows and try save again"},noDataFoundToSave:{id:"sheets.error.no-data-found-to-save",defaultMessage:"No data found to save. Please fill some cells before saving"},confirm:{id:"common.action.confirm",defaultMessage:"Confirm"},savedSuccessfully:{id:"sheets.saved-successfully",defaultMessage:"Saved successfully"},reviewRowsWithWarning:{id:"sheets.error.review-rows-with-warning",defaultMessage:"Some rows have warnings. Please review them before save"}}),as=({ConfirmSaveDialogContent:n,partialUploadAllowed:O,postData:v,mode:l,onSavedSuccessfully:o,isPostDataLoading:E})=>{const x=ce(),g=Xt(),h=Jt(),b=ct(),{state:d,storeSavedSheetsRows:r,syncSheetsRowsAfterCall:e}=Pt(),{handleRequestExceptionAlert:a}=wn(),{confirmSavingChanges:f}=er(),{isPolicyPublishedWithEmployeesAssigned:c,isPolicyUpdated:i,setIsPolicyUpdated:u,setOnLastStepFrom:s}=Y.useContext(Ne),{rows:p,configuration:t,computed:y}=d,{anyRowWithError:k}=y;if(!t)return()=>{throw new Error("Sheets configuration is not initialized")};const M=async(j,_)=>{let w={r:[]};const{columns:A,keyColumnIds:T}=t;try{w=Tn(j,t.columns)}catch{h.error({message:x.formatMessage(pt.fixInvalidRowsToTryAgain)});return}_&&(w.w=!0);try{const N=await v({urlParams:{companyId:b},data:w});if(N){const R=va(N,A,T,!0),I=ba(!!N.s,R);if(I==="saved-successfully"){l==="manage"?h.success({message:x.formatMessage(pt.savedSuccessfully)}):r(R),o&&o();return}I==="returned-with-error"?h.error({message:x.formatMessage(pt.fixInvalidRowsToTryAgain)}):h.warning({message:x.formatMessage(pt.reviewRowsWithWarning)}),e(R)}}catch(N){a(N)}};return()=>{let j=i,_=!1,w=!1;p.forEach(T=>{O&&T.recordStatus==="not-changed"||(j===!1&&T.recordStatus!=="not-changed"&&(j=!0),T.validityStatus==="has-overridable-warning"?(w=!0,_=!0):T.validityStatus==="has-warning"&&(_=!0))});const A=Ni(p,O);if(k)h.error({message:x.formatMessage(pt.fixInvalidRowsToTryAgain)});else if(A.length===0)h.error({message:x.formatMessage(pt.noDataFoundToSave)});else{const T=()=>{E||(M(A,_),u(!1),s("sheet"))};c&&j?f({handleConfirm:T}):g.confirm({title:x.formatMessage(pt.confirm),content:m.jsx(n,{hasRowsOverridableErrors:w}),confirmButton:{onClick:T},cancelButton:{show:!0}})}}},rs=Ee()(n=>({orderList:{color:n.palette.text.secondary,paddingLeft:0,listStyle:"inside decimal"},dialogContainer:{minWidth:528},modalAlert:{border:`1px ${Ue.grey[200]} solid`,marginBottom:n.spacing(1)}})),Ve=ve({title:{id:"hr.time-off.employee-details-and-allowance-setting",defaultMessage:"Employee details and allowance setting"},uploadFileInBayzatSheet:{id:"hr.time-off.upload-file-in-bayzat-sheet",defaultMessage:"Upload file in Bayzat sheet"},downloadTheLatestFile:{id:"hr.time-off.download-the-latest-file",defaultMessage:"Download the latest file"},fillMissingDetails:{id:"hr.time-off.fill-missing-details",defaultMessage:"Fill missing fields or edit allowance details"},uploadFile:{id:"hr.time-off.upload-file",defaultMessage:" Upload file"},uploadWillFail:{id:"hr.time-off.upload-will-fail",defaultMessage:"Upload will fail when:"},rowIsRemoved:{id:"hr.time-off.row-is-removed",defaultMessage:"A column or row is removed"},newRowAdded:{id:"hr.time-off.new-row-added",defaultMessage:"A new column or row is added"},downloadLatestFile:{id:"hr.time-off.download-latest-file",defaultMessage:"Download latest file"},download:{id:"common.action.download",defaultMessage:"Download"},upload:{id:"common.action.upload",defaultMessage:"Upload"}}),pn={key:"isEditable",function:(n,O,v)=>nn(n,v)},is=()=>{const n=ce(),{classes:O}=rs(),[v,l]=Y.useState(!1),{dialogState:o,onClose:E}=Pi(),{fileInputRef:x,openFileSelection:g}=Di({afterTrigger:E}),{state:h,addSheetsFilter:b,changeSheetsFilterValue:d}=Pt(),{onDownloadExcel:r}=Ri({useMutation:Oi}),{includedEmployees:e,excludedEmployees:a,setIsEmployeeDetailsSheetOpen:f,activeStep:c,leavePolicy:i,goToFinalStep:u}=Y.useContext(Ne),{postData:s,configuration:p,isPostDataLoading:t}=ns({leavePolicyId:(i==null?void 0:i.id)??""}),y=h.rows.filter(Fi).length;Ka({activeStep:2,bayzatSheetRowsWithErrors:y,isTimeOffEmployeesUpdated:!0});const k=()=>l(_=>!_),M=()=>{f(!1)},j=as({mode:"manage",ConfirmSaveDialogContent:no,partialUploadAllowed:!1,postData:s,onSavedSuccessfully:()=>{c===be.EmployeeDetails&&u(),f(!1)},isPostDataLoading:t});return Y.useEffect(()=>{b(pn)},[b]),Y.useEffect(()=>{h.filters&&h.filters.find(_=>_.key===pn.key)&&d(pn.key,!0)},[d,h.filterValues,h.filters]),m.jsxs(_r,{shouldRenderChildren:!0,logoLinkApp:ua.APP_HRADMIN,CustomToolbarComponent:()=>m.jsx(Mr,{flexGrow:1,display:"flex",justifyContent:"flex-end",children:m.jsx(xn,{color:"ghost","data-external-id":"close-page",onClick:M,children:m.jsx(Tr,{})})}),children:[m.jsxs(Ii,{children:[m.jsx(Ll,{ref:x,employees:{excludedEmployees:a,includedEmployees:e}}),m.jsx(Il,{onDownload:r,onSave:j,onUpload:k}),m.jsx(Li,{dialogContent:m.jsx(qi,{actions:(p==null?void 0:p.actions)??{canAddRow:!1,canDeleteRow:!1,canCloneRow:!1},bulkEditingMode:"manage"}),bulkEditingMode:"manage",sheetName:n.formatMessage(Ve.title),sheetIdentifier:"time-off-policy",open:o==="show-opening-dialog",onClose:E,onDownloadExcel:r,onUploadExcel:g,"data-external-id":"sheets-page-opening-dialog"})]}),m.jsx(jt,{open:v,classes:{paper:O.dialogContainer},title:n.formatMessage(Ve.uploadFileInBayzatSheet),showCloseButton:!0,content:m.jsxs(J,{children:[m.jsxs("ol",{className:O.orderList,children:[m.jsx("li",{children:n.formatMessage(Ve.downloadTheLatestFile)}),m.jsx("li",{children:n.formatMessage(Ve.fillMissingDetails)}),m.jsx("li",{children:n.formatMessage(Ve.uploadFile)})]}),m.jsx(Xe,{withIcon:!0,className:O.modalAlert,variant:et.Neutral,title:n.formatMessage(Ve.uploadWillFail),message:m.jsxs("ul",{children:[m.jsx("li",{children:n.formatMessage(Ve.rowIsRemoved)}),m.jsx("li",{children:n.formatMessage(Ve.newRowAdded)})]})})]}),confirmButton:{text:n.formatMessage(Ve.uploadFile),onClick:g},cancelButton:{text:n.formatMessage(Ve.downloadLatestFile),onClick:r,show:!0},onClose:k})]})},os=Gt("/companies/{companyId}/time-off/leave-types/{leaveTypeId}/publish","put",{apiUrlPrefix:At});function tr(n={}){const O=os(tr);return Zt({mutationFn:O,...n})}const ls=ve({close:{id:"common.action.close",defaultMessage:"Close"}}),Yn=({showOnceLocalStorageKey:n}={})=>{const O=ce(),v=Xt(),[l,o]=ha(n??"feedback-key-placeholder",!1);return async({onClose:x,title:g,"data-external-id":h,...b})=>{if(!l){const d=await v.confirm({title:g,onClose:x,maxWidth:"md",fullWidth:!0,content:m.jsx(ao,{...b}),showCloseButton:!0,"data-external-id":h,confirmButton:{text:O.formatMessage(ls.close)}});return n&&o(!0),d}}},Qn="time-off-policy.payrate.feedback-collected",Wt=ve({newPolicyCreated:{id:"hr.time-off.policy-created-successfully",defaultMessage:"New leave policy created successfully"},newPolicySavedAsDraft:{id:"hr.time-off.new-policy-saved-as-draft-successfully",defaultMessage:"New leave policy saved as draft"},changesToPolicySaved:{id:"hr.time-off.changes-to-policy-saved-successfully",defaultMessage:"Changes to leave policy saved successfully"},newUpdates:{id:"hr.time-off.new-updates",defaultMessage:"You may have noticed some updates in policy creation. We'd love to hear your thoughts."}}),ss=Ee()(n=>({firstIconWrapper:{height:48,width:48,borderRadius:"50%",backgroundColor:Ue.green[50],display:"flex",justifyContent:"center",alignItems:"center"},secondIconWrapper:{height:32,width:32,borderRadius:"50%",backgroundColor:n.palette.success.light,display:"flex",justifyContent:"center",alignItems:"center"}})),us=({mode:n})=>{const O=ce(),{classes:v}=ss(),l=n==="new"?Wt.newPolicyCreated:n==="new-draft"?Wt.newPolicySavedAsDraft:Wt.changesToPolicySaved;return m.jsxs(J,{direction:"row",alignItems:"center",spacing:2,children:[m.jsx("div",{className:v.firstIconWrapper,children:m.jsx("div",{className:v.secondIconWrapper,children:m.jsx(ro,{color:"success",fontSize:"x-small"})})}),m.jsx(ae,{variant:"h4",children:O.formatMessage(l)})]})},cs=()=>{const n=ce(),[O]=ha(Qn,!1),v=Yn({showOnceLocalStorageKey:"time-off-policy.experience.feedback-collected"}),l=Yn({showOnceLocalStorageKey:Qn}),o=g=>g.isPayRateConditional||g.paid==="partially-paid"||O,E=({isDraft:g,pageMode:h,formData:b})=>{const d=o(b);return h===Oe.Create?d?g?"new-draft-payrate":"new-payrate":g?"new-draft":"new":d?g?"edit-draft-payrate":"edit-payrate":g?"edit-draft":"edit"};return{getExperienceFeedback:async({formData:g,isDraft:h,pageMode:b,name:d,email:r})=>{const e=o(g),a=E({isDraft:h,pageMode:b,formData:g}),f={mode:a,name:d};await(e?l:v)({title:m.jsx(us,{mode:a}),typeformId:"WfufSJVv",additionalContent:m.jsx(ae,{children:n.formatMessage(Wt.newUpdates)}),typeformData:r?{...f,email:r}:f,"data-external-id":"time-off-policy-experience-feedback-dialog"})}}},Jn=n=>{const{rows:O}=n;return O.reduce((v,l)=>{const{validityStatus:o}=l;return o==="has-error"?v+1:v},0)},ds=n=>{const{rows:O}=n;return O.reduce((v,l)=>nn(l,n)?v+1:v,0)},fs=n=>{const{rows:O}=n;return O.reduce((v,l)=>Va(l,n)?v+1:v,0)},rt=ve({employeeDetailsNotSavedFixIssuesInSheet:{id:"hr.time-off.employee-details-not-saved-fix-issues-in-sheet",defaultMessage:"We couldn't save the employee details. Please check the sheet for any issues that need to be fixed before saving."},employeeDetailsNotSaved:{id:"hr.time-off.employee-details-not-saved",defaultMessage:"Employee details not saved"},newPolicyCreated:{id:"hr.time-off.policy-created-successfully",defaultMessage:"New leave policy created successfully"},policyPublished:{id:"hr.time-off.policy-published-successfully",defaultMessage:"Leave policy published successfully"},newPolicySavedAsDraft:{id:"hr.time-off.new-policy-saved-as-draft-successfully",defaultMessage:"New leave policy saved as draft"},policySavedAsDraft:{id:"hr.time-off.policy-saved-as-draft-successfully",defaultMessage:"Leave policy saved as draft"},changesToPolicySaved:{id:"hr.time-off.changes-to-policy-saved-successfully",defaultMessage:"Changes to leave policy saved successfully"},completeMissingFields:{id:"hr.time-off.complete-missing-fields",defaultMessage:"Please complete the missing fields"}}),hs=({leavePolicyId:n,steps:O,setupFormRef:v,firstInteractionTime:l,timeOffPolicyEmployees:o,setTimeOffPolicyEmployees:E,pageMode:x,leavePolicy:g,setLeavePolicy:h,isPolicyUpdated:b,setIsPolicyUpdated:d,setOnLastStepFrom:r})=>{const e=ct(),a=ce(),f=kr(),c=Jt(),{handleRequestExceptionAlert:i}=wn(),{confirmSavingChanges:u}=er(),{getExperienceFeedback:s}=cs(),p=io(),{templateId:t}=En(),y=ya("time-off"),[k]=jr(),M=k.get("step")?parseInt(k.get("step")??"0"):0,[S,j]=Y.useState(0),[_,w]=Y.useState(0),[A,T]=Y.useState(M),[N,R]=Y.useState(!1),[I,F]=Y.useState(!1),[V,B]=Y.useState(),q={email:p.workEmail,name:Ht(p),pageMode:x},C=x===Oe.Edit,P=jn({pageMode:x,draft:g==null?void 0:g.isDraft,numberOfSetupEmployees:g==null?void 0:g.numberOfSetupEmployees}),{mutateAsync:L}=Ya(),{mutateAsync:W}=tr(),{data:z,isSuccess:D,isFetching:U}=eo({companyId:e,leaveTypeId:n??""},{enabled:!!n&&(A===be.Setup||A===be.EmployeeDetails),gcTime:0});Y.useEffect(()=>{if(D&&!P){const oe=wt(z);h(oe)}},[D,P,z,h]);const{mutateAsync:H,isPending:$}=Za(),{data:K,isFetching:ne,isFetched:ie,isSuccess:le}=to({companyId:e,leaveTypeId:n??""},{enabled:!!n&&(A===be.EmployeeDetails||A===be.AddEmployees)});Y.useEffect(()=>{le&&E(oe=>{const ye=oe.includedEmployees,Ae=K==null?void 0:K.unassignedEmployees.filter(Te=>!ye.some(Ye=>Ye.id===Te.id));if(ye.length===0)return{includedEmployees:K.assignedEmployees,excludedEmployees:Ae};if(ye.length>0){const Te=oe.excludedEmployees.filter(Ye=>!(Ae!=null&&Ae.some(Rt=>Rt.id===Ye.id)));return{includedEmployees:ye,excludedEmployees:Te.length>0?[...Ae,...Te]:Ae}}return oe})},[le,K,E]);const de=Y.useMemo(()=>o.includedEmployees.map(oe=>oe.id),[o.includedEmployees]),he=K==null?void 0:K.assignedEmployees.map(oe=>oe.id),_e=(he==null?void 0:he.length)===de.length&&(he==null?void 0:he.every(oe=>de.includes(oe))),we=S===0&&o.includedEmployees.length>0&&!_e||P,G=A===be.EmployeeDetails&&we&&V,Z=Y.useCallback(async()=>{if(n&&A===be.EmployeeDetails)try{const oe=await H({urlParams:{companyId:e,leaveTypeId:n},data:{employeeIds:de,leaveTypeAddUpdateRequestPayload:P&&g?Tt(g):void 0}});B(oe),j(Jn(oe)),w(ds(oe))}catch(oe){F(!0),i(oe)}},[n,A,H,e,de,P,g,i]),te=(()=>{switch(A){case be.Setup:return!1;case be.AddEmployees:return!1;case be.EmployeeDetails:return S>0;case be.ReviewAndSave:return!1}})()||I,Q=()=>new Promise(oe=>{var Rt;const ye=(Rt=K==null?void 0:K.assignedEmployees)==null?void 0:Rt.map(dt=>dt.id),Ae=o.includedEmployees.map(dt=>dt.id),Te=ye==null?void 0:ye.filter(dt=>!Ae.includes(dt)),Ye=Ae.filter(dt=>!(ye!=null&&ye.includes(dt)));Ye.length>0&&y({event:"policy-employees-added",count:Ye.length}),Te&&Te.length>0&&y({event:"policy-employees-removed",count:Te.length}),oe(!0)}),se=async oe=>{try{if(R(!0),V&&n){const ye=await L({urlParams:{companyId:e,leaveTypeId:n},data:{excelPayload:Tn(V.rows,V.columns),leaveTypeAddUpdateRequestPayload:P&&g?Tt(g):void 0}}),Ae=va(ye,V.columns,V.keyColumnIds,!0),Te=ba(!!ye.s,Ae);Te==="returned-with-error"?(B({...V,rows:Ae}),j(Jn({...V,rows:Ae})),c.error({withIcon:!0,title:a.formatMessage(rt.employeeDetailsNotSaved),message:a.formatMessage(rt.employeeDetailsNotSavedFixIssuesInSheet),autoHideDuration:10*1e3})):Te==="saved-successfully"&&(x===Oe.Edit&&await Q(),P&&y({event:"policy-edited"}),c.success({message:a.formatMessage(rt.changesToPolicySaved)}),oe&&T(Ye=>Ye+1))}}catch(ye){i(ye)}finally{R(!1)}},ue=async oe=>{var ye,Ae,Te;try{R(!0),v!=null&&v.current&&!((ye=v==null?void 0:v.current)!=null&&ye.getState().valid)&&(Io({formRef:v}),c.error({message:a.formatMessage(rt.completeMissingFields)})),await((Te=(Ae=v==null?void 0:v.current)==null?void 0:Ae.submit())==null?void 0:Te.then(()=>{oe()}))}finally{R(!1)}},fe=()=>{c.success({message:a.formatMessage(C?rt.policySavedAsDraft:rt.newPolicySavedAsDraft)})},Me=async()=>{var ye;const oe=(ye=v==null?void 0:v.current)==null?void 0:ye.getState().values;oe&&await s({...q,formData:oe,isDraft:!0}),f.push("/settings/time-off?saved=true"),fe()},qe=async()=>{A<O.length&&(A===be.Setup?await ue(Me):(G&&(R(!0),await se(!0),R(!1)),Me()))},me=async()=>{A<O.length&&(A===be.Setup?await ue(()=>{T(oe=>oe+1)}):G?ze():T(oe=>oe+1))},an=()=>{A>0&&T(oe=>oe-1)},xe=oe=>{oe<A&&T(oe)},ze=()=>{const oe=async()=>{R(!0),await se(!0),d(!1),r("step"),R(!1)};return P&&b?u({isLoading:N,handleConfirm:oe}):oe()},nr=(oe,ye)=>{const Te=(ye-oe)/(1e3*60);return Math.round(Te*100)/100},ar=()=>new Promise(oe=>{if(l){const ye=Date.now(),Ae=nr(l,ye);y({event:t?"create-policy-by-template":"create-policy",elapsedTimeInMinutes:Ae}),oe(!0)}oe(!1)}),rr=async()=>{var oe;try{if(n){(x===Oe.Create||g!=null&&g.isDraft)&&(R(!0),await W({companyId:e,leaveTypeId:n}),c.success({message:a.formatMessage(C?rt.policyPublished:rt.newPolicyCreated)})),x===Oe.Create&&await ar();const ye=(oe=v==null?void 0:v.current)==null?void 0:oe.getState().values;ye&&await s({...q,formData:ye,isDraft:!1}),f.push("/settings/time-off?saved=true")}}catch(ye){i(ye)}finally{R(!1)}};return Y.useEffect(()=>{Z()},[Z]),{isNextButtonDisabled:te,bayzatSheetRowsWithErrors:S,bayzatSheetEditableRows:_,handleDecrementActiveStep:an,handleIncrementActiveStep:me,activeStepIndex:A,setActiveStepIndex:T,isNextButtonLoading:N||U||$||ne,handleFinalizePolicyCreation:rr,isGettingPolicyEmployees:ne,isEmployeeListFetched:ie,handleSaveAsDraftAndClose:qe,originalEmployeesAssignedToPolicy:K==null?void 0:K.assignedEmployees,handleGoBackToCertainStep:xe,manuallyAdjustedEmployeeDetailsCount:V?fs(V):0,goToFinalStep:()=>{T(be.ReviewAndSave)}}},ps=Ee()(n=>({dialogActions:{display:"none"},dialogContent:{padding:0,color:"unset",fontSize:n.typography.body2.fontSize}})),Mt=ve({setup:{id:"hr.time-off.set-up",defaultMessage:"Setup"},addEmployees:{id:"hr.time-off.add-employees",defaultMessage:"Add employees"},employeeDetails:{id:"hr.time-off.employee-details",defaultMessage:"Employee details"},reviewAndSave:{id:"hr.time-off.review-and-save",defaultMessage:"Review & save"},summary:{id:"common.summary",defaultMessage:"Summary"}}),xc=()=>{const n=ce(),{pathname:O}=Cr(),{policyId:v}=En(),{classes:l}=ps(),o=Nr(Xi),[E,x]=Y.useState(!1),[g,h]=Y.useState(!1),[b,d]=Y.useState({excludedEmployees:[],includedEmployees:[]}),[r,e]=Y.useState(),[a,f]=Y.useState(Oe.Create),[c,i]=Y.useState(),[u,s]=Y.useState(!1),[p,t]=Y.useState(!1),[y,k]=Y.useState(!1),[M,S]=Y.useState(),j=Y.useRef(null),_=r&&!(r!=null&&r.isDraft),w=[n.formatMessage(Mt.setup),n.formatMessage(Mt.addEmployees),n.formatMessage(Mt.employeeDetails),n.formatMessage(_?Mt.summary:Mt.reviewAndSave)],{includedEmployees:A,excludedEmployees:T}=b,N=hs({leavePolicyId:v??(r==null?void 0:r.id),steps:w,setupFormRef:j,firstInteractionTime:c,pageMode:a,setLeavePolicy:e,setTimeOffPolicyEmployees:d,timeOffPolicyEmployees:b,leavePolicy:r,isPolicyUpdated:y,setIsPolicyUpdated:k,setOnLastStepFrom:S}),{activeStepIndex:R,bayzatSheetRowsWithErrors:I,bayzatSheetEditableRows:F,originalEmployeesAssignedToPolicy:V,manuallyAdjustedEmployeeDetailsCount:B,handleIncrementActiveStep:q,goToFinalStep:C}=N;Ka({activeStep:R,bayzatSheetRowsWithErrors:I,isTimeOffEmployeesUpdated:g,setUpFormApi:j.current});const P=Y.useCallback(W=>{d(z=>{const D=z.includedEmployees.map(K=>K.id).sort(),U=z.excludedEmployees.map(K=>K.id).sort(),H=W.includedEmployees.map(K=>K.id).sort(),$=W.excludedEmployees.map(K=>K.id).sort();return!ee.isEqual(U,$)&&!ee.isEqual(D,H)&&h(!0),W})},[d]),L={pageMode:a,activeStep:R,includedEmployees:A,setTimeOffPolicyEmployees:P,excludedEmployees:T,leavePolicy:r,setLeavePolicy:e,bayzatSheetRowsWithErrors:I,bayzatSheetEditableRows:F,setupFormRef:j,originalEmployeesAssignedToPolicy:V,isPolicyPublishedWithEmployeesAssigned:jn({pageMode:a,draft:r==null?void 0:r.isDraft,numberOfSetupEmployees:r==null?void 0:r.numberOfSetupEmployees}),manuallyAdjustedEmployeeDetailsCount:B,isFormDataDifferentThanTemplate:E,setIsFormDataDifferentThanTemplate:x,isEmployeeDetailsSheetOpen:p,setIsEmployeeDetailsSheetOpen:t,handleIncrementActiveStep:q,isSheetsShowingManuallyAdjustedEmployees:u,setIsSheetsShowingManuallyAdjustedEmployees:s,goToFinalStep:C,isTimeOffV2Phase4FlowEnabled:o,isPolicyUpdated:y,setIsPolicyUpdated:k,onLastStepFrom:M,setOnLastStepFrom:S};return oo(()=>{O.includes("edit")&&f(Oe.Edit),c||i(Date.now())}),m.jsxs(qr,{value:L,children:[m.jsx(Tl,{steps:w,wizardActionProps:N}),p&&m.jsx(Bi,{children:m.jsx(jt,{open:!0,showTitle:!1,fullScreen:!0,actionClassName:l.dialogActions,contentClassName:l.dialogContent,content:m.jsx(is,{})})})]})};export{xc as default};
