 =# Jira Validation Pack — daily wage calculator

Generated on: 2025-12-29
Source: jira
Schema version: v94

## Summary

- Total claims: 44
- Playwright-ready (with Zendesk navigation): 0
- Needs Zendesk navigation matching: 44
- Findings: 44
- Troubleshooting items: 25
- Glossary terms: 46

## FEATURE IDENTITY (AUTHORITATIVE — DO NOT OVERRIDE)

- Feature name: daily wage calculator
- Clean feature name: daily_wage_calculator
- Source: jira
- Schema version: v94
- Analysis date: 2025-12-29
- Folder path: daily-wage-calculator/v94

---

## Findings

### automated working days salary calculation not supported

The system cannot automatically calculate salary based on actual working days (e.g., 26 working days per month standard) with dynamic adjustments for extra or fewer worked days. This requires manual tracking and separate adjustments per employee, creating operational overhead.

_severity: high | [Tickets: TSSD-4905]_

### no workflow automation for salary proration

Workflows cannot be used to automate salary proration based on working days. The support team indicated this is not easy to implement on the payroll side, leaving no automation pathway for this use case.

_severity: high | [Tickets: TSSD-4905]_

### formula override lack of clarity

Users are confused when daily wage formulas in leave policy appear greyed out and differ from payroll settings. The system lacks clear visual communication that payroll-side daily wage calculator configuration overrides leave policy formulas for unpaid leave deductions.

_severity: medium | [Tickets: TSSD-2648]_

### formula precedence not documented

Users expect daily wage formulas to be synchronized or reflected consistently across leave policy and payroll settings. The system intentionally allows payroll configuration to override leave policy, but this precedence rule is not clearly documented or communicated.

_severity: medium | [Tickets: TSSD-2648]_

### unpaid leave deduction stale salary config

When a new salary configuration is created after an unpaid leave request is submitted, the system fails to automatically recalculate pending unpaid leave deductions. The deduction continues to use the previous (outdated) salary configuration, resulting in incorrect payroll deduction amounts. This creates a critical synchronization gap between salary changes and leave deduction calculations.

_severity: high | [Tickets: TSSD-1581]_

### unpaid leave deduction requires manual workaround

When unpaid leave deductions are calculated incorrectly due to stale salary configuration, users must manually delete the leave request and recreate it to trigger recalculation. This workaround is only viable if the deduction has not yet been processed into payroll, creating operational friction during time-sensitive payroll closure periods.

_severity: medium | [Tickets: TSSD-1581]_

### leap year not recognized in gratuity

The EOS gratuity calculator fails to recognize leap years (366 days) and instead uses 365 days for all years. This causes incorrect total service day calculations and results in underpayment of gratuity benefits. For the reported case, the system calculated 607 days instead of the correct 608 days, resulting in AED 10,476.98 instead of the correct AED 10,494.24.

_severity: high | [Tickets: TSSD-4179]_

### eos prorated decimal precision bug

End of Service pro-rated amount calculations produce incorrect values due to decimal precision errors. The system consistently shows amounts less than expected by 0.1 to 0.2 decimals (e.g., 89,999.9 instead of 9000), affecting all employees regardless of departure date.

_severity: high | [Tickets: TSSD-2605]_

### eos gratuity calculation discrepancy

Admin observed a discrepancy between system-calculated EOS gratuity (AED 231,821.10) and manual calculation (AED 252,485). Support confirmed the system calculation is correct based on service duration split and tiered daily wage formula (21 days/year for years 1-5, 30 days/year for years 5+). The discrepancy was due to admin misunderstanding of the calculation methodology.

_severity: medium | [Tickets: TSSD-4742]_

### leave accrual mid month departure

System does not include leave accrual for the departure month when employee departs mid-month under monthly accrual policy. This is standard system behaviour: monthly accrual policies grant leave days only at end of month, so incomplete months are not accrued. Admin must either use conditional accrual policy (daily accrual) or manually adjust EOS balance.

_severity: medium | [Tickets: TSSD-4742]_

### leap year day handling unclear

The system's handling of leap year days (specifically February 29th) in gratuity calculation is not transparent to users. This causes confusion about whether the system correctly includes the extra day when calculating total service duration, leading to discrepancies between user manual calculations and system-generated amounts.

_severity: medium | [Tickets: TSSD-1625]_

### departure date counting methodology ambiguous

The system's methodology for counting service days is ambiguous regarding whether the departure date itself counts as a working day. This ambiguity causes users to arrive at different day counts (92 vs 93 days in the reported case) and consequently different gratuity amounts.

_severity: medium | [Tickets: TSSD-1625]_

### manual edit override without validation

The system allows users to manually edit gratuity amounts without validation or warning, which can override the system's calculated value. In the reported case, the client manually changed the system-calculated amount of AED 14,700 to AED 14,691.95, creating confusion about which value was correct.

_severity: medium | [Tickets: TSSD-1625]_

### service duration years calculation transparency

The system divides total service days by 365 to calculate years of service for gratuity computation, but this methodology is not transparent to users. Users may not understand that leap years are implicitly handled through this division method, leading to confusion about calculation accuracy.

_severity: low | [Tickets: TSSD-1625]_

### gratuity partial year calculation logic

The system calculates gratuity for partial years above 5 years of service using a specific methodology that differs from manual calculation approaches. The platform counts incomplete final years in days, then divides by 366 (for leap years) or 365 (for non-leap years) to derive the year fraction, which is not transparently communicated to users.

_severity: high | [Tickets: TSSD-2252]_

### leap year divisor selection undocumented

The system automatically selects divisor 366 when a service period includes a leap year and divisor 365 otherwise, but this logic is not documented or visible to users. This creates confusion when users manually calculate gratuity and receive different results.

_severity: high | [Tickets: TSSD-2252]_

### gratuity calculation methodology not transparent

The gratuity calculation involves multiple tiers (21 days per year for first 5 years, 30 days per year above 5 years) and complex service duration segmentation, but the system does not provide a breakdown or explanation of how these tiers are applied. Users cannot see the intermediate calculation steps.

_severity: high | [Tickets: TSSD-2252]_

### hardcoded daily wage divisor

The platform uses a fixed divisor of 30 days to calculate daily wage (Basic Salary / 30), which cannot be modified via configuration. This prevents organizations that require alternative daily wage formulas, such as (Basic Salary × 12 / 365), from customizing their gratuity calculations.

_severity: medium | [Tickets: TSSD-2043]_

### days worked calculation discrepancy

The gratuity calculation for an employee showed a discrepancy in days worked count: the system calculated 623 days instead of the expected 622 days (after deducting 10 days unpaid leave from 632 total working days). This one-day difference propagated through the tenure calculation and resulted in a higher gratuity amount.

_severity: medium | [Tickets: TSSD-2043]_

### gratuity calculation methodology inflexible

The gratuity calculation method is hardcoded and does not support customization of daily wage formulas. Organizations with specific calculation requirements (e.g., Basic × 12 / 365 instead of Basic / 30) cannot adjust the system to match their policies.

_severity: high | [Tickets: TSSD-2043]_

### leave salary calculation divisor mismatch

Leave salary calculations use a fixed divisor from policy configuration rather than adapting to actual calendar days in the month. When a leave policy is configured with a specific day divisor (e.g., 30 days), the system applies that divisor regardless of whether the month has 31 days, resulting in discrepancies between expected and actual leave salary amounts.

_severity: medium | [Tickets: TSSD-4731]_

### user expectation mismatch calculation logic

Users may misunderstand how leave salary calculations work, expecting the system to automatically adjust for calendar realities (e.g., 31 days in October) when in fact the system applies a fixed divisor from policy configuration. This creates a gap between user expectations and actual system behavior.

_severity: medium | [Tickets: TSSD-4731]_

### working days monthly variation

When leave encashment is configured to use 'working days' calculation method, the daily wage rate fluctuates based on the number of working days in each month. This causes cumulative leave salary accrual amounts to vary unpredictably across months with different working day counts, making month-to-month comparisons inconsistent.

_severity: medium | [Tickets: TSSD-3648]_

### accrual calculation method documentation gap

Users are unclear about how the daily wage calculator's leave encashment settings directly impact cumulative leave salary accrual reporting. The relationship between the 'working days' vs 'custom days' configuration choice and month-to-month accrual consistency is not well documented or communicated.

_severity: high | [Tickets: TSSD-3648]_

### dual daily wage configuration

The system maintains separate daily wage configurations for leave salary calculations and salary proration, each with independent divisors (e.g., 30 days vs 30.42 days). This causes calculation mismatches when clients expect unified daily wage formulas across both scenarios.

_severity: high | [Tickets: TSSD-2321]_

### configuration mismatch calculation discrepancy

When leave salary policy and salary proration use different divisors, the resulting prorated amounts diverge from client expectations. This creates confusion about which formula is being applied and why calculations do not match manual computations.

_severity: high | [Tickets: TSSD-2321]_

### work week configuration misunderstanding

Users may misinterpret proration calculations when an employee's work week has all 7 days configured as working days with no weekends. The system correctly calculates based on work week configuration, but this can appear incorrect if the user expects weekend exclusions.

_severity: medium | [Tickets: TSSD-4292]_

### proration calculation dependency

Salary proration calculations depend entirely on the employee's assigned work week configuration. If a work week has all days marked as working days, the full month will be counted as working days, which may not match user expectations.

_severity: high | [Tickets: TSSD-4292]_

### future departure date proration failure

When an employee's departure date is set in the future (e.g., Nov 28th) but payroll is processed earlier (e.g., Nov 27th), the system fails to prorate the salary and displays the full monthly amount instead. This causes incorrect salary calculations for offboarded employees with future-dated departure times.

_severity: high | [Tickets: TSSD-3058]_

### date dependent calculation logic error

The proration calculation exhibits inconsistent behavior based on whether the departure date is relative to the payroll processing date. Past departure dates trigger proration correctly; future departure dates do not, indicating a conditional logic error in the date comparison mechanism.

_severity: high | [Tickets: TSSD-3058]_

### duplicate deductions on recalculation

When an unpaid leave transaction is deleted to recalculate after a daily wage calculation change, the system creates duplicate deductions—one with the old calculation and one with the new. This results in incorrect payroll deductions being applied to the employee.

_severity: high | [Tickets: TSSD-2532]_

### orphaned deductions after leave deletion

When an unpaid leave request is deleted entirely, the associated payroll deduction persists in the system and is not automatically removed. This creates orphaned deductions that remain on payroll records even though the leave request no longer exists.

_severity: critical | [Tickets: TSSD-2532]_

### leave status change does not sync deductions

Attempting to move an unpaid leave request from approved status back to pending or accepted status does not trigger removal or recalculation of associated payroll deductions. The deductions remain unchanged despite the leave status change.

_severity: high | [Tickets: TSSD-2532]_

### public holiday timing mismatch

When public holidays are added after a leave request is created, the daily wage calculation (Payroll side) and the number of leave days (HR/Time Off side) become out of sync. This results in incorrect unpaid leave deduction amounts that cannot be retroactively corrected by the system.

_severity: high | [Tickets: TSSD-4464]_

### module synchronization gap

The Time Off and Payroll modules operate independently without real-time data synchronization. When the Time Off module updates leave day counts based on new public holiday configurations, the Payroll module's daily wage calculation is not automatically updated, creating data inconsistency.

_severity: high | [Tickets: TSSD-4464]_

### no retroactive correction capability

The system does not provide a mechanism to automatically recalculate or correct unpaid leave deductions after they have been initially calculated, even when the underlying configuration data changes. Manual intervention is required.

_severity: critical | [Tickets: TSSD-4464]_

### unpaid leave deduction divisor mismatch

The unpaid leave deduction calculation uses a configured custom daily wage divisor (30.42 days) rather than calendar days, which can produce deduction amounts that exceed the employee's monthly salary. This creates user confusion when the calculated deduction does not match expected salary amounts.

_severity: medium | [Tickets: TSSD-4368]_

### daily wage divisor configuration impact

The unpaid leave policy setting allows configuration of the daily wage divisor (custom days vs calendar days). The choice of divisor directly impacts the calculated deduction amount, and switching divisors can produce significantly different results for the same leave period.

_severity: medium | [Tickets: TSSD-4368]_

### remarks field day count mismatch

The remarks field displays an incorrect number of days (31) for February unpaid leave deductions when the system is configured for calendar days. This creates a discrepancy between what users see in the remarks and the actual calendar days used in the calculation, even though the underlying deduction amount is mathematically correct.

_severity: medium | [Tickets: TSSD-1301]_

### global config overrides policy settings

Global unpaid leave daily rate configuration automatically overrides policy-level calculation settings. Users configure leave policies to use basic salary divided by working days, but the system applies a global daily rate instead, resulting in deductions calculated from gross salary rather than the configured basic salary component.

_severity: high | [Tickets: TSSD-1753]_

### configuration hierarchy not transparent

The system has a hidden configuration hierarchy where global unpaid leave settings override policy-specific calculation methods, but this precedence is not clearly communicated to users. Users expect policy-level settings to control deduction calculations but discover the global configuration takes precedence only after encountering incorrect deductions.

_severity: high | [Tickets: TSSD-1753]_

### unpaid leave deduction calculation discrepancy

Unpaid leave deductions are calculated using an unexpected salary component (gross salary instead of basic salary) and divisor (calendar days or different working days count instead of configured working days). Multiple employees experienced incorrect deduction amounts that did not match their policy configuration.

_severity: critical | [Tickets: TSSD-1753]_

### daily rate display month mismatch

The system displays the daily rate from the payroll processing month instead of the leave occurrence month, causing user confusion. Although the deduction amount is calculated correctly, the displayed daily rate does not match the month when the leave actually occurred.

_severity: medium | [Tickets: TSSD-1807]_

### daily rate calculation formula clarity

Users need clear documentation on the daily rate calculation formula and how working days are determined, including the treatment of public holidays. The formula (Basic + Allowances / Working Days) must be explicitly documented with examples.

_severity: medium | [Tickets: TSSD-1807]_

## Troubleshooting

### unpaid leaves and overtime workaround

When automated salary proration based on working days is not available, a manual workaround exists using a combination of unpaid leaves and overtime tracking. This requires per-employee manual configuration and tracking.

_[Tickets: TSSD-4905]_

### verify payroll daily wage calculator config

User observes formula mismatch between leave policy and payroll settings. Root cause: payroll-side daily wage calculator configuration takes precedence over leave policy formula.

_[Tickets: TSSD-2648]_

### fix stale unpaid leave deduction

Unpaid leave deductions show incorrect amounts after salary configuration changes. The system calculated deductions based on previous salary configuration instead of the current one.

_[Tickets: TSSD-1581]_

### verify gratuity against mohre

When gratuity calculations appear incorrect or lower than expected, verify the calculation against MOHRE (Ministry of Human Resources) standards to confirm the correct amount.

_[Tickets: TSSD-4179]_

### eos calculation verification workaround

When End of Service pro-rated amounts appear incorrect, users should verify the calculation manually and escalate to the development team for investigation.

_[Tickets: TSSD-2605]_

### mid month departure leave accrual workaround

Admin questioned why October leave balance was not included in EOS for mid-month departure. System uses monthly accrual policy which only grants leave at end of month.

_[Tickets: TSSD-4742]_

### gratuity calculation verification

Admin questioned discrepancy between system gratuity calculation and manual calculation. Support provided detailed breakdown of correct calculation methodology.

_[Tickets: TSSD-4742]_

### verify departure date counting rule

Users confused about whether the departure date counts as a working day in service duration calculation. This causes discrepancies between manual and system calculations.

_[Tickets: TSSD-1625]_

### verify system calculated amount before editing

Users may manually edit gratuity amounts without realizing the system has already calculated a value. This can introduce errors if the manual edit is based on incomplete understanding of the calculation methodology.

_[Tickets: TSSD-1625]_

### gratuity mismatch verification steps

When a client's manual gratuity calculation differs from the system's result, the issue is typically due to misunderstanding how the system handles partial years and leap years, not a calculation error.

_[Tickets: TSSD-2252]_

### verify days worked calculation

When gratuity amounts appear incorrect, verify the days worked calculation by breaking down the components: total working days, unpaid leave deductions, and the resulting days used in tenure calculation.

_[Tickets: TSSD-2043]_

### understand daily wage formula limitation

If gratuity calculations do not match expected amounts based on alternative daily wage formulas (e.g., Basic × 12 / 365), understand that the platform uses a fixed (Basic / 30) divisor that cannot be modified.

_[Tickets: TSSD-2043]_

### verify leave policy divisor configuration

When leave salary calculations appear incorrect, the root cause is often the daily rate divisor configured in the leave policy. Users should verify that the policy configuration matches their expectations.

_[Tickets: TSSD-4731]_

### switch to custom days for consistency

When cumulative leave salary accrual amounts fluctuate unexpectedly across months, the root cause is often the 'working days' setting in leave encashment configuration. Switching to 'custom days' setting stabilizes the daily wage calculation.

_[Tickets: TSSD-3648]_

### align leave and proration divisors

When leave salary calculations do not match salary proration calculations, verify that both the leave salary policy and salary proration daily wage settings use the same divisor (e.g., both 30 days or both 30.42 days).

_[Tickets: TSSD-2321]_

### verify work week configuration

When proration appears to be calculating incorrectly based on working days, the root cause is typically the employee's assigned work week configuration.

_[Tickets: TSSD-4292]_

### proration bug resolution

The salary proration bug for future departure dates was escalated to the development team and subsequently fixed. The issue was confirmed as a bug through replication in the demo account and resolved through development team intervention.

_[Tickets: TSSD-3058]_

### manual deduction removal workaround

When unpaid leave deductions persist after deleting the leave request or changing the daily wage calculation, manual intervention is required to remove the orphaned or duplicate deductions from the payroll system.

_[Tickets: TSSD-2532]_

### manual deduction workaround

When unpaid leave deductions are calculated incorrectly due to public holiday timing mismatches, the system cannot automatically recalculate. The documented workaround is to manually add a deduction entry to compensate for the difference.

_[Tickets: TSSD-4464]_

### payroll cycle reopening workaround

An alternative workaround to manual deduction is to reopen previous payroll cycles to allow recalculation of deductions. However, this is not practical for customers who have already processed and finalized payroll.

_[Tickets: TSSD-4464]_

### verify unpaid leave policy divisor

User is confused about why unpaid leave deduction amount does not match expected monthly salary. Root cause is the daily wage divisor configured in the unpaid leave policy.

_[Tickets: TSSD-4368]_

### manual adjustment for deduction overage

When unpaid leave deduction calculated by the system exceeds the employee's monthly salary due to the configured divisor, manual adjustment is required to reconcile the payroll.

_[Tickets: TSSD-4368]_

### verify deduction amount despite remarks error

When remarks show an incorrect daily rate for unpaid leave deductions, users should verify the actual deduction amount rather than relying on the remarks field, as the backend calculation uses the correct calendar days.

_[Tickets: TSSD-1301]_

### verify global daily rate configuration

When unpaid leave deductions appear incorrect or do not match policy-level settings, the issue is likely caused by a global daily rate configuration that overrides policy-specific calculations.

_[Tickets: TSSD-1753]_

### daily rate display fix deployed

The system was updated to store the initially calculated daily rate at the time of leave request and display that stored value instead of recalculating it based on the current payroll month.

_[Tickets: TSSD-1807]_

## Glossary

- **Working Days (Calculation Method)**: The number of business days in a period, calculated as: Total Days - Weekend Days - Public Holidays. The count depends on when public holidays are configured. If public holidays are added after payroll calculation, the working days count used by the Time Off module may differ from the count used by the Payroll module. [Tickets: TSSD-4905, TSSD-3648, TSSD-4292, TSSD-4464, TSSD-1753, TSSD-1807]
- **Salary Proration**: The process of calculating a partial salary amount based on the number of days an employee worked during a payroll period. For offboarded employees, proration is calculated from the start of the payroll cycle to the departure date. Example: Employee with AED 21,000 monthly salary departing on day 15 of a 30-day month receives AED 10,500 (21,000 ÷ 30 × 15). [Tickets: TSSD-4905, TSSD-2321, TSSD-4292, TSSD-3058]
- **Pro-rata Salary**: Salary calculated proportionally based on actual days worked relative to the standard working days per month, without manual adjustments. [Tickets: TSSD-4905]
- **greyed out formula**: A formula displayed in the leave policy interface that is disabled (non-editable) because it has been overridden by the daily wage calculator configured in payroll settings. The greyed-out display indicates the formula is not valid for the current configuration and will not be used for calculations. [Tickets: TSSD-2648]
- **daily wage formula override**: The calculated daily salary rate used for unpaid leave deductions, computed as: Basic Salary + Allowances / Working Days. Working days exclude weekends and public holidays. This value is locked at the time of initial calculation and does not update if public holidays are added later. [Tickets: TSSD-2648, TSSD-4179, TSSD-2605, TSSD-4742, TSSD-1625, TSSD-2252, TSSD-2043, TSSD-2321, TSSD-4464, TSSD-4368]
- **Salary Components**: The component of employee salary used in daily wage calculations. Options include 'Basic Only' (basic salary only) or 'Basic + Allowances' (basic salary plus allowances). The selected component determines which salary elements are included in the daily wage calculation. [Tickets: TSSD-2648, TSSD-2321]
- **Daily Pay Rate**: The daily wage calculated by dividing total salary by 30.41 (standard days in month for calculation purposes). In the ticket example: 5250 / 30.41 = 172.64 AED per day. [Tickets: TSSD-1581]
- **Pending Unpaid Leave Deduction**: The salary amount deducted from an employee's paycheck for days taken as unpaid leave (leave without pay / LWP). Calculated as: Daily Wage × Number of Leave Days. The deduction is locked at the time of calculation and cannot be automatically recalculated if public holidays are added later. [Tickets: TSSD-1581, TSSD-2043, TSSD-2532, TSSD-4464, TSSD-4368, TSSD-1301, TSSD-1807]
- **Salary Configuration**: The employee's current salary setup in the system, including total salary amount and component breakdown. When a new salary configuration is created, it should be used for all subsequent calculations, including pending leave deductions. [Tickets: TSSD-1581]
- **Leap Year Divisor**: When converting a partial year (incomplete final year of service) to a year fraction, the system divides the day count by 366 if the period includes a leap year, or by 365 if it does not. This affects the precision of the year fraction used in gratuity calculations. [Tickets: TSSD-4179, TSSD-1625, TSSD-2252]
- **End of Service (EOS) / Gratuity**: A terminal benefit paid to an employee upon resignation or contract termination. Calculated based on basic salary, service duration, and contract type. For limited contracts, the system applies a tiered calculation: 21 days of daily wage per year for the first 5 years of service, and 30 days of daily wage per year for service beyond 5 years. [Tickets: TSSD-4179, TSSD-2605, TSSD-2252, TSSD-2043]
- **Service Period**: The total number of days an employee has worked, calculated from the date of joining to the date of departure. This must account for all calendar days including leap year days to ensure accurate gratuity calculations. [Tickets: TSSD-4179]
- **MOHRE**: Ministry of Human Resources and Emiratisation (UAE regulatory body). MOHRE standards define the correct methodology for calculating End of Service gratuity benefits, including proper handling of leap years in service period calculations. [Tickets: TSSD-4179]
- **Pro-rated Amount**: The proportional salary amount calculated for an employee based on their departure date, computed using the daily wage formula (basic + allowances / 30) multiplied by the number of days worked in the final month. [Tickets: TSSD-2605]
- **Monthly Accrual Policy**: Leave accrual policy where employees earn leave days only at the end of each calendar month, after completing the full month. Incomplete months do not accrue leave days. [Tickets: TSSD-4742]
- **Conditional Accrual Policy**: Leave accrual policy where employees earn leave days daily throughout the month, rather than waiting until month-end. Allows partial month accrual for mid-month departures. [Tickets: TSSD-4742]
- **Service Duration Segmentation**: The system breaks service duration into two tiers: (1) first 5 years of service (applies 21 days per year multiplier), and (2) service above 5 years (applies 30 days per year multiplier). Each tier is calculated separately and summed. [Tickets: TSSD-4742, TSSD-1625, TSSD-2252]
- **Tiered Gratuity Formula**: Gratuity calculation method that applies different daily wage multipliers based on service duration: 21 days per year for first 5 years of service, 30 days per year for service above 5 years. [Tickets: TSSD-4742]
- **Departure Date**: The date on which an employee's employment ends (offboarding date). This date is used as the cutoff point for salary proration calculations. The ticket demonstrates the distinction between departure dates in the past vs. future relative to payroll processing. [Tickets: TSSD-1625, TSSD-3058]
- **Gratuity Bracket**: A service duration range that determines the number of days of gratuity per year. For example, employees with 1-5 years of service may receive 21 days of gratuity per year, while those with 5+ years receive a different amount. [Tickets: TSSD-1625]
- **Limited Contract**: A contract type with a defined end date. Gratuity is calculated based on the contract end date (date of departure) and the contract start date (date of joining). [Tickets: TSSD-2252]
- **Days Worked**: The total number of working days in an employee's tenure, calculated by summing working day periods and subtracting unpaid leave days. This value is used to determine years of service for gratuity calculations. [Tickets: TSSD-2043]
- **Length of Service**: The duration of an employee's employment expressed in years, calculated by dividing days worked by 365 or 366. This is used to determine the gratuity entitlement bracket (e.g., 1 to 5 years = 21 days per year). [Tickets: TSSD-2043]
- **Global daily rate configuration**: A system-wide setting for unpaid leave deductions that automatically overrides individual leave policy calculation methods. This configuration determines which salary component (basic or gross) and which divisor (working days, calendar days, or custom days) are used to calculate daily wage deductions for unpaid leave. [Tickets: TSSD-4731, TSSD-1753, TSSD-1807]
- **Leave Salary Calculation**: The process of computing compensation for leave periods based on the daily rate derived from the leave policy configuration. The calculation uses the daily rate (monthly salary divided by the configured divisor) multiplied by the number of leave days. [Tickets: TSSD-4731]
- **Prorated Salary**: Salary adjusted for partial months, calculated by applying the daily rate (derived from policy configuration) to the actual number of days worked or on leave in that month. [Tickets: TSSD-4731]
- **Leave Encashment**: The configuration setting in the daily wage calculator that determines how daily wage is calculated for leave salary accrual purposes. Options include 'working days' (daily wage varies by month based on working day count) and 'custom days' (daily wage remains stable across months). [Tickets: TSSD-3648]
- **Cumulative Leave Salary Accrual**: The running total of leave salary amounts accrued for an employee across multiple months. Each month's accrual is added to the prior month's balance. The cumulative total is affected by the daily wage calculation method selected in leave encashment settings. [Tickets: TSSD-3648]
- **Custom Days (Calculation Method)**: A leave encashment calculation method where the daily wage is derived using a fixed number of days (not tied to actual monthly working days). This maintains a stable daily wage rate across all months. [Tickets: TSSD-3648]
- **Leave Salary Policy**: A configuration that defines how salary is deducted when an employee takes leave. It specifies the salary components to include (e.g., Basic Only or Basic + Allowances) and the daily wage divisor used to calculate the leave deduction amount. [Tickets: TSSD-2321]
- **Work Week Configuration**: A policy that defines which days of the week are working days and which are off/weekend days for an employee. This configuration directly determines how many working days are counted in proration calculations. For example, NVK Operations work week has all 7 days configured as working days with no weekends. [Tickets: TSSD-4292]
- **Daily Wage Configuration**: The system setting that defines how daily rates are calculated from monthly salaries. In the ticket example, the daily wage config was set to divide monthly salary by 30 days (21,000 ÷ 30 = AED 700 per day). [Tickets: TSSD-3058]
- **Payroll Cycle Period**: The time interval (typically monthly) during which payroll is calculated and processed. The ticket references the 'active payroll cycle' as the context in which prorated salary should be displayed for departing employees. [Tickets: TSSD-3058]
- **Daily Wage Calculation**: The process of determining an employee's daily pay rate based on their salary and a selected calculation basis (calendar days, working days, or custom days). This rate is used to calculate deductions for unpaid leave and other time-off scenarios. [Tickets: TSSD-2532]
- **Payroll Deduction**: An amount subtracted from an employee's salary in the payroll system, typically for unpaid leave, absences, or other adjustments. Deductions should be automatically created and removed based on leave request status and daily wage calculations. [Tickets: TSSD-2532]
- **Leave Transaction**: A record in the system that links an approved unpaid leave request to a corresponding payroll deduction. Deleting a leave transaction is intended to allow recalculation of the deduction amount based on updated daily wage settings. [Tickets: TSSD-2532]
- **Public Holiday (PH)**: A nationally recognized day off that is excluded from working days calculations. Public holidays are country-specific (e.g., Egypt has different public holidays than other countries). When a public holiday is added to the system after a leave request is created, it affects the working days count for that period, potentially causing calculation mismatches. [Tickets: TSSD-4464]
- **Time Off Module**: The system component responsible for managing leave requests and calculating the number of leave days. It determines working days by subtracting weekends and public holidays from the total period. This module does not currently send complete leave request details to the Payroll module, causing synchronization issues. [Tickets: TSSD-4464]
- **Payroll Module**: The system component responsible for calculating daily wages and processing salary deductions. It calculates daily wage based on the configuration at the time of processing. Once calculated, the daily wage value is locked and does not update if public holidays are added later. [Tickets: TSSD-4464]
- **Custom Days Divisor**: A configurable value (e.g., 30.42 days) used in the unpaid leave policy to calculate daily wage. The daily wage is calculated as monthly salary divided by the custom days divisor. This differs from using calendar days (28-31 days per month) and can produce different deduction amounts for the same leave period. [Tickets: TSSD-4368]
- **Calendar Days**: A calculation method for daily wage that divides the monthly salary by the actual number of days in that month (e.g., 29 for February in leap years, 31 for January). This is the basis for unpaid leave deductions when calendar days mode is configured. [Tickets: TSSD-1301]
- **Remarks Field**: A display section in the payroll deduction record that shows the calculation breakdown, including the daily rate and the number of days used as the divisor. In this ticket, the remarks field incorrectly displays 31 days for February instead of the actual 29 days. [Tickets: TSSD-1301]
- **Configuration hierarchy**: The precedence order that determines which settings take effect when multiple configuration levels exist. In the daily wage calculator, the global unpaid leave daily rate configuration takes precedence over policy-level calculation method settings. [Tickets: TSSD-1753]
- **Policy-level calculation method**: Settings configured at the individual leave policy level that specify how unpaid leave deductions should be calculated, such as Basic Salary / Working Days. These settings can be overridden by global configuration. [Tickets: TSSD-1753]
- **Leave Occurrence Month**: The calendar month during which the employee actually took unpaid leave. The daily rate for deduction should be calculated based on this month's working days, not the month when payroll is processed. [Tickets: TSSD-1807]
- **Payroll Processing Month**: The month during which the payroll transaction is created or processed in the system. This may differ from the month when the leave actually occurred. [Tickets: TSSD-1807]
---

# Claims to Validate

> **Note:** Jira claims provide test hypotheses based on ticket evidence. Navigation paths come from Zendesk documentation matching.

## Ui State

### Remarks field shows incorrect day count for February

**Test Hypothesis:** When unpaid leave deduction is calculated for February with calendar days mode enabled, does the remarks field display 31 days instead of 29 days?

**Evidence Summary:** TSSD-1301 reports that for February unpaid leave deductions, the remarks field displays a daily rate of 925.81 (based on 31 days) instead of 989.66 (based on 29 days), even though the actual deduction calculation uses the correct 29-day divisor.

**Navigation Hint:** Settings > Payroll > Daily Wage Calculation > Calculation Basis

**Meta:** id=JIRA_002 | origin=jira | playwright=NO | blocker=NEEDS_ZENDESK_NAVIGATION

**Evidence (tickets):** TSSD-1301

**UI Indicators:**
- Remarks field in unpaid leave deduction record
- Daily rate calculation display
- Month-specific day count reference

**Selector Hints:**
- remarks text
- daily rate value
- days divisor reference
- Remarks field in unpaid leave deduction record
- Daily rate calculation display
- Month-specific day count reference

**Preconditions:**
- Prepare test data to reproduce the scenario described by the ticket(s)

**Steps:**
- Log in as a user who can access the feature (admin if required)
- Navigate to the feature area relevant to this claim
- Locate the UI element referenced in the claim (label/field/value/tooltip/etc.)

**Expected:**
- Remarks should display 989.66 as daily rate for February (28,700 ÷ 29)
- Remarks should reference 29 days, not 31 days
- Remarks should reflect actual calendar days in the month
- UI state matches the claim expectation and does not show contradictory information

### Gratuity amount field is manually editable

**Test Hypothesis:** How might we verify that users can manually edit the system-calculated gratuity amount?

**Evidence Summary:** Ticket TSSD-1625 reveals that the system allows users to manually edit gratuity amounts. The client was able to change the system-calculated amount of AED 14,700 to AED 14,691.95, indicating the field is not read-only.

**Meta:** id=JIRA_006 | origin=jira | playwright=NO | blocker=NEEDS_ZENDESK_NAVIGATION

**Evidence (tickets):** TSSD-1625

**UI Indicators:**
- Gratuity amount field
- Field is not read-only or disabled
- User can type or modify the value

**Selector Hints:**
- Gratuity Amount input field
- Edit button or pencil icon
- Amount field in gratuity section
- Gratuity amount field
- Field is not read-only or disabled
- User can type or modify the value

**Preconditions:**
- Prepare test data to reproduce the scenario described by the ticket(s)

**Steps:**
- Log in as a user who can access the feature (admin if required)
- Navigate to the feature area relevant to this claim
- Locate the UI element referenced in the claim (label/field/value/tooltip/etc.)
- Perform the action described by the ticket evidence

**Expected:**
- Gratuity amount field is editable
- Users can modify the calculated value
- No validation prevents manual edits
- UI state matches the claim expectation and does not show contradictory information

### Daily rate displays leave occurrence month rate

**Test Hypothesis:** When viewing an unpaid leave deduction created in a different payroll month, the daily rate field displays the rate calculated from the leave occurrence month, not the payroll processing month.

**Evidence Summary:** Ticket TSSD-1807 reported that the system displayed May's daily rate (173.91) instead of April's daily rate (235.29) for an April leave deduction created during May payroll processing. A fix was deployed to store and display the initially calculated daily rate.

**Meta:** id=JIRA_011 | origin=jira | playwright=NO | blocker=NEEDS_ZENDESK_NAVIGATION

**Evidence (tickets):** TSSD-1807

**UI Indicators:**
- Daily rate field in unpaid leave deduction detail view
- Daily rate value matches the leave occurrence month calculation
- Daily rate does not change based on payroll processing month

**Selector Hints:**
- daily rate label
- daily rate value display
- unpaid leave deduction details
- Daily rate field in unpaid leave deduction detail view
- Daily rate value matches the leave occurrence month calculation
- Daily rate does not change based on payroll processing month

**Preconditions:**
- Prepare test data to reproduce the scenario described by the ticket(s)

**Steps:**
- Log in as a user who can access the feature (admin if required)
- Navigate to the feature area relevant to this claim
- Locate the UI element referenced in the claim (label/field/value/tooltip/etc.)
- Perform the action described by the ticket evidence

**Expected:**
- Daily rate shows 235.29 for April leave (4000/17 working days)
- Daily rate does not show 173.91 (May's rate of 4000/23 working days)
- Stored rate persists and is not recalculated on display
- UI state matches the claim expectation and does not show contradictory information

### Leave policy formula displays greyed out when overridden

**Test Hypothesis:** How might we verify that the daily wage formula in leave policy is displayed as greyed out (disabled) when payroll settings override it?

**Evidence Summary:** The ticket reports that the daily wage formula in leave policy appears greyed out. The system comment confirms this is intentional: 'on the leave policy page, it's basic only. on the payroll settings, it's basic + allowances. Because its has been over written from the Payroll side that's why you see that... the formula configured at the leave policy which is in grey is not valid and it will be overwritten from what is configured on the daily wage calculator.'

**Navigation Hint:** Settings > Leaves > Unpaid Leave option > calculation method > day calculation type

**Meta:** id=JIRA_024 | origin=jira | playwright=NO | blocker=NEEDS_ZENDESK_NAVIGATION

**Evidence (tickets):** TSSD-2648

**UI Indicators:**
- Leave policy daily wage formula field
- Greyed out text or disabled field state
- Formula display in leave policy configuration

**Selector Hints:**
- Daily wage formula field
- Greyed out indicator
- Disabled field styling
- Leave policy daily wage formula field
- Greyed out text or disabled field state
- Formula display in leave policy configuration

**Steps:**
- Log in as a user who can access the feature (admin if required)
- Navigate to the feature area relevant to this claim
- Open the relevant Settings / Configuration section for the feature
- Locate the UI element referenced in the claim (label/field/value/tooltip/etc.)

**Expected:**
- Formula field appears greyed out
- Formula field is not editable
- Visual indication of override in effect
- UI state matches the claim expectation and does not show contradictory information

### Active payroll cycle displays salary amount in payroll table

**Test Hypothesis:** How might we verify that the active payroll cycle view displays an employee's salary amount in a payroll table, and that this amount reflects either full salary or prorated salary based on departure date?

**Evidence Summary:** The ticket describes checking the 'payroll table' to verify whether salary is displayed as full amount or prorated amount. The ticket states: 'the payroll table still reflects his full November salary, not prorated' for an employee with a future departure date, indicating the payroll table is the UI element where proration status is visible.

**Meta:** id=JIRA_026 | origin=jira | playwright=NO | blocker=NEEDS_ZENDESK_NAVIGATION

**Evidence (tickets):** TSSD-3058

**UI Indicators:**
- Payroll table display
- Salary column
- Amount field
- Employee row

**Selector Hints:**
- Payroll table
- Salary column header
- Amount value
- Employee name
- Payroll table display
- Salary column

**Preconditions:**
- Prepare test data to reproduce the scenario described by the ticket(s)

**Steps:**
- Log in as a user who can access the feature (admin if required)
- Navigate to the feature area relevant to this claim
- Locate the UI element referenced in the claim (label/field/value/tooltip/etc.)

**Expected:**
- Payroll table displays salary amount for each employee
- Amount reflects prorated calculation when departure date is set
- UI state matches the claim expectation and does not show contradictory information

## Ui Absence

### Service duration calculation methodology not documented in UI

**Test Hypothesis:** How might we verify that the system does not provide transparent documentation of how service days are counted and converted to years?

**Evidence Summary:** Ticket TSSD-1625 demonstrates that users are unclear about the calculation methodology, specifically regarding leap year day inclusion and departure date counting. The system does not provide visible documentation or explanation of these rules in the UI.

**Meta:** id=JIRA_007 | origin=jira | playwright=NO | blocker=NEEDS_ZENDESK_NAVIGATION

**Evidence (tickets):** TSSD-1625

**UI Indicators:**
- Absence of calculation methodology explanation
- No tooltip or help text about day counting rules
- No documentation about leap year handling
- No clarification about departure date inclusion

**Selector Hints:**
- Help icon or tooltip
- Calculation methodology section
- Information panel about calculation rules
- Absence of calculation methodology explanation
- No tooltip or help text about day counting rules
- No documentation about leap year handling

**Preconditions:**
- Prepare test data to reproduce the scenario described by the ticket(s)

**Steps:**
- Log in as a user who can access the feature (admin if required)
- Navigate to the feature area relevant to this claim
- Locate the UI element referenced in the claim (label/field/value/tooltip/etc.)

**Expected:**
- No visible explanation of calculation methodology
- Users must infer or guess how days are counted
- Leap year handling is not explicitly documented
- UI state matches the claim expectation and does not show contradictory information

### Gratuity calculation breakdown not displayed to user

**Test Hypothesis:** How might we verify that the system does NOT display a detailed breakdown of the gratuity calculation, including service period segmentation, day counts, year fractions, and tier-specific multipliers?

**Evidence Summary:** The ticket shows that the system outputs a final gratuity amount (AED 80,203.28) but does not explain the calculation steps, service duration segmentation, or leap year adjustments. The client had to manually reverse-engineer the calculation to understand the result.

**Meta:** id=JIRA_015 | origin=jira | playwright=NO | blocker=NEEDS_ZENDESK_NAVIGATION

**Evidence (tickets):** TSSD-2252

**UI Indicators:**
- Absence of calculation breakdown section
- No service period segmentation display
- No day count or year fraction explanation
- No tier multiplier visibility

**Selector Hints:**
- Gratuity amount field
- Absence of 'Calculation Details' or 'Breakdown' section
- No expandable calculation explanation
- Absence of calculation breakdown section
- No service period segmentation display
- No day count or year fraction explanation

**Preconditions:**
- Prepare test data to reproduce the scenario described by the ticket(s)

**Steps:**
- Log in as a user who can access the feature (admin if required)
- Navigate to the feature area relevant to this claim
- Locate the UI element referenced in the claim (label/field/value/tooltip/etc.)

**Expected:**
- Gratuity calculation result is shown
- No detailed breakdown or explanation is provided
- UI state matches the claim expectation and does not show contradictory information

### Leap year divisor selection logic not documented in UI

**Test Hypothesis:** How might we verify that the system does NOT display or explain when it uses divisor 366 (leap year) vs 365 (non-leap year) for partial year calculations?

**Evidence Summary:** The ticket reveals that the system automatically applies divisor 366 for periods including leap years, but this logic is not visible or explained to users. The client's manual calculation used a different approach, resulting in a discrepancy.

**Meta:** id=JIRA_016 | origin=jira | playwright=NO | blocker=NEEDS_ZENDESK_NAVIGATION

**Evidence (tickets):** TSSD-2252

**UI Indicators:**
- Absence of leap year divisor explanation
- No documentation of 365 vs 366 selection criteria
- No visibility into year fraction calculation

**Selector Hints:**
- Gratuity calculation output
- Absence of 'Leap Year Adjustment' or 'Divisor Used' field
- No help text explaining divisor selection
- Absence of leap year divisor explanation
- No documentation of 365 vs 366 selection criteria
- No visibility into year fraction calculation

**Preconditions:**
- Prepare test data to reproduce the scenario described by the ticket(s)

**Steps:**
- Log in as a user who can access the feature (admin if required)
- Navigate to the feature area relevant to this claim
- Locate the UI element referenced in the claim (label/field/value/tooltip/etc.)

**Expected:**
- System calculates gratuity correctly using leap year logic
- No explanation of the divisor selection is provided to the user
- UI state matches the claim expectation and does not show contradictory information

### System does not automatically adjust salary based on working days

**Test Hypothesis:** Does the Daily Wage Calculator lack an automated feature that dynamically adjusts employee salary when actual working days differ from the standard working days threshold?

**Evidence Summary:** Ticket TSSD-4905 explicitly states the system cannot automatically calculate salary based on actual working days with dynamic adjustments for extra or fewer worked days. This automation is not currently supported and cannot be easily implemented via workflows.

**Meta:** id=JIRA_043 | origin=jira | playwright=NO | blocker=NEEDS_ZENDESK_NAVIGATION

**Evidence (tickets):** TSSD-4905

**UI Indicators:**
- No automatic salary adjustment controls
- No attendance-based salary calculation feature
- No dynamic proration based on working days

**Selector Hints:**
- Absence of automatic adjustment toggle
- Absence of attendance-linked salary configuration
- Absence of dynamic proration settings
- No automatic salary adjustment controls
- No attendance-based salary calculation feature
- No dynamic proration based on working days

**Steps:**
- Log in as a user who can access the feature (admin if required)
- Navigate to the feature area relevant to this claim

**Expected:**
- System does not provide automatic salary adjustment based on working days
- Users must manually track overtime and unpaid leaves as separate adjustments
- Result is observable (in UI or logs) and consistent with the claim statement

## Navigation

### Daily Wage Calculation settings are accessible from Payroll menu

**Test Hypothesis:** How might we verify that the Daily Wage Calculator feature is accessible by navigating to Settings > Payroll > Daily Wage Calculation?

**Evidence Summary:** Zendesk navigation data confirms multiple paths to daily wage calculation settings: 'Settings > Payroll > Daily Wage Calculation > Salary Components > salary components to include' and 'Settings > Payroll > Daily Wage Calculation > Calculation Basis.' These paths indicate the feature is accessible from the Payroll settings menu.

**Navigation Hint:** Settings > Payroll > Daily Wage Calculation > Salary Components > salary components to include

**Meta:** id=JIRA_003 | origin=jira | playwright=NO | blocker=NEEDS_ZENDESK_NAVIGATION

**Evidence (tickets):** TSSD-4905, TSSD-2648, TSSD-1581, TSSD-4179, TSSD-2605, TSSD-4742, TSSD-1625, TSSD-2252, TSSD-2043, TSSD-4731, TSSD-3648, TSSD-3058, TSSD-2532, TSSD-4368, TSSD-1753, TSSD-1807

**UI Indicators:**
- Settings menu item
- Payroll submenu
- Daily Wage Calculation option
- Settings menu
- Calculation basis selector
- Salary components selector
- Gratuity calculator interface
- Calculation Basis configuration
- Leave encashment configuration option
- Working days selection
- Custom days selection
- Settings menu accessible
- Payroll section present
- Daily Wage Calculation option available
- Calculation basis selector visible
- Salary components selector visible
- Configuration form

**Selector Hints:**
- Settings link/button
- Payroll menu item
- Daily Wage Calculation link
- Settings link
- Daily Wage Calculation menu item
- Settings

**Preconditions:**
- Have at least two test users: one with required permissions and one without
- Prepare test data to reproduce the scenario described by the ticket(s)

**Steps:**
- Log in as a user who can access the feature (admin if required)
- Navigate to the feature area relevant to this claim
- Open the relevant Settings / Configuration section for the feature
- Locate the UI element referenced in the claim (label/field/value/tooltip/etc.)

**Expected:**
- User can navigate to Daily Wage Calculation configuration page
- Page displays calculation base options and salary component selection
- Daily Wage Calculation page loads
- Calculation basis options visible
- Salary component selection available
- Daily Wage Calculation configuration page loads

### Global unpaid leave daily rate configuration exists

**Test Hypothesis:** How might we verify that the unpaid leave policy settings, including the daily wage divisor configuration, are accessible from Settings > Leaves?

**Evidence Summary:** TSSD-4368 support response confirms the system follows 'the daily wage configured in the Unpaid leave policy setting.' The Zendesk navigation data indicates the path Settings > Leaves > Unpaid Leave option > calculation method > day calculation type exists for configuring unpaid leave deductions.

**Navigation Hint:** Settings > Leaves > Unpaid Leave option > calculation method > day calculation type

**Meta:** id=JIRA_009 | origin=jira | playwright=NO | blocker=NEEDS_ZENDESK_NAVIGATION

**Evidence (tickets):** TSSD-4368, TSSD-1753

**UI Indicators:**
- Settings menu accessible
- Leaves section present
- Unpaid Leave option available
- Calculation method selector visible
- Day calculation type selector visible
- Global configuration setting for unpaid leave daily rate
- System-wide default daily rate value
- Configuration that applies to all leave policies

**Selector Hints:**
- Settings navigation item
- Leaves menu option
- Unpaid Leave policy configuration
- Calculation method dropdown
- Day calculation type dropdown
- Global settings section

**Preconditions:**
- Have at least two test users: one with required permissions and one without
- Prepare test data to reproduce the scenario described by the ticket(s)

**Steps:**
- Log in as a user who can access the feature (admin if required)
- Navigate to the feature area relevant to this claim
- Open the relevant Settings / Configuration section for the feature
- Locate the UI element referenced in the claim (label/field/value/tooltip/etc.)

**Expected:**
- User can navigate to Settings > Leaves > Unpaid Leave option
- User can view and modify calculation method (Basic Only, Basic + Allowances)
- User can select day calculation type (calendar days, working days, custom days)
- Global daily rate configuration is accessible and documented
- Configuration value is visible to administrators
- UI state matches the claim expectation and does not show contradictory information

### Salary proration daily wage configuration is accessible

**Test Hypothesis:** Can a user navigate to Settings > Leaves and access the unpaid leave option to configure the day calculation type (calendar days, working days, custom days)?

**Evidence Summary:** TSSD-2321 documents that leave salary policy configuration exists and uses a configurable daily wage divisor. The Zendesk navigation data confirms the path Settings > Leaves > Unpaid Leave option > calculation method > day calculation type is available.

**Navigation Hint:** Settings > Leaves > Unpaid Leave option > calculation method > day calculation type

**Meta:** id=JIRA_019 | origin=jira | playwright=NO | blocker=NEEDS_ZENDESK_NAVIGATION

**Evidence (tickets):** TSSD-2321

**UI Indicators:**
- Settings menu
- Leaves section
- Leave Policies
- Unpaid Leave option
- Calculation method dropdown
- Day calculation type selector
- Payroll section
- Daily Wage Calculation option
- Calculation Basis selector
- Day divisor options

**Selector Hints:**
- Settings link
- Leaves tab
- Leave Policies button
- Unpaid Leave checkbox or option
- Calculation method field
- Day calculation type field

**Preconditions:**
- Have at least two test users: one with required permissions and one without
- Prepare test data to reproduce the scenario described by the ticket(s)

**Steps:**
- Log in as a user who can access the feature (admin if required)
- Navigate to the feature area relevant to this claim
- Open the relevant Settings / Configuration section for the feature
- Locate the UI element referenced in the claim (label/field/value/tooltip/etc.)

**Expected:**
- User can navigate to Settings > Leaves > Leave Policies
- User can add or edit a leave policy
- User can select Unpaid Leave option
- User can choose calculation method (Basic Only, Basic + Allowances)
- User can select day calculation type (calendar days, working days, custom days)
- User can navigate to Settings > Payroll > Daily Wage Calculation

### Leave policy configuration accessible from Settings

**Test Hypothesis:** Can a user navigate to leave policy configuration via Settings > Leaves to set calculation method and day calculation type?

**Evidence Summary:** Zendesk navigation data confirms that leave policy configuration is accessible from Settings > Leaves, where users can add new policies, select unpaid leave options, choose calculation methods (Basic Only, Basic + Allowances), and select day calculation types (calendar days, working days, custom days).

**Navigation Hint:** Settings > Leaves > Unpaid Leave option > calculation method > day calculation type

**Meta:** id=JIRA_040 | origin=jira | playwright=NO | blocker=NEEDS_ZENDESK_NAVIGATION

**Evidence (tickets):** TSSD-4731

**UI Indicators:**
- Settings menu
- Leaves submenu
- Leave Policies section
- Add new policy option

**Selector Hints:**
- Settings link
- Leaves menu item
- Leave Policies link
- Add Policy button
- Settings menu
- Leaves submenu

**Preconditions:**
- Have at least two test users: one with required permissions and one without
- Prepare test data to reproduce the scenario described by the ticket(s)

**Steps:**
- Log in as a user who can access the feature (admin if required)
- Navigate to the feature area relevant to this claim
- Open the relevant Settings / Configuration section for the feature
- Locate the UI element referenced in the claim (label/field/value/tooltip/etc.)

**Expected:**
- Leave policy configuration page is accessible
- Calculation method selection controls are visible
- Day calculation type selection controls are visible
- UI state matches the claim expectation and does not show contradictory information

### Unpaid leave deduction configuration accessible from Settings

**Test Hypothesis:** Can a user navigate to unpaid leave deduction configuration by following Settings > Leaves > Leave Policies > Add new policy > Unpaid Leave option?

**Evidence Summary:** Zendesk data indicates unpaid leave deduction calculation can be configured when adding a new leave policy, with options for calculation method and day calculation type.

**Navigation Hint:** Settings > Leaves > Unpaid Leave option > calculation method > day calculation type

**Meta:** id=JIRA_044 | origin=jira | playwright=NO | blocker=NEEDS_ZENDESK_NAVIGATION

**Evidence (tickets):** TSSD-4905

**UI Indicators:**
- Settings > Leaves menu path
- Leave Policies section
- Add new policy option
- Unpaid Leave option

**Selector Hints:**
- Settings link
- Leaves menu item
- Leave Policies link
- Add new policy button
- Unpaid Leave checkbox or option
- Settings > Leaves menu path

**Preconditions:**
- Have at least two test users: one with required permissions and one without
- Prepare test data to reproduce the scenario described by the ticket(s)

**Steps:**
- Log in as a user who can access the feature (admin if required)
- Navigate to the feature area relevant to this claim
- Open the relevant Settings / Configuration section for the feature
- Locate the UI element referenced in the claim (label/field/value/tooltip/etc.)
- Perform the action described by the ticket evidence

**Expected:**
- User can navigate to leave policy configuration
- User can select Unpaid Leave option
- User can choose calculation method and day calculation type
- UI state matches the claim expectation and does not show contradictory information

## System Behavior

### Backend calculation correctly uses actual calendar days

**Test Hypothesis:** When unpaid leave deduction is processed for February with calendar days mode, does the system calculate the deduction using 29 days despite the remarks showing 31 days?

**Evidence Summary:** TSSD-1301 confirms that the actual unpaid leave deduction amount (16,824.14) is correct, calculated as 989.66 × 17 unpaid days, proving the backend uses the correct 29-day divisor for February.

**Navigation Hint:** Settings > Payroll > Daily Wage Calculation > Calculation Basis

**Meta:** id=JIRA_001 | origin=jira | playwright=NO | blocker=NEEDS_ZENDESK_NAVIGATION

**Evidence (tickets):** TSSD-1301

**UI Indicators:**
- Deduction amount in payroll transaction
- Actual salary reduction applied
- Backend calculation accuracy

**Selector Hints:**
- deduction amount field
- transaction total
- payroll entry amount
- Deduction amount in payroll transaction
- Actual salary reduction applied
- Backend calculation accuracy

**Preconditions:**
- Prepare test data to reproduce the scenario described by the ticket(s)

**Steps:**
- Log in as a user who can access the feature (admin if required)
- Navigate to the feature area relevant to this claim
- Locate the UI element referenced in the claim (label/field/value/tooltip/etc.)

**Expected:**
- Deduction amount should be 16,824.14 for 17 unpaid days in February
- Backend should use 989.66 as daily rate (28,700 ÷ 29)
- Actual deduction should match correct calendar days calculation
- UI state matches the claim expectation and does not show contradictory information

### Pending unpaid leave deductions auto-update when salary configuration changes

**Test Hypothesis:** When a new salary configuration is created for an employee with pending unpaid leave deductions, do those deductions automatically recalculate using the new salary configuration?

**Evidence Summary:** The ticket identified a bug where pending unpaid leave deductions were NOT automatically updated when salary configurations changed. The development team confirmed this was a bug and implemented a fix. The ticket states: 'the deduction is calculated based on the employee's previous salary configuration' and 'if a new salary configuration is created we update pending unpaid leave deduction amounts, but something did not work as expected.' The fix ensures automatic updates now occur.

**Meta:** id=JIRA_004 | origin=jira | playwright=NO | blocker=NEEDS_ZENDESK_NAVIGATION

**Evidence (tickets):** TSSD-1581

**UI Indicators:**
- Pending unpaid leave deduction status
- Salary configuration creation event
- Deduction amount change
- Recalculation timestamp

**Selector Hints:**
- Unpaid leave deduction amount
- Leave request status
- Salary configuration date
- Pending unpaid leave deduction status
- Salary configuration creation event
- Deduction amount change

**Preconditions:**
- Prepare test data to reproduce the scenario described by the ticket(s)

**Steps:**
- Log in as a user who can access the feature (admin if required)
- Navigate to the feature area relevant to this claim
- Open the relevant Settings / Configuration section for the feature
- Perform the action described by the ticket evidence

**Expected:**
- Pending unpaid leave deductions are recalculated
- Deduction amount updates to reflect new salary
- Update occurs automatically without manual intervention
- Result is observable (in UI or logs) and consistent with the claim statement

### Unpaid leave deductions calculated using current salary configuration

**Test Hypothesis:** When an unpaid leave deduction is created or recalculated, does the system use the employee's current (most recent) salary configuration?

**Evidence Summary:** The ticket documents a bug where unpaid leave deductions were calculated using outdated salary configurations instead of current ones. The development team confirmed this was a bug and implemented a fix to ensure unpaid leave deductions update automatically when new salary configurations are created.

**Meta:** id=JIRA_005 | origin=jira | playwright=NO | blocker=NEEDS_ZENDESK_NAVIGATION

**Evidence (tickets):** TSSD-1581

**UI Indicators:**
- Unpaid leave deduction amount
- Salary configuration timestamp
- Leave request creation timestamp
- Deduction recalculation trigger

**Selector Hints:**
- Leave deduction amount field
- Salary configuration date
- Leave request date
- Unpaid leave deduction amount
- Salary configuration timestamp
- Leave request creation timestamp

**Preconditions:**
- Prepare test data to reproduce the scenario described by the ticket(s)

**Steps:**
- Log in as a user who can access the feature (admin if required)
- Navigate to the feature area relevant to this claim
- Open the relevant Settings / Configuration section for the feature
- Perform the action described by the ticket evidence

**Expected:**
- Deduction uses most recent salary configuration
- Deduction updates automatically when salary config changes
- Deduction amount matches formula: (Total Salary / 30.41) × Leave Days
- Result is observable (in UI or logs) and consistent with the claim statement

### Global daily rate overrides policy-level settings

**Test Hypothesis:** How might we verify that when both global and policy-level unpaid leave configurations exist, the global configuration takes precedence in deduction calculations?

**Evidence Summary:** The ticket demonstrates that policy-level settings configured as 'Basic Salary / Working Days' are overridden by a global daily rate configuration. The system applied the global setting instead of the policy-specific calculation method.

**Navigation Hint:** Settings > Leaves > Unpaid Leave option > calculation method > day calculation type

**Meta:** id=JIRA_008 | origin=jira | playwright=NO | blocker=NEEDS_ZENDESK_NAVIGATION

**Evidence (tickets):** TSSD-1753

**UI Indicators:**
- Policy-level calculation method setting
- Global daily rate configuration
- Deduction calculation result
- Configuration precedence behavior

**Selector Hints:**
- Leave policy configuration form
- Calculation method dropdown
- Global settings section
- Deduction amount field
- Policy-level calculation method setting
- Global daily rate configuration

**Preconditions:**
- Prepare test data to reproduce the scenario described by the ticket(s)

**Steps:**
- Log in as a user who can access the feature (admin if required)
- Navigate to the feature area relevant to this claim
- Open the relevant Settings / Configuration section for the feature
- Locate the UI element referenced in the claim (label/field/value/tooltip/etc.)

**Expected:**
- Global configuration takes precedence over policy settings
- Deduction is calculated using global daily rate, not policy method
- UI state matches the claim expectation and does not show contradictory information

### Unpaid leave deductions are automatically calculated

**Test Hypothesis:** How might we verify that when an employee applies for unpaid leave, the system automatically calculates and applies a deduction based on the configured daily rate?

**Evidence Summary:** The ticket shows that when an employee applied for 10 days unpaid leave, the system automatically calculated a deduction. The deduction was calculated using the global daily rate configuration rather than the policy-level settings.

**Meta:** id=JIRA_010 | origin=jira | playwright=NO | blocker=NEEDS_ZENDESK_NAVIGATION

**Evidence (tickets):** TSSD-1753

**UI Indicators:**
- Unpaid leave request submission
- Automatic deduction calculation
- Deduction amount applied to salary
- Daily rate multiplication by leave days

**Selector Hints:**
- Leave request form
- Unpaid leave option
- Deduction amount field
- Salary transaction record
- Unpaid leave request submission
- Automatic deduction calculation

**Preconditions:**
- Prepare test data to reproduce the scenario described by the ticket(s)

**Steps:**
- Log in as a user who can access the feature (admin if required)
- Navigate to the feature area relevant to this claim
- Open the relevant Settings / Configuration section for the feature

**Expected:**
- Deduction is automatically calculated when unpaid leave is applied
- Deduction amount = Daily Rate × Number of Leave Days
- Result is observable (in UI or logs) and consistent with the claim statement

### Days worked calculation deducts unpaid leave from total

**Test Hypothesis:** How might we verify that the days worked calculation subtracts unpaid leave days from the total working days?

**Evidence Summary:** Ticket TSSD-2043 shows the calculation: 107 + 365 + 160 = 632 days - 10 days unpaid leave = 622 days. The platform is expected to deduct unpaid leave from total working days when computing days worked for gratuity.

**Meta:** id=JIRA_013 | origin=jira | playwright=NO | blocker=NEEDS_ZENDESK_NAVIGATION

**Evidence (tickets):** TSSD-2043

**UI Indicators:**
- Days worked field in gratuity calculation
- Unpaid leave records linked to employee
- Gratuity calculation breakdown

**Selector Hints:**
- Days worked display
- Unpaid leave deduction in calculation
- Gratuity calculation details
- Days worked field in gratuity calculation
- Unpaid leave records linked to employee
- Gratuity calculation breakdown

**Preconditions:**
- Prepare test data to reproduce the scenario described by the ticket(s)

**Steps:**
- Log in as a user who can access the feature (admin if required)
- Navigate to the feature area relevant to this claim

**Expected:**
- Days worked = Total working days - Unpaid leave days
- Unpaid leave is automatically deducted from days worked
- Gratuity calculation uses the adjusted days worked value
- Result is observable (in UI or logs) and consistent with the claim statement

### Gratuity calculation applies fixed daily wage formula

**Test Hypothesis:** How might we verify that gratuity calculations use the fixed (Basic / 30) daily wage formula regardless of configuration settings?

**Evidence Summary:** In ticket TSSD-2043, the client's preferred gratuity formula (Basic × 12 / 365) was not supported. Support confirmed: 'daily amount calculation mechanism is not (Basic monthly salary * months in year)/ days in year. we use (Basic monthly salary / 30 days) instead.' This is the current and expected behavior.

**Navigation Hint:** Settings > Payroll > Daily Wage Calculation > Salary Components > salary components to include

**Meta:** id=JIRA_014 | origin=jira | playwright=NO | blocker=NEEDS_ZENDESK_NAVIGATION

**Evidence (tickets):** TSSD-2043

**UI Indicators:**
- Gratuity calculation output
- Daily wage component in gratuity formula
- Configuration settings for daily wage calculation

**Selector Hints:**
- Gratuity amount field
- Daily wage calculation in gratuity breakdown
- End of Service Eligibility settings
- Gratuity calculation output
- Daily wage component in gratuity formula
- Configuration settings for daily wage calculation

**Preconditions:**
- Prepare test data to reproduce the scenario described by the ticket(s)

**Steps:**
- Log in as a user who can access the feature (admin if required)
- Navigate to the feature area relevant to this claim
- Open the relevant Settings / Configuration section for the feature
- Locate the UI element referenced in the claim (label/field/value/tooltip/etc.)

**Expected:**
- Gratuity is calculated using (Basic / 30) as the daily wage component
- Alternative daily wage formulas are not applied to gratuity
- Configuration changes do not alter the gratuity daily wage calculation
- UI state matches the claim expectation and does not show contradictory information

### Prorated salary transactions can be rejected and recalculated

**Test Hypothesis:** When a user changes the salary proration daily wage configuration, can they reject existing prorated salary transactions and resave them to apply the new calculation?

**Evidence Summary:** Zendesk navigation data indicates that Settings > Payroll > Daily Wage Calculation includes an optional step to 'Reject Existing Prorated Transactions' and 'Confirm New Proration Settings'. This suggests the system allows users to invalidate prior prorations and recalculate them with updated daily wage settings.

**Navigation Hint:** Settings > Payroll > Daily Wage Calculation > Calculation Basis

**Meta:** id=JIRA_018 | origin=jira | playwright=NO | blocker=NEEDS_ZENDESK_NAVIGATION

**Evidence (tickets):** TSSD-2321

**UI Indicators:**
- Reject button for prorated transactions
- Resave or recalculate option
- Transaction status change
- Updated calculation results

**Selector Hints:**
- Reject Prorated Transactions button
- Resave button
- Prorated transaction list
- Transaction status field
- Reject button for prorated transactions
- Resave or recalculate option

**Preconditions:**
- Prepare test data to reproduce the scenario described by the ticket(s)

**Steps:**
- Log in as a user who can access the feature (admin if required)
- Navigate to the feature area relevant to this claim
- Open the relevant Settings / Configuration section for the feature
- Perform the action described by the ticket evidence

**Expected:**
- User can view existing prorated salary transactions
- User can reject prorated transactions
- User can resave transactions to recalculate with new daily wage settings
- System recalculates prorated amounts using updated configuration
- Result is observable (in UI or logs) and consistent with the claim statement

### Payroll deduction created when unpaid leave transaction submitted

**Test Hypothesis:** How might we verify that submitting an unpaid leave transaction automatically creates a corresponding payroll deduction?

**Evidence Summary:** The ticket states that employees had unpaid leave approved and transaction submitted, which created payroll deductions. This indicates the system automatically generates deductions when leave transactions are submitted.

**Meta:** id=JIRA_020 | origin=jira | playwright=NO | blocker=NEEDS_ZENDESK_NAVIGATION

**Evidence (tickets):** TSSD-2532

**UI Indicators:**
- Payroll deduction record appears after transaction submission
- Deduction amount reflects daily wage calculation

**Selector Hints:**
- payroll deductions list
- deduction amount
- leave request reference
- Payroll deduction record appears after transaction submission
- Deduction amount reflects daily wage calculation

**Preconditions:**
- Prepare test data to reproduce the scenario described by the ticket(s)

**Steps:**
- Log in as a user who can access the feature (admin if required)
- Navigate to the feature area relevant to this claim
- Perform the action described by the ticket evidence

**Expected:**
- Payroll deduction is created and visible in payroll records
- Result is observable (in UI or logs) and consistent with the claim statement

### Payroll deduction persists after unpaid leave request deletion

**Test Hypothesis:** How might we verify that deleting an unpaid leave request does not automatically remove the associated payroll deduction?

**Evidence Summary:** The ticket explicitly states: 'Delete the unpaid leave request and the unpaid leave deduction still on the payroll deduction.' This confirms that deductions are not automatically removed when leave requests are deleted.

**Meta:** id=JIRA_021 | origin=jira | playwright=NO | blocker=NEEDS_ZENDESK_NAVIGATION

**Evidence (tickets):** TSSD-2532

**UI Indicators:**
- Payroll deduction remains visible after leave request deletion
- Deduction not marked as orphaned or inactive

**Selector Hints:**
- payroll deductions list
- leave request status
- deduction record
- Payroll deduction remains visible after leave request deletion
- Deduction not marked as orphaned or inactive

**Preconditions:**
- Prepare test data to reproduce the scenario described by the ticket(s)

**Steps:**
- Log in as a user who can access the feature (admin if required)
- Navigate to the feature area relevant to this claim

**Expected:**
- Deduction persists in payroll system despite leave request being deleted
- Result is observable (in UI or logs) and consistent with the claim statement

### System creates duplicate deductions when transaction recalculated

**Test Hypothesis:** How might we verify that deleting a leave transaction to recalculate after a daily wage change results in duplicate deductions (old and new)?

**Evidence Summary:** The ticket reports: 'the system created two deduction for the same unpaid leave request. one with the new calculation and one with the old calculation.' This occurs when the daily wage calculation is changed and the transaction is deleted to recalculate.

**Meta:** id=JIRA_022 | origin=jira | playwright=NO | blocker=NEEDS_ZENDESK_NAVIGATION

**Evidence (tickets):** TSSD-2532

**UI Indicators:**
- Two separate deduction records for same leave request
- One deduction reflects old calculation
- One deduction reflects new calculation

**Selector Hints:**
- payroll deductions list
- deduction amount
- calculation date
- leave request ID
- Two separate deduction records for same leave request
- One deduction reflects old calculation

**Preconditions:**
- Prepare test data to reproduce the scenario described by the ticket(s)

**Steps:**
- Log in as a user who can access the feature (admin if required)
- Navigate to the feature area relevant to this claim
- Perform the action described by the ticket evidence

**Expected:**
- Multiple deductions appear for the same unpaid leave request
- Result is observable (in UI or logs) and consistent with the claim statement

### End of Service calculation produces numeric pro-rated amount

**Test Hypothesis:** How might we verify that the End of Service calculation generates a numeric pro-rated amount based on departure date and configured daily wage formula?

**Evidence Summary:** The ticket demonstrates that when an employee departure date is selected (e.g., 10 September), the system calculates and displays a pro-rated amount (expected 9000, but system showed 89,999.9).

**Meta:** id=JIRA_023 | origin=jira | playwright=NO | blocker=NEEDS_ZENDESK_NAVIGATION

**Evidence (tickets):** TSSD-2605

**UI Indicators:**
- Pro-rated amount field displays numeric value
- Amount is calculated based on departure date
- Amount reflects daily wage formula application

**Selector Hints:**
- Pro-rated amount field
- Departure date input
- Calculated amount display
- EOS settlement summary
- Pro-rated amount field displays numeric value
- Amount is calculated based on departure date

**Preconditions:**
- Prepare test data to reproduce the scenario described by the ticket(s)

**Steps:**
- Log in as a user who can access the feature (admin if required)
- Navigate to the feature area relevant to this claim
- Open the relevant Settings / Configuration section for the feature
- Locate the UI element referenced in the claim (label/field/value/tooltip/etc.)

**Expected:**
- Pro-rated amount is displayed as a numeric value
- Amount changes when departure date is modified
- UI state matches the claim expectation and does not show contradictory information

### Payroll daily wage calculator overrides leave policy formula

**Test Hypothesis:** How might we verify that when daily wage calculator is configured in payroll settings, it overrides the formula configured in leave policy for unpaid leave deductions?

**Evidence Summary:** The ticket demonstrates that daily wage formula differs between leave policy and payroll settings. The system comment clarifies: 'Because its has been over written from the Payroll side that's why you see that... the formula configured at the leave policy which is in grey is not valid and it will be overwritten from what is configured on the daily wage calculator.' This confirms payroll settings take precedence.

**Meta:** id=JIRA_025 | origin=jira | playwright=NO | blocker=NEEDS_ZENDESK_NAVIGATION

**Evidence (tickets):** TSSD-2648

**UI Indicators:**
- Leave policy formula configuration
- Payroll daily wage calculator configuration
- Formula mismatch between modules
- Greyed out formula in leave policy

**Selector Hints:**
- Leave policy formula field
- Payroll settings formula field
- Salary component selector in payroll
- Calculation basis selector in payroll
- Leave policy formula configuration
- Payroll daily wage calculator configuration

**Preconditions:**
- Prepare test data to reproduce the scenario described by the ticket(s)

**Steps:**
- Log in as a user who can access the feature (admin if required)
- Navigate to the feature area relevant to this claim
- Open the relevant Settings / Configuration section for the feature
- Locate the UI element referenced in the claim (label/field/value/tooltip/etc.)

**Expected:**
- Payroll-configured formula is applied to unpaid leave deductions
- Leave policy formula is not used when payroll settings are configured
- Greyed-out formula indicates override is active
- UI state matches the claim expectation and does not show contradictory information

### Salary proration fails when departure date is in future

**Test Hypothesis:** How might we verify that when an employee's departure date is set in the future relative to payroll processing, the system displays the full monthly salary instead of a prorated amount in the payroll table?

**Evidence Summary:** The ticket documents that salary proration exhibits date-dependent behavior: 'if the departure day is in the past, the salary is prorated; if the departure day is in the future, the salary is not prorated.' The specific example shows employee Ahmed Khan with offboarding date Nov 28th, where payroll processed on Nov 27th displayed full November salary instead of AED 10,500 prorated amount.

**Meta:** id=JIRA_027 | origin=jira | playwright=NO | blocker=NEEDS_ZENDESK_NAVIGATION

**Evidence (tickets):** TSSD-3058

**UI Indicators:**
- Full salary displayed instead of prorated
- Departure date in future relative to processing date
- Payroll table shows complete monthly amount

**Selector Hints:**
- Salary amount field
- Payroll table row
- Employee departure date
- Full salary displayed instead of prorated
- Departure date in future relative to processing date
- Payroll table shows complete monthly amount

**Preconditions:**
- Prepare test data to reproduce the scenario described by the ticket(s)

**Steps:**
- Log in as a user who can access the feature (admin if required)
- Navigate to the feature area relevant to this claim
- Locate the UI element referenced in the claim (label/field/value/tooltip/etc.)

**Expected:**
- System displays full monthly salary (not prorated) when departure date is in future
- UI state matches the claim expectation and does not show contradictory information

### Custom days setting maintains stable daily wage across months

**Test Hypothesis:** When leave encashment is set to 'custom days', does the daily wage remain consistent regardless of the number of working days in each month?

**Evidence Summary:** Support recommended switching to 'custom days' setting to resolve the inconsistent cumulative accrual issue, implying that custom days provides a stable daily wage calculation.

**Meta:** id=JIRA_028 | origin=jira | playwright=NO | blocker=NEEDS_ZENDESK_NAVIGATION

**Evidence (tickets):** TSSD-3648

**UI Indicators:**
- Consistent daily wage across months
- Stable cumulative accrual
- No monthly variation in daily rate

**Selector Hints:**
- Custom days option
- Daily wage amount
- Cumulative accrual total
- Consistent daily wage across months
- Stable cumulative accrual
- No monthly variation in daily rate

**Steps:**
- Log in as a user who can access the feature (admin if required)
- Navigate to the feature area relevant to this claim
- Locate the UI element referenced in the claim (label/field/value/tooltip/etc.)

**Expected:**
- Daily wage does not change between months
- Cumulative accrual increases predictably
- Month-to-month accrual differences are consistent
- UI state matches the claim expectation and does not show contradictory information

### Daily wage recalculates monthly when working days method is selected

**Test Hypothesis:** When leave encashment is set to 'working days', does the daily wage rate change based on the number of working days in each month?

**Evidence Summary:** The ticket demonstrates that with 'working days' setting, February's daily wage differed from January's due to February having 20 working days, causing the cumulative accrual to be AED 34,312 instead of the expected AED 31,610.68.

**Meta:** id=JIRA_029 | origin=jira | playwright=NO | blocker=NEEDS_ZENDESK_NAVIGATION

**Evidence (tickets):** TSSD-3648

**UI Indicators:**
- Daily wage varies by month
- Working day count affects calculation
- Monthly accrual amounts differ

**Selector Hints:**
- Daily wage amount
- Working days count
- Monthly accrual report
- Daily wage varies by month
- Working day count affects calculation
- Monthly accrual amounts differ

**Preconditions:**
- Prepare test data to reproduce the scenario described by the ticket(s)

**Steps:**
- Log in as a user who can access the feature (admin if required)
- Navigate to the feature area relevant to this claim

**Expected:**
- Daily wage changes when working days per month changes
- Accrual amounts reflect the monthly working day variation
- Leave Salary Accrual Report shows different daily wages across months
- Result is observable (in UI or logs) and consistent with the claim statement

### Gratuity amount is underpaid when service spans leap years

**Test Hypothesis:** How might we verify that the final gratuity amount is lower than expected when the service period includes a leap year that is not properly accounted for?

**Evidence Summary:** The ticket shows that due to the 365-day assumption for 2024, the final gratuity calculation resulted in AED 10,476.98 instead of the correct AED 10,494.24 (verified by MOHRE). The difference of AED 17.26 is directly attributable to the missing leap year day in the service period calculation.

**Meta:** id=JIRA_030 | origin=jira | playwright=NO | blocker=NEEDS_ZENDESK_NAVIGATION

**Evidence (tickets):** TSSD-4179

**UI Indicators:**
- Final gratuity amount field
- Calculation result display
- Amount discrepancy between system and MOHRE verification

**Selector Hints:**
- Gratuity amount output
- Final settlement amount
- Calculation summary
- Final gratuity amount field
- Calculation result display
- Amount discrepancy between system and MOHRE verification

**Preconditions:**
- Prepare test data to reproduce the scenario described by the ticket(s)

**Steps:**
- Log in as a user who can access the feature (admin if required)
- Navigate to the feature area relevant to this claim
- Locate the UI element referenced in the claim (label/field/value/tooltip/etc.)

**Expected:**
- System displays AED 10,476.98 (incorrect)
- Expected amount per MOHRE is AED 10,494.24
- Underpayment of AED 17.26 occurs
- UI state matches the claim expectation and does not show contradictory information

### Gratuity calculator uses 365 days for all years

**Test Hypothesis:** How might we verify that the gratuity calculator applies a fixed 365-day year length regardless of whether the year is a leap year?

**Evidence Summary:** The ticket documents that for employee Nabil Kachlan's EOS calculation spanning 2024 (a leap year), the system calculated 607 total service days instead of 608. The system used 365 days for 2024 instead of 366 days, indicating the calculator applies a fixed 365-day assumption to all years without leap year adjustment.

**Meta:** id=JIRA_031 | origin=jira | playwright=NO | blocker=NEEDS_ZENDESK_NAVIGATION

**Evidence (tickets):** TSSD-4179

**UI Indicators:**
- Total service days calculation
- Year-to-day conversion logic
- Leap year handling in date range calculations

**Selector Hints:**
- Service days field
- Years of service field
- Calculation result display
- Total service days calculation
- Year-to-day conversion logic
- Leap year handling in date range calculations

**Steps:**
- Log in as a user who can access the feature (admin if required)
- Navigate to the feature area relevant to this claim
- Locate the UI element referenced in the claim (label/field/value/tooltip/etc.)

**Expected:**
- System calculates 365 days for 2024 (incorrect for leap year)
- Total service days = 607 instead of 608
- Years of service = 1.6630 instead of 1.6657
- UI state matches the claim expectation and does not show contradictory information

### Daily wage setting must be enabled for work week-based proration

**Test Hypothesis:** When the daily wage setting is enabled, the system uses the employee's work week configuration to calculate proration instead of calendar days.

**Evidence Summary:** Ticket TSSD-4292 indicates that daily wage setting controls whether proration is calculated based on work week configuration. The customer had the setting enabled and the system was correctly using work week-based calculation.

**Navigation Hint:** Settings > Payroll > Daily Wage Calculation > Calculation Basis

**Meta:** id=JIRA_032 | origin=jira | playwright=NO | blocker=NEEDS_ZENDESK_NAVIGATION

**Evidence (tickets):** TSSD-4292

**UI Indicators:**
- Daily wage setting toggle/checkbox
- Proration calculation method
- Work week-based vs calendar-based calculation

**Selector Hints:**
- Daily wage setting checkbox
- Calculation basis selector
- Proration method indicator
- Daily wage setting toggle/checkbox
- Proration calculation method
- Work week-based vs calendar-based calculation

**Preconditions:**
- Prepare test data to reproduce the scenario described by the ticket(s)

**Steps:**
- Log in as a user who can access the feature (admin if required)
- Navigate to the feature area relevant to this claim
- Open the relevant Settings / Configuration section for the feature
- Locate the UI element referenced in the claim (label/field/value/tooltip/etc.)

**Expected:**
- When daily wage setting is enabled, proration uses work week configuration
- When disabled, proration may use calendar days
- Setting is accessible in payroll configuration
- UI state matches the claim expectation and does not show contradictory information

### Proration calculation respects work week configuration

**Test Hypothesis:** When an employee is assigned to a work week with all 7 days marked as working days, the system counts all 31 days of the month as working days in proration calculations.

**Evidence Summary:** Ticket TSSD-4292 confirmed that salary proration is calculated based on the employee's assigned work week configuration. For the NVK Operations work week (all days working, no weekends), the system correctly counted 31 working days for the full month.

**Navigation Hint:** Settings > Payroll > Daily Wage Calculation > Calculation Basis

**Meta:** id=JIRA_034 | origin=jira | playwright=NO | blocker=NEEDS_ZENDESK_NAVIGATION

**Evidence (tickets):** TSSD-4292

**UI Indicators:**
- Proration calculation result
- Working days count in salary calculation
- Work week assignment for employee

**Selector Hints:**
- Working days field in proration display
- Work week configuration section
- Employee work week assignment
- Proration calculation result
- Working days count in salary calculation
- Work week assignment for employee

**Preconditions:**
- Prepare test data to reproduce the scenario described by the ticket(s)

**Steps:**
- Log in as a user who can access the feature (admin if required)
- Navigate to the feature area relevant to this claim
- Open the relevant Settings / Configuration section for the feature

**Expected:**
- Proration uses working days from assigned work week
- All days marked as working in work week are included in count
- No automatic weekend exclusion if not configured in work week
- Result is observable (in UI or logs) and consistent with the claim statement

### Daily wage calculation applies configured divisor

**Test Hypothesis:** How might we verify that the system calculates daily wage using the divisor configured in the unpaid leave policy (e.g., 30.42 custom days) rather than calendar days?

**Evidence Summary:** TSSD-4368 support response explicitly states: 'To calculate the unpaid deduction, the system follows the daily wage configured in the Unpaid leave policy setting (Divide by custom days = 30.42 not calendar days).' The calculation shown is: daily wage = 4300 / 30.42 = 141.35 (approx).

**Meta:** id=JIRA_035 | origin=jira | playwright=NO | blocker=NEEDS_ZENDESK_NAVIGATION

**Evidence (tickets):** TSSD-4368

**UI Indicators:**
- Daily wage calculation formula applied
- Configured divisor value used in calculation
- Deduction amount reflects divisor choice

**Selector Hints:**
- Payroll deduction amount
- Daily wage calculation result
- Leave deduction line item
- Daily wage calculation formula applied
- Configured divisor value used in calculation
- Deduction amount reflects divisor choice

**Preconditions:**
- Prepare test data to reproduce the scenario described by the ticket(s)

**Steps:**
- Log in as a user who can access the feature (admin if required)
- Navigate to the feature area relevant to this claim
- Open the relevant Settings / Configuration section for the feature

**Expected:**
- System calculates daily wage as: monthly salary / configured divisor
- Deduction amount equals: daily wage × number of leave days in month
- Deduction reflects the configured divisor (custom days, not calendar days)
- Result is observable (in UI or logs) and consistent with the claim statement

### Daily wage value is locked at time of initial calculation

**Test Hypothesis:** How might we verify that once a daily wage is calculated for a payroll period, it does not automatically update when public holidays are added later?

**Evidence Summary:** The ticket reveals that the daily wage was calculated as 3,700/26 = 148 AED per day. When a second public holiday was added later, the working days count decreased to 25, but the daily wage remained at 148 AED (based on 26 days), resulting in incorrect deduction: 148 × 25 = 3,700 AED instead of 3,700/25 × 25 = 3,700 AED. The support team confirmed: 'Unfortunately we cant change the main deduction now.'

**Meta:** id=JIRA_038 | origin=jira | playwright=NO | blocker=NEEDS_ZENDESK_NAVIGATION

**Evidence (tickets):** TSSD-4464

**UI Indicators:**
- Daily wage value in payroll record
- Deduction amount calculation
- No automatic recalculation when configuration changes

**Selector Hints:**
- Daily wage field
- Deduction amount field
- Payroll cycle status
- Daily wage value in payroll record
- Deduction amount calculation
- No automatic recalculation when configuration changes

**Preconditions:**
- Prepare test data to reproduce the scenario described by the ticket(s)

**Steps:**
- Log in as a user who can access the feature (admin if required)
- Navigate to the feature area relevant to this claim
- Perform the action described by the ticket evidence

**Expected:**
- Daily wage value does not change after initial calculation
- Deduction amount remains based on original daily wage
- Public holiday additions do not trigger recalculation
- Result is observable (in UI or logs) and consistent with the claim statement

### Public holiday configuration affects working days calculation

**Test Hypothesis:** How might we verify that adding a public holiday to the system reduces the working days count used in daily wage calculations?

**Evidence Summary:** The ticket documents that when public holidays were added (July 23 Revolution Day on 24 Jul, added 22 July; June 30 Revolution on 3 Jul, added 25 June), the working days count changed from 26 to 25 days. The system correctly reduced working days when public holidays were configured.

**Meta:** id=JIRA_039 | origin=jira | playwright=NO | blocker=NEEDS_ZENDESK_NAVIGATION

**Evidence (tickets):** TSSD-4464

**UI Indicators:**
- Public holiday configuration interface
- Working days count updates when public holiday added
- Daily wage recalculation triggered by public holiday addition

**Selector Hints:**
- Public Holiday configuration
- Working days counter
- Public holiday date and name fields
- Public holiday configuration interface
- Working days count updates when public holiday added
- Daily wage recalculation triggered by public holiday addition

**Preconditions:**
- Prepare test data to reproduce the scenario described by the ticket(s)

**Steps:**
- Log in as a user who can access the feature (admin if required)
- Navigate to the feature area relevant to this claim
- Open the relevant Settings / Configuration section for the feature
- Perform the action described by the ticket evidence

**Expected:**
- Public holiday addition reduces working days count
- System recognizes public holiday in calculation
- Working days = Total Days - Weekends - Public Holidays
- Result is observable (in UI or logs) and consistent with the claim statement

### Leave policy configuration determines daily wage divisor

**Test Hypothesis:** Does the daily wage divisor used in leave salary calculations match the divisor configured in the leave policy, regardless of actual calendar days?

**Evidence Summary:** The system calculates leave salary based on the daily rate configuration in the leave policy. The divisor is fixed at policy configuration time and does not adapt to actual calendar month lengths. In the reported case, a policy configured with 30-day divisor was applied to October (31 days), resulting in the expected calculation discrepancy.

**Meta:** id=JIRA_041 | origin=jira | playwright=NO | blocker=NEEDS_ZENDESK_NAVIGATION

**Evidence (tickets):** TSSD-4731

**UI Indicators:**
- Leave policy configuration page
- Daily rate divisor setting in policy
- Leave salary calculation result

**Selector Hints:**
- Leave policy settings
- Divisor or calculation method field
- Leave salary amount display
- Leave policy configuration page
- Daily rate divisor setting in policy
- Leave salary calculation result

**Preconditions:**
- Prepare test data to reproduce the scenario described by the ticket(s)

**Steps:**
- Log in as a user who can access the feature (admin if required)
- Navigate to the feature area relevant to this claim
- Open the relevant Settings / Configuration section for the feature

**Expected:**
- Leave salary is calculated using the policy-configured divisor
- System does not auto-adjust divisor based on actual calendar days
- Calculated leave salary reflects the fixed policy divisor
- Result is observable (in UI or logs) and consistent with the claim statement

### Monthly accrual policy grants leave only at month-end

**Test Hypothesis:** Under conditional accrual policy, are leave days granted daily throughout the month rather than at month-end?

**Evidence Summary:** Ticket confirms that monthly accrual policies grant leave days only at the end of the month. Employee departing mid-month does not accrue leave for the incomplete month. This is documented as standard system behaviour across all modules.

**Meta:** id=JIRA_042 | origin=jira | playwright=NO | blocker=NEEDS_ZENDESK_NAVIGATION

**Evidence (tickets):** TSSD-4742

**UI Indicators:**
- Leave accrual timing
- Month completion requirement
- Incomplete month exclusion
- Conditional accrual option
- Daily leave grant
- Partial month accrual

**Selector Hints:**
- monthly accrual
- leave policy
- accrual timing
- conditional accrual policy
- daily accrual
- leave policy type

**Preconditions:**
- Prepare test data to reproduce the scenario described by the ticket(s)

**Steps:**
- Log in as a user who can access the feature (admin if required)
- Navigate to the feature area relevant to this claim

**Expected:**
- Leave days are accrued only after month completion; incomplete months do not accrue
- Leave days are accrued daily; partial months accrue proportionally
- Result is observable (in UI or logs) and consistent with the claim statement

## System Boundary

### Daily wage divisor is fixed at 30 days

**Test Hypothesis:** How might we verify that the daily wage calculation uses a fixed divisor of 30 days and cannot be modified via configuration?

**Evidence Summary:** Ticket TSSD-2043 confirms that the platform calculates daily wage as (Basic Salary / 30) using a hardcoded divisor. Support stated: 'the 30 days is a fixed value, meaning it cannot be modified by daily wage calculation settings in configurations page.'

**Navigation Hint:** Settings > Payroll > Daily Wage Calculation > Calculation Basis

**Meta:** id=JIRA_012 | origin=jira | playwright=NO | blocker=NEEDS_ZENDESK_NAVIGATION

**Evidence (tickets):** TSSD-2043

**UI Indicators:**
- Daily wage calculation formula in gratuity computation
- Configuration page for daily wage calculation settings
- Gratuity calculation output

**Selector Hints:**
- Daily Wage Calculation settings
- Calculation Basis configuration
- Gratuity amount display
- Daily wage calculation formula in gratuity computation
- Configuration page for daily wage calculation settings
- Gratuity calculation output

**Preconditions:**
- Prepare test data to reproduce the scenario described by the ticket(s)

**Steps:**
- Log in as a user who can access the feature (admin if required)
- Navigate to the feature area relevant to this claim
- Open the relevant Settings / Configuration section for the feature

**Expected:**
- Daily wage is always calculated as Basic Salary / 30
- Configuration changes do not affect the daily wage divisor
- Alternative formulas like (Basic × 12 / 365) are not supported
- Result is observable (in UI or logs) and consistent with the claim statement

### Leave salary and salary proration use independent daily wage configurations

**Test Hypothesis:** When leave salary policy is configured with divisor X and salary proration is configured with divisor Y (where X ≠ Y), does the system apply the leave salary divisor to leave deductions and the proration divisor to salary proration calculations?

**Evidence Summary:** TSSD-2321 demonstrates that leave salary policy (30-day divisor) and salary proration (30.42-day divisor) operate independently. When calculating leave deduction, the system used the leave salary policy's 30-day divisor, not the salary proration's 30.42-day divisor. This confirms the two configurations are not linked.

**Meta:** id=JIRA_017 | origin=jira | playwright=NO | blocker=NEEDS_ZENDESK_NAVIGATION

**Evidence (tickets):** TSSD-2321

**UI Indicators:**
- Leave salary policy configuration
- Salary proration configuration
- Separate divisor settings
- Independent calculation results

**Selector Hints:**
- Leave salary policy day divisor field
- Salary proration day divisor field
- Leave deduction amount
- Prorated salary amount
- Leave salary policy configuration
- Salary proration configuration

**Preconditions:**
- Prepare test data to reproduce the scenario described by the ticket(s)

**Steps:**
- Log in as a user who can access the feature (admin if required)
- Navigate to the feature area relevant to this claim
- Open the relevant Settings / Configuration section for the feature

**Expected:**
- Leave salary deductions use the leave salary policy divisor
- Salary proration uses the salary proration divisor
- Changing one configuration does not affect the other
- Calculations reflect the respective divisors independently
- Result is observable (in UI or logs) and consistent with the claim statement

### Employee must be assigned to work week for proration to calculate

**Test Hypothesis:** Proration calculations only function correctly when an employee is explicitly assigned to a work week policy that defines working days.

**Evidence Summary:** Ticket TSSD-4292 demonstrates that the employee (Melanie Bongalos) was assigned to NVK Operations work week, which determined the working days used in proration. Without this assignment, proration behavior would differ.

**Meta:** id=JIRA_033 | origin=jira | playwright=NO | blocker=NEEDS_ZENDESK_NAVIGATION

**Evidence (tickets):** TSSD-4292

**UI Indicators:**
- Employee work week assignment field
- Work week policy selection
- Proration calculation result

**Selector Hints:**
- Work week assignment dropdown
- Employee profile work week field
- Work week policy selector
- Employee work week assignment field
- Work week policy selection
- Proration calculation result

**Preconditions:**
- Prepare test data to reproduce the scenario described by the ticket(s)

**Steps:**
- Log in as a user who can access the feature (admin if required)
- Navigate to the feature area relevant to this claim

**Expected:**
- Employee has work week assignment
- Work week policy defines working days
- Proration uses assigned work week's working days
- Result is observable (in UI or logs) and consistent with the claim statement

### Unpaid leave deduction is not capped at monthly salary

**Test Hypothesis:** How might we verify that the system does not automatically limit unpaid leave deductions to the employee's monthly salary amount?

**Evidence Summary:** TSSD-4368 documents an employee with a 4,300 AED monthly salary receiving a 4,381.99 AED unpaid leave deduction for July. The support response confirms this is correct based on the configured divisor: 141.35 × 31 days = 4,381.99. The system does not cap the deduction at the monthly salary; instead, the deduction exceeds it by 81.99 AED.

**Meta:** id=JIRA_036 | origin=jira | playwright=NO | blocker=NEEDS_ZENDESK_NAVIGATION

**Evidence (tickets):** TSSD-4368

**UI Indicators:**
- Deduction amount exceeds monthly salary
- No automatic capping or limiting of deduction
- Manual adjustment required to reconcile

**Selector Hints:**
- Payroll deduction amount
- Monthly salary amount
- Deduction vs salary comparison
- Deduction amount exceeds monthly salary
- No automatic capping or limiting of deduction
- Manual adjustment required to reconcile

**Preconditions:**
- Prepare test data to reproduce the scenario described by the ticket(s)

**Steps:**
- Log in as a user who can access the feature (admin if required)
- Navigate to the feature area relevant to this claim

**Expected:**
- System calculates deduction without capping at monthly salary
- Deduction can exceed the employee's monthly salary amount
- No automatic reconciliation when deduction > monthly salary
- Result is observable (in UI or logs) and consistent with the claim statement

### Country of residence determines applicable public holidays

**Test Hypothesis:** How might we verify that the system uses an employee's country of residence to determine which public holidays apply to their working days calculation?

**Evidence Summary:** The ticket states: 'This employee have Egypt as country of residence so the below two days are PH.' The system correctly identified Egypt-specific public holidays (July 23 Revolution Day and June 30 Revolution) and applied them to the working days calculation for this employee.

**Meta:** id=JIRA_037 | origin=jira | playwright=NO | blocker=NEEDS_ZENDESK_NAVIGATION

**Evidence (tickets):** TSSD-4464

**UI Indicators:**
- Employee country of residence field
- Public holiday calendar by country
- Working days calculation uses country-specific holidays

**Selector Hints:**
- Employee profile country field
- Public holiday configuration by country
- Working days calculation logic
- Employee country of residence field
- Public holiday calendar by country
- Working days calculation uses country-specific holidays

**Preconditions:**
- Prepare test data to reproduce the scenario described by the ticket(s)

**Steps:**
- Log in as a user who can access the feature (admin if required)
- Navigate to the feature area relevant to this claim

**Expected:**
- System recognizes employee country of residence
- Correct public holidays applied based on country
- Working days calculation uses country-specific holidays
- Result is observable (in UI or logs) and consistent with the claim statement

