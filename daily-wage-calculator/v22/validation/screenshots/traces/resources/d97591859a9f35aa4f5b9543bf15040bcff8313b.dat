import{r as u,b7 as i}from"./assets/index-rhBbSAok.js";const n=new WeakMap,d=new Set;function g(){return u.useCallback(function(a){const r=n.get(a)??new Set;return n.set(a,r),[...d].forEach(e=>e()),r.forEach(e=>e(0)),i.throttle(function(t){[...r].forEach(o=>o(t.total?Math.round(t.loaded/t.total*100):void 0))},200,{leading:!0})},[])}function h(s){const[a,r]=u.useState(0);return u.useEffect(()=>{if(s===void 0)return;let e,t=!1;function o(){if(!t){if(n.has(s))r(0);else{r(void 0);return}e=n.get(s),e&&(e.add(l),t=!0)}}function l(c){r(c)}return d.add(o),o(),()=>{e==null||e.delete(l),d.delete(o)}},[s]),a}export{h as a,g as u};
