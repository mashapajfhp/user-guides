import{H as B,a as D,W as $,c2 as fe,bN as Z,r as x,j as e,du as R,c7 as ee,cY as Ee,df as j,T as g,bp as pe,Z as Re,d as L,b4 as Ve,b8 as ze,a9 as Be,a8 as Y,S as ue,cf as We,aj as he,ak as $e,nV as Ge,a0 as z,bn as W,ct as ge,nW as He,nX as _e,a1 as qe,F as ye,G as ve,O as Ue,b3 as Ye,a6 as O,af as Qe,b9 as ae,ah as xe,fD as Je,fM as Ke,fP as Xe,cn as Ze,U as ea,V as aa,a4 as ta,h$ as sa,aK as ia,aa as oa,b0 as na,kH as la,bb as Q,bS as ra,a7 as ca,fg as da,nn as ma}from"./assets/index-rhBbSAok.js";import{T as M,a as fa,u as pa}from"./CompanyTimeOffConfig-DiITXe4E__cache.js";import{L as H,u as ua,a as ha}from"./CompanyConfiguration-AgFVkg72__cache.js";import{C as te}from"./ConfigurationAccordionTitle-qLBxSX7i__cache.js";import{C as Me}from"./ConfigurationAccordion-sH02smW7__cache.js";import{R as Ce}from"./RadioGroupInput-1jbbS5zi__cache.js";import{s as ga}from"./index-Uo5f76c2__cache.js";import{a as we,g as ya,T as k,b as be,c as va}from"./getLeaveCycleStartDate-1iNtwL6___cache.js";import{F as V}from"./CheckboxInput.form-5LK-WYE6__cache.js";import{F as xa}from"./DateInput.form-o3F5rU0o__cache.js";import{T as Ma}from"./TextField-tMfA-iyC__cache.js";import{u as se}from"./useFormatMessageAsRequired-AILS07Za__cache.js";import{c as Ca}from"./createUseValidatorWithExternalProps-jVkwmf7___cache.js";import{F as le}from"./FormatDate-f2AQWiWt__cache.js";import{C as wa}from"./Card-0cclI5zr__cache.js";import{a as je}from"./timeOff-S3szKU9S__cache.js";import{G as ba}from"./GettingCoffeeIllustration-Vr5kMf63__cache.js";import{S as De,a as Se}from"./SimpleTabs-lEY1Ndzp__cache.js";import{g as ja}from"./getContentTextFromHtmlString-LE-Oavew__cache.js";import{a as Da}from"./TimeOffPolicyDetailAccordions-6EO-tyD0__cache.js";import{u as Sa}from"./useCompanyCountry-au303yAF__cache.js";import{M as Ta}from"./Modal-qYVDkutb__cache.js";import{g as Fa}from"./getPayRatePolicyLabel-3nCFHiMQ__cache.js";import{I as J}from"./ButtonWithTooltip-ZRvEDUuf__cache.js";import{C as Ia}from"./CheckboxInput-9e4-y5wq__cache.js";import{S as Aa}from"./SearchInput-CIzwHG7W__cache.js";import{P as Pa}from"./PaginatedTable-URXGw4_u__cache.js";import{c as Oa}from"./useDebouncedState-a416yYCf__cache.js";import{P as Na}from"./Pencil1Icon-g4OBhpYF__cache.js";import{V as ka}from"./View1Icon-IfE2VW6e__cache.js";import{A as La}from"./ActionsCellLayout-QoNJZX4W__cache.js";import{P as Ea}from"./PageHeading-nXhD4Nsd__cache.js";import{P as Ra}from"./PageContent-363tIqWz__cache.js";import"./RadioGroup-U1J7qwen__cache.js";import"./FormGroup-CG9DRFZI__cache.js";import"./DateInput-2ZXbKykN__cache.js";import"./useDesktopPicker-ru3jT7CX__cache.js";import"./index-0cpOJbKN__cache.js";import"./PickersLayout-LyIBs7iN__cache.js";import"./index-RtT5owvQ__cache.js";import"./InputAdornment-hva1Jw6n__cache.js";import"./DateTextFieldWrapper-9wpNeDjr__cache.js";import"./TextField-TqOYmhqJ__cache.js";import"./Select-2iMMU_Ha__cache.js";import"./convertToDate-i5APjuD0__cache.js";import"./ArrowRight1Icon-_5Cuu06x__cache.js";import"./Calendar3Icon-JcQ9NBJy__cache.js";import"./dateViewRenderers-rA8oPqeF__cache.js";import"./DesktopDatePicker-nh7PrzvA__cache.js";import"./shared-n9IQD7JL__cache.js";import"./TabScrollButton-DqUI29NG__cache.js";import"./tabsClasses-sD9tp4uk__cache.js";import"./DaysType-rxTPbDQH__cache.js";import"./SearchableEmployeeDialog-d9H_SAfT__cache.js";import"./useLocaleBasedIconRotation-KalKdOmk__cache.js";import"./ArrowLeftIcon-Sfxicbe3__cache.js";import"./Pagination-dJEsRaL9__cache.js";import"./Select-rkw5r0hr__cache.js";import"./Breadcrumbs-vaEJs3BD__cache.js";import"./Breadcrumbs-iuU7DkbN__cache.js";import"./PageBody-DUqeS0DQ__cache.js";const Va=B()(a=>({infoIcon:{color:a.palette.text.secondary},tooltipContainer:{lineHeight:0}})),S=L({title:{id:"hr.time-off.leave-calendar",defaultMessage:"Leave calendar"},subtitle:{id:"hr.time-off.leave-calendar-description",defaultMessage:"Set the visibility of leaves requested by others on employeeâ€™s leave calendar"},allowEmployees:{id:"hr.time-off.allow-employees-to-see-leaves-requested-by-others",defaultMessage:"Allow employees to see leaves requested by someone else"},teamCalendarTooltip:{id:"hr.time-off.team-calendar-tooltip",defaultMessage:"With leave calendar sharing, employees can see leaves requested by someone else and enjoy better leave planning"},allEmployees:{id:"enum.leave-calendar-visibility-type.all-employees",defaultMessage:"All employees"},allEmployeesCanView:{id:"enum.leave-calendar-visibility-type.all-employees.description",defaultMessage:"Employees can see everyone's leaves"},department:{id:"hr.time-off.same-department",defaultMessage:"Same department"},sameDepartmentCanView:{id:"enum.leave-calendar-visibility-type.department.description",defaultMessage:"Employees in the same Department can see each other's leaves"},office:{id:"hr.time-off.same-office",defaultMessage:"Same office"},sameOfficeCanView:{id:"enum.leave-calendar-visibility-type.office.description",defaultMessage:"Employees in the same Office can see each other's leaves"},reportingManager:{id:"hr.time-off.same-manager",defaultMessage:"Same line manager"},sameReportingManagerCanView:{id:"enum.leave-calendar-visibility-type.reporting-manager.description",defaultMessage:"Employees with the same Reporting Manager can see each other's leaves"},changesSaved:{id:"hr.settings.timeoff.save-company-team-calendar-configuration",defaultMessage:"Changes in team leaves calendar updated successfully"}}),za=()=>{const a=D(),i=$(),t=fe(),{handleRequestExceptionAlert:s}=Z(),{classes:o}=Va(),[n,m]=x.useState(H.ReportingManager),[f,c]=x.useState(!1),[r,l]=x.useState(),{data:d,isSuccess:u,isFetching:b}=ua({companyId:i});x.useEffect(()=>{u&&(d.leaveCalendarVisibleGroup&&m(d.leaveCalendarVisibleGroup),c(d.allowEmployeeAccessCalendar),l(d))},[d,u]);const{mutateAsync:h,isPending:T}=ha(),w=[{label:e.jsx(R,{heading:a.formatMessage(S.reportingManager),subtext:a.formatMessage(S.sameReportingManagerCanView)}),value:H.ReportingManager},{label:e.jsx(R,{heading:a.formatMessage(S.department),subtext:a.formatMessage(S.sameDepartmentCanView)}),value:H.Department},{label:e.jsx(R,{heading:a.formatMessage(S.office),subtext:a.formatMessage(S.sameOfficeCanView)}),value:H.Office},{label:e.jsx(R,{heading:a.formatMessage(S.allEmployees),subtext:a.formatMessage(S.allEmployeesCanView)}),value:H.AllEmployees}],A=async y=>{try{const F=await h({urlParams:{companyId:i},data:y});F.leaveCalendarVisibleGroup&&m(F.leaveCalendarVisibleGroup),c(F.allowEmployeeAccessCalendar),l(F),t.success({message:a.formatMessage(S.changesSaved)})}catch(F){s(F)}},N=async y=>{r&&await A({allowAddProjects:r.allowAddProjects,allowEmployeeAccessCalendar:y,leaveCalendarVisibleGroup:r.leaveCalendarVisibleGroup})},E=async y=>{r&&await A({allowAddProjects:r.allowAddProjects,allowEmployeeAccessCalendar:r.allowEmployeeAccessCalendar,leaveCalendarVisibleGroup:y})};return e.jsx(Me,{title:e.jsx(te,{title:a.formatMessage(S.title),subtitle:a.formatMessage(S.subtitle),titleProps:{textTransform:"capitalize"}}),children:e.jsxs(ee,{loading:!!T||!!b,children:[e.jsx(Ee,{onChange:N,checked:f,text:e.jsxs(j,{direction:"row",alignItems:"center",gap:1,children:[e.jsx(g,{variant:"subtitle1",children:a.formatMessage(S.allowEmployees)}),e.jsx("span",{className:o.tooltipContainer,children:e.jsx(pe,{title:a.formatMessage(S.teamCalendarTooltip),children:e.jsx(Re,{className:o.infoIcon,fontSize:"xx-small"})})})]})}),e.jsx(j,{ml:6,children:e.jsx(Ce,{onChange:y=>E(y),disabled:!f,value:n,options:w})})]})})};M.Custom,M.Default,M.HireDate;const Ba=(a,i)=>{switch(i){case M.Custom:return a.formatMessage({id:"enum.leave-cycle-type.custom",defaultMessage:"Custom"});case M.Default:return a.formatMessage({id:"enum.leave-cycle-type.default",defaultMessage:"Calendar Year"});case M.HireDate:return a.formatMessage({id:"enum.leave-cycle-type.hire-date",defaultMessage:"Individual"})}},Te=Ve(Ba),ie=a=>{const i=a&&a.includes("/");let t=a;if(i){const o=a.split("/"),n=o.length>0?o[0]:void 0,m=o.length>0?o[1]:void 0;t=`${ze(ga())}-${m}-${n}`}return t?Be(t):void 0},oe=B()(a=>({checkBoxes:{margin:0},subtitles:{marginBottom:a.spacing(2)}})),v=L({startsJanuaryOne:{id:"enum.leave-cycle-type.default.description",defaultMessage:"The company's leave cycle starts on January 1st each year"},startsOnWorkAnniversary:{id:"hr.app.page.configuration.time-off.leave-cycle.hire-date-text",defaultMessage:"Each employee's leave cycle will start on their work anniversary."},understand:{id:"hr.timeoff.custom-leave-cycle.understand",defaultMessage:"I understand that:"},resetOnJanuaryOne:{id:"hr.timeoff.default-leave-cycle.user-reset-date",defaultMessage:"Every user's leave balance will reset on January 1st each year"},willNotChange:{id:"hr.timeoff.default-leave-cycle.rule-change-date",defaultMessage:"I will not be able to change this setting later"},chooseDates:{id:"hr.timeoff.custom-leave-cycle.start-date",defaultMessage:"Choose a date to reset your company's leave balances each year. This date is the same for every user."},resetOnSelectedDate:{id:"hr.timeoff.custom-leave-cycle.rule-reset-date",defaultMessage:"Every user's leave balance will reset on this date each year"},startDate:{id:"common.start-date",defaultMessage:"Start date"},endDate:{id:"common.end-date",defaultMessage:"End date"},willNotChangeEmployeeStartDate:{id:"hr.timeoff.hire-date-leave-cycle.rule-change-hire-date",defaultMessage:"I will not be able to change any employee's start date later"},employeesWillNotRequest:{id:"hr.timeoff.hire-date-leave-cycle.rule-without-start-date",defaultMessage:"Employees without a start date will not be able to request leave"},title:{id:"hr.timeoff.select.cycle",defaultMessage:"Select {cycleName} leave cycle"},conditionValidation:{id:"validation.leave-cycle.confirm",defaultMessage:"Please confirm that you understand the conditions"},cancel:{id:"common.action.cancel",defaultMessage:"Cancel"},save:{id:"common.action.save",defaultMessage:"Save"},invalidDate:{id:"validation.error.invalid-day-month-date-with-format",defaultMessage:"Invalid date. Please use DD/MM format"}}),_=a=>a.formatMessage(v.conditionValidation),Wa=Ca(({selectedCycleType:a})=>({willNotChange:[W({errorMessageGetter:_})],employeesWillNotRequest:[W({errorMessageGetter:_,isEnabled:()=>a===M.HireDate})],willNotChangeEmployeeStartDate:[W({errorMessageGetter:_,isEnabled:()=>a===M.HireDate})],resetOnJanuaryOne:[W({errorMessageGetter:_,isEnabled:()=>a===M.Default})],resetOnSelectedDate:[W({errorMessageGetter:_,isEnabled:()=>a===M.Custom})],startDate:[W({isEnabled:()=>a===M.Custom}),({intl:i,value:t})=>{const s=typeof t=="string"?ie(t):void 0;if(t&&s&&!ge(s))return i.formatMessage(v.invalidDate)}]})),$a=({onClose:a,open:i,onConfirm:t,selectedCycleType:s,isLoading:o})=>{const n=D(),m=Wa({selectedCycleType:s}),f=Y(Te),c=async r=>{const l=ie(r==null?void 0:r.startDate);if(l&&ge(l)){const d={leaveCycleType:s,startingDay:He(l),startingMonth:_e(l)+1,isConfigurationFileUploaded:!1};await t(d)}};return e.jsx(ue,{open:i,title:n.formatMessage(v.title,{cycleName:f(s)}),confirmButton:{show:!1},cancelButton:{show:!1},content:e.jsx(We,{initialValues:{startDate:he(Ge(new Date),$e.DATE_ISO)},validate:m,onSubmit:c,render:({handleSubmit:r,values:l})=>e.jsxs(ee,{loading:!!o,children:[s===M.Custom&&e.jsx(Ha,{values:l}),s===M.Default&&e.jsx(Ga,{}),s===M.HireDate&&e.jsx(_a,{}),e.jsxs(j,{mt:1,direction:"row",justifyContent:"flex-end",gap:1,children:[e.jsx(z,{variant:"outlined",onClick:a,children:n.formatMessage(v.cancel)}),e.jsx(z,{variant:"contained",onClick:r,children:n.formatMessage(v.save)})]})]})})})},Ga=()=>{const a=D(),i=se(),{classes:t}=oe();return e.jsxs("div",{children:[e.jsx(g,{className:t.subtitles,children:a.formatMessage(v.startsJanuaryOne)}),e.jsx(g,{children:a.formatMessage(v.understand)}),e.jsx(V,{className:t.checkBoxes,name:"resetOnJanuaryOne",label:i(v.resetOnJanuaryOne,!0)}),e.jsx(V,{className:t.checkBoxes,name:"willNotChange",label:i(v.willNotChange,!0)})]})},Ha=({values:a})=>{const i=D(),t=se(),{classes:s}=oe(),o=ie(a==null?void 0:a.startDate),n=we(o),m=n?he(n,"dd/MM"):"";return e.jsxs("div",{children:[e.jsx(g,{children:i.formatMessage(v.chooseDates)}),e.jsxs(j,{children:[e.jsx(xa,{fullWidth:!0,shouldDisableYear:()=>!0,name:"startDate",label:t(v.startDate,!0),views:["day","month"],format:"dd/MM",placeholder:"dd/mm"}),e.jsx(Ma,{fullWidth:!0,label:i.formatMessage(v.endDate),value:m,disabled:!0})]}),e.jsx(g,{children:i.formatMessage(v.understand)}),e.jsx(V,{className:s.checkBoxes,name:"resetOnSelectedDate",label:t(v.resetOnSelectedDate,!0)}),e.jsx(V,{className:s.checkBoxes,name:"willNotChange",label:t(v.willNotChange,!0)})]})},_a=()=>{const a=D(),i=se(),{classes:t}=oe();return e.jsxs("div",{children:[e.jsx(g,{className:t.subtitles,children:a.formatMessage(v.startsOnWorkAnniversary)}),e.jsx(g,{children:a.formatMessage(v.understand)}),e.jsx(V,{className:t.checkBoxes,name:"willNotChange",label:i(v.willNotChange,!0)}),e.jsx(V,{className:t.checkBoxes,name:"willNotChangeEmployeeStartDate",label:i(v.willNotChangeEmployeeStartDate,!0)}),e.jsx(V,{className:t.checkBoxes,name:"employeesWillNotRequest",label:i(v.employeesWillNotRequest,!0)})]})},qa=B()(a=>({radiosContainer:{marginLeft:a.spacing(2),marginTop:a.spacing(1)},divider:{marginBottom:a.spacing(2),marginTop:a.spacing(1)}})),I=L({title:{id:"hr.time-off.leave-cycle",defaultMessage:"Leave cycle"},subTitle:{id:"hr.app.page.configuration.time-off.leave-cycle.no-configuration-text",defaultMessage:"When should leave balances reset each year?"},custom:{id:"enum.leave-cycle-type.custom",defaultMessage:"Custom"},customDescription:{id:"enum.leave-cycle-type.custom.description",defaultMessage:"The company's leave cycle starts on date you choose"},calendarYear:{id:"enum.leave-cycle-type.default",defaultMessage:"Calendar Year"},calendarYearDescription:{id:"enum.leave-cycle-type.default.description",defaultMessage:"The company's leave cycle starts on January 1st each year"},individual:{id:"enum.leave-cycle-type.hire-date",defaultMessage:"Individual"},individualDescription:{id:"enum.leave-cycle-type.hire-date.description",defaultMessage:"Each employee's cycle starts on their work anniversary"},select:{id:"common.select",defaultMessage:"Select"},leaveCycleWillStartOnAnniversary:{id:"hr.app.page.configuration.time-off.leave-cycle.hire-date-text",defaultMessage:"Each employee's leave cycle will start on their work anniversary."},leaveCycleRunsFrom:{id:"hr.app.page.configuration.time-off.leave-cycle.date-range-text",defaultMessage:"Your company leave cycle runs from"}}),Ua=({refetchConfiguration:a,configuration:i,visibleSection:t})=>{const s=D();return e.jsx(wa,{variant:"outlined",children:e.jsxs(j,{px:2,py:1.5,spacing:2,children:[e.jsx(te,{titleProps:{sx:{textTransform:"capitalize"}},title:s.formatMessage(I.title),subtitle:t==="configuration"&&s.formatMessage(I.subTitle)}),t==="configuration"&&e.jsx(Qa,{refetchConfiguration:a}),t==="view"&&i&&e.jsx(Ya,{configuration:i})]})})},Ya=({configuration:a})=>{const i=D(),t=Y(Te),s=ya({startingDay:a.startingDay,startingMonth:a.startingMonth}),o=we(s),n=s?e.jsx(le,{date:s,dateFormat:"no-year"}):"",m=o?e.jsx(le,{date:o,dateFormat:"no-year"}):"";return e.jsxs("div",{children:[e.jsxs(g,{fontWeight:"bold",color:"textSecondary",children:[t(a.leaveCycleType),":"," "]}),e.jsx(g,{color:"textSecondary",children:a.leaveCycleType===M.HireDate?i.formatMessage(I.leaveCycleWillStartOnAnniversary):e.jsxs(e.Fragment,{children:[i.formatMessage(I.leaveCycleRunsFrom)," (",n," - ",m,")"]})})]})},Qa=({refetchConfiguration:a})=>{const i=D(),t=$(),{handleRequestExceptionAlert:s}=Z(),{classes:o}=qa(),[n,m]=x.useState(M.Default),[f,c]=x.useState(!1),{mutateAsync:r,isPending:l}=fa(),d=()=>{c(h=>!h)},u=async h=>{try{await r({urlParams:{companyId:t},data:h}),await a()}catch(T){s(T)}},b=[{label:e.jsx(R,{heading:i.formatMessage(I.calendarYear),subtext:i.formatMessage(I.calendarYearDescription)}),value:M.Default},{label:e.jsx(R,{heading:i.formatMessage(I.custom),subtext:i.formatMessage(I.customDescription)}),value:M.Custom},{label:e.jsx(R,{heading:i.formatMessage(I.individual),subtext:i.formatMessage(I.individualDescription)}),value:M.HireDate}];return e.jsxs("div",{children:[e.jsx("div",{className:o.radiosContainer,children:e.jsx(Ce,{value:n,onChange:h=>m(h),options:b})}),e.jsx(qe,{className:o.divider}),e.jsx(j,{direction:"row",justifyContent:"flex-end",children:e.jsx(z,{onClick:d,variant:"contained",children:i.formatMessage(I.select)})}),e.jsx($a,{isLoading:l,open:f,onClose:d,onConfirm:u,selectedCycleType:n})]})},Ja=ye("/companies/{companyId}/time-off/leave-types","get",{isGlobalProgressEnabled:!1,apiUrlPrefix:je});function Fe(a,i={}){const[t,s]=Ja(a,Fe);return ve({queryKey:t,queryFn:s,...i})}const Ka=({companyId:a,leaveTypeId:i})=>`/companies/${a}/time-off/leave-types/${i}`,Ie=()=>{const a=Xa.useMocker();return Ye({toURLFunction:Ka,options:{mocker:a,showGlobalProgress:!0}})},Xa=Ue(Ie),Za=ye("/companies/{companyId}/time-off/leave-policy/templates","get",{isGlobalProgressEnabled:!1,apiUrlPrefix:je});function Ae(a,i={}){const[t,s]=Za(a,Ae);return ve({queryKey:t,queryFn:s,...i})}const et="/react-ts-app/assets/HajjIllustration-Aq3az95N__cache.svg",at=a=>e.jsx(O,{url:et,...a}),tt="/react-ts-app/assets/IddahIllustration-QvSgE7Jn__cache.svg",st=a=>e.jsx(O,{url:tt,...a}),it="/react-ts-app/assets/PaternityIllustration-zQoLxhYG__cache.svg",ot=a=>e.jsx(O,{url:it,...a}),nt="/react-ts-app/assets/SabbaticalIllustration-8kbQkIG3__cache.svg",lt=a=>e.jsx(O,{url:nt,...a}),rt="/react-ts-app/assets/SickIllustration-jVW0I7xQ__cache.svg",ct=a=>e.jsx(O,{url:rt,...a}),dt="data:image/svg+xml,%3csvg%20width='500'%20height='500'%20viewBox='0%200%20500%20500'%20xmlns='http://www.w3.org/2000/svg'%20xmlns:xlink='http://www.w3.org/1999/xlink'%3e%3cpath%20fill='%239647FF'%20d='M379.71%20324.97H179.77v-50.14h199.94a3.88%203.88%200%200%201%203.88%203.88v42.38a3.88%203.88%200%200%201-1.137%202.743%203.88%203.88%200%200%201-2.743%201.137'/%3e%3cpath%20fill='%23000'%20d='M379.71%20324.97H179.77v-50.14h199.94a3.88%203.88%200%200%201%203.88%203.88v42.38a3.88%203.88%200%200%201-1.137%202.743%203.88%203.88%200%200%201-2.743%201.137'%20opacity='.2'/%3e%3cpath%20fill='%23000'%20d='M228.79%20324.97h30.59v-50.14h-30.59zM272.52%20324.97h15.51v-50.14h-15.51z'%20opacity='.2'/%3e%3cpath%20fill='%239647FF'%20d='M113.54%20274.83h66.22v50.14h-66.22a3.9%203.9%200%200%201-2.758-1.142%203.9%203.9%200%200%201-1.142-2.758v-42.34c0-1.034.411-2.026%201.142-2.758a3.9%203.9%200%200%201%202.758-1.142'/%3e%3cpath%20fill='%23fff'%20d='M109.64%20280.22h57.93a5.087%205.087%200%200%201%205.09%205.09v29.17a5.09%205.09%200%200%201-5.09%205.09h-57.93z'%20opacity='.9'/%3e%3cpath%20fill='%23000'%20d='M355.57%20314.24c7.92%200%2014.34-6.421%2014.34-14.34%200-7.92-6.42-14.34-14.34-14.34s-14.34%206.42-14.34%2014.34c0%207.919%206.42%2014.34%2014.34%2014.34'%20opacity='.2'/%3e%3cpath%20fill='%23263238'%20d='M394.19%20274.79h-200V238.4h200a3.88%203.88%200%200%201%203.88%203.88v28.67a3.88%203.88%200%200%201-3.88%203.84'/%3e%3cpath%20fill='%23000'%20d='M394.19%20274.79h-200V238.4h200a3.88%203.88%200%200%201%203.88%203.88v28.67a3.88%203.88%200%200%201-3.88%203.84'%20opacity='.2'/%3e%3cpath%20fill='%23263238'%20d='M128.01%20238.48h66.22v36.39h-66.22a3.9%203.9%200%200%201-3.9-3.9v-28.63a3.9%203.9%200%200%201%203.9-3.86'/%3e%3cpath%20fill='%23fff'%20d='M124.08%20243.83h58a5.087%205.087%200%200%201%205.09%205.09v15.45a5.08%205.08%200%200%201-1.484%203.612%205.1%205.1%200%200%201-3.606%201.498h-58z'%20opacity='.9'/%3e%3cpath%20fill='%239647FF'%20d='M236.09%20266.21h139.9a4.19%204.19%200%200%200%204.19-4.19v-10.78a4.19%204.19%200%200%200-4.19-4.19h-139.9a4.19%204.19%200%200%200-4.19%204.19v10.78a4.19%204.19%200%200%200%204.19%204.19M201.82%20274.83h5.31v-36.39h-5.31zM211.51%20274.83h5.31v-36.39h-5.31z'%20opacity='.3'/%3e%3cpath%20fill='%239647FF'%20d='M372.05%20238.44H172.12v-37.58h199.93a3.88%203.88%200%200%201%203.88%203.88v29.82a3.88%203.88%200%200%201-3.88%203.88'/%3e%3cpath%20fill='%23000'%20d='M372.05%20238.44H172.12v-37.58h199.93a3.88%203.88%200%200%201%203.88%203.88v29.82a3.88%203.88%200%200%201-3.88%203.88'%20opacity='.3'/%3e%3cpath%20fill='%23fff'%20d='M221.14%20238.44h69.42V200.9h-69.42zM320.38%20238.44h35.2V200.9h-35.2z'%20opacity='.9'/%3e%3cpath%20fill='%239647FF'%20d='M105.9%20200.9h66.18v37.58H105.9a3.897%203.897%200%200%201-3.9-3.9V204.8a3.9%203.9%200%200%201%202.408-3.603c.473-.196.98-.297%201.492-.297'/%3e%3cpath%20fill='%23fff'%20d='M102%20206.28h57.93a5.09%205.09%200%200%201%205.09%205.09v16.59a5.087%205.087%200%200%201-5.09%205.09H102z'%20opacity='.9'/%3e%3cpath%20fill='%239647FF'%20d='M386.51%20200.9H186.58V176h199.93a3.88%203.88%200%200%201%203.88%203.88v17.14a3.88%203.88%200%200%201-3.88%203.88'/%3e%3cpath%20fill='%23fff'%20d='M386.51%20200.9H186.58V176h199.93a3.88%203.88%200%200%201%203.88%203.88v17.14a3.88%203.88%200%200%201-3.88%203.88'%20opacity='.3'/%3e%3cpath%20fill='%23000'%20d='M386.51%20200.9H186.58V176h199.93a3.88%203.88%200%200%201%203.88%203.88v17.14a3.88%203.88%200%200%201-3.88%203.88'%20opacity='.2'/%3e%3cpath%20fill='%239647FF'%20d='M120.36%20176h66.22v24.9h-66.22a3.9%203.9%200%200%201-2.758-1.142A3.9%203.9%200%200%201%20116.46%20197v-17.1c0-1.034.411-2.026%201.142-2.758A3.9%203.9%200%200%201%20120.36%20176'/%3e%3cpath%20fill='%23fff'%20d='M120.36%20176h66.22v24.9h-66.22a3.9%203.9%200%200%201-2.758-1.142A3.9%203.9%200%200%201%20116.46%20197v-17.1c0-1.034.411-2.026%201.142-2.758A3.9%203.9%200%200%201%20120.36%20176'%20opacity='.3'/%3e%3cpath%20fill='%23fff'%20d='M116.46%20181.39h57.92a5.09%205.09%200%200%201%205.09%205.09v4a5.09%205.09%200%200%201-5.09%205h-57.92z'%20opacity='.9'/%3e%3cpath%20fill='%23263238'%20d='M204.47%20194.34h90.62v-11.77h-90.62z'%20opacity='.4'/%3e%3c/svg%3e",mt=a=>e.jsx(O,{url:dt,...a}),ft="data:image/svg+xml,%3csvg%20width='500'%20height='500'%20viewBox='0%200%20500%20500'%20xmlns='http://www.w3.org/2000/svg'%20xmlns:xlink='http://www.w3.org/1999/xlink'%3e%3cpath%20fill='%23F5F5F5'%20d='M249.926%20353c84.458%200%20152.925-5.991%20152.925-13.381s-68.467-13.381-152.925-13.381S97%20332.229%2097%20339.619%20165.467%20353%20249.926%20353'/%3e%3cpath%20fill='%23fff'%20d='M353.149%20148H143.001v192.769h210.148z'/%3e%3cpath%20fill='%23EADAFF'%20d='M350.957%20151.332v189.253H144.945V151.332zm2.068-1.749H142.877v192.751h210.148z'/%3e%3cpath%20fill='%239647FF'%20d='m336.997%20158.811-.731.618%204.811%204.07.731-.619z'/%3e%3cpath%20fill='%239647FF'%20d='m341.059%20158.786-4.811%204.07.731.618%204.811-4.069z'/%3e%3cpath%20fill='%23CDA7FF'%20d='M337.857%20177.136H158.17v3.823h179.687z'/%3e%3cpath%20fill='%239647FF'%20d='M338.219%20316.385h-41.134c-.709%200-1.283.486-1.283%201.085v11.004c0%20.599.574%201.084%201.283%201.084h41.134c.708%200%201.282-.485%201.282-1.084V317.47c0-.599-.574-1.085-1.282-1.085'/%3e%3cpath%20fill='%23CDA7FF'%20d='M188.755%20184.783H158.17v3.823h30.585z'/%3e%3cpath%20fill='%23515B60'%20d='M337.857%20215.368H158.17v64.993h179.687z'%20opacity='.1'/%3e%3cpath%20fill='%23263238'%20d='M165.108%20322.34h-6.938v5.87h6.938zM174.826%20322.34h-6.938v5.87h6.938zM184.549%20322.34h-6.939v5.87h6.939z'/%3e%3cpath%20fill='%23fff'%20d='M165.108%20322.34h-6.938v5.87h6.938zM174.826%20322.34h-6.938v5.87h6.938zM184.549%20322.34h-6.939v5.87h6.939z'%20opacity='.5'/%3e%3c/svg%3e",re=a=>e.jsx(O,{url:ft,...a}),pt="data:image/svg+xml,%3csvg%20width='500'%20height='500'%20viewBox='0%200%20500%20500'%20xmlns='http://www.w3.org/2000/svg'%20xmlns:xlink='http://www.w3.org/1999/xlink'%3e%3cpath%20fill='%23F5F5F5'%20d='M250%20351.408c107.082%200%20193.89-5.069%20193.89-11.32s-86.808-11.32-193.89-11.32c-107.083%200-193.89%205.068-193.89%2011.32%200%206.251%2086.807%2011.32%20193.89%2011.32'/%3e%3cpath%20fill='%239647FF'%20d='M132.97%20336.428c29.548-.789%2052.861-25.382%2052.072-54.93-.79-29.547-25.382-52.861-54.93-52.072-29.548.79-52.861%2025.383-52.072%2054.93.79%2029.548%2025.382%2052.862%2054.93%2052.072'/%3e%3cpath%20fill='%23fff'%20d='M163.326%20313.039c20.313-21.473%2022.538-52.353%204.969-68.973s-48.279-12.686-68.591%208.787c-20.313%2021.472-22.538%2052.353-4.969%2068.973s48.279%2012.686%2068.591-8.787'%20opacity='.5'/%3e%3cpath%20fill='%239647FF'%20d='M152.415%20302.717c20.313-21.473%2027.422-47.732%2015.879-58.651-11.542-10.919-37.366-2.364-57.679%2019.109s-27.423%2047.732-15.88%2058.651%2037.367%202.364%2057.68-19.109'/%3e%3cpath%20fill='%23fff'%20d='M140.443%20291.392c20.313-21.473%2032.783-42.661%2027.852-47.326s-25.395%208.961-45.708%2030.434-32.783%2042.661-27.852%2047.326%2025.395-8.961%2045.708-30.434'%20opacity='.5'/%3e%3cpath%20fill='%239647FF'%20d='M396.86%20334.297a2.66%202.66%200%200%201-1.75-.65l-175.67-150a2.7%202.7%200%200%201-.183-3.7%202.7%202.7%200%200%201%203.683-.4l175.67%20150.01a2.69%202.69%200%200%201%20.782%202.982%202.69%202.69%200%200%201-2.532%201.758'/%3e%3cpath%20fill='%239647FF'%20d='M281.75%20334.297a2.74%202.74%200%200%201-1.68-.58%202.68%202.68%200%200%201-1-2.64l16.81-84a2.69%202.69%200%200%201%202.115-2.115%202.69%202.69%200%200%201%203.165%202.115c.069.346.069.703%200%201.05l-15.78%2078.8%2091.66-41.94a2.7%202.7%200%200%201%202.084-.112%202.7%202.7%200%200%201%201.537%201.411%202.69%202.69%200%200%201-1.381%203.591l-96.45%2044.14a2.8%202.8%200%200%201-1.08.28'/%3e%3cpath%20fill='%239647FF'%20d='M221.19%20181.547h-85.92c22.25%2038.05%2084%20117%20145.21%20117h74.9c-48.38-.04-111.94-78.95-134.19-117'/%3e%3cpath%20fill='%23000'%20d='M221.19%20181.547h-85.92c22.25%2038.05%2084%20117%20145.21%20117h74.9c-48.38-.04-111.94-78.95-134.19-117'%20opacity='.2'/%3e%3cpath%20fill='%239647FF'%20d='M310.93%20334.297a2.63%202.63%200%200%201-1.74-.65l-175.67-150a2.7%202.7%200%200%201-.183-3.7%202.7%202.7%200%200%201%203.683-.4l175.66%20150.01c.42.357.721.835.861%201.368a2.7%202.7%200%200%201-1.068%202.892%202.7%202.7%200%200%201-1.543.48'/%3e%3cpath%20fill='%23fff'%20d='M310.93%20334.297a2.63%202.63%200%200%201-1.74-.65l-175.67-150a2.7%202.7%200%200%201-.183-3.7%202.7%202.7%200%200%201%203.683-.4l175.66%20150.01c.42.357.721.835.861%201.368a2.7%202.7%200%200%201-1.068%202.892%202.7%202.7%200%200%201-1.543.48'%20opacity='.3'/%3e%3cpath%20fill='%239647FF'%20d='M195.82%20334.297a2.73%202.73%200%200%201-2.542-1.759%202.7%202.7%200%200%201-.128-1.461l16.82-84a2.69%202.69%200%200%201%202.115-2.115%202.69%202.69%200%200%201%203.165%202.115c.069.346.069.703%200%201.05l-15.78%2078.8%2091.66-41.94a2.7%202.7%200%200%201%202.084-.112%202.7%202.7%200%200%201%201.537%201.411%202.69%202.69%200%200%201-1.381%203.591l-96.46%2044.14c-.34.167-.711.263-1.09.28'/%3e%3cpath%20fill='%23fff'%20d='M195.82%20334.297a2.73%202.73%200%200%201-2.542-1.759%202.7%202.7%200%200%201-.128-1.461l16.82-84a2.69%202.69%200%200%201%202.115-2.115%202.69%202.69%200%200%201%203.165%202.115c.069.346.069.703%200%201.05l-15.78%2078.8%2091.66-41.94a2.7%202.7%200%200%201%202.084-.112%202.7%202.7%200%200%201%201.537%201.411%202.69%202.69%200%200%201-1.381%203.591l-96.46%2044.14c-.34.167-.711.263-1.09.28'%20opacity='.3'/%3e%3c/svg%3e",ut=a=>e.jsx(O,{url:pt,...a}),ht="/react-ts-app/assets/PoppyFlowerIllustration-gEuJFYrD__cache.svg",gt=a=>e.jsx(O,{url:ht,...a}),yt="/react-ts-app/assets/TeddyBearIllustration-uoiy6z3b__cache.svg",ce=a=>e.jsx(O,{url:yt,...a}),de=a=>{switch(a){case"kingdom-of-saudi-arabia":return k.Ksa;case"united-arab-emirates":return k.Uae;default:return k.Uae}},Pe=a=>{switch(a){case"compassionate":return ba;case"custom":return re;case"hajj":return at;case"iddah":return st;case"marriage":return gt;case"maternity":return ot;case"parental":return ce;case"paternity":return ce;case"sabbatical":return lt;case"sick":return ct;case"study":return mt;case"vacation":return ut;default:return re}},Oe=B()(a=>({templateCard:{display:"flex",flexDirection:"row",alignItems:"center",padding:a.spacing(.5,2),border:`1px solid ${Qe.grey[200]}`,borderRadius:a.shape.borderRadius,minWidth:0,width:"100%",":hover":{cursor:"pointer",borderColor:a.palette.primary.main,boxShadow:"0px 4px 8px 0px #00000014"}},templateCardGridItem:{paddingTop:a.spacing(0),paddingBottom:a.spacing(2)},startFromScratchCard:{flexDirection:"column",alignItems:"center",justifyContent:"center",margin:a.spacing(3,0),gap:0},templateCardTextsContainer:{width:"69%"},templateCardTexts:{width:"98%",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",paddingRight:a.spacing(.5)},templateImageContainer:{width:"31%"},templateImage:{width:"100%"},descriptionRenderer:{"& p":{margin:0},"& > *:first-child":{marginTop:0}}})),K=L({startFromScratch:{id:"hr.time-off.start-from-scratch",defaultMessage:"Start from scratch"},createWithOwnSettings:{id:"hr.time-off.create-with-your-settings",defaultMessage:"Create a policy with your own settings"},startWithTemplate:{id:"hr.time-off.start-with-template",defaultMessage:"Or start with a template"}}),vt=({activeTab:a,countries:i,onActiveTabChange:t,onActiveTemplateChange:s,templates:o})=>{const n=D(),{classes:m,cx:f}=Oe(),c=Y(be),r=ae(),l=()=>{r.push("/settings/time-off/policy/create")},d=Pe("custom");return e.jsxs(e.Fragment,{children:[e.jsxs("div",{"data-external-id":"start-from-scratch-card",onClick:l,className:f(m.templateCard,m.startFromScratchCard),children:[e.jsx(d,{size:130,alt:"template-from-scratch"}),e.jsx(g,{variant:"h6",children:n.formatMessage(K.startFromScratch)}),e.jsx(g,{variant:"body2",color:"textSecondary",children:n.formatMessage(K.createWithOwnSettings)})]}),e.jsx(g,{my:1,variant:"h5",children:n.formatMessage(K.startWithTemplate)}),e.jsx(De,{"data-external-id":"template-list-tabs",value:a,onChange:t,children:i.map(u=>e.jsx(Se,{value:u,label:c(u)},u))}),e.jsx(xe,{mt:3,container:!0,spacing:2,children:o.map(u=>e.jsx(xt,{onClick:()=>s(u),template:u},u.name))})]})},xt=({template:a,onClick:i})=>{const{classes:t}=Oe(),s=Pe(a.leavePolicyType);return e.jsx(xe,{className:t.templateCardGridItem,"data-external-id":"template-card",overflow:"hidden",size:{xs:12,md:6,lg:4},children:e.jsxs("div",{className:t.templateCard,onClick:i,children:[e.jsx("div",{className:t.templateImageContainer,children:e.jsx(s,{size:60,alt:a.name})}),e.jsxs("div",{className:t.templateCardTextsContainer,children:[e.jsx(g,{className:t.templateCardTexts,variant:"h6",children:a.name}),e.jsx(pe,{title:e.jsx("div",{className:t.descriptionRenderer,dangerouslySetInnerHTML:{__html:Je(a.description)}}),id:`template-tooltip-${a.name}`,enterDelay:1e3,children:e.jsx(g,{className:t.templateCardTexts,variant:"body2",color:"textSecondary",children:ja(a.description)})})]})]})})},Mt=B()(a=>({root:{paddingTop:a.spacing(2),height:"100%",display:"flex"},listContainer:{width:"25%",height:"100%",overflow:"auto"},listTab:{width:"50%"},detailsContainer:{width:"80%",paddingLeft:a.spacing(3),height:"100%",overflow:"auto"},compliantAlert:{width:"100%",marginBottom:a.spacing(2)}})),me=L({compliantWithKsa:{id:"hr.time-off.compliant-with-ksa",defaultMessage:"This template is compliant with labor law guidelines in Saudi Arabia"},compliantWithUae:{id:"hr.time-off.compliant-with-uae",defaultMessage:"This template is compliant with labor law guidelines in United Arab Emirates"}}),Ct={[k.Ksa]:me.compliantWithKsa,[k.Uae]:me.compliantWithUae},wt=({activeTab:a,countries:i,onActiveTabChange:t,templates:s,activeTemplate:o,onActiveTemplateChange:n})=>{const m=Y(be),{classes:f}=Mt(),r=D().formatMessage(Ct[a]);return e.jsxs("div",{className:f.root,children:[e.jsxs("div",{className:f.listContainer,children:[e.jsx(De,{"data-external-id":"template-detail-tabs",value:a,onChange:t,children:i.map(l=>e.jsx(Se,{className:f.listTab,value:l,label:m(l)},l))}),e.jsx(Ke,{children:s.map(l=>e.jsx(Xe,{"data-external-id":"template-list-item-button",onClick:()=>n(l),selected:o.name===l.name,children:e.jsx(Ze,{primary:e.jsx(g,{children:l.name})})},l.name))})]}),e.jsxs("div",{className:f.detailsContainer,children:[o.laborLawComplaint&&e.jsx(ea,{"data-external-id":"templates-info-alert",className:f.compliantAlert,withIcon:!0,variant:aa.Info,message:r}),e.jsx(Da,{policyName:o.name,allowanceType:o.allowanceType,description:o.description,leavePayRatePercentage:o.leavePayRatePercentage,dailyRateCustomDayCount:o.dailyRateCustomDayCount,restrictDuringProbation:o.restrictDuringProbation,restrictLeaveDaysEdit:o.restrictLeaveDaysModification,carryOverAllowance:o.carryOverSupport?o.carryOverAllowance:void 0,paid:o.paid,daysType:o.daysType,isAllowanceConditional:o.isAllowanceConditional,leaveAllowanceConditions:o.leaveAllowanceConditions,numberOfDays:o.numberOfDays,leavePayRateConditions:o.leavePayRateConditions,isPayRateConditional:o.isPayRateConditional,carryOverSupport:o.carryOverSupport,dailyRateDayType:o.dailyRateDayType,dailyRateSalaryComponent:o.dailyRateSalaryComponent,accrualType:o.accrualType,isPolicyPublishedWithEmployeesAssigned:!1,eligibleForLeaveSalary:o.eligibleForLeaveSalary})]})]})},bt=B()(a=>({noSpacing:{padding:0,margin:0},paper:{width:"90%",maxWidth:960,margin:a.spacing(3),padding:a.spacing(3),height:"100%"},content:{height:"100%"},actions:{paddingTop:a.spacing(2)}})),X=L({title:{id:"hr.time-off.create-new-time-off-policy",defaultMessage:"Create a new leave policy"},back:{id:"common.action.back",defaultMessage:"Back"},startFromTemplate:{id:"hr.time-off.start-from-this-template",defaultMessage:"Start from this template"}}),jt=[k.Uae,k.Ksa],Dt=({onClose:a,open:i})=>{const t=D(),{classes:s,cx:o}=bt(),n=Sa(),m=$(),f=ae(),{data:c,isFetching:r}=Ae({companyId:m},{select:ta}),l=n?va[n]:k.Uae,[d,u]=x.useState(l),[b,h]=x.useState(),T=x.useMemo(()=>jt.sort((y,F)=>y===l?-1:F===l?1:0),[l]),w=x.useMemo(()=>c==null?void 0:c.filter(y=>de(y.country)===d),[c,d]),A=(y,F)=>{const q=F;u(q);const G=c==null?void 0:c.filter(U=>de(U.country)===q);b&&G&&G.length>0&&h(G[0])},N=()=>{h(void 0)},E=()=>{b&&f.push(`/settings/time-off/policy/create/${b.id}`)};return e.jsx(Ta,{classes:{paper:o(s.noSpacing,s.paper),headerLine:s.noSpacing,content:s.content,actions:s.actions},open:i,title:t.formatMessage(X.title),onBack:b?N:void 0,titleVariant:"h3",onClose:a,divider:!1,actions:b?e.jsxs(j,{direction:"row",alignItems:"center",justifyContent:"space-between",children:[e.jsx(z,{onClick:N,variant:"outlined",children:t.formatMessage(X.back)}),e.jsx(z,{"data-external-id":"start-from-template",onClick:E,variant:"contained",children:t.formatMessage(X.startFromTemplate)})]}):void 0,children:e.jsx(ee,{"data-external-id":"template-list-modal",loading:!!r,children:b?e.jsx(wt,{activeTab:d,activeTemplate:b,countries:T,onActiveTabChange:A,onActiveTemplateChange:h,templates:w??[]}):e.jsx(vt,{activeTab:d,countries:T,onActiveTabChange:A,onActiveTemplateChange:h,templates:w??[]})})})},Ne=B()(a=>({actionsContainer:{display:"flex",gap:a.spacing(1),alignItems:"center"},noWrap:{whiteSpace:"nowrap",minWidth:"140px"},dialogContent:{color:a.palette.text.primary},addNewButton:{width:"fit-content"}})),p=L({title:{id:"hr.settings.time-off.time-off-policies",defaultMessage:"Leave policies"},subtitle:{id:"hr.time-off.policies-description",defaultMessage:"Set leave policies for your employees. You can configure allowance type, calendar or working days, monthly accruals and manage restrictions."},addNew:{id:"hr.app.page.configuration.add-new",defaultMessage:"Add new"},name:{id:"hr.time-off.name",defaultMessage:"Name"},employeesIncluded:{id:"hr.time-off.active-employees-included",defaultMessage:"Active Employees Included"},edit:{id:"common.action.edit",defaultMessage:"Edit"},view:{id:"common.action.view",defaultMessage:"View"},delete:{id:"common.action.delete",defaultMessage:"Delete"},confirmDeletion:{id:"common.action.confirm-deletion",defaultMessage:"Confirm deletion"},leaveTypeDeleted:{id:"hr.leave-type-deleted",defaultMessage:"Leave policy deleted!"},loading:{id:"common.loading",defaultMessage:"Loading..."},leaveCycleNotConfigured:{id:"hr.app.page.configuration.time-off.policies.not-configured-text",defaultMessage:"Please configure company leave cycle first."},draft:{id:"common.draft",defaultMessage:"Draft"},learnMore:{id:"common.action.learn-more",defaultMessage:"Learn More"},pleaseReview:{id:"hr.time-off.please-review",defaultMessage:"Please review the impact of deleting this leave policy"},anyAllowanceWillBeDeleted:{id:"hr.time-off.any-allowance-will-be-deleted",defaultMessage:"Any allowance setup for employees in this policy will be deleted"},allLeaveRequestsWillBeDeleted:{id:"hr.time-off.all-leave-requests-will-be-deleted",defaultMessage:"All leave requests added by employees using this leave policy will be deleted"},employeesWontSeeLeave:{id:"hr.time-off.employees-wont-see-leave",defaultMessage:"Employees will no longer be able to see or request for a leave with this leave policy"},iUnderstand:{id:"hr.time-off.i-understand",defaultMessage:"I understand that this action is permanent and cannot be undone"},deleteDraftLeaveTypeMessage:{id:"hr.settings.timeoff.confirm-delete-leave-type.title",defaultMessage:"Are you sure you want to delete <strong>{leaveTypeName}</strong>?"},searchByPolicyName:{id:"hr.time-off.search-by-policy-name",defaultMessage:"Search by policy name"},noResults:{id:"common.no-results-found",defaultMessage:"No results found."},noDataAvailable:{id:"common.no-data-available",defaultMessage:"No data available"}}),St=Oa(500),Tt=({isLeaveCycleConfigured:a,isLoading:i})=>{var ne;const t=$(),s=D(),{isLocaleAr:o}=sa(),{classes:n}=Ne(),{hash:m}=ia(),[f,c]=x.useState(!1),[r,l,d]=St(""),[u,b]=x.useState(),[h,T]=x.useState({limit:8,offset:0}),{data:w,refetch:A,isFetching:N}=Fe({companyId:t,pagination:h,filters:{empty:!1,search:l,nameSortDirection:u==null?void 0:u.direction}},{select:ca}),E=(C,P)=>{T({limit:C,offset:P*C})},y=()=>{c(C=>!C)},F=C=>{h.offset!==0&&T({...h,offset:0}),d(C)},q=()=>{d("")},G=C=>{const P=C==null?void 0:C.find(Le=>Le.sortBy==="name");b(P)},U=x.useCallback(()=>{w&&w.data.length===1&&h.offset>0?T(C=>({...C,offset:C.offset-h.limit})):A()},[w,h,A]),ke=x.useMemo(()=>[{title:s.formatMessage(p.name),dataIndex:"name",sortable:!0,accessor:(C,P)=>e.jsxs(j,{direction:"row",alignItems:"center",gap:1,children:[e.jsxs("div",{children:[e.jsx(g,{variant:"body2",children:P.name}),!P.paid&&e.jsx(g,{variant:"body2",color:"textSecondary",children:Fa(s,P)})]}),P.isDraft&&e.jsx(oa,{label:s.formatMessage(p.draft)})]})},{title:s.formatMessage(p.employeesIncluded),dataIndex:"numberOfSetupEmployees"},{title:"",dataExternalId:"actions",dataIndex:"id",align:"right",accessor:(C,P)=>e.jsx(Ft,{row:P,onDelete:U})}],[s,U]);return e.jsxs(Me,{expandDisabled:!a,expandedByDefault:m==="#leave-policies",title:e.jsxs(j,{width:"100%",direction:{xs:"column",md:"row"},alignItems:{xs:"start",md:"center"},justifyContent:"space-between",mr:1,gap:1,children:[e.jsx(te,{titleProps:{sx:{textTransform:"capitalize"}},title:s.formatMessage(p.title),subtitle:i?"":s.formatMessage(a?p.subtitle:p.leaveCycleNotConfigured)}),e.jsx(z,{variant:"outlined",color:"info",target:"_blank",endIcon:e.jsx(na,{fontSize:"x-small"}),href:o?"https://bayzathelp.zendesk.com/hc/ar-ae/sections/14304148867985-Time-Off-Settings":"https://bayzathelp.zendesk.com/hc/en-gb/sections/14304148867985-Time-Off-Settings",className:n.noWrap,onClick:C=>C.stopPropagation(),children:s.formatMessage(p.learnMore)})]}),"data-external-id":"time-off-policies-accordion",children:[e.jsxs(j,{gap:2,children:[e.jsx(Aa,{value:r,onChange:F,placeholder:s.formatMessage(p.searchByPolicyName),onClear:q}),e.jsx(Pa,{sortingColumns:u?[u]:[],onSortColumn:G,sortingType:la.MultipleColumns,loading:N,loadingState:s.formatMessage(p.loading),rowIdentifierIndex:"id",onPageChange:E,columns:ke,data:(w==null?void 0:w.data)||[],pagination:h,totalRowCount:(ne=w==null?void 0:w.pagination)==null?void 0:ne.total,rowsPerPageOptions:[8,16,32],variant:"outlined",emptyState:r?s.formatMessage(p.noResults):s.formatMessage(p.noDataAvailable)}),a&&e.jsx(z,{className:n.addNewButton,"data-external-id":"add-new-policy",onClick:y,variant:"contained",children:s.formatMessage(p.addNew)})]}),e.jsx(Dt,{open:f,onClose:y})]})},Ft=({row:a,onDelete:i})=>{const{classes:t}=Ne(),{handleRequestExceptionAlert:s}=Z(),o=fe(),n=D(),m=$(),f=ae(),[c,r]=x.useState(!1),[l,d]=x.useState(!1),{mutateAsync:u}=Ie(),b=()=>{f.push(`/settings/time-off/policy/edit/${a.id}`)},h=()=>{f.push(`/settings/time-off/policy/view/${a.id}`)},T=async()=>{d(!0)},w=async()=>{try{await u({urlParams:{companyId:m,leaveTypeId:a.id}}),i(),o.success({message:n.formatMessage(p.leaveTypeDeleted)})}catch(y){s(y)}},A=()=>{r(!1),d(!1)},N=e.jsx(g,{children:n.formatMessage(p.deleteDraftLeaveTypeMessage,{strong:y=>e.jsx("strong",{children:y}),leaveTypeName:a.name})}),E=e.jsxs(j,{className:t.dialogContent,flexDirection:"column",gap:3,children:[e.jsx(g,{variant:"h6",children:n.formatMessage(p.pleaseReview)}),e.jsxs(j,{direction:"row",gap:1.5,children:[e.jsx(Q,{color:"error",fontSize:"small"}),e.jsx(g,{children:n.formatMessage(p.anyAllowanceWillBeDeleted)})]}),e.jsxs(j,{direction:"row",gap:1.5,children:[e.jsx(Q,{color:"error",fontSize:"small"}),e.jsx(g,{children:n.formatMessage(p.allLeaveRequestsWillBeDeleted)})]}),e.jsxs(j,{direction:"row",gap:1.5,children:[e.jsx(Q,{color:"error",fontSize:"small"}),e.jsx(g,{children:n.formatMessage(p.employeesWontSeeLeave)})]}),e.jsx(Ia,{onChange:y=>{r(y)},checked:c,"data-external-id":"i-understand-delete",text:n.formatMessage(p.iUnderstand)})]});return e.jsxs(La,{className:t.actionsContainer,children:[!a.isDraft&&e.jsx(J,{title:n.formatMessage(p.view),color:"primary",onClick:h,"data-external-id":"view-policy",size:"small",children:e.jsx(ka,{})}),e.jsx(J,{title:n.formatMessage(p.edit),color:"primary",onClick:b,"data-external-id":"edit-policy",size:"small",children:e.jsx(Na,{})}),e.jsx(J,{title:n.formatMessage(p.delete),color:"primary",onClick:T,"data-external-id":"delete-policy",size:"small",children:e.jsx(ra,{})}),e.jsx(ue,{content:a.isDraft?N:E,open:l,title:n.formatMessage(p.confirmDeletion),confirmButton:{color:"error",text:n.formatMessage(p.delete),onClick:w,disabled:!a.isDraft&&!c},cancelButton:{show:!0,onClick:A}})]})},Rs=()=>{const a=D(),i=$(),[t,s]=x.useState(),{data:o,refetch:n,isFetching:m,error:f,isSuccess:c,isError:r}=pa({companyId:i},{retry:!1});return x.useEffect(()=>{c&&s("view")},[c]),x.useEffect(()=>{var d;const l=f;r&&((d=l==null?void 0:l.response)==null?void 0:d.status)===404&&s("configuration")},[f,r]),e.jsx(Ra,{header:e.jsx(Ea,{title:a.formatMessage(It.timeOffSettings)}),children:e.jsxs(j,{gap:2,children:[e.jsx(Tt,{isLoading:m,isLeaveCycleConfigured:c}),e.jsx(da,{can:ma,children:e.jsx(za,{})}),e.jsx(Ua,{refetchConfiguration:n,configuration:o,visibleSection:t})]})})},It=L({timeOffSettings:{id:"hr.settings.leave-settings",defaultMessage:"Leave settings"}});export{Rs as default};
