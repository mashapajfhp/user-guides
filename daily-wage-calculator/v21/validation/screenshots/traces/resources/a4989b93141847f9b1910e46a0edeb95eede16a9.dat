import{H as M,af as S,a as W,r as i,b7 as w,j as a,S as A,T as V,d as k}from"./assets/index-rhBbSAok.js";import{a as I}from"./FileUploadCard-SYKRFYl-__cache.js";import{g as T}from"./FileUploaderBase-rOZnb-He__cache.js";import{T as D}from"./TextField-tMfA-iyC__cache.js";const E=M()((s,{withFileList:c})=>({dialogPaper:{minHeight:`calc(100% - calc(${s.spacing(4)} * 2))`},dialogContentWithoutFileList:{padding:0,marginBottom:0},dialogAction:{display:c?"unset":"none"},searchInput:{marginTop:0,input:{background:S.grey[50]}},listContainer:{display:"flex",flexDirection:"column",gap:s.spacing(2)},dialogContent:{height:"100%",display:"flex",gap:s.spacing(2)},filesListWrapper:{overflow:"auto",width:"30%",paddingRight:s.spacing(2),[s.breakpoints.down("md")]:{display:"none"}},contentWrapper:{width:c?"70%":"100%",[s.breakpoints.down("md")]:{width:"100%"}},noAttachmentsContainer:{display:"flex",justifyContent:"center",alignItems:"center"}})),f=k({search:{id:"common.search",defaultMessage:"Search"},noAttachments:{id:"common.attachment-viewer.no-attachments",defaultMessage:"No attachments."},title:{id:"common.action.uploaded-files",defaultMessage:"Uploaded Files"}}),O=({open:s,onClose:c,files:u,title:j,onDelete:x,initialPreviewFileIndex:p,withFileList:r=!0})=>{const g=W(),{classes:t,cx:C}=E({withFileList:r}),[e,d]=i.useState(p??0),[m,y]=i.useState(),o=i.useMemo(()=>m?u.filter(n=>n.name.toLowerCase().includes(m.toLowerCase())):u,[m,u]),l=i.useMemo(()=>{if(o.length>e&&e>=0)return o[e]},[e,o]),N=i.useCallback(()=>{e<o.length&&d(e+1)},[e,o.length]),b=i.useCallback(()=>{e>0&&d(e-1)},[e]),v=n=>{y(n),d(0)};return i.useEffect(()=>{w.isNil(p)||d(p)},[p]),a.jsx(A,{open:s,fullWidth:!0,title:r?j??g.formatMessage(f.title):void 0,maxWidth:"xl",onClose:c,showCloseButton:!0,confirmButton:{show:!1},showTitle:r,actionClassName:t.dialogAction,contentClassName:C(t.dialogContent,!r&&t.dialogContentWithoutFileList),classes:{paper:t.dialogPaper},content:a.jsxs(a.Fragment,{children:[r&&(l||m)&&a.jsxs("div",{"data-external-id":"file-list",className:t.filesListWrapper,children:[u.length>1&&a.jsx(D,{value:m,onChange:v,placeholder:g.formatMessage(f.search),hiddenLabel:!0,fullWidth:!0,className:t.searchInput,"data-external-id":"file-list-search-input"}),a.jsx("div",{"data-external-id":"file-list-items",className:t.listContainer,children:o.map((n,h)=>a.jsx(I,{isSelected:e===h,onClick:()=>d(h),fileName:n.name,status:n.status,message:n.message},`${n.name}-${h}`))})]}),l&&a.jsx("div",{"data-external-id":"file-preview",className:t.contentWrapper,children:a.jsx(T,{attachment:l,onNext:N,onPrevious:b,totalAttachmentsCount:o.length,currentAttachmentCount:e+1,isDownloadable:l.isDownloadable,onDelete:l.isDeletable&&x?()=>x(l):void 0,onClose:r?void 0:c})}),!l&&a.jsx("div",{className:C(t.contentWrapper,t.noAttachmentsContainer),children:a.jsx(V,{color:"textSecondary",children:g.formatMessage(f.noAttachments)})})]})})};export{O as F};
