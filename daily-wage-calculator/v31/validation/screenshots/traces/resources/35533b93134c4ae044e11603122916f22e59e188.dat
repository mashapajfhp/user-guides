import{H as T,gd as A,a as R,j as e,S as ce,bW as re,aN as $,f_ as F,d as z,ad as H,ae as U,bu as de,cC as me,b9 as ge,r as o,X as pe,kL as ue,jU as S,T as k,bU as fe,B as b,ah as r,kM as E,j6 as y,fQ as v}from"./assets/index-rhBbSAok.js";import{S as xe}from"./CommentRichtextEditor-Mf_MSkO8__cache.js";import{T as he}from"./TruncatedTypography-V2FZOi0w__cache.js";import{f as D}from"./formatDistanceToNowWithIntl-_X6LdON-__cache.js";import{u as ke}from"./useDialog-gRSbQfEN__cache.js";var _=(t=>(t.Like="Like",t.Love="Love",t))(_||{});const W=[["Like",{id:"like",name:"Like"}],["Love",{id:"love",name:"Love"}]],ye=new Map(W),ve=new Map(W.map(([t,s])=>[s.id,t]));function Pe(t){return ye.get(t).id}function Te(t){return ve.get(t)}const je=T()(()=>({maxHeight:{maxHeight:500}})),Ce=A("div",t=>({root:{display:"flex",flexDirection:"column",gap:t.spacing(2)}})),Ie=A("div",t=>({root:{display:"flex",alignItems:"center",gap:t.spacing(1)}})),Le=({likes:t,onClose:s})=>{const{classes:c}=je(),p=R();return e.jsx(ce,{open:!0,title:p.formatMessage(P.title),showCloseButton:!0,onClose:s,maxWidth:"xs",fullWidth:!0,confirmButton:{show:!1},contentClassName:c.maxHeight,content:e.jsxs(Ce,{children:[t.map(i=>e.jsx(re,{to:`/employees/${i.createdByEmployeeId}/profile/about-me/social`,app:$.APP_HRADMIN,children:e.jsxs(Ie,{children:[e.jsx(F,{person:{id:i.createdByEmployeeId,firstName:i.createdByName,preferredName:i.createdByFullName},shouldUseSkeletonLoading:!0}),e.jsx("span",{children:i.createdByFullName})]})},i.id)),t.length===0&&p.formatMessage(P.noLikesYet)]})})},P=z({noLikesYet:{id:"hr.no-likes-yet",defaultMessage:"No likes yet"},title:{id:"hr.people-who-liked-this",defaultMessage:"People who liked this"}}),G="social-media-rewards-rating/love-it-alternate",Ne=`${U}#${G}`,Y=H(e.jsx("use",{href:Ne}),"LoveItAlternate");Y.id=G;const K="social-media-rewards-rating/love-it",Me=`${U}#${K}`,O=H(e.jsx("use",{href:Me}),"LoveIt");O.id=K;const Q=T()((t,s,c)=>({avatarBox:{flexGrow:0,flexShrink:0,flexBasis:"auto",marginRight:t.spacing(2)},commentBox:{alignItems:"start",flexGrow:1,flexShrink:1,flexBasis:"auto"},container:{[`&.${c.active}`]:{backgroundColor:t.palette.warning.light},paddingTop:t.spacing(2),paddingRight:t.spacing(3),paddingLeft:t.spacing(3),paddingBottom:t.spacing(1)},commenterName:{marginBottom:4},actionsLine:{marginTop:4},actionsItemPadding:{paddingRight:t.spacing(1)},actionsItemSeparator:{paddingLeft:t.spacing(1),paddingRight:t.spacing(1)},loveIcon:{fontSize:12},likeCount:{paddingLeft:4},commentElement:{...de.body2,display:"block",marginBlockStart:8,marginBlockEnd:8},active:{}}));function Ae({beingEdited:t,comment:s,employees:c,className:p,deleteDisabled:i,onEdit:V,onDelete:j,onReact:C,showReactions:X}){const{createdByEmployeeId:m,createdByFullName:q,content:J,createdAt:f,editedAt:x,reactions:g}=s,{classes:a,cx:Z}=Q(),{confirm:I}=ke(),h=me(),L=ge(),[ee,u]=o.useState(!1),N=o.useRef(null),n=R(),M=m===h,te=pe(ue),B=o.useMemo(()=>g.find(l=>l.createdByEmployeeId===h),[h,g]),ae=o.useMemo(()=>{if(x){const l=D(n,S(x));return n.formatMessage(d.commentEditedAt,{date:l})}else if(f)return D(n,S(f));return""},[f,x,n]),se=o.useCallback(l=>{l.stopPropagation(),u(!0)},[u]),ne=o.useCallback(()=>{u(!1)},[u]),oe=o.useCallback(()=>{I({title:n.formatMessage({id:"common.confirmation",defaultMessage:"Confirmation"}),content:e.jsx(k,{color:"textSecondary",children:n.formatMessage(d.deleteCommentConfirmation)}),confirmButton:{onClick:()=>{j(s)},text:n.formatMessage({id:"common.action.delete",defaultMessage:"Delete"})},cancelButton:{text:n.formatMessage({id:"common.action.cancel",defaultMessage:"Cancel"}),show:!0}})},[I,n,j,s]),w=o.useCallback(()=>{fe({event:"jd.newsfeed.post.comment.click_personAvatar"}),m&&L.pushToApp($.APP_HRADMIN,`/employees/${m}/profile/about-me/social`)},[m,L]),ie=o.useCallback(()=>{C(s,_.Like)},[s,C]),le=()=>{var l;(l=N.current)==null||l.scrollIntoView({behavior:"smooth"})};return e.jsxs(e.Fragment,{children:[e.jsxs(b,{className:Z(a.container,p,t&&a.active),display:"flex",alignItems:"flex-start",ref:N,children:[e.jsx("div",{className:a.avatarBox,children:e.jsx(F,{person:{id:m},onClick:w})}),e.jsxs("div",{className:a.commentBox,children:[e.jsx(r,{container:!0,alignItems:"center",className:a.commenterName,children:e.jsx(E,{variant:"subtitle1",color:"textPrimary",onClick:w,underline:"hover",children:q})}),c&&e.jsx(he,{lineClamp:3,onToggleShow:le,component:"span",children:e.jsx(xe,{value:J,employees:c,DefaultElement:Be})}),e.jsx("div",{className:a.actionsLine,children:e.jsxs(r,{container:!0,direction:"row",alignItems:"center",children:[e.jsx(r,{children:e.jsx(k,{variant:"caption",color:"textSecondary",display:"block",children:ae})}),X&&e.jsxs(e.Fragment,{children:[e.jsx(y,{className:a.actionsItemSeparator,variant:"caption",display:"block",children:"|"}),e.jsx(r,{className:a.actionsItemPadding,children:e.jsx(v,{variant:"text",size:"small",onClick:ie,children:B?n.formatMessage(d.unlike):n.formatMessage(d.like)})}),e.jsxs(r,{className:a.actionsItemPadding,children:[B?e.jsx(O,{color:"primary",className:a.loveIcon,fontSize:"x-small"}):e.jsx(Y,{className:a.loveIcon,color:"action",fontSize:"x-small"}),g.length>0?e.jsx(E,{onClick:se,className:a.likeCount,variant:"overline",underline:"hover",children:g.length}):e.jsx(k,{variant:"overline",color:"textSecondary",className:a.likeCount,children:"0"})]})]}),M&&e.jsxs(e.Fragment,{children:[e.jsx(y,{className:a.actionsItemSeparator,variant:"caption",display:"block",children:"|"}),e.jsx(r,{className:a.actionsItemPadding,children:e.jsx(v,{variant:"text",size:"small",onClick:()=>V(s),children:n.formatMessage(d.edit)})})]}),(M||te)&&e.jsxs(e.Fragment,{children:[e.jsx(y,{className:a.actionsItemPadding,variant:"caption",display:"block",children:"|"}),e.jsx(b,{children:e.jsx(v,{variant:"text",size:"small",onClick:oe,disabled:i,children:n.formatMessage(d.delete)})})]})]})})]})]}),ee&&e.jsx(Le,{likes:g,onClose:ne})]})}const Be=t=>{const{classes:s}=Q();return e.jsx("p",{...t.attributes,className:s.commentElement,children:t.children})},d=z({commentEditedAt:{id:"hr.comment-edited-at",defaultMessage:"Edited {date}"},deleteCommentConfirmation:{id:"hr.delete-comment-confirmation",defaultMessage:"Are you sure you want to delete this comment?"},unlike:{id:"common.action.unlike",defaultMessage:"Unlike"},like:{id:"common.action.like",defaultMessage:"Like"},edit:{id:"common.action.edit",defaultMessage:"Edit"},delete:{id:"common.action.delete",defaultMessage:"Delete"}});export{Ae as C,O as L,_ as N,Y as a,Le as b,Te as d,Pe as s};
