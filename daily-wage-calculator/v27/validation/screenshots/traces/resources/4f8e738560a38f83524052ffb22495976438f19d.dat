import{dy as ae,mP as T,dA as se,F as ne,G as ie,d as D,H as W,j as t,P as re,T as u,a as I,aa as oe,hW as G,U as P,V as L,a6 as ye,ab as ve,W as E,r as h,ck as Le,bL as k,a1 as J,a0 as N,cl as xe,a3 as Ne,cm as Ee,cn as _e,a4 as Me,c2 as Re,bN as Ie,b9 as Ue,ar as ze,ai as X,ao as Ge,B as A,jU as Z,ag as $e,a7 as We,cf as He,bI as Oe,S as Qe,bO as Ve,bP as Ke,h$ as qe,bW as je}from"./assets/index-rhBbSAok.js";import{u as H}from"./useTrackEventBaynalytics-qtCjzqQ4__cache.js";import{S as Ye}from"./SectionAccordion-hLcPjIUb__cache.js";import{m as ee,I as $}from"./IntegrationStatus-9y2JvJvV__cache.js";import{R as le,L as Je}from"./LogsTable-RvwGjNTS__cache.js";import{F as Xe}from"./CheckboxInput.form-5LK-WYE6__cache.js";import{F as ce}from"./TextField.form-wfmQrmdl__cache.js";import{u as K}from"./useFieldValue-Rw-eHq2___cache.js";import{s as Ze,S as et}from"./Select-2iMMU_Ha__cache.js";import{P as tt}from"./PageHeading-nXhD4Nsd__cache.js";import{P as at}from"./PageContent-363tIqWz__cache.js";import{S as st,a as nt}from"./SimpleTabs-lEY1Ndzp__cache.js";import{u as it}from"./usePaginatedData-0kYw8CcN__cache.js";import{u as rt}from"./useDialog-gRSbQfEN__cache.js";import{u as ot}from"./usePaginatedQueryParams-pccVBNS1__cache.js";const lt=ae("/companies/{companyId}/integrations/muqeem","post",{apiUrlPrefix:T});function Ae(e={}){const a=lt(Ae);return se({mutationFn:a,...e})}const ct=ne("/companies/{companyId}/integrations/muqeem/detail","get",{isGlobalProgressEnabled:!1,apiUrlPrefix:T});function O(e,a={}){const[s,n]=ct(e,O);return ie({queryKey:s,queryFn:n,...a})}const dt=ae("/companies/{companyId}/integrations/muqeem","put",{apiUrlPrefix:T});function be(e={}){const a=dt(be);return se({mutationFn:a,...e})}var w=(e=>(e.Available="Available",e.ComingSoon="ComingSoon",e))(w||{});const de=(e,a)=>{switch(a){case"Available":return e.formatMessage(ue.available);case"ComingSoon":return e.formatMessage(ue.comingSoon)}},ue=D({available:{id:"hr.settings.integration.feature-status.available",defaultMessage:"Available"},comingSoon:{id:"hr.settings.integration.feature-status.coming-soon",defaultMessage:"Coming Soon"}}),Se=W()(e=>({container:{display:"flex",flexDirection:"column",gap:e.spacing(2),width:"100%",padding:e.spacing(3),minHeight:500},label:{marginRight:e.spacing(1)},accordionTitle:{display:"flex",justifyContent:"space-between",alignItems:"baseline",width:"100%"},featureListItem:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBlock:e.spacing(2)}})),Ce=({features:e})=>{const{classes:a}=Se(),s=I();return t.jsx(t.Fragment,{children:e==null?void 0:e.map(n=>t.jsx(Ye,{"data-external-id":"integration-detailed-card-accordion",title:t.jsxs("div",{className:a.accordionTitle,children:[t.jsx(u,{"data-external-id":"integration-detailed-card-accordion-title",variant:"subtitle1",children:n.title}),n.status&&t.jsx(oe,{"data-external-id":"integration-detailed-card-accordion-title-status",label:de(s,n.status),variant:n.status===w.Available?"success":"info",emphasis:"medium",className:a.label})]}),children:t.jsx("ul",{children:n.integrationFeatureDetails.map(i=>t.jsx("li",{"data-external-id":"integration-detailed-card-accordion-details-list-item",children:t.jsxs("div",{className:a.featureListItem,children:[t.jsx(u,{children:i.title}),t.jsx(oe,{"data-external-id":"integration-detailed-card-accordion-details-list-item-status",label:de(s,i.status),variant:i.status===w.Available?"success":"info",emphasis:"medium",className:a.label})]})},i.title))})},n.title))})},ut=({integrationImage:e,description:a,features:s})=>{const{classes:n}=Se();return t.jsxs(re,{variant:"outlined",className:n.container,"data-external-id":"integration-detailed-card",children:[t.jsx("img",{width:130,src:e,alt:"integration-name"}),t.jsx(u,{"data-external-id":"integration-detailed-card-title",children:a}),t.jsx(Ce,{features:s})]})},me="/react-ts-app/assets/MuqeemIntegrationBanner-L-chw10O__cache.png",mt="/react-ts-app/assets/MuqeemIntegrationBanner@2x-d-CmMBn6__cache.png",gt={[G.En]:"https://bayzathelp.zendesk.com/hc/en-gb/articles/14826187911057-Bayzat-Muqeem-Integration",[G.Ar]:"https://bayzathelp.zendesk.com/hc/ar-ae/articles/14826187911057-%D8%A8%D9%8A%D8%B2%D8%A7%D8%AA-%D8%A7%D9%84%D8%AF%D9%85%D8%AC-%D9%85%D8%B9-%D8%A8%D9%88%D8%A7%D8%A8%D8%A9-%D9%85%D9%82%D9%8A%D9%85"},pt={[G.En]:"https://bayzathelp.zendesk.com/hc/en-gb/articles/14826187911057-Bayzat-Muqeem-Integration#h_05492bea71",[G.Ar]:"https://bayzathelp.zendesk.com/hc/ar-ae/articles/14826187911057-%D8%A8%D9%8A%D8%B2%D8%A7%D8%AA-%D8%A7%D9%84%D8%AF%D9%85%D8%AC-%D9%85%D8%B9-%D8%A8%D9%88%D8%A7%D8%A8%D8%A9-%D9%85%D9%82%D9%8A%D9%85#h_2e85d6ace0"},ft=ae("/companies/{companyId}/integrations/muqeem/deactivate","put",{apiUrlPrefix:T});function we(e={}){const a=ft(we);return se({mutationFn:a,...e})}const ht=ne("/companies/{companyId}/integrations/{integrationType}/logs","get",{isGlobalProgressEnabled:!1,apiUrlPrefix:T});function Fe(e,a={}){const[s,n]=ht(e,Fe);return ie({queryKey:s,queryFn:n,...a})}var te=(e=>(e.InvalidCredentials="InvalidCredentials",e.Custom="Custom",e))(te||{});const yt=W()(e=>({container:{display:"flex",flexDirection:"column",gap:e.spacing(3),width:"100%",minWidth:350,minHeight:500,padding:e.spacing(3)}})),C=D({title:{id:"hr.settings.integrations.activation-detail-card.title",defaultMessage:"Activation Details"},dateTimeLabel:{id:"hr.settings.integrations.activation-detail-card.date-time-label",defaultMessage:"Integration activated on"},integratedBy:{id:"hr.settings.integrations.activation-detail-card.integrated-by",defaultMessage:"Integration activated by"},connectedUsernameLabel:{id:"hr.settings.integrations.activation-detail-card.connected-username-label",defaultMessage:"Connected Username"},notConnectedUsernameLabel:{id:"hr.settings.integrations.username",defaultMessage:"Username"},alertTitle:{id:"hr.settings.integrations.activation-detail-card.alert-title",defaultMessage:"Failed to connect Muqeem"},alertMessage:{id:"hr.settings.integrations.activation-detail-card.alert-message",defaultMessage:"We are unable to connect to Muqeem using {username}"},updateCredentialsButton:{id:"hr.settings.integrations.activation-detail-card.update-credentials-button",defaultMessage:"Update Credentials"}}),vt=({activatedOn:e,integratedBy:a,username:s,errorType:n,customErrorMessage:i,onUpdateCredentials:p})=>{const{classes:m}=yt(),g=I();return t.jsxs(re,{variant:"outlined",className:m.container,"data-external-id":"activation-detail-card",children:[t.jsx("div",{children:t.jsx(u,{"data-external-id":"activation-detail-card-title",variant:"h5",children:g.formatMessage(C.title)})}),t.jsxs("div",{children:[t.jsx(u,{color:"textSecondary",variant:"caption",display:"block",children:g.formatMessage(C.dateTimeLabel)}),t.jsx(u,{"data-external-id":"activation-detail-card-date-time-text",variant:"body1",dir:"ltr",children:e})]}),!n&&t.jsxs("div",{children:[t.jsx(u,{color:"textSecondary",variant:"caption",display:"block",children:g.formatMessage(C.integratedBy)}),t.jsx(u,{"data-external-id":"activation-detail-card-integrated-username",variant:"body1",children:a})]}),t.jsxs("div",{children:[t.jsx(u,{color:"textSecondary",variant:"caption","data-external-id":"activation-detail-card-username-label",display:"block",children:n?g.formatMessage(C.notConnectedUsernameLabel):g.formatMessage(C.connectedUsernameLabel)}),t.jsx(u,{"data-external-id":"activation-detail-card-connected-username",variant:"body1",children:s})]}),n==="InvalidCredentials"&&t.jsx("div",{children:t.jsx(P,{"data-external-id":"invalid-credentials-alert",variant:L.Error,title:g.formatMessage(C.alertTitle),message:g.formatMessage(C.alertMessage,{username:s}),withIcon:!0,primaryAction:{text:g.formatMessage(C.updateCredentialsButton),onClick:()=>p==null?void 0:p()}})}),n==="Custom"&&t.jsx("div",{children:t.jsx(P,{"data-external-id":"custom-error-message-alert",variant:L.Error,title:g.formatMessage(C.alertTitle),message:i,withIcon:!0})})]})},xt="/react-ts-app/assets/ServerIllustration-9hl_wBQu__cache.svg",Mt=e=>t.jsx(ye,{url:xt,...e}),It=D({title:{id:"hr.configuration.integrations.log-empty-state",defaultMessage:"No logs yet"}}),qt=()=>{const e=I();return t.jsx(ve,{Illustration:Mt,title:t.jsx(u,{variant:"h6",mt:2,component:"span",children:e.formatMessage(It.title)})})},jt=ne("/companies/{companyId}/integrations/{integrationType}/logs/filter","get",{isGlobalProgressEnabled:!1,apiUrlPrefix:T});function De(e,a={}){const[s,n]=jt(e,De);return ie({queryKey:s,queryFn:n,...a})}var _=(e=>(e.Muqeem="muqeem",e.Sab="sab",e.Mudad="mudad",e.Gosi="gosi",e))(_||{}),z=(e=>(e.AllIntegrations="AllIntegrations",e.Government="Government",e.Accounting="Accounting",e.Communication="Communication",e))(z||{});const ra=(e,a)=>{switch(a){case"AllIntegrations":return e.formatMessage(U.categoryAllIntegrations);case"Government":return e.formatMessage(U.categoryGovernment);case"Accounting":return e.formatMessage(U.categoryPayrollAndCompliance);case"Communication":return e.formatMessage(U.categoryProductivity)}},oa=["AllIntegrations","Government","Accounting","Communication"],U=D({categoryAllIntegrations:{id:"hr.settings.integration.category-all-integrations",defaultMessage:"All integrations"},categoryGovernment:{id:"hr.settings.integration.category-government",defaultMessage:"Government"},categoryPayrollAndCompliance:{id:"hr.settings.integration.category-payroll-and-compliance",defaultMessage:"Payroll & Compliance"},categoryProductivity:{id:"hr.settings.integration.category-productivity",defaultMessage:"Productivity"}}),At=e=>{switch(e){case"muqeem":return _.Muqeem}},Be=e=>{switch(e){case _.Muqeem:return"muqeem";default:throw new Error(`Unsupported IntegrationType: ${e}`)}},la=e=>{switch(e){case"government":return z.Government;case"accounting":return z.Accounting;case"communication":return z.Communication}},Y=e=>{switch(e){case"coming-soon":return w.ComingSoon;case"available":return w.Available}},ge=e=>{switch(e){case"success":return le.Success;case"error":return le.Failure}},F=D({requestedBy:{id:"app-hradmin.integrations.muqeem-filters.requested-by",defaultMessage:"Requested by"},requestType:{id:"app-hradmin.integrations.muqeem-filters.request-type",defaultMessage:"Request type"},selectRequestedBy:{id:"app-hradmin.integrations.muqeem-filters.select-requested-by",defaultMessage:"Select requested by"},filter:{id:"common.action.filter",defaultMessage:"Filter"},clearFilters:{id:"common.action.clear-filters",defaultMessage:"Clear filters"}}),ke=W()(e=>({filtersWrapper:{display:"flex",flexDirection:"column",gap:e.spacing(1),padding:e.spacing(2)},fieldWrapper:{display:"flex",alignItems:"center",gap:e.spacing(1)},label:{flexGrow:1,flexBasis:"20%"},field:{flexGrow:2,flexBasis:"80%"},filterButton:{alignSelf:"end"},multipleSelectField:{[`& .${Ze.select}`]:{paddingTop:e.spacing(.75)}},multipleSelectFieldSpacing:{display:"inline-flex",gap:e.spacing(.5),flexWrap:"wrap"},filtersSummary:{display:"flex",gap:e.spacing(1),flexWrap:"wrap",alignItems:"baseline"}})),pe=({items:e,label:a,selectedIds:s=new Set,className:n,placeholder:i,disabled:p,onChange:m})=>{const{classes:g,cx:r}=ke(),[f,x]=h.useState(!1),c=h.useRef(!1),o=h.useMemo(()=>s?Array.from(s):[],[s]),q=h.useMemo(()=>Array.from(e.values()),[e]);return t.jsx(et,{className:r(g.multipleSelectField,n),multiple:!0,displayEmpty:!0,value:o,open:f,disabled:p,label:a,onClose:()=>x(!1),onOpen:()=>!c.current&&x(!0),onChange:({target:{value:y}})=>m(new Set(y)),MenuProps:{disablePortal:!0},renderValue:y=>y.length===0?i?t.jsx(u,{variant:"body1",color:"textSecondary",children:i}):null:t.jsx("div",{className:g.multipleSelectFieldSpacing,children:y.map(d=>{var v;return t.jsx(xe,{size:"small",disabled:p,label:(v=e.get(d))==null?void 0:v.name,onDelete:()=>m(new Set(o.filter(M=>M!==d))),onMouseEnter:()=>c.current=!0,onMouseLeave:()=>c.current=!1},d)})}),children:q.map(({id:y,name:d})=>t.jsxs(Ne,{value:y,children:[t.jsx(Ee,{color:"primary",checked:s.has(y)}),t.jsx(_e,{primary:d})]},y))})},fe=({name:e,items:a,selectedIds:s,onDelete:n})=>{const i=h.useMemo(()=>s?Array.from(s):[],[s]),p=h.useMemo(()=>s?s.size:0,[s]);return p===0?null:t.jsx(xe,{color:"secondary",size:"small",label:t.jsxs(t.Fragment,{children:[t.jsx("strong",{children:e})," ",i.map((m,g)=>t.jsxs(h.Fragment,{children:[a.get(m).name,g<p-1?", ":null]},m))]}),onDelete:n})},bt=e=>Me(e),St=({areFiltersExpanded:e,filters:a,setFilters:s,appliedFilters:n,setAppliedFilters:i,onApplyFilters:p,onDismissFilters:m,onClearFilters:g})=>{const r=I(),{classes:f}=ke(),x=E(),{data:c}=De({companyId:x,integrationType:Be(_.Muqeem)},{select:bt}),o=h.useMemo(()=>((c==null?void 0:c.requestTypeList)??[]).reduce((d,{id:v,name:M})=>d.set(v,{id:v,name:M}),new Map),[c==null?void 0:c.requestTypeList]),q=h.useMemo(()=>((c==null?void 0:c.requestedByList)??[]).reduce((d,{id:v,name:M})=>d.set(v,{id:v,name:M}),new Map),[c==null?void 0:c.requestedByList]),y=h.useMemo(()=>n.requestedBy.size>0||n.requestType.size>0,[n]);return t.jsxs(t.Fragment,{children:[e&&t.jsx(Le,{onClickAway:m,children:t.jsxs(re,{variant:"outlined",className:f.filtersWrapper,children:[t.jsxs("div",{className:f.fieldWrapper,children:[t.jsx(u,{variant:"body1",className:f.label,children:r.formatMessage(F.requestedBy)}),t.jsx(pe,{items:q,selectedIds:a.requestedBy,placeholder:r.formatMessage(F.selectRequestedBy),className:f.field,onChange:d=>s(k(v=>({...v,requestedBy:d})))})]}),t.jsx(J,{}),t.jsxs("div",{className:f.fieldWrapper,children:[t.jsx(u,{variant:"body1",className:f.label,children:r.formatMessage(F.requestType)}),t.jsx(pe,{items:o,selectedIds:a.requestType,placeholder:r.formatMessage(F.requestType),className:f.field,onChange:d=>s(k(v=>({...v,requestType:d})))})]}),t.jsx(J,{}),t.jsx(N,{color:"primary",variant:"contained",className:f.filterButton,onClick:p,children:r.formatMessage(F.filter)})]})}),y&&!e&&t.jsxs("div",{className:f.filtersSummary,children:[t.jsx(fe,{name:r.formatMessage(F.requestedBy),items:q,selectedIds:a.requestedBy,onDelete:()=>{i(k(({requestedBy:d})=>{d.clear()})),s(k(({requestedBy:d})=>{d.clear()}))}}),t.jsx(fe,{name:r.formatMessage(F.requestType),items:o,selectedIds:a.requestType,onDelete:()=>{i(k(({requestType:d})=>{d.clear()})),s(k(({requestType:d})=>{d.clear()}))}}),t.jsx(N,{variant:"text",onClick:g,children:r.formatMessage(F.clearFilters)})]})]})},Ct=()=>{const[e,a]=h.useState(!1),[s,n]=h.useState({requestedBy:new Set,requestType:new Set}),[i,p]=h.useState({requestedBy:new Set,requestType:new Set});return[e,s,i,a,p,n,()=>{p(s),a(!1)},()=>{p({requestedBy:new Set,requestType:new Set}),n({requestedBy:new Set,requestType:new Set})},()=>{a(!1),n(i)}]},wt="/react-ts-app/assets/SettingsIllustration-ElyswlyC__cache.svg",Ft=e=>t.jsx(ye,{url:wt,...e}),j=D({configurations:{id:"hr.settings.integration-details.configurations",defaultMessage:"Configurations"},titleIntegrtion:{id:"hr.settings.integration-details.title-integration",defaultMessage:"{title} integration"},deactivateIntegration:{id:"hr.settings.integration-details.deactivate-integration",defaultMessage:"Deactivate integration"},updateCredentials:{id:"hr.settings.integration-details.update-integration-credentials",defaultMessage:"Update {integrationName} credentials"},integrationDetails:{id:"hr.settings.integration-details.update-integration-details",defaultMessage:"Integration details"},rulesAndSettings:{id:"hr.settings.integration-details.rules-and-settings",defaultMessage:"Rules & settings"},logs:{id:"hr.settings.integration-details.logs",defaultMessage:"Logs"},deactivateThisIntegraiton:{id:"hr.settings.integration-details.deactivate-this-integration",defaultMessage:"Deactivate {integrationName} integration"},areYouSure:{id:"hr.settings.integration-details.are-you-sure",defaultMessage:"Are you sure you want to deactivate this integration?"},onceDeactivated:{id:"hr.settings.integration-details.once-you-delete",defaultMessage:"Once Deactivated, you will not be able to perform any of the {integrationName} services via Bayzat untill you Reactivate the {integrationName} integration"},filters:{id:"hr.settings.integration-details.filters",defaultMessage:"Filters"},noRulesAndSettingsAvailable:{id:"hr.settings.integration-details.no-rules-and-settings-available",defaultMessage:"No rules and settings are available for this integration."}}),Dt=({integrationDetails:e,onUpdateClick:a})=>{const s=Ge();return t.jsxs(A,{display:"flex",gap:2,children:[t.jsx(A,{width:"60%",children:t.jsx(ut,{integrationImage:e.integrationInfo.iconUrl,description:e.integrationInfo.description,features:e.integrationInfo.serviceGroupList})}),t.jsx(A,{width:"40%",children:t.jsx(vt,{activatedOn:e.integrationActivationInfo.activatedOn?s({date:Z(e.integrationActivationInfo.activatedOn),dateFormat:"full",timeFormat:"no-seconds"}):"",integratedBy:e.integrationActivationInfo.activatedByName||"",username:e.integrationActivationInfo.username||"",errorType:e.integrationActivationInfo.status===$.Error?te.Custom:e.integrationActivationInfo.status===$.NeedsUpdateCredentials?te.InvalidCredentials:void 0,customErrorMessage:e.integrationActivationInfo.errorMessage,onUpdateCredentials:a})})]})},Bt=e=>{const a=We(e);return{data:a.data.map(s=>({...s,date:Z(s.dateTime),requestStatus:ge(s.requestStatus),details:s.details.map(n=>({...n,apiActionName:n.apiName,actionTime:Z(n.actionTime),requestStatus:ge(n.status)}))})),pagination:a.pagination}},kt={offset:0,limit:5},Tt=()=>{const e=E(),a=I(),s=H("integrations.muqeem"),[n,i,p]=ot(kt,{}),[m,g,r,f,x,c,o,q,y]=Ct(),{data:d,isPending:v}=Fe({companyId:e,integrationType:Be(_.Muqeem),filters:{requestedByIds:Array.from(r.requestedBy),requestTypeIds:Array.from(r.requestType)},pagination:n.pagination},{select:Bt,placeholderData:$e}),[M,B]=it(d,i);return h.useEffect(()=>{s({event:"load_integrationLogs"})},[s]),v?t.jsx(X,{height:200}):t.jsx(t.Fragment,{children:r.requestType.size===0&&r.requestedBy.size===0&&M.length===0?t.jsx(qt,{}):t.jsxs(t.Fragment,{children:[t.jsx(N,{variant:"outlined",onClick:()=>f(b=>!b),children:a.formatMessage(j.filters)}),m&&t.jsx(A,{mt:2}),t.jsx(St,{areFiltersExpanded:m,filters:g,setFiltersExpanded:f,appliedFilters:r,onApplyFilters:o,onClearFilters:q,onDismissFilters:y,setAppliedFilters:x,setFilters:c}),t.jsx(A,{mt:2}),t.jsx(Je,{data:M,onPageChange:p,pagination:B,totalRowCount:B.total})]})})},Pt=({selectedTab:e,integrationDetails:a,onUpdateClick:s})=>{const n=I();switch(e){case"IntegrationDetails":return t.jsx(Dt,{integrationDetails:a,onUpdateClick:s});case"Logs":return t.jsx(Tt,{});case"RulesAndSettings":return t.jsx(ve,{size:"medium",Illustration:Ft,title:n.formatMessage(j.noRulesAndSettingsAvailable)})}},Q=e=>{var s;const a=Me(e);return{...a,target:At(a.type),integrationInfo:{...a.integrationInfo,serviceGroupList:a.integrationInfo.serviceGroupList.map(n=>({title:n.name,status:n.serviceList.every(i=>Y(i.status)===w.Available)?w.Available:n.serviceList.every(i=>Y(i.status)===w.ComingSoon)?w.ComingSoon:void 0,integrationFeatureDetails:n.serviceList.map(i=>({title:i.name,status:Y(i.status)}))}))},integrationActivationInfo:{...a.integrationActivationInfo,status:(s=a.integrationActivationInfo)!=null&&s.status?ee(a.integrationActivationInfo.status):void 0}}},he=()=>{const e=E(),a=I(),s=H("integrations.muqeem"),[n,i]=h.useState("IntegrationDetails"),[p,m]=h.useState(!1),{confirm:g}=rt(),r=Re(),{handleRequestExceptionAlert:f}=Ie(),x=Ue(),c=[{key:"IntegrationDetails",title:a.formatMessage(j.integrationDetails)},{key:"RulesAndSettings",title:a.formatMessage(j.rulesAndSettings)},{key:"Logs",title:a.formatMessage(j.logs)}],{data:o,isPending:q,isFetching:y,isError:d,refetch:v}=O({companyId:e},{select:Q}),{mutateAsync:M}=we(),B=async()=>{await g({title:a.formatMessage(j.deactivateThisIntegraiton,{integrationName:o==null?void 0:o.integrationInfo.name}),content:t.jsxs(t.Fragment,{children:[t.jsx(u,{color:"text.primary",variant:"subtitle1",mb:2,children:a.formatMessage(j.areYouSure)}),t.jsx(P,{withIcon:!0,variant:L.Warning,message:a.formatMessage(j.onceDeactivated,{integrationName:o==null?void 0:o.integrationInfo.name})})]}),"data-external-id":"deactivate-confirm-dialog",confirmButton:{onClick:async()=>{try{await M({companyId:e}),s({event:"click_deactivateMuqeem"}),r.success({message:"Deactivated succesfully"}),x.push("/settings/integrations")}catch(S){f(S)}},color:"error",text:"Deactivate"},cancelButton:{text:"Close",show:!0}})},b=()=>{s({event:"click_updateMuqeemCredentials"}),m(!0)},R=()=>{v(),m(!1)};return d||!y&&(o==null?void 0:o.integrationActivationInfo.status)===void 0?t.jsx(ze,{to:"/not-found"}):t.jsxs(at,{"data-external-id":"integration-details",header:t.jsxs(t.Fragment,{children:[t.jsx(tt,{title:a.formatMessage(j.titleIntegrtion,{title:o==null?void 0:o.integrationInfo.name}),breadcrumbs:{paths:[{to:"/settings/integrations",title:a.formatMessage(j.configurations)},{title:(o==null?void 0:o.integrationInfo.name)??""}]},buttons:q?[t.jsx(X,{height:20,width:100},0),t.jsx(X,{height:20,width:100},1)]:[t.jsx(N,{variant:"outlined",onClick:B,children:a.formatMessage(j.deactivateIntegration)},0),t.jsx(N,{onClick:b,variant:"contained",children:a.formatMessage(j.updateCredentials,{integrationName:o==null?void 0:o.integrationInfo.name})},1)]}),t.jsx(J,{})]}),tabs:t.jsx(st,{value:n,onChange:(S,Pe)=>i(Pe),children:c.map(S=>t.jsx(nt,{label:S.title,value:S.key,"data-external-id":`${S.key}-tab`},S.key))}),bodyProps:{paddingBottom:3},children:[o&&t.jsx(Pt,{selectedTab:n,integrationDetails:o,onUpdateClick:()=>m(!0)}),t.jsx(Wt,{purpose:Te.UpdateCredentials,onClose:()=>m(!1),onSuccess:R,open:p})]})},ca=Object.freeze(Object.defineProperty({__proto__:null,MuqeemIntegrationDetailsRoute:he,default:he,selectIntegrationDetails:Q},Symbol.toStringTag,{value:"Module"}));var Te=(e=>(e.UpdateCredentials="UpdateCredentials",e.AddCredentials="NewCredentials",e))(Te||{});const l=D({close:{id:"hr.settings.integrations.muqeem-integration-modal.close",defaultMessage:"Close"},connect:{id:"hr.settings.integrations.muqeem-integration-modal.connect",defaultMessage:"Connect"},addCredentialsTitle:{id:"hr.settings.integrations.muqeem-integration-modal.add-title",defaultMessage:"Integrate with Muqeem and enjoy the benefits ðŸ‘‡"},updateCredentialsTitle:{id:"hr.settings.integrations.muqeem-integration-modal.update-title",defaultMessage:"Update Muqeem credentials"},subtitle:{id:"hr.settings.integrations.muqeem-integration-modal.subtitle",defaultMessage:"Enter your Muqeem username and password"},username:{id:"hr.settings.integrations.username",defaultMessage:"Username"},password:{id:"hr.settings.integrations.muqeem-integration-modal.password",defaultMessage:"Password"},dontHaveAnAccount:{id:"hr.settings.integrations.muqeem-integration-modal.dont-have-account",defaultMessage:"Don't have an existing account? <link>Create new account</link>"},connectionSuccessfull:{id:"hr.settings.integrations.muqeem-integration-modal.connection-successfull",defaultMessage:"Connection Successful ðŸŽ‰"},updateSuccessfull:{id:"hr.settings.integrations.muqeem-integration-modal.update-successfull",defaultMessage:"Muqeem username and password updated Successful ðŸŽ‰"},successfullMessage:{id:"hr.settings.integrations.muqeem-integration-modal.successfull-message",defaultMessage:"Bayzat has been successfully connected with Muqeem with username {username} If you wish to update this in the future, you can do it under Configurations > Integrations"},errorMessage:{id:"common.error.try-again-later",defaultMessage:"An error happened, please try again later."},muqeemInfo:{id:"hr.settings.integrations.muqeem-integration-modal.muqeem-info",defaultMessage:"Bayzat's integration with Muqeem allows you to perform the below Muqeem services from the Bayzat platform, while also updating the relevant information directly on to the Bayzat platform. <link>Learn more</link>"},integrateNow:{id:"hr.settings.integrations.muqeem-integration-modal.integrate-now",defaultMessage:"Integrate now"},update:{id:"hr.settings.integrations.muqeem-integration-modal.update",defaultMessage:"Update"},invalidUsernameOrPassword:{id:"hr.settings.integrations.muqeem-integration-modal.invalid-username-or-password",defaultMessage:"Invalid username and password, please enter a valid username and password"},step1ActivateMuqeem:{id:"hr.settings.integrations.muqeem-integration-modal.activate-muqeem-api",defaultMessage:"Step 1: Activate Muqeem API service for Bayzat"},continue:{id:"common.action.continue",defaultMessage:"Continue"},stepsInvolved:{id:"hr.settings.integrations.muqeem-integration-modal.steps-involved",defaultMessage:"Steps involved:"},activationInfoStep1:{id:"hr.settings.integrations.muqeem-integration-modal.create-muqeem-conprehensive-account",defaultMessage:"1. Create Muqeem Comprehensive (Shamel) account"},activationInfoStep2:{id:"hr.settings.integrations.muqeem-integration-modal.add-new-subscription-on-muqeem",defaultMessage:"2. Add new subscription on Muqeem portal Bayzat API"},activationInfoStep3:{id:"hr.settings.integrations.muqeem-integration-modal.wait-for-bayzat",defaultMessage:"3. Wait for bayzat to approve"},activationInfoStep4:{id:"hr.settings.integrations.muqeem-integration-modal.receive-invoice-on-muqeem",defaultMessage:"4. Receive the invoice on Muqeem portal"},activationInfoStep5:{id:"hr.settings.integrations.muqeem-integration-modal.make-the-payment-via-sadad",defaultMessage:"5. Make the payment via Sadad"},needHelpInActivation:{id:"hr.settings.integrations.muqeem-integration-modal.need-help-activating-muqeem",defaultMessage:"Need help activating Muqeem API service?"},readHelpArticle:{id:"hr.settings.integrations.muqeem-integration-modal.read-help-article",defaultMessage:"Read help article"},iConfirmMuqeemActivation:{id:"hr.settings.integrations.muqeem-integration-modal.i-confirm-muqeem-activation",defaultMessage:"I confirm that I have completed the above steps and activated the Muqeem API service for Bayzat"}}),Lt=W()(e=>({alert:{marginBottom:e.spacing(1)}})),V=({children:e})=>t.jsxs(A,{width:"600px",minHeight:400,children:[t.jsx(A,{display:"flex",justifyContent:"center",paddingTop:1,paddingBottom:5,children:t.jsx("img",{src:me,srcSet:`${me} 1x, ${mt} 2x`,alt:"MuqeemIntegrationBanner"})}),e]}),Nt=({username:e,isAddCredentials:a})=>{const s=I();return t.jsxs(V,{children:[t.jsx(u,{paddingBottom:1,variant:"h5",children:a?s.formatMessage(l.connectionSuccessfull):s.formatMessage(l.updateSuccessfull)}),t.jsx(u,{paddingBottom:1,variant:"body2",color:"textSecondary",children:s.formatMessage(l.successfullMessage,{username:e})})]})},Et=()=>{const e=I(),{locale:a}=qe();return t.jsxs(V,{children:[t.jsx(u,{variant:"h5",color:"textPrimary",children:e.formatMessage(l.step1ActivateMuqeem)}),t.jsx(u,{mt:2,color:"textPrimary",children:e.formatMessage(l.stepsInvolved)}),t.jsx(u,{color:"textPrimary",ml:1,children:e.formatMessage(l.activationInfoStep1)}),t.jsx(u,{color:"textPrimary",ml:1,children:e.formatMessage(l.activationInfoStep2)}),t.jsx(u,{color:"textPrimary",ml:1,children:e.formatMessage(l.activationInfoStep3)}),t.jsx(u,{color:"textPrimary",ml:1,children:e.formatMessage(l.activationInfoStep4)}),t.jsx(u,{color:"textPrimary",ml:1,children:e.formatMessage(l.activationInfoStep5)}),t.jsx(A,{mt:1}),t.jsx(P,{variant:L.Info,withIcon:!0,message:e.formatMessage(l.needHelpInActivation),primaryAction:{link:{to:pt[a],external:!0,target:"_blank"},text:e.formatMessage(l.readHelpArticle)}}),t.jsx(Xe,{name:"confirmStepsCompleted",label:e.formatMessage(l.iConfirmMuqeemActivation)})]})},_t=({errorMessage:e})=>{const a=I(),{classes:s}=Lt(),n=H("integrations.muqeem-dialog");return t.jsxs(V,{children:[t.jsx(u,{paddingBottom:1,variant:"h5",children:a.formatMessage(l.subtitle)}),e&&t.jsx(P,{className:s.alert,variant:L.Error,title:e,withIcon:!0}),t.jsxs(A,{width:"70%",children:[t.jsx(ce,{label:a.formatMessage(l.username),name:"username",fullWidth:!0,required:!0,placeholder:"Username"}),t.jsx(ce,{label:a.formatMessage(l.password),name:"password",type:"password",fullWidth:!0,required:!0,placeholder:"Password"})]}),t.jsx(A,{display:"flex",children:t.jsx(u,{paddingBottom:1,variant:"body2",children:a.formatMessage(l.dontHaveAnAccount,{link:i=>t.jsx(je,{external:!0,onClick:()=>n({event:"click_LearnMore"}),variant:"body2",to:"https://muqeem.sa/#/reg/request",target:"_blank",children:i})})})})]})},Rt=()=>{const e=I(),a=E(),{locale:s}=qe(),{data:n}=O({companyId:a},{select:Q});return t.jsxs(V,{children:[t.jsx(u,{paddingBottom:3,variant:"body2",color:"textSecondary",children:e.formatMessage(l.muqeemInfo,{link:i=>t.jsx(je,{external:!0,to:gt[s],target:"_blank",children:i})})}),t.jsx(Ce,{features:(n==null?void 0:n.integrationInfo.serviceGroupList)??[]})]})},Ut={Success:Nt,ActivationInfo:Et,Input:_t,Information:Rt},zt=({activeStep:e,password:a,username:s,confirmStepsCompleted:n})=>e==="Information"?!1:e==="ActivationInfo"?!n:!a||!s,Gt=({activeStep:e,isAddCredentials:a,intl:s})=>e==="Information"?s.formatMessage(l.integrateNow):e==="ActivationInfo"?s.formatMessage(l.continue):a?s.formatMessage(l.connect):s.formatMessage(l.update),$t=({onSubmit:e,onIntegrateNow:a,open:s,onClose:n,onContinue:i,onSuccess:p,isAddCredentials:m,errorMessage:g,activeStep:r})=>{const f=I(),x=Oe(),c=K("username"),o=K("password"),q=K("confirmStepsCompleted"),y=Ut[r];return h.useEffect(()=>{s&&x.reset()},[s,x]),t.jsx(Qe,{maxWidth:"md",title:m?f.formatMessage(l.addCredentialsTitle):f.formatMessage(l.updateCredentialsTitle),open:s,content:t.jsx(y,{isAddCredentials:m,username:c,errorMessage:g}),confirmButton:{show:r==="Input"||r==="Information"||r==="ActivationInfo",onClick:r==="Input"?e:r==="ActivationInfo"?i:a,text:Gt({activeStep:r,isAddCredentials:m,intl:f}),disabled:zt({username:c,password:o,confirmStepsCompleted:q,activeStep:r})},cancelButton:{show:!0,onClick:r==="Success"?p:n,text:f.formatMessage(l.close)},keepMounted:!1,autoFocusConfirmButton:!1})};function Wt({purpose:e="NewCredentials",...a}){const s=E(),n=I(),i=H("integrations.muqeem-dialog"),{handleRequestExceptionAlert:p}=Ie(),m=e==="NewCredentials"?"Information":"Input",[g,r]=h.useState(m),[f,x]=h.useState(""),c=e==="NewCredentials",{data:o}=O({companyId:s},{select:Q,enabled:!c}),{mutateAsync:q}=Ae(),{mutateAsync:y}=be();h.useEffect(()=>{a.open&&(x(""),r(m))},[m,a.open]);const d=async({username:M,password:B})=>{try{const b=await(c?q:y)({companyId:s,username:M,password:B});ee(b.payload.data.result)===$.Error?(x(n.formatMessage(l.errorMessage)),i({event:"connectionError_unknownMuqeemError"})):ee(b.payload.data.result)===$.NeedsUpdateCredentials?(x(n.formatMessage(l.invalidUsernameOrPassword)),i({event:"connectionError_incorrectCredentials"})):(r("Success"),i({event:"connectionSuccess"}))}catch(b){p(b,{skipDefaultHandler:!0});const R=Ve(b);if(R){const S=Ke({reason:R,defaultMessage:n.formatMessage(l.errorMessage)});x(S)}else x(n.formatMessage(l.errorMessage))}},v=()=>{i({event:c?"click_integrateNow":"click_updateMuqeemCredentials"}),r("ActivationInfo")};return t.jsx(He,{onSubmit:d,initialValues:{username:o==null?void 0:o.integrationActivationInfo.username,password:""},render:({handleSubmit:M})=>t.jsx($t,{...a,onIntegrateNow:v,onContinue:()=>r("Input"),onSubmit:M,errorMessage:f,activeStep:g,isAddCredentials:c})})}export{Te as D,_ as I,Wt as M,oa as a,z as b,gt as c,At as d,la as e,ca as f,ra as i,Be as m,O as u};
