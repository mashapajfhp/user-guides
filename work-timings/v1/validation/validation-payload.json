{
  "nextVersion": "v1",
  "feature_info": {
    "feature_name": "work_timings",
    "feature_slug": "work-timings",
    "next_version": "v1"
  },
  "primary_entity": {
    "discovery_instructions": [
      "Identify what the main item/entity is for this feature (e.g., ticket, workflow, employee, record)",
      "Look for list/table views - the rows represent the primary entity",
      "Check page headers and breadcrumbs for entity naming",
      "Note the singular and plural forms used in the UI"
    ],
    "crud_operations": {
      "create": {
        "action": "Create new item",
        "find_trigger": [
          "Look for buttons with: + Add, + Create, + New, plus icon",
          "Check top-right corner of the page",
          "Check for floating action buttons (FAB)",
          "Look in empty state messages for create prompts"
        ],
        "validation": "New item appears in list with unique identifier"
      },
      "read": {
        "action": "View item details",
        "find_trigger": [
          "Click on any row in a list/table",
          "Look for 'View' or eye icon buttons",
          "Check if rows are clickable (cursor changes)"
        ],
        "validation": "Detail panel, modal, or page opens showing full information"
      },
      "update": {
        "action": "Edit/modify item",
        "find_trigger": [
          "Look for Edit button, pencil icon",
          "Check for inline editing (click on field to edit)",
          "Look for status change dropdowns or buttons",
          "Check action menus (three-dot menu) for edit option"
        ],
        "validation": "Changes persist after save, reflected in list view"
      },
      "delete": {
        "action": "Delete/remove item",
        "find_trigger": [
          "Look for Delete button, trash icon",
          "Check action menus (three-dot menu) for delete option",
          "Look for bulk delete with checkboxes",
          "Some features use 'Archive' or 'Cancel' instead of delete"
        ],
        "validation": "Item removed from list or status changed to deleted/archived"
      }
    }
  },
  "exploration_phase": {
    "enabled": true,
    "run_before_what_to_do": true,
    "instructions": [
      "Navigate to the feature's main section",
      "Take a full page snapshot to understand the layout",
      "Identify the primary entity",
      "Find ALL clickable elements: buttons, links, tabs, dropdowns, icons",
      "Map the navigation structure: tabs, sidebar items, breadcrumbs",
      "Click each tab/sub-section and document what appears",
      "Locate CRUD controls for the primary entity",
      "Check for action menus (three-dot menus, right-click menus)",
      "Document any modals, dialogs, slide-out panels",
      "Identify form fields and input types when forms appear",
      "Look for filters, search, sort, and export options",
      "Check for bulk action controls (checkboxes, select all)",
      "Note any settings or configuration options"
    ],
    "discovery_targets": [
      "Primary action buttons (create/add new item)",
      "List/table of items with row actions",
      "Detail view or edit forms",
      "Status indicators and state changes",
      "Filter and search controls",
      "Navigation tabs within the feature",
      "Settings or configuration sections",
      "Related features or cross-links"
    ]
  },
  "prd_context": {
    "how_it_works_summary": [
      "Users select multiple line items using checkboxes to perform bulk actions such as updating custom data, merging, or deleting line items with automatic recalculations.",
      "Admins configure leave policies to allow hourly leave requests with specified minimum and maximum hours, and the system calculates leave hours against balances and routes for approval.",
      "The accounts payable automation flow includes invoice upload, OCR data extraction, vendor management, approval workflows, and payment processing with bank integration."
    ],
    "key_actions_steps": [
      "Select multiple line items via checkboxes or Select All; use floating action bar for Update custom data, Merge, or Delete.",
      "Enable hourly leave toggle in leave policy; employees select hourly leave option and enter From and To timestamps; system calculates duration and converts to day equivalent; leave request follows approval workflow.",
      "Upload invoice, OCR processing, vendor selection or creation, edit invoice details, submit for approval, approver reviews and approves or rejects, payment queued and processed."
    ],
    "rules_limitations_constraints": [
      "Merge disabled if only one item selected; merge blocked if tax rates differ; custom data fields vary by company; required fields validated at submission; delete requires confirmation.",
      "From/To timestamps for record only; disabling toggle prevents future requests but existing remain valid; hourly leave overrides day off but not full day leave; published shifts cannot be overridden.",
      "Banking integration limited to corporate banks; role-based permissions strictly enforced; status workflow linear; cancelled invoices terminal; OCR may fail requiring draft editing."
    ],
    "data_inputs_required": [
      "Line item selection via checkboxes; custom data field values; tax rates for merge validation; quantity and amounts.",
      "Hours-to-day conversion rate; hourly leave toggle enabled; leave request timestamps; leave type; employee info; shift schedule; work timing config.",
      "Invoice document; invoice data fields; vendor info; user roles; bank integration credentials; approval decisions."
    ],
    "edge_cases_warnings": [
      "Different tax values for merge cause toast error; no custom fields hides update option; conflicting custom data results in blank merged values.",
      "Hourly leave spanning multiple shifts; shift deletion does not affect leaves; toggle off then on restores option; no shift still allows hourly leave.",
      "OCR scanning errors; bank integration failures; overdue due dates; rejected invoices editable; cancelled invoices unrecoverable."
    ],
    "hierarchical_task_analysis": [
      "Select items individually or all; bulk update custom data via modal; merge items with tax rate verification; delete with confirmation and renumbering.",
      "Configure policy toggle and conversion rate; employee selects hourly leave and enters timestamps; approval workflow; balance update; scheduler and attendance handling.",
      "Invoice ingestion via upload or email; vendor management; invoice processing and editing; approval workflow; payment processing; monitoring and reporting."
    ]
  },
  "detected_integrations": {
    "has_workflows": true,
    "workflow_evidence": "Hourly leave requests follow a standard approval workflow; invoice processing includes approval and payment workflows; bulk line item actions trigger automatic recalculations.",
    "has_approval_flow": true,
    "approval_evidence": "Hourly leave requests require manager approval; invoice approvals involve review and approval or rejection; leave and invoice workflows include multi-step approval processes."
  },
  "workflow_exploration": {
    "enabled": true,
    "priority": "required",
    "evidence": "Hourly leave requests follow a standard approval workflow; invoice processing includes approval and payment workflows; bulk line item actions trigger automatic recalculations.",
    "check_instructions": [
      "Navigate to Automations in the left sidebar",
      "Click on Workflows",
      "Click + Create workflow (or similar create button)",
      "In trigger selection, search for this feature's name",
      "Check if this feature appears as a trigger source",
      "Document any trigger events found (e.g., 'item created', 'status changed')",
      "Check Actions section for actions related to this feature",
      "Screenshot available triggers and actions"
    ],
    "nav_path": "Automations → Workflows → + Create workflow"
  },
  "approval_flow_exploration": {
    "enabled": true,
    "priority": "required",
    "evidence": "Hourly leave requests require manager approval; invoice approvals involve review and approval or rejection; leave and invoice workflows include multi-step approval processes.",
    "check_instructions": [
      "Look for 'Approval' or 'Pending Approval' status in the feature",
      "Check if items have approval workflow indicators",
      "Look for 'Submit for Approval' buttons or actions",
      "Find approval settings in feature configuration",
      "Document the approval chain (who approves what)",
      "Test approval/rejection flow if test data available",
      "Check for approval history or audit trail",
      "Screenshot approval-related UI elements"
    ],
    "detection_signals": [
      "Status dropdown with 'Pending Approval' option",
      "Approve/Reject buttons",
      "Approval history section",
      "'Requires approval' toggle in settings",
      "Approver assignment fields"
    ]
  },
  "execution_order": [
    "1. EXPLORATION: Navigate to feature and discover all UI elements",
    "2. IDENTIFY ENTITY: Determine what the primary item/entity is",
    "3. CRUD TEST: Test create, read, update, delete for the primary entity",
    "4. WORKFLOW CHECK: Verify if feature has workflow triggers/actions",
    "5. APPROVAL FLOW: Test approval process if present",
    "6. WHAT_TO_DO: Execute specific validation tasks from payload",
    "7. WHAT_TO_WATCH_OUT_FOR: Validate constraints, limitations, and edge cases",
    "8. DOCUMENTATION: Capture screenshots of key screens"
  ],
  "what_to_watch_out_for": [
    {
      "issue": "Lack of visibility and notification for work timing configuration changes impacting attendance calculations.",
      "limitation": "Users cannot easily see or track changes to work timing settings or understand their impact on attendance without technical navigation.",
      "workaround": "Manual audit log checks by admins; user training to understand configuration impacts.",
      "jira_reference": "TSSD-3503,TSSD-3575,TSSD-393",
      "severity": "Medium"
    },
    {
      "issue": "Inflexible attendance tracking for non-standard shifts, 24-hour shifts, and back-to-back shifts.",
      "limitation": "System restricts check-in/out times and lacks flexible timing rules for complex shift scenarios.",
      "workaround": "Manual adjustments or workaround scheduling outside system constraints.",
      "jira_reference": "AV-8693,AV-8454",
      "severity": "High"
    },
    {
      "issue": "Missing export capability for work timing configurations.",
      "limitation": "Users cannot download or export configured work timings directly.",
      "workaround": "Rely on support team or manual documentation sharing.",
      "jira_reference": "TSSD-3642",
      "severity": "Medium"
    },
    {
      "issue": "Limited UI controls for time input and attendance configuration.",
      "limitation": "Basic text inputs for time entry increase error risk; lack of multi-level timing rules and flexible late arrival/early departure settings.",
      "workaround": "Careful manual entry and monitoring; limited configuration options.",
      "jira_reference": "AV-2008,AV-7710,AV-7711",
      "severity": "Medium"
    }
  ],
  "playwright_context": {
    "feature_metadata": {
      "name": "Work Timings",
      "slug": "work-timings",
      "category": "time",
      "version": "",
      "is_new": null
    },
    "prd_context": {
      "how_it_works_summary": [
        "Users select multiple line items using checkboxes to perform bulk actions such as updating custom data, merging, or deleting line items with automatic recalculations.",
        "Admins configure leave policies to allow hourly leave requests with specified minimum and maximum hours, and the system calculates leave hours against balances and routes for approval.",
        "The accounts payable automation flow includes invoice upload, OCR data extraction, vendor management, approval workflows, and payment processing with bank integration."
      ],
      "key_actions_steps": [
        "Select multiple line items via checkboxes or Select All; use floating action bar for Update custom data, Merge, or Delete.",
        "Enable hourly leave toggle in leave policy; employees select hourly leave option and enter From and To timestamps; system calculates duration and converts to day equivalent; leave request follows approval workflow.",
        "Upload invoice, OCR processing, vendor selection or creation, edit invoice details, submit for approval, approver reviews and approves or rejects, payment queued and processed."
      ],
      "rules_limitations_constraints": [
        "Merge disabled if only one item selected; merge blocked if tax rates differ; custom data fields vary by company; required fields validated at submission; delete requires confirmation.",
        "From/To timestamps for record only; disabling toggle prevents future requests but existing remain valid; hourly leave overrides day off but not full day leave; published shifts cannot be overridden.",
        "Banking integration limited to corporate banks; role-based permissions strictly enforced; status workflow linear; cancelled invoices terminal; OCR may fail requiring draft editing."
      ],
      "data_inputs_required": [
        "Line item selection via checkboxes; custom data field values; tax rates for merge validation; quantity and amounts.",
        "Hours-to-day conversion rate; hourly leave toggle enabled; leave request timestamps; leave type; employee info; shift schedule; work timing config.",
        "Invoice document; invoice data fields; vendor info; user roles; bank integration credentials; approval decisions."
      ],
      "edge_cases_warnings": [
        "Different tax values for merge cause toast error; no custom fields hides update option; conflicting custom data results in blank merged values.",
        "Hourly leave spanning multiple shifts; shift deletion does not affect leaves; toggle off then on restores option; no shift still allows hourly leave.",
        "OCR scanning errors; bank integration failures; overdue due dates; rejected invoices editable; cancelled invoices unrecoverable."
      ],
      "hierarchical_task_analysis": [
        "Select items individually or all; bulk update custom data via modal; merge items with tax rate verification; delete with confirmation and renumbering.",
        "Configure policy toggle and conversion rate; employee selects hourly leave and enters timestamps; approval workflow; balance update; scheduler and attendance handling.",
        "Invoice ingestion via upload or email; vendor management; invoice processing and editing; approval workflow; payment processing; monitoring and reporting."
      ]
    },
    "detected_integrations": {
      "has_workflows": true,
      "workflow_evidence": "Hourly leave requests follow a standard approval workflow; invoice processing includes approval and payment workflows; bulk line item actions trigger automatic recalculations.",
      "has_approval_flow": true,
      "approval_evidence": "Hourly leave requests require manager approval; invoice approvals involve review and approval or rejection; leave and invoice workflows include multi-step approval processes."
    },
    "what_to_do": [
      {
        "task": "Manage work timings and attendance through configuration, bulk actions, and leave requests aligned with company policies and approval workflows.",
        "steps": [
          "Select multiple line items using checkboxes or Select All to perform bulk updates, merges, or deletions.",
          "Configure hourly leave policies by enabling toggles and setting hours-to-day conversion rates.",
          "Employees submit hourly leave requests by entering From and To timestamps and selecting leave type.",
          "Approve or reject leave requests through the standard approval workflow.",
          "Process invoices by uploading, editing details, submitting for approval, and managing payments.",
          "Review and adjust work timing configurations and attendance records as needed."
        ],
        "expected_outcome": "Bulk actions update line items correctly with validations; hourly leave requests are calculated, approved, and reflected in balances and attendance; invoices follow approval and payment workflows; work timings are accurately configured and tracked.",
        "source_articles": [
          "14243704039185"
        ]
      }
    ],
    "what_to_watch_out_for": [
      {
        "issue": "Lack of visibility and notification for work timing configuration changes impacting attendance calculations.",
        "limitation": "Users cannot easily see or track changes to work timing settings or understand their impact on attendance without technical navigation.",
        "workaround": "Manual audit log checks by admins; user training to understand configuration impacts.",
        "jira_reference": "TSSD-3503,TSSD-3575,TSSD-393",
        "severity": "Medium"
      },
      {
        "issue": "Inflexible attendance tracking for non-standard shifts, 24-hour shifts, and back-to-back shifts.",
        "limitation": "System restricts check-in/out times and lacks flexible timing rules for complex shift scenarios.",
        "workaround": "Manual adjustments or workaround scheduling outside system constraints.",
        "jira_reference": "AV-8693,AV-8454",
        "severity": "High"
      },
      {
        "issue": "Missing export capability for work timing configurations.",
        "limitation": "Users cannot download or export configured work timings directly.",
        "workaround": "Rely on support team or manual documentation sharing.",
        "jira_reference": "TSSD-3642",
        "severity": "Medium"
      },
      {
        "issue": "Limited UI controls for time input and attendance configuration.",
        "limitation": "Basic text inputs for time entry increase error risk; lack of multi-level timing rules and flexible late arrival/early departure settings.",
        "workaround": "Careful manual entry and monitoring; limited configuration options.",
        "jira_reference": "AV-2008,AV-7710,AV-7711",
        "severity": "Medium"
      }
    ],
    "consolidation_summary": {
      "prds_received": 3,
      "prds_consolidated": 3,
      "zendesk_articles_received": 6,
      "tasks_consolidated": 1,
      "jira_tickets_received": 13,
      "jira_tickets_consolidated": 4
    }
  }
}