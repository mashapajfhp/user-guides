{
  "nextVersion": "v1",
  "feature_info": {
    "feature_name": "leave_management",
    "feature_slug": "leave-management",
    "next_version": "v1"
  },
  "primary_entity": {
    "discovery_instructions": [
      "Identify what the main item/entity is for this feature (e.g., ticket, workflow, employee, record)",
      "Look for list/table views - the rows represent the primary entity",
      "Check page headers and breadcrumbs for entity naming",
      "Note the singular and plural forms used in the UI"
    ],
    "crud_operations": {
      "create": {
        "action": "Create new item",
        "find_trigger": [
          "Look for buttons with: + Add, + Create, + New, plus icon",
          "Check top-right corner of the page",
          "Check for floating action buttons (FAB)",
          "Look in empty state messages for create prompts"
        ],
        "validation": "New item appears in list with unique identifier"
      },
      "read": {
        "action": "View item details",
        "find_trigger": [
          "Click on any row in a list/table",
          "Look for 'View' or eye icon buttons",
          "Check if rows are clickable (cursor changes)"
        ],
        "validation": "Detail panel, modal, or page opens showing full information"
      },
      "update": {
        "action": "Edit/modify item",
        "find_trigger": [
          "Look for Edit button, pencil icon",
          "Check for inline editing (click on field to edit)",
          "Look for status change dropdowns or buttons",
          "Check action menus (three-dot menu) for edit option"
        ],
        "validation": "Changes persist after save, reflected in list view"
      },
      "delete": {
        "action": "Delete/remove item",
        "find_trigger": [
          "Look for Delete button, trash icon",
          "Check action menus (three-dot menu) for delete option",
          "Look for bulk delete with checkboxes",
          "Some features use 'Archive' or 'Cancel' instead of delete"
        ],
        "validation": "Item removed from list or status changed to deleted/archived"
      }
    }
  },
  "exploration_phase": {
    "enabled": true,
    "run_before_what_to_do": true,
    "instructions": [
      "Navigate to the feature's main section",
      "Take a full page snapshot to understand the layout",
      "Identify the primary entity - what 'item' does this feature manage?",
      "Find ALL clickable elements: buttons, links, tabs, dropdowns, icons",
      "Map the navigation structure: tabs, sidebar items, breadcrumbs",
      "Click each tab/sub-section and document what appears",
      "Locate CRUD controls for the primary entity",
      "Check for action menus (three-dot menus, right-click menus)",
      "Document any modals, dialogs, slide-out panels",
      "Identify form fields and input types when forms appear",
      "Look for filters, search, sort, and export options",
      "Check for bulk action controls (checkboxes, select all)",
      "Note any settings or configuration options"
    ],
    "discovery_targets": [
      "Primary action buttons (create/add new item)",
      "List/table of items with row actions",
      "Detail view or edit forms",
      "Status indicators and state changes",
      "Filter and search controls",
      "Navigation tabs within the feature",
      "Settings or configuration sections",
      "Related features or cross-links"
    ]
  },
  "detected_integrations": {
    "has_workflows": true,
    "workflow_evidence": "Tickets TSSD-702, TSSD-3805, and TSSD-755 reveal leave management workflow constraints and approval flow design, including lack of flexible routing and handling of pending requests when reporting structures change.",
    "has_approval_flow": true,
    "approval_evidence": "Multiple tickets (TSSD-1432, TSSD-1406, TSSD-3805) discuss leave approval flow issues including custom role limitations, feature activation requirements, and rigid sequential approval workflows."
  },
  "workflow_exploration": {
    "enabled": true,
    "priority": "required",
    "evidence": "Tickets TSSD-702, TSSD-3805, and TSSD-755 reveal leave management workflow constraints and approval flow design, including lack of flexible routing and handling of pending requests when reporting structures change.",
    "check_instructions": [
      "Navigate to Automations in the left sidebar",
      "Click on Workflows",
      "Click + Create workflow (or similar create button)",
      "In trigger selection, search for this feature's name",
      "Check if this feature appears as a trigger source",
      "Document any trigger events found (e.g., 'item created', 'status changed')",
      "Check Actions section for actions related to this feature",
      "Screenshot available triggers and actions"
    ],
    "nav_path": "Automations → Workflows → + Create workflow"
  },
  "approval_flow_exploration": {
    "enabled": true,
    "priority": "required",
    "evidence": "Multiple tickets (TSSD-1432, TSSD-1406, TSSD-3805) discuss leave approval flow issues including custom role limitations, feature activation requirements, and rigid sequential approval workflows.",
    "check_instructions": [
      "Look for 'Approval' or 'Pending Approval' status in the feature",
      "Check if items have approval workflow indicators",
      "Look for 'Submit for Approval' buttons or actions",
      "Find approval settings in feature configuration",
      "Document the approval chain (who approves what)",
      "Test approval/rejection flow if test data available",
      "Check for approval history or audit trail",
      "Screenshot approval-related UI elements"
    ],
    "detection_signals": [
      "Status dropdown with 'Pending Approval' option",
      "Approve/Reject buttons",
      "Approval history section",
      "'Requires approval' toggle in settings",
      "Approver assignment fields"
    ]
  },
  "execution_order": [
    "1. EXPLORATION: Navigate to feature and discover all UI elements",
    "2. IDENTIFY ENTITY: Determine what the primary item/entity is",
    "3. CRUD TEST: Test create, read, update, delete for the primary entity",
    "4. WORKFLOW CHECK: Verify if feature has workflow triggers/actions",
    "5. APPROVAL FLOW: Test approval process if present",
    "6. WHAT_TO_DO: Execute specific validation tasks from payload",
    "7. DOCUMENTATION: Capture screenshots of key screens"
  ],
  "playwright_context": {
    "feature_metadata": {
      "name": "Leave Management",
      "slug": "leave-management",
      "category": "time",
      "version": "",
      "is_new": null
    },
    "detected_integrations": {
      "has_workflows": true,
      "workflow_evidence": "Tickets TSSD-702, TSSD-3805, and TSSD-755 reveal leave management workflow constraints and approval flow design, including lack of flexible routing and handling of pending requests when reporting structures change.",
      "has_approval_flow": true,
      "approval_evidence": "Multiple tickets (TSSD-1432, TSSD-1406, TSSD-3805) discuss leave approval flow issues including custom role limitations, feature activation requirements, and rigid sequential approval workflows."
    },
    "what_to_do": [
      {
        "task": "Configure and manage leave encashment and leave policies for end-of-service and payroll processing.",
        "steps": [
          "Access Payroll Settings and navigate to End of Service eligibility.",
          "Select salary components for leave encashment (Basic Only or Basic + Allowances).",
          "Choose calculation method (calendar days, working days, or custom days).",
          "Configure individual leave types for end-of-service calculations.",
          "Upload trade license for payroll processing if required.",
          "Submit leave requests and manage leave balances within allowed cycles."
        ],
        "expected_outcome": "Leave encashment and payroll processing are configured correctly, leave requests are submitted and managed within system constraints, and payroll is processed with accurate leave balances.",
        "source_articles": [
          "14243768433425",
          "14244169734033"
        ]
      }
    ],
    "what_to_watch_out_for": [
      {
        "issue": "Limitations in leave approval workflows and role configurations.",
        "limitation": "The system only supports predefined roles for leave approval and enforces a strict sequential approval flow without flexible routing or custom role support.",
        "workaround": "Use predefined system roles and linear approval sequences; custom role workflows are not supported.",
        "jira_reference": "TSSD-1432,TSSD-3805,TSSD-1406",
        "severity": "high"
      },
      {
        "issue": "Lack of comprehensive audit logs and leave request history visibility.",
        "limitation": "The platform lacks clear, user-friendly audit trails for leave request changes, deletions, and status modifications.",
        "workaround": "Manual backend log searches and database queries are required to verify leave request histories.",
        "jira_reference": "TSSD-4901,TSSD-2247,TSSD-4800,TSSD-4315",
        "severity": "medium"
      },
      {
        "issue": "Inability to process leave requests spanning multiple leave cycles.",
        "limitation": "Leave requests overlapping two leave cycles cause incorrect leave balance calculations and require manual intervention.",
        "workaround": "Split leave requests manually or avoid cross-cycle leave requests.",
        "jira_reference": "AV-755",
        "severity": "medium"
      },
      {
        "issue": "Automatic email notifications lack configurability.",
        "limitation": "Administrators cannot disable or configure automatic leave expiry and other notification emails.",
        "workaround": "No current workaround; notifications are sent automatically.",
        "jira_reference": "TSSD-1699,TSSD-3054",
        "severity": "high"
      },
      {
        "issue": "Attendance logging for half-day leave is not supported.",
        "limitation": "Employees cannot record attendance during half-day leaves, and HR cannot manage these entries.",
        "workaround": "Manual attendance adjustments outside the system may be required.",
        "jira_reference": "TSSD-4174",
        "severity": "high"
      },
      {
        "issue": "Restricted leave request modifications for historical leave cycles.",
        "limitation": "Users can only modify leave requests for current, last, and upcoming leave cycles.",
        "workaround": "Plan leave modifications within allowed cycles; historical changes require backend support.",
        "jira_reference": "AV-318",
        "severity": "low"
      }
    ],
    "consolidation_summary": {
      "jira_tickets_received": 32,
      "jira_tickets_consolidated": 6,
      "zendesk_articles_received": 6,
      "tasks_consolidated": 1
    }
  }
}