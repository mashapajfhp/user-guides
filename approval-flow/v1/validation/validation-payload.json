{
  "nextVersion": "v1",
  "feature_info": {
    "feature_name": "approval_flow",
    "feature_slug": "approval-flow",
    "next_version": "v1"
  },
  "primary_entity": {
    "discovery_instructions": [
      "Identify what the main item/entity is for this feature (e.g., ticket, workflow, employee, record)",
      "Look for list/table views - the rows represent the primary entity",
      "Check page headers and breadcrumbs for entity naming",
      "Note the singular and plural forms used in the UI"
    ],
    "crud_operations": {
      "create": {
        "action": "Create new item",
        "find_trigger": [
          "Look for buttons with: + Add, + Create, + New, plus icon",
          "Check top-right corner of the page",
          "Check for floating action buttons (FAB)",
          "Look in empty state messages for create prompts"
        ],
        "validation": "New item appears in list with unique identifier"
      },
      "read": {
        "action": "View item details",
        "find_trigger": [
          "Click on any row in a list/table",
          "Look for 'View' or eye icon buttons",
          "Check if rows are clickable (cursor changes)"
        ],
        "validation": "Detail panel, modal, or page opens showing full information"
      },
      "update": {
        "action": "Edit/modify item",
        "find_trigger": [
          "Look for Edit button, pencil icon",
          "Check for inline editing (click on field to edit)",
          "Look for status change dropdowns or buttons",
          "Check action menus (three-dot menu) for edit option"
        ],
        "validation": "Changes persist after save, reflected in list view"
      },
      "delete": {
        "action": "Delete/remove item",
        "find_trigger": [
          "Look for Delete button, trash icon",
          "Check action menus (three-dot menu) for delete option",
          "Look for bulk delete with checkboxes",
          "Some features use 'Archive' or 'Cancel' instead of delete"
        ],
        "validation": "Item removed from list or status changed to deleted/archived"
      }
    }
  },
  "exploration_phase": {
    "enabled": true,
    "run_before_what_to_do": true,
    "instructions": [
      "Navigate to the feature's main section",
      "Take a full page snapshot to understand the layout",
      "Identify the primary entity - what 'item' does this feature manage?",
      "Find ALL clickable elements: buttons, links, tabs, dropdowns, icons",
      "Map the navigation structure: tabs, sidebar items, breadcrumbs",
      "Click each tab/sub-section and document what appears",
      "Locate CRUD controls for the primary entity",
      "Check for action menus (three-dot menus, right-click menus)",
      "Document any modals, dialogs, slide-out panels",
      "Identify form fields and input types when forms appear",
      "Look for filters, search, sort, and export options",
      "Check for bulk action controls (checkboxes, select all)",
      "Note any settings or configuration options"
    ],
    "discovery_targets": [
      "Primary action buttons (create/add new item)",
      "List/table of items with row actions",
      "Detail view or edit forms",
      "Status indicators and state changes",
      "Filter and search controls",
      "Navigation tabs within the feature",
      "Settings or configuration sections",
      "Related features or cross-links"
    ]
  },
  "detected_integrations": {
    "has_workflows": true,
    "workflow_evidence": "Zendesk articles mention configuring approval steps, conditions, and roles in a sequence or parallel manner, indicating workflow automation. Jira tickets highlight limitations in sequential notifications and custom workflow configurations.",
    "has_approval_flow": true,
    "approval_evidence": "Multiple Zendesk articles describe setting up multi-level approval flows with roles such as Line Manager, Super Admin, and custom roles. Jira tickets discuss approval chains, manager approvals, rejection handling, and multi-step authorization processes."
  },
  "workflow_exploration": {
    "enabled": true,
    "priority": "required",
    "evidence": "Zendesk articles mention configuring approval steps, conditions, and roles in a sequence or parallel manner, indicating workflow automation. Jira tickets highlight limitations in sequential notifications and custom workflow configurations.",
    "check_instructions": [
      "Navigate to Automations in the left sidebar",
      "Click on Workflows",
      "Click + Create workflow (or similar create button)",
      "In trigger selection, search for this feature's name",
      "Check if this feature appears as a trigger source",
      "Document any trigger events found (e.g., 'item created', 'status changed')",
      "Check Actions section for actions related to this feature",
      "Screenshot available triggers and actions"
    ],
    "nav_path": "Automations → Workflows → + Create workflow"
  },
  "approval_flow_exploration": {
    "enabled": true,
    "priority": "required",
    "evidence": "Multiple Zendesk articles describe setting up multi-level approval flows with roles such as Line Manager, Super Admin, and custom roles. Jira tickets discuss approval chains, manager approvals, rejection handling, and multi-step authorization processes.",
    "check_instructions": [
      "Look for 'Approval' or 'Pending Approval' status in the feature",
      "Check if items have approval workflow indicators",
      "Look for 'Submit for Approval' buttons or actions",
      "Find approval settings in feature configuration",
      "Document the approval chain (who approves what)",
      "Test approval/rejection flow if test data available",
      "Check for approval history or audit trail",
      "Screenshot approval-related UI elements"
    ],
    "detection_signals": [
      "Status dropdown with 'Pending Approval' option",
      "Approve/Reject buttons",
      "Approval history section",
      "'Requires approval' toggle in settings",
      "Approver assignment fields"
    ]
  },
  "execution_order": [
    "1. EXPLORATION: Navigate to feature and discover all UI elements",
    "2. IDENTIFY ENTITY: Determine what the primary item/entity is",
    "3. CRUD TEST: Test create, read, update, delete for the primary entity",
    "4. WORKFLOW CHECK: Verify if feature has workflow triggers/actions",
    "5. APPROVAL FLOW: Test approval process if present",
    "6. WHAT_TO_DO: Execute specific validation tasks from payload",
    "7. DOCUMENTATION: Capture screenshots of key screens"
  ],
  "playwright_context": {
    "feature_metadata": {
      "name": "approval_flow",
      "slug": "approval-flow",
      "category": "automations",
      "version": "",
      "is_new": null
    },
    "detected_integrations": {
      "has_workflows": true,
      "workflow_evidence": "Zendesk articles mention configuring approval steps, conditions, and roles in a sequence or parallel manner, indicating workflow automation. Jira tickets highlight limitations in sequential notifications and custom workflow configurations.",
      "has_approval_flow": true,
      "approval_evidence": "Multiple Zendesk articles describe setting up multi-level approval flows with roles such as Line Manager, Super Admin, and custom roles. Jira tickets discuss approval chains, manager approvals, rejection handling, and multi-step authorization processes."
    },
    "what_to_do": [
      {
        "task": "Configure and manage approval flows for various modules such as Leave, Leave Encashment, Payroll Transactions, Expenses, and Air Ticket approvals.",
        "steps": [
          "Navigate to Settings → Approval flows.",
          "Select the relevant module tab (e.g., Leaves, Leave Encashment, Payroll Transaction Request, Expenses).",
          "Add approval steps and define the sequence or parallel conditions (AND/OR/Step conditions).",
          "Assign approver roles such as Line Manager, Super Admin, or custom roles.",
          "Configure approval conditions and backup approvers if needed.",
          "Save the approval flow configuration.",
          "For Payroll transactions, submit transactions, review details, add remarks, and approve or reject.",
          "For Expenses, submit requests and route through configured approvers."
        ],
        "expected_outcome": "Approval flows are configured with multiple levels and roles, enabling sequential or parallel approvals. Transactions and requests are routed correctly to approvers, with notifications sent and statuses updated accordingly.",
        "source_articles": [
          "35722750231441",
          "22276406326161",
          "19615093272849",
          "19674849725329",
          "14309308626449"
        ]
      }
    ],
    "what_to_watch_out_for": [
      {
        "issue": "Limited flexibility in configuring approval workflows with custom roles and OR conditions.",
        "limitation": "The platform does not support flexible OR logic between approval roles, forcing sequential approvals and limiting complex workflows.",
        "workaround": "Use predefined roles and sequential approval steps; custom roles are limited and require backend intervention.",
        "jira_reference": "TSSD-2893,TSSD-1432,TSSD-1457",
        "severity": "high"
      },
      {
        "issue": "Inconsistent notification and approval handling in leave and expense approval workflows.",
        "limitation": "Notifications are not always sent correctly, and mobile app has UI issues affecting approval actions.",
        "workaround": "Users may need to manually check pending approvals; workaround for mobile app error is to cancel and retry.",
        "jira_reference": "TSSD-4787,TSSD-2793,TSSD-2978",
        "severity": "medium"
      },
      {
        "issue": "Lack of self-service role creation and management for approval workflows.",
        "limitation": "Administrators cannot create or duplicate custom roles independently; requires developer support.",
        "workaround": "Request backend team assistance for role creation and mapping.",
        "jira_reference": "TSSD-1431,TSSD-4397,TSSD-4337",
        "severity": "medium"
      },
      {
        "issue": "Approval flow does not support progressive hierarchical notifications matching exact approval sequences.",
        "limitation": "Notifications are sent simultaneously to all approvers regardless of approval order.",
        "workaround": "Approvers must coordinate manually; no automated gating of notifications.",
        "jira_reference": "TSSD-4467",
        "severity": "high"
      },
      {
        "issue": "System limitations in handling approval workflows when approvers are offboarded or organizational structures change.",
        "limitation": "Approval chains do not dynamically update; pending requests may require manual intervention.",
        "workaround": "Manual reassignment of approval roles and requests.",
        "jira_reference": "TSSD-2901,AV-702",
        "severity": "medium"
      }
    ],
    "consolidation_summary": {
      "jira_tickets_received": 30,
      "jira_tickets_consolidated": 5,
      "zendesk_articles_received": 5,
      "tasks_consolidated": 1
    }
  }
}