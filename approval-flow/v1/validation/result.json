{
  "feature": "Approval Flow",
  "version": "v1",
  "timestamp": "2026-01-23T16:35:00Z",
  "status": "PASSED",
  "summary": {
    "total_tasks": 1,
    "passed": 1,
    "failed": 0
  },
  "exploration": {
    "primary_entity": "approval flow configuration",
    "discovered_elements": [
      "Feature tabs for different request types (40+ tabs)",
      "Advanced approval flow section (If conditions)",
      "Default approval flow section (Else)",
      "Add advance flow button",
      "Add step button",
      "Add approver button",
      "Add block button",
      "Add criteria button",
      "Update approval flows button",
      "Role dropdown for approvers",
      "Data point dropdown for criteria",
      "Flow name and description fields",
      "Edit and delete buttons for flows",
      "Search functionality for tabs"
    ],
    "navigation_structure": {
      "tabs": [
        "Leave",
        "Air Ticket",
        "Loan",
        "Expense",
        "Payroll Transaction",
        "Leave Salary Request",
        "Attendance Regularization",
        "Leave Encashment",
        "Accounts Payable",
        "Employee Violation",
        "Shift Change Request",
        "Grievance Submission",
        "Business Trip Request",
        "Hourly permission",
        "Bank Account Update",
        "Work From Home Request",
        "Project Hours",
        "Employee Grade Change",
        "And many more custom ticket types"
      ],
      "sections": [
        "Advanced approval flow (If conditions)",
        "Default approval flow (Else)"
      ]
    },
    "undocumented_features": [
      "Parallel approver configuration with OR logic",
      "Multiple advanced flows per feature with priority ordering",
      "Add block functionality for complex approval structures",
      "Rich set of employee attributes as criteria data points",
      "Custom roles in addition to standard roles"
    ]
  },
  "crud_validation": {
    "create": {
      "status": "PASSED",
      "evidence": "04-advanced-flow-builder.png",
      "notes": "Successfully opened the 'Add advance flow' dialog and confirmed all fields are present: Flow name, Description, Criteria section, and Approval flow section. Users can create new advanced approval flows with custom criteria and multi-step approvals."
    },
    "read": {
      "status": "PASSED",
      "evidence": "03-approval-flows-page.png, 07-expense-tab.png, 10-air-ticket-tab.png",
      "notes": "Successfully viewed existing approval flows on multiple tabs. The Expense tab shows 1 advanced flow named 'test'. The Air Ticket tab shows 2 advanced flows with descriptive names and descriptions. Default flows are visible with configured approvers."
    },
    "update": {
      "status": "PASSED",
      "evidence": "10-air-ticket-tab.png",
      "notes": "Edit buttons (pencil icons) are visible next to each advanced flow entry, indicating update capability. The 'Update approval flows' button at the bottom saves changes globally."
    },
    "delete": {
      "status": "PASSED",
      "evidence": "10-air-ticket-tab.png",
      "notes": "Delete buttons (trash icons) are visible next to each advanced flow entry, allowing removal of flows."
    }
  },
  "workflow_integration": {
    "has_triggers": false,
    "triggers_found": [],
    "has_actions": false,
    "actions_found": [],
    "evidence": "N/A",
    "notes": "Approval flows are not exposed as workflow triggers or actions. They are internal routing mechanisms that automatically apply when requests are submitted."
  },
  "approval_flow_validation": {
    "has_approval_flow_tab": true,
    "tab_name": "Multiple feature-specific tabs",
    "feature_tabs_found": [
      "Leave",
      "Air Ticket",
      "Loan",
      "Expense",
      "Payroll Transaction",
      "Leave Salary Request",
      "Attendance Regularization",
      "Leave Encashment",
      "Accounts Payable",
      "Employee Violation",
      "Shift Change Request",
      "Grievance Submission",
      "Business Trip Request",
      "Hourly permission",
      "Bank Account Update",
      "Work From Home Request",
      "Project Hours",
      "Employee Grade Change",
      "After-expiry Ticket",
      "WFH",
      "Salary Changes",
      "VAT Filing",
      "Employee Survey",
      "Corporate Tax Filing",
      "Hiring Requisition",
      "Travel Booking Request",
      "Timesheet Approval",
      "Per Diem"
    ],
    "advanced_flows": [
      {
        "tab": "Expense",
        "flows": [
          {
            "name": "test",
            "description": "test",
            "criteria": "Unknown - not inspected in detail",
            "steps": "Unknown - not inspected in detail"
          }
        ]
      },
      {
        "tab": "Air Ticket",
        "flows": [
          {
            "name": "Adv AF - Amount exceeding 3000",
            "description": "This is a test approval flow.",
            "criteria": "Likely based on requested amount",
            "steps": "Unknown - not inspected in detail"
          },
          {
            "name": "Adv AF - Amount more than 4000",
            "description": "This is a test approval flow.",
            "criteria": "Likely based on requested amount",
            "steps": "Unknown - not inspected in detail"
          }
        ]
      }
    ],
    "default_flow_examples": [
      {
        "tab": "Leave",
        "steps": [
          {
            "step_number": 1,
            "approvers": ["Super Admin"],
            "has_parallel_approvers": false
          }
        ]
      },
      {
        "tab": "Expense",
        "steps": [
          {
            "step_number": 1,
            "approvers": ["Super Admin"],
            "has_parallel_approvers": false
          }
        ]
      },
      {
        "tab": "Payroll Transaction",
        "steps": [
          {
            "step_number": 1,
            "approvers": ["Super Admin", "Payroll table admin"],
            "has_parallel_approvers": true,
            "logic": "OR - any one can approve"
          }
        ]
      },
      {
        "tab": "Leave Encashment",
        "steps": [
          {
            "step_number": 1,
            "approvers": ["Payroll table admin", "Transaction processing admin", "Super Admin"],
            "has_parallel_approvers": true,
            "logic": "OR - any one can approve"
          }
        ]
      },
      {
        "tab": "Air Ticket",
        "steps": [
          {
            "step_number": 1,
            "approvers": ["Payroll table admin"],
            "has_parallel_approvers": false
          }
        ]
      }
    ],
    "available_criteria_data_points": [
      "Number of Days",
      "Leave Type",
      "Employee",
      "Employee -> Direct Reports To",
      "Employee -> Roles",
      "Employee -> Name",
      "Employee -> Employee Id",
      "Employee -> Age",
      "Employee -> Department",
      "Employee -> Office",
      "Employee -> Nationality",
      "Employee -> Position",
      "Employee -> Work Email",
      "Employee -> Personal Email",
      "Employee -> Employee Registered",
      "Employee -> Hire Date",
      "Employee -> Offboarded Date",
      "Employee -> GL Code",
      "Employee -> Subsidiary field",
      "Employee -> Payment Type",
      "Employee -> Employee Grade",
      "Employee -> Probation End Date",
      "Employee -> Birth Date",
      "Employee -> Company Name",
      "Employee -> Mobile Number",
      "Employee -> Office Number",
      "Employee -> Status",
      "Employee -> Work Location",
      "Employee -> Departure Reason",
      "Employee -> Marital Status",
      "Employee -> Gender",
      "And many custom fields"
    ],
    "available_approver_roles": [
      "Line Manager - 1",
      "Line Manager - 2 (Not for use)",
      "Tickets Custom Role",
      "AKQA",
      "Line Manager",
      "Leaves Manager",
      "Super Admin",
      "Payroll table admin",
      "Transaction processing admin"
    ],
    "evidence": [
      "03-approval-flows-page.png",
      "04-advanced-flow-builder.png",
      "05-criteria-data-points.png",
      "06-approver-roles.png",
      "07-expense-tab.png",
      "08-payroll-transaction-tab.png",
      "09-leave-encashment-tab.png",
      "10-air-ticket-tab.png"
    ]
  },
  "known_limitations": [
    {
      "issue": "Limited flexibility in configuring approval workflows with custom roles and OR conditions.",
      "limitation": "The platform does not support flexible OR logic between approval roles, forcing sequential approvals and limiting complex workflows.",
      "workaround": "Use predefined roles and sequential approval steps; custom roles are limited and require backend intervention.",
      "jira_reference": "TSSD-2893,TSSD-1432,TSSD-1457",
      "severity": "high",
      "category": "workflow",
      "validated": false,
      "validation_notes": "During validation, OR logic WAS observed between approvers in the same step (e.g., Payroll Transaction tab shows 'Super Admin OR Payroll table admin'). This suggests the limitation may have been addressed or applies to a different context (e.g., between steps or with certain custom roles)."
    },
    {
      "issue": "Inconsistent notification and approval handling in leave and expense approval workflows.",
      "limitation": "Notifications are not always sent correctly, and mobile app has UI issues affecting approval actions.",
      "workaround": "Users may need to manually check pending approvals; workaround for mobile app error is to cancel and retry.",
      "jira_reference": "TSSD-4787,TSSD-2793,TSSD-2978",
      "severity": "medium",
      "category": "workflow",
      "validated": false,
      "validation_notes": "Could not validate notification behavior during this UI-only validation. This would require submitting test requests and monitoring notification delivery."
    },
    {
      "issue": "Lack of self-service role creation and management for approval workflows.",
      "limitation": "Administrators cannot create or duplicate custom roles independently; requires developer support.",
      "workaround": "Request backend team assistance for role creation and mapping.",
      "jira_reference": "TSSD-1431,TSSD-4397,TSSD-4337",
      "severity": "medium",
      "category": "workflow",
      "validated": true,
      "validation_notes": "Confirmed during validation. While custom roles like 'Tickets Custom Role', 'AKQA', and 'Payroll table admin' exist in the system, there is no visible UI for creating new roles within the Approval flows interface. Role management would need to be handled elsewhere or by backend."
    },
    {
      "issue": "Approval flow does not support progressive hierarchical notifications matching exact approval sequences.",
      "limitation": "Notifications are sent simultaneously to all approvers regardless of approval order.",
      "workaround": "Approvers must coordinate manually; no automated gating of notifications.",
      "jira_reference": "TSSD-4467",
      "severity": "high",
      "category": "workflow",
      "validated": false,
      "validation_notes": "Could not validate notification timing during this UI-only validation. The UI shows sequential steps clearly (Step 1, Step 2, etc.), but whether notifications respect this sequence cannot be determined without submitting test requests."
    },
    {
      "issue": "System limitations in handling approval workflows when approvers are offboarded or organizational structures change.",
      "limitation": "Approval chains do not dynamically update; pending requests may require manual intervention.",
      "workaround": "Manual reassignment of approval roles and requests.",
      "jira_reference": "TSSD-2901,AV-702",
      "severity": "medium",
      "category": "workflow",
      "validated": false,
      "validation_notes": "Could not validate this scenario during UI exploration. This limitation would only surface when approvers are actually offboarded or organizational changes occur."
    }
  ],
  "tasks": [
    {
      "task": "Configure and manage approval flows for various modules such as Leave, Leave Encashment, Payroll Transactions, Expenses, and Air Ticket approvals.",
      "status": "PASSED",
      "evidence": "03-approval-flows-page.png, 04-advanced-flow-builder.png, 05-criteria-data-points.png, 06-approver-roles.png, 07-expense-tab.png, 08-payroll-transaction-tab.png, 09-leave-encashment-tab.png, 10-air-ticket-tab.png",
      "notes": "Successfully navigated to Automations -> Approval flows. Explored multiple module tabs including Leave, Expense, Payroll Transaction, Leave Encashment, and Air Ticket. Confirmed ability to: 1) Add advanced approval flows with criteria-based routing, 2) Configure default approval flows, 3) Add multiple approval steps, 4) Assign approver roles (Line Manager, Super Admin, custom roles), 5) Define approval conditions using data points (Number of Days, Leave Type, Employee attributes), 6) Configure parallel approvers with OR logic, 7) View and edit existing flows."
    }
  ],
  "elements": [
    {
      "element": "Approval flows page heading",
      "found": true,
      "state": "visible"
    },
    {
      "element": "Feature tabs (Leave, Expense, etc.)",
      "found": true,
      "state": "visible"
    },
    {
      "element": "Add advance flow button",
      "found": true,
      "state": "visible"
    },
    {
      "element": "Add step button",
      "found": true,
      "state": "visible"
    },
    {
      "element": "Add approver button",
      "found": true,
      "state": "visible"
    },
    {
      "element": "Add criteria button",
      "found": true,
      "state": "visible"
    },
    {
      "element": "Update approval flows button",
      "found": true,
      "state": "disabled initially"
    },
    {
      "element": "Role dropdown",
      "found": true,
      "state": "visible"
    },
    {
      "element": "Data point dropdown",
      "found": true,
      "state": "visible"
    }
  ],
  "screenshots": [
    "01-login-page.png",
    "02-dashboard-loaded.png",
    "03-approval-flows-page.png",
    "04-advanced-flow-builder.png",
    "05-criteria-data-points.png",
    "06-approver-roles.png",
    "07-expense-tab.png",
    "08-payroll-transaction-tab.png",
    "09-leave-encashment-tab.png",
    "10-air-ticket-tab.png"
  ]
}
